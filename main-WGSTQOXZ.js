var UM=Object.defineProperty,C6=Object.defineProperties;var S6=Object.getOwnPropertyDescriptors;var Vu=Object.getOwnPropertySymbols;var qM=Object.prototype.hasOwnProperty,$M=Object.prototype.propertyIsEnumerable;var HM=(e,t,n)=>t in e?UM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ee=(e,t)=>{for(var n in t||={})qM.call(t,n)&&HM(e,n,t[n]);if(Vu)for(var n of Vu(t))$M.call(t,n)&&HM(e,n,t[n]);return e},ge=(e,t)=>C6(e,S6(t));var GM=(e,t)=>{var n={};for(var i in e)qM.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&Vu)for(var i of Vu(e))t.indexOf(i)<0&&$M.call(e,i)&&(n[i]=e[i]);return n};var Un=(e,t)=>{for(var n in t)UM(e,n,{get:t[n],enumerable:!0})};var qn=(e,t,n)=>new Promise((i,r)=>{var o=c=>{try{s(n.next(c))}catch(l){r(l)}},a=c=>{try{s(n.throw(c))}catch(l){r(l)}},s=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,a);s((n=n.apply(e,t)).next())});var em;function tm(){return em}function Wr(e){let t=em;return em=e,t}var _6=Symbol("NotFound"),Bu=class extends Error{name="\u0275NotFound";constructor(t){super(t)}};function Ls(e){return e===_6||e?.name==="\u0275NotFound"}function qu(e,t){return Object.is(e,t)}var cn=null,zu=!1,nm=1,I6=null,Ln=Symbol("SIGNAL");function He(e){let t=cn;return cn=e,t}function $u(){return cn}var ga={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Os(e){if(zu)throw new Error("");if(cn===null)return;cn.consumerOnSignalRead(e);let t=cn.nextProducerIndex++;if(Yu(cn),t<cn.producerNode.length&&cn.producerNode[t]!==e&&xl(cn)){let n=cn.producerNode[t];Zu(n,cn.producerIndexOfThis[t])}cn.producerNode[t]!==e&&(cn.producerNode[t]=e,cn.producerIndexOfThis[t]=xl(cn)?ZM(e,cn,t):0),cn.producerLastReadVersion[t]=e.version}function WM(){nm++}function Gu(e){if(!(xl(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===nm)){if(!e.producerMustRecompute(e)&&!wl(e)){Uu(e);return}e.producerRecomputeValue(e),Uu(e)}}function im(e){if(e.liveConsumerNode===void 0)return;let t=zu;zu=!0;try{for(let n of e.liveConsumerNode)n.dirty||E6(n)}finally{zu=t}}function rm(){return cn?.consumerAllowSignalWrites!==!1}function E6(e){e.dirty=!0,im(e),e.consumerMarkedDirty?.(e)}function Uu(e){e.dirty=!1,e.lastCleanEpoch=nm}function ya(e){return e&&(e.nextProducerIndex=0),He(e)}function Rs(e,t){if(He(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(xl(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Zu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function wl(e){Yu(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(Gu(n),i!==n.version))return!0}return!1}function Wu(e){if(Yu(e),xl(e))for(let t=0;t<e.producerNode.length;t++)Zu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function ZM(e,t,n){if(YM(e),e.liveConsumerNode.length===0&&XM(e))for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=ZM(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function Zu(e,t){if(YM(e),e.liveConsumerNode.length===1&&XM(e))for(let i=0;i<e.producerNode.length;i++)Zu(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];Yu(r),r.producerIndexOfThis[i]=t}}function xl(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Yu(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function YM(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function XM(e){return e.producerNode!==void 0}function Xu(e){I6?.(e)}function Ju(e,t){let n=Object.create(D6);n.computation=e,t!==void 0&&(n.equal=t);let i=()=>{if(Gu(n),Os(n),n.value===Ml)throw n.error;return n.value};return i[Ln]=n,Xu(n),i}var ju=Symbol("UNSET"),Hu=Symbol("COMPUTING"),Ml=Symbol("ERRORED"),D6=ge(ee({},ga),{value:ju,dirty:!0,error:null,equal:qu,kind:"computed",producerMustRecompute(e){return e.value===ju||e.value===Hu},producerRecomputeValue(e){if(e.value===Hu)throw new Error("");let t=e.value;e.value=Hu;let n=ya(e),i,r=!1;try{i=e.computation(),He(null),r=t!==ju&&t!==Ml&&i!==Ml&&e.equal(t,i)}catch(o){i=Ml,e.error=o}finally{Rs(e,n)}if(r){e.value=t;return}e.value=i,e.version++}});function T6(){throw new Error}var JM=T6;function KM(e){JM(e)}function om(e){JM=e}var P6=null;function am(e,t){let n=Object.create(Ku);n.value=e,t!==void 0&&(n.equal=t);let i=()=>QM(n);return i[Ln]=n,Xu(n),[i,a=>Ns(n,a),a=>sm(n,a)]}function QM(e){return Os(e),e.value}function Ns(e,t){rm()||KM(e),e.equal(e.value,t)||(e.value=t,A6(e))}function sm(e,t){rm()||KM(e),Ns(e,t(e.value))}var Ku=ge(ee({},ga),{equal:qu,value:void 0,kind:"signal"});function A6(e){e.version++,WM(),im(e),P6?.(e)}function Ue(e){return typeof e=="function"}function Fs(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qu=Fs(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function va(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Bt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Ue(i))try{i()}catch(o){t=o instanceof Qu?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{ex(o)}catch(a){t=t??[],a instanceof Qu?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Qu(t)}}add(t){var n;if(t&&t!==this)if(this.closed)ex(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&va(n,t)}remove(t){let{_finalizers:n}=this;n&&va(n,t),t instanceof e&&t._removeParent(this)}};Bt.EMPTY=(()=>{let e=new Bt;return e.closed=!0,e})();var cm=Bt.EMPTY;function eh(e){return e instanceof Bt||e&&"closed"in e&&Ue(e.remove)&&Ue(e.add)&&Ue(e.unsubscribe)}function ex(e){Ue(e)?e():e.unsubscribe()}var Xi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Vs={setTimeout(e,t,...n){let{delegate:i}=Vs;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Vs;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function th(e){Vs.setTimeout(()=>{let{onUnhandledError:t}=Xi;if(t)t(e);else throw e})}function ka(){}var tx=lm("C",void 0,void 0);function nx(e){return lm("E",void 0,e)}function ix(e){return lm("N",e,void 0)}function lm(e,t,n){return{kind:e,value:t,error:n}}var Ma=null;function Bs(e){if(Xi.useDeprecatedSynchronousErrorHandling){let t=!Ma;if(t&&(Ma={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=Ma;if(Ma=null,n)throw i}}else e()}function rx(e){Xi.useDeprecatedSynchronousErrorHandling&&Ma&&(Ma.errorThrown=!0,Ma.error=e)}var xa=class extends Bt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,eh(t)&&t.add(this)):this.destination=R6}static create(t,n,i){return new zs(t,n,i)}next(t){this.isStopped?um(ix(t),this):this._next(t)}error(t){this.isStopped?um(nx(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?um(tx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},L6=Function.prototype.bind;function dm(e,t){return L6.call(e,t)}var hm=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){nh(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){nh(i)}else nh(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){nh(n)}}},zs=class extends xa{constructor(t,n,i){super();let r;if(Ue(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Xi.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&dm(t.next,o),error:t.error&&dm(t.error,o),complete:t.complete&&dm(t.complete,o)}):r=t}this.destination=new hm(r)}};function nh(e){Xi.useDeprecatedSynchronousErrorHandling?rx(e):th(e)}function O6(e){throw e}function um(e,t){let{onStoppedNotification:n}=Xi;n&&Vs.setTimeout(()=>n(e,t))}var R6={closed:!0,next:ka,error:O6,complete:ka};var js=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wi(e){return e}function pm(...e){return fm(e)}function fm(e){return e.length===0?wi:e.length===1?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}var qe=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=F6(n)?n:new zs(n,i,r);return Bs(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=ox(i),new i((r,o)=>{let a=new zs({next:s=>{try{n(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[js](){return this}pipe(...n){return fm(n)(this)}toPromise(n){return n=ox(n),new n((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return e.create=t=>new e(t),e})();function ox(e){var t;return(t=e??Xi.Promise)!==null&&t!==void 0?t:Promise}function N6(e){return e&&Ue(e.next)&&Ue(e.error)&&Ue(e.complete)}function F6(e){return e&&e instanceof xa||N6(e)&&eh(e)}function mm(e){return Ue(e?.lift)}function Qe(e){return t=>{if(mm(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xe(e,t,n,i,r){return new gm(e,t,n,i,r)}var gm=class extends xa{constructor(t,n,i,r,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(c){t.error(c)}}:super._next,this._error=r?function(s){try{r(s)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){t.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Hs(){return Qe((e,t)=>{let n=null;e._refCount++;let i=Xe(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Us=class extends qe{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mm(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Bt;let n=this.getSubject();t.add(this.source.subscribe(Xe(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Bt.EMPTY)}return t}refCount(){return Hs()(this)}};var ax=Fs(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qt=(()=>{class e extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new ih(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new ax}next(n){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?cm:(this.currentObservers=null,o.push(n),new Bt(()=>{this.currentObservers=null,va(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new qe;return n.source=this,n}}return e.create=(t,n)=>new ih(t,n),e})(),ih=class extends Qt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:cm}};var Dt=class extends Qt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var ym={now(){return(ym.delegate||Date).now()},delegate:void 0};var rh=class extends Bt{constructor(t,n){super()}schedule(t,n=0){return this}};var bl={setInterval(e,t,...n){let{delegate:i}=bl;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=bl;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var oh=class extends rh{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return bl.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&bl.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,va(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var qs=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};qs.now=ym.now;var ah=class extends qs{constructor(t,n=qs.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var vm=new ah(oh),sx=vm;var ai=new qe(e=>e.complete());function sh(e){return e&&Ue(e.schedule)}function cx(e){return e[e.length-1]}function ch(e){return Ue(cx(e))?e.pop():void 0}function Io(e){return sh(cx(e))?e.pop():void 0}function dx(e,t,n,i){function r(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(i.next(u))}catch(d){a(d)}}function c(u){try{l(i.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):r(u.value).then(s,c)}l((i=i.apply(e,t||[])).next())})}function lx(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wa(e){return this instanceof wa?(this.v=e,this):new wa(e)}function ux(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(p){return function(f){return Promise.resolve(f).then(p,d)}}function s(p,f){i[p]&&(r[p]=function(g){return new Promise(function(b,x){o.push([p,g,b,x])>1||c(p,g)})},f&&(r[p]=f(r[p])))}function c(p,f){try{l(i[p](f))}catch(g){h(o[0][3],g)}}function l(p){p.value instanceof wa?Promise.resolve(p.value.v).then(u,d):h(o[0][2],p)}function u(p){c("next",p)}function d(p){c("throw",p)}function h(p,f){p(f),o.shift(),o.length&&c(o[0][0],o[0][1])}}function hx(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof lx=="function"?lx(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),r(s,c,a.done,a.value)})}}function r(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}var lh=e=>e&&typeof e.length=="number"&&typeof e!="function";function dh(e){return Ue(e?.then)}function uh(e){return Ue(e[js])}function hh(e){return Symbol.asyncIterator&&Ue(e?.[Symbol.asyncIterator])}function ph(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function V6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fh=V6();function mh(e){return Ue(e?.[fh])}function gh(e){return ux(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:r}=yield wa(n.read());if(r)return yield wa(void 0);yield yield wa(i)}}finally{n.releaseLock()}})}function yh(e){return Ue(e?.getReader)}function zt(e){if(e instanceof qe)return e;if(e!=null){if(uh(e))return B6(e);if(lh(e))return z6(e);if(dh(e))return j6(e);if(hh(e))return px(e);if(mh(e))return H6(e);if(yh(e))return U6(e)}throw ph(e)}function B6(e){return new qe(t=>{let n=e[js]();if(Ue(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function z6(e){return new qe(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function j6(e){return new qe(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,th)})}function H6(e){return new qe(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function px(e){return new qe(t=>{q6(e,t).catch(n=>t.error(n))})}function U6(e){return px(gh(e))}function q6(e,t){var n,i,r,o;return dx(this,void 0,void 0,function*(){try{for(n=hx(e);i=yield n.next(),!i.done;){let a=i.value;if(t.next(a),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})}function si(e,t,n,i=0,r=!1){let o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function vh(e,t=0){return Qe((n,i)=>{n.subscribe(Xe(i,r=>si(i,e,()=>i.next(r),t),()=>si(i,e,()=>i.complete(),t),r=>si(i,e,()=>i.error(r),t)))})}function kh(e,t=0){return Qe((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function fx(e,t){return zt(e).pipe(kh(t),vh(t))}function mx(e,t){return zt(e).pipe(kh(t),vh(t))}function gx(e,t){return new qe(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function yx(e,t){return new qe(n=>{let i;return si(n,t,()=>{i=e[fh](),si(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),()=>Ue(i?.return)&&i.return()})}function Mh(e,t){if(!e)throw new Error("Iterable cannot be null");return new qe(n=>{si(n,t,()=>{let i=e[Symbol.asyncIterator]();si(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function vx(e,t){return Mh(gh(e),t)}function kx(e,t){if(e!=null){if(uh(e))return fx(e,t);if(lh(e))return gx(e,t);if(dh(e))return mx(e,t);if(hh(e))return Mh(e,t);if(mh(e))return yx(e,t);if(yh(e))return vx(e,t)}throw ph(e)}function Et(e,t){return t?kx(e,t):zt(e)}function we(...e){let t=Io(e);return Et(e,t)}function $s(e,t){let n=Ue(e)?e:()=>e,i=r=>r.error(n());return new qe(t?r=>t.schedule(i,0,r):i)}function km(e){return!!e&&(e instanceof qe||Ue(e.lift)&&Ue(e.subscribe))}var Zr=Fs(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Mx(e){return e instanceof Date&&!isNaN(e)}function Ae(e,t){return Qe((n,i)=>{let r=0;n.subscribe(Xe(i,o=>{i.next(e.call(t,o,r++))}))})}var{isArray:$6}=Array;function G6(e,t){return $6(t)?e(...t):e(t)}function xh(e){return Ae(t=>G6(e,t))}var{isArray:W6}=Array,{getPrototypeOf:Z6,prototype:Y6,keys:X6}=Object;function wh(e){if(e.length===1){let t=e[0];if(W6(t))return{args:t,keys:null};if(J6(t)){let n=X6(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function J6(e){return e&&typeof e=="object"&&Z6(e)===Y6}function bh(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function Cl(...e){let t=Io(e),n=ch(e),{args:i,keys:r}=wh(e);if(i.length===0)return Et([],t);let o=new qe(K6(i,t,r?a=>bh(r,a):wi));return n?o.pipe(xh(n)):o}function K6(e,t,n=wi){return i=>{xx(t,()=>{let{length:r}=e,o=new Array(r),a=r,s=r;for(let c=0;c<r;c++)xx(t,()=>{let l=Et(e[c],t),u=!1;l.subscribe(Xe(i,d=>{o[c]=d,u||(u=!0,s--),s||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function xx(e,t,n){e?si(n,e,t):t()}function wx(e,t,n,i,r,o,a,s){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},p=g=>l<i?f(g):c.push(g),f=g=>{o&&t.next(g),l++;let b=!1;zt(n(g,u++)).subscribe(Xe(t,x=>{r?.(x),o?p(x):t.next(x)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<i;){let x=c.shift();a?si(t,a,()=>f(x)):f(x)}h()}catch(x){t.error(x)}}))};return e.subscribe(Xe(t,p,()=>{d=!0,h()})),()=>{s?.()}}function Ft(e,t,n=1/0){return Ue(t)?Ft((i,r)=>Ae((o,a)=>t(i,o,r,a))(zt(e(i,r))),n):(typeof t=="number"&&(n=t),Qe((i,r)=>wx(i,r,e,n)))}function Gs(e=1/0){return Ft(wi,e)}function bx(){return Gs(1)}function Eo(...e){return bx()(Et(e,Io(e)))}function Sl(e){return new qe(t=>{zt(e()).subscribe(t)})}function Mm(...e){let t=ch(e),{args:n,keys:i}=wh(e),r=new qe(o=>{let{length:a}=n;if(!a){o.complete();return}let s=new Array(a),c=a,l=a;for(let u=0;u<a;u++){let d=!1;zt(n[u]).subscribe(Xe(o,h=>{d||(d=!0,l--),s[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?bh(i,s):s),o.complete())}))}});return t?r.pipe(xh(t)):r}function Cx(e=0,t,n=sx){let i=-1;return t!=null&&(sh(t)?n=t:i=t),new qe(r=>{let o=Mx(e)?+e-n.now():e;o<0&&(o=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function fn(e,t){return Qe((n,i)=>{let r=0;n.subscribe(Xe(i,o=>e.call(t,o,r++)&&i.next(o)))})}function bi(e){return Qe((t,n)=>{let i=null,r=!1,o;i=t.subscribe(Xe(n,void 0,void 0,a=>{o=zt(e(a,bi(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function Sx(e,t,n,i,r){return(o,a)=>{let s=n,c=t,l=0;o.subscribe(Xe(a,u=>{let d=l++;c=s?e(c,u,d):(s=!0,u),i&&a.next(c)},r&&(()=>{s&&a.next(c),a.complete()})))}}function Mr(e,t){return Ue(t)?Ft(e,t,1):Ft(e,1)}function Do(e){return Qe((t,n)=>{let i=!1;t.subscribe(Xe(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function Fi(e){return e<=0?()=>ai:Qe((t,n)=>{let i=0;t.subscribe(Xe(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function _x(){return Qe((e,t)=>{e.subscribe(Xe(t,ka))})}function Ix(e){return Ae(()=>e)}function xm(e,t){return t?n=>Eo(t.pipe(Fi(1),_x()),n.pipe(xm(e))):Ft((n,i)=>zt(e(n,i)).pipe(Fi(1),Ix(n)))}function wm(e,t=vm){let n=Cx(e,t);return xm(()=>n)}function Ch(e=Q6){return Qe((t,n)=>{let i=!1;t.subscribe(Xe(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function Q6(){return new Zr}function To(e){return Qe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Yr(e,t){let n=arguments.length>=2;return i=>i.pipe(e?fn((r,o)=>e(r,o,i)):wi,Fi(1),n?Do(t):Ch(()=>new Zr))}function Ws(e){return e<=0?()=>ai:Qe((t,n)=>{let i=[];t.subscribe(Xe(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function bm(e,t){let n=arguments.length>=2;return i=>i.pipe(e?fn((r,o)=>e(r,o,i)):wi,Ws(1),n?Do(t):Ch(()=>new Zr))}function Cm(e,t){return Qe(Sx(e,t,arguments.length>=2,!0))}function Sm(...e){let t=Io(e);return Qe((n,i)=>{(t?Eo(e,n,t):Eo(e,n)).subscribe(i)})}function $n(e,t){return Qe((n,i)=>{let r=null,o=0,a=!1,s=()=>a&&!r&&i.complete();n.subscribe(Xe(i,c=>{r?.unsubscribe();let l=0,u=o++;zt(e(c,u)).subscribe(r=Xe(i,d=>i.next(t?t(c,d,u,l++):d),()=>{r=null,s()}))},()=>{a=!0,s()}))})}function Sh(e){return Qe((t,n)=>{zt(e).subscribe(Xe(n,()=>n.complete(),ka)),!n.closed&&t.subscribe(n)})}function Pt(e,t,n){let i=Ue(e)||t||n?{next:e,error:t,complete:n}:e;return i?Qe((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let s=!0;r.subscribe(Xe(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;s=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;s=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;s&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):wi}function Ex(e){let t=He(null);try{return e()}finally{He(t)}}var Th="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ce=class extends Error{code;constructor(t,n){super(Ea(t,n)),this.code=t}};function eD(e){return`NG0${Math.abs(e)}`}function Ea(e,t){return`${eD(e)}${t?": "+t:""}`}var Ys=globalThis;function At(e){for(let t in e)if(e[t]===At)return t;throw Error("")}function Ax(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ci(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(ci).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function Ph(e,t){return e?t?`${e} ${t}`:e:t||""}var tD=At({__forward_ref__:At});function Wn(e){return e.__forward_ref__=Wn,e.toString=function(){return ci(this())},e}function bn(e){return Vm(e)?e():e}function Vm(e){return typeof e=="function"&&e.hasOwnProperty(tD)&&e.__forward_ref__===Wn}function Lx(e,t,n,i){throw new Error(`ASSERTION ERROR: ${e}`+(i==null?"":` [Expected=> ${n} ${i} ${t} <=Actual]`))}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function mn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Dl(e){return nD(e,Ah)}function Bm(e){return Dl(e)!==null}function nD(e,t){return e.hasOwnProperty(t)&&e[t]||null}function iD(e){let t=e?.[Ah]??null;return t||null}function Im(e){return e&&e.hasOwnProperty(Ih)?e[Ih]:null}var Ah=At({\u0275prov:At}),Ih=At({\u0275inj:At}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zm(e){return e&&!!e.\u0275providers}var jm=At({\u0275cmp:At}),Hm=At({\u0275dir:At}),Um=At({\u0275pipe:At}),qm=At({\u0275mod:At}),Il=At({\u0275fac:At}),Da=At({__NG_ELEMENT_ID__:At}),Dx=At({__NG_ENV_ID__:At});function Ta(e){return typeof e=="string"?e:e==null?"":String(e)}function Ox(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Ta(e)}function $m(e,t){throw new ce(-200,e)}function Lh(e,t){throw new ce(-201,!1)}var Em;function Rx(){return Em}function Ci(e){let t=Em;return Em=e,t}function Gm(e,t,n){let i=Dl(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(t!==void 0)return t;Lh(e,"Injector")}var rD={},ba=rD,Dm="__NG_DI_FLAG__",Tm=class{injector;constructor(t){this.injector=t}retrieve(t,n){let i=Ca(n)||0;try{return this.injector.get(t,i&8?null:ba,i)}catch(r){if(Ls(r))return r;throw r}}},Eh="ngTempTokenPath",oD="ngTokenPath",aD=/\n/gm,sD="\u0275",Tx="__source";function cD(e,t=0){let n=tm();if(n===void 0)throw new ce(-203,!1);if(n===null)return Gm(e,void 0,t);{let i=lD(t),r=n.retrieve(e,i);if(Ls(r)){if(i.optional)return null;throw r}return r}}function se(e,t=0){return(Rx()||cD)(bn(e),t)}function X(e,t){return se(e,Ca(t))}function Ca(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function lD(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Pm(e){let t=[];for(let n=0;n<e.length;n++){let i=bn(e[n]);if(Array.isArray(i)){if(i.length===0)throw new ce(900,!1);let r,o=0;for(let a=0;a<i.length;a++){let s=i[a],c=dD(s);typeof c=="number"?c===-1?r=s.token:o|=c:r=s}t.push(se(r,o))}else t.push(se(i))}return t}function Wm(e,t){return e[Dm]=t,e.prototype[Dm]=t,e}function dD(e){return e[Dm]}function uD(e,t,n,i){let r=e[Eh];throw t[Tx]&&r.unshift(t[Tx]),e.message=hD(`
`+e.message,r,n,i),e[oD]=r,e[Eh]=null,e}function hD(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==sD?e.slice(2):e;let r=ci(t);if(Array.isArray(t))r=t.map(ci).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let s=t[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):ci(s)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(aD,`
  `)}`}function Sa(e,t){let n=e.hasOwnProperty(Il);return n?e[Il]:null}function Nx(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Fx(e){return e.flat(Number.POSITIVE_INFINITY)}function Oh(e,t){e.forEach(n=>Array.isArray(n)?Oh(n,t):t(n))}function Zm(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Tl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Vx(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function Bx(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(r===1)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;){let o=r-2;e[r]=e[o],r--}e[t]=n,e[t+1]=i}}function Rh(e,t,n){let i=Xs(e,t);return i>=0?e[i|1]=n:(i=~i,Bx(e,i,t,n)),i}function Nh(e,t){let n=Xs(e,t);if(n>=0)return e[n|1]}function Xs(e,t){return pD(e,t,1)}function pD(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){let o=i+(r-i>>1),a=e[o<<n];if(t===a)return o<<n;a>t?r=o:i=o+1}return~(r<<n)}var Ao={},Gn=[],Ki=new ae(""),Ym=new ae("",-1),Xm=new ae(""),El=class{get(t,n=ba){if(n===ba)throw new Bu(`NullInjectorError: No provider for ${ci(t)}!`);return n}};function Jm(e){return e[qm]||null}function xr(e){return e[jm]||null}function Fh(e){return e[Hm]||null}function Km(e){return e[Um]||null}function Qi(e){return{\u0275providers:e}}function zx(...e){return{\u0275providers:Vh(!0,e),\u0275fromNgModule:!0}}function Vh(e,...t){let n=[],i=new Set,r,o=a=>{n.push(a)};return Oh(t,a=>{let s=a;Dh(s,o,[],i)&&(r||=[],r.push(s))}),r!==void 0&&jx(r,o),n}function jx(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:r}=e[n];Qm(r,o=>{t(o,i)})}}function Dh(e,t,n,i){if(e=bn(e),!e)return!1;let r=null,o=Im(e),a=!o&&xr(e);if(!o&&!a){let c=e.ngModule;if(o=Im(c),o)r=c;else return!1}else{if(a&&!a.standalone)return!1;r=e}let s=i.has(r);if(a){if(s)return!1;if(i.add(r),a.dependencies){let c=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of c)Dh(l,t,n,i)}}else if(o){if(o.imports!=null&&!s){i.add(r);let l;try{Oh(o.imports,u=>{Dh(u,t,n,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&jx(l,t)}if(!s){let l=Sa(r)||(()=>new r);t({provide:r,useFactory:l,deps:Gn},r),t({provide:Xm,useValue:r,multi:!0},r),t({provide:Ki,useValue:()=>se(r),multi:!0},r)}let c=o.providers;if(c!=null&&!s){let l=e;Qm(c,u=>{t(u,l)})}}else return!1;return r!==e&&e.providers!==void 0}function Qm(e,t){for(let n of e)zm(n)&&(n=n.\u0275providers),Array.isArray(n)?Qm(n,t):t(n)}var fD=At({provide:String,useValue:At});function Hx(e){return e!==null&&typeof e=="object"&&fD in e}function mD(e){return!!(e&&e.useExisting)}function gD(e){return!!(e&&e.useFactory)}function _a(e){return typeof e=="function"}function Ux(e){return!!e.useClass}var Pl=new ae(""),_h={},Px={},_m;function Al(){return _m===void 0&&(_m=new El),_m}var jt=class{},Ia=class extends jt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,Lm(t,a=>this.processProvider(a)),this.records.set(Ym,Zs(void 0,this)),r.has("environment")&&this.records.set(jt,Zs(void 0,this));let o=this.records.get(Pl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Xm,Gn,{self:!0}))}retrieve(t,n){let i=Ca(n)||0;try{return this.get(t,ba,i)}catch(r){if(Ls(r))return r;throw r}}destroy(){_l(this),this._destroyed=!0;let t=He(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(t)}}onDestroy(t){return _l(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){_l(this);let n=Wr(this),i=Ci(void 0),r;try{return t()}finally{Wr(n),Ci(i)}}get(t,n=ba,i){if(_l(this),t.hasOwnProperty(Dx))return t[Dx](this);let r=Ca(i),o,a=Wr(this),s=Ci(void 0);try{if(!(r&4)){let l=this.records.get(t);if(l===void 0){let u=xD(t)&&Dl(t);u&&this.injectableDefInScope(u)?l=Zs(Am(t),_h):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let c=r&2?Al():this.parent;return n=r&8&&n===ba?null:n,c.get(t,n)}catch(c){if(Ls(c)){if((c[Eh]=c[Eh]||[]).unshift(ci(t)),a)throw c;return uD(c,t,"R3InjectorError",this.source)}else throw c}finally{Ci(s),Wr(a)}}resolveInjectorInitializers(){let t=He(null),n=Wr(this),i=Ci(void 0),r;try{let o=this.get(Ki,Gn,{self:!0});for(let a of o)a()}finally{Wr(n),Ci(i),He(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(ci(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=bn(t);let n=_a(t)?t:bn(t&&t.provide),i=vD(t);if(!_a(t)&&t.multi===!0){let r=this.records.get(n);r||(r=Zs(void 0,_h,!0),r.factory=()=>Pm(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=He(null);try{return n.value===Px?$m(ci(t)):n.value===_h&&(n.value=Px,n.value=n.factory()),typeof n.value=="object"&&n.value&&MD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{He(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=bn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Am(e){let t=Dl(e),n=t!==null?t.factory:Sa(e);if(n!==null)return n;if(e instanceof ae)throw new ce(204,!1);if(e instanceof Function)return yD(e);throw new ce(204,!1)}function yD(e){if(e.length>0)throw new ce(204,!1);let n=iD(e);return n!==null?()=>n.factory(e):()=>new e}function vD(e){if(Hx(e))return Zs(void 0,e.useValue);{let t=eg(e);return Zs(t,_h)}}function eg(e,t,n){let i;if(_a(e)){let r=bn(e);return Sa(r)||Am(r)}else if(Hx(e))i=()=>bn(e.useValue);else if(gD(e))i=()=>e.useFactory(...Pm(e.deps||[]));else if(mD(e))i=()=>se(bn(e.useExisting));else{let r=bn(e&&(e.useClass||e.provide));if(kD(e))i=()=>new r(...Pm(e.deps));else return Sa(r)||Am(r)}return i}function _l(e){if(e.destroyed)throw new ce(205,!1)}function Zs(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function kD(e){return!!e.deps}function MD(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function xD(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Lm(e,t){for(let n of e)Array.isArray(n)?Lm(n,t):n&&zm(n)?Lm(n.\u0275providers,t):t(n)}function Rn(e,t){let n;e instanceof Ia?(_l(e),n=e):n=new Tm(e);let i,r=Wr(n),o=Ci(void 0);try{return t()}finally{Wr(r),Ci(o)}}function tg(){return Rx()!==void 0||tm()!=null}function ng(e){if(!tg())throw new ce(-203,!1)}var Zn=0,_e=1,Fe=2,en=3,Vi=4,Yn=5,Bi=6,Js=7,Cn=8,er=9,wr=10,bt=11,Ks=12,ig=13,Pa=14,Nn=15,Lo=16,Aa=17,br=18,Ll=19,rg=20,Xr=21,Bh=22,Ol=23,Si=24,La=25,Lt=26,qx=1,tr=6,Cr=7,Rl=8,Oa=9,Sn=10;function _i(e){return Array.isArray(e)&&typeof e[qx]=="object"}function Ii(e){return Array.isArray(e)&&e[qx]===!0}function zh(e){return(e.flags&4)!==0}function Kr(e){return e.componentOffset>-1}function Nl(e){return(e.flags&1)===1}function Sr(e){return!!e.template}function Ra(e){return(e[Fe]&512)!==0}function Oo(e){return(e[Fe]&256)===256}var $x="svg",Gx="math";function Ei(e){for(;Array.isArray(e);)e=e[Zn];return e}function og(e,t){return Ei(t[e])}function zi(e,t){return Ei(t[e.index])}function Na(e,t){return e.data[t]}function ji(e,t){let n=t[e];return _i(n)?n:n[Zn]}function Wx(e){return(e[Fe]&4)===4}function jh(e){return(e[Fe]&128)===128}function Zx(e){return Ii(e[en])}function Qr(e,t){return t==null?null:e[t]}function ag(e){e[Aa]=0}function sg(e){e[Fe]&1024||(e[Fe]|=1024,jh(e)&&Qs(e))}function Yx(e,t){for(;e>0;)t=t[Pa],e--;return t}function Fl(e){return!!(e[Fe]&9216||e[Si]?.dirty)}function Hh(e){e[wr].changeDetectionScheduler?.notify(8),e[Fe]&64&&(e[Fe]|=1024),Fl(e)&&Qs(e)}function Qs(e){e[wr].changeDetectionScheduler?.notify(0);let t=Po(e);for(;t!==null&&!(t[Fe]&8192||(t[Fe]|=8192,!jh(t)));)t=Po(t)}function cg(e,t){if(Oo(e))throw new ce(911,!1);e[Xr]===null&&(e[Xr]=[]),e[Xr].push(t)}function Xx(e,t){if(e[Xr]===null)return;let n=e[Xr].indexOf(t);n!==-1&&e[Xr].splice(n,1)}function Po(e){let t=e[en];return Ii(t)?t[en]:t}function lg(e){return e[Js]??=[]}function dg(e){return e.cleanup??=[]}function Jx(e,t,n,i){let r=lg(t);r.push(n),e.firstCreatePass&&dg(e).push(i,r.length-1)}var We={lFrame:hw(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Vl=function(e){return e[e.Off=0]="Off",e[e.Exhaustive=1]="Exhaustive",e[e.OnlyDirtyViews=2]="OnlyDirtyViews",e}(Vl||{}),wD=0,Om=!1;function Kx(){return We.lFrame.elementDepthCount}function Qx(){We.lFrame.elementDepthCount++}function ew(){We.lFrame.elementDepthCount--}function Uh(){return We.bindingsEnabled}function Fa(){return We.skipHydrationRootTNode!==null}function tw(e){return We.skipHydrationRootTNode===e}function nw(e){We.skipHydrationRootTNode=e}function iw(){We.skipHydrationRootTNode=null}function $e(){return We.lFrame.lView}function Ht(){return We.lFrame.tView}function H(e){return We.lFrame.contextLView=e,e[Cn]}function U(e){return We.lFrame.contextLView=null,e}function _n(){let e=ug();for(;e!==null&&e.type===64;)e=e.parent;return e}function ug(){return We.lFrame.currentTNode}function rw(){let e=We.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ro(e,t){let n=We.lFrame;n.currentTNode=e,n.isParent=t}function qh(){return We.lFrame.isParent}function $h(){We.lFrame.isParent=!1}function hg(e){Lx("Must never be called in production mode"),wD=e}function pg(){return Om}function fg(e){let t=Om;return Om=e,t}function Bl(){let e=We.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ow(){return We.lFrame.bindingIndex}function aw(e){return We.lFrame.bindingIndex=e}function ec(){return We.lFrame.bindingIndex++}function Gh(e){let t=We.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function sw(){return We.lFrame.inI18n}function cw(e,t){let n=We.lFrame;n.bindingIndex=n.bindingRootIndex=e,Wh(t)}function lw(){return We.lFrame.currentDirectiveIndex}function Wh(e){We.lFrame.currentDirectiveIndex=e}function dw(e){let t=We.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function mg(){return We.lFrame.currentQueryIndex}function Zh(e){We.lFrame.currentQueryIndex=e}function bD(e){let t=e[_e];return t.type===2?t.declTNode:t.type===1?e[Yn]:null}function gg(e,t,n){if(n&4){let r=t,o=e;for(;r=r.parent,r===null&&!(n&1);)if(r=bD(o),r===null||(o=o[Pa],r.type&10))break;if(r===null)return!1;t=r,e=o}let i=We.lFrame=uw();return i.currentTNode=t,i.lView=e,!0}function Yh(e){let t=uw(),n=e[_e];We.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function uw(){let e=We.lFrame,t=e===null?null:e.child;return t===null?hw(e):t}function hw(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function pw(){let e=We.lFrame;return We.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var yg=pw;function Xh(){let e=pw();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function fw(e){return(We.lFrame.contextLView=Yx(e,We.lFrame.contextLView))[Cn]}function eo(){return We.lFrame.selectedIndex}function No(e){We.lFrame.selectedIndex=e}function Jh(){let e=We.lFrame;return Na(e.tView,e.selectedIndex)}function vg(){return We.lFrame.currentNamespace}var mw=!0;function zl(){return mw}function to(e){mw=e}function Rm(e,t=null,n=null,i){let r=kg(e,t,n,i);return r.resolveInjectorInitializers(),r}function kg(e,t=null,n=null,i,r=new Set){let o=[n||Gn,zx(e)];return i=i||(typeof e=="object"?void 0:ci(e)),new Ia(o,t||Al(),i||null,r)}var On=class e{static THROW_IF_NOT_FOUND=ba;static NULL=new El;static create(t,n){if(Array.isArray(t))return Rm({name:""},n,t,"");{let i=t.name??"";return Rm({name:i},t.parent,t.providers,i)}}static \u0275prov=re({token:e,providedIn:"any",factory:()=>se(Ym)});static __NG_ELEMENT_ID__=-1},Ut=new ae(""),no=(()=>{class e{static __NG_ELEMENT_ID__=CD;static __NG_ENV_ID__=n=>n}return e})(),Nm=class extends no{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Oo(this._lView)}onDestroy(t){let n=this._lView;return cg(n,t),()=>Xx(n,t)}};function CD(){return new Nm($e())}var Ji=class{_console=console;handleError(t){this._console.error("ERROR",t)}},li=new ae("",{providedIn:"root",factory:()=>{let e=X(jt),t;return n=>{t??=e.get(Ji),t.handleError(n)}}}),gw={provide:Ki,useValue:()=>void X(Ji),multi:!0};function Mg(e){return typeof e=="function"&&e[Ln]!==void 0}function nr(e,t){let[n,i,r]=am(e,t?.equal),o=n,a=o[Ln];return o.set=i,o.update=r,o.asReadonly=yw.bind(o),o}function yw(){let e=this[Ln];if(e.readonlyFn===void 0){let t=()=>this();t[Ln]=e,e.readonlyFn=t}return e.readonlyFn}function xg(e){return Mg(e)&&typeof e.set=="function"}var Jr=class{},tc=new ae("",{providedIn:"root",factory:()=>!1});var wg=new ae(""),bg=new ae("");var Kh=(()=>{class e{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=SD}return e})();function SD(){return new Kh($e(),_n())}var _r=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Dt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new qe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),nc=(()=>{class e{internalPendingTasks=X(_r);scheduler=X(Jr);errorHandler=X(li);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let i=this.add();n().catch(this.errorHandler).finally(i)}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})();function jl(...e){}var Cg=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>new Fm})}return e})(),Fm=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,i=this.queues.get(n);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,i]of this.queues)n===null?t||=this.flushQueue(i):t||=n.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}};var Qh={JSACTION:"jsaction"};function lc(e){return{toString:e}.toString()}var ep="__parameters__";function OD(e){return function(...n){if(e){let i=e(...n);for(let r in i)this[r]=i[r]}}}function nb(e,t,n){return lc(()=>{let i=OD(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return s.annotation=a,s;function s(c,l,u){let d=c.hasOwnProperty(ep)?c[ep]:Object.defineProperty(c,ep,{value:[]})[ep];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(a),c}}return r.prototype.ngMetadataName=e,r.annotationCls=r,r})}var Xl=Wm(nb("Optional"),8);var ib=Wm(nb("SkipSelf"),4);function RD(e){return typeof e=="function"}var lp=class{previousValue;currentValue;firstChange;constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function rb(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}var In=(()=>{let e=()=>ob;return e.ngInherit=!0,e})();function ob(e){return e.type.prototype.ngOnChanges&&(e.setInput=FD),ND}function ND(){let e=sb(this),t=e?.current;if(t){let n=e.previous;if(n===Ao)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function FD(e,t,n,i,r){let o=this.declaredInputs[i],a=sb(e)||VD(e,{previous:Ao,current:null}),s=a.current||(a.current={}),c=a.previous,l=c[o];s[o]=new lp(l&&l.currentValue,n,c===Ao),rb(e,t,r,n)}var ab="__ngSimpleChanges__";function sb(e){return e[ab]||null}function VD(e,t){return e[ab]=t}var vw=[];var kt=function(e,t=null,n){for(let i=0;i<vw.length;i++){let r=vw[i];r(e,t,n)}};function BD(e,t,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let a=ob(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}r&&(n.preOrderHooks??=[]).push(0-e,r),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function u2(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;a&&(e.contentHooks??=[]).push(-n,a),s&&((e.contentHooks??=[]).push(n,s),(e.contentCheckHooks??=[]).push(n,s)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function ip(e,t,n){cb(e,t,3,n)}function rp(e,t,n,i){(e[Fe]&3)===n&&cb(e,t,n,i)}function Sg(e,t){let n=e[Fe];(n&3)===t&&(n&=16383,n+=1,e[Fe]=n)}function cb(e,t,n,i){let r=i!==void 0?e[Aa]&65535:0,o=i??-1,a=t.length-1,s=0;for(let c=r;c<a;c++)if(typeof t[c+1]=="number"){if(s=t[c],i!=null&&s>=i)break}else t[c]<0&&(e[Aa]+=65536),(s<o||o==-1)&&(zD(e,n,t,c),e[Aa]=(e[Aa]&4294901760)+c+2),c++}function kw(e,t){kt(4,e,t);let n=He(null);try{t.call(e)}finally{He(n),kt(5,e,t)}}function zD(e,t,n,i){let r=n[i]<0,o=n[i+1],a=r?-n[i]:n[i],s=e[a];r?e[Fe]>>14<e[Aa]>>16&&(e[Fe]&3)===t&&(e[Fe]+=16384,kw(s,o)):kw(s,o)}var rc=-1,za=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,i){this.factory=t,this.canSeeViewProviders=n,this.injectImpl=i}};function jD(e){return(e.flags&8)!==0}function HD(e){return(e.flags&16)!==0}function UD(e,t,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],a=n[i++],s=n[i++];e.setAttribute(t,a,s,o)}else{let o=r,a=n[++i];qD(o)?e.setProperty(t,o,a):e.setAttribute(t,o,a),i++}}return i}function lb(e){return e===3||e===4||e===6}function qD(e){return e.charCodeAt(0)===64}function sc(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?Mw(e,n,r,null,t[++i]):Mw(e,n,r,null,null))}}return e}function Mw(e,t,n,i,r){let o=0,a=e.length;if(t===-1)a=-1;else for(;o<e.length;){let s=e[o++];if(typeof s=="number"){if(s===t){a=-1;break}else if(s>t){a=o-1;break}}}for(;o<e.length;){let s=e[o];if(typeof s=="number")break;if(s===n){r!==null&&(e[o+1]=r);return}o++,r!==null&&o++}a!==-1&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r)}function db(e){return e!==rc}function dp(e){return e&32767}function $D(e){return e>>16}function up(e,t){let n=$D(e),i=t;for(;n>0;)i=i[Pa],n--;return i}var Vg=!0;function xw(e){let t=Vg;return Vg=e,t}var GD=256,ub=GD-1,hb=5,WD=0,Ir={};function ZD(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Da)&&(i=n[Da]),i==null&&(i=n[Da]=WD++);let r=i&ub,o=1<<r;t.data[e+(r>>hb)]|=o}function hp(e,t){let n=pb(e,t);if(n!==-1)return n;let i=t[_e];i.firstCreatePass&&(e.injectorIndex=t.length,_g(i.data,e),_g(t,null),_g(i.blueprint,null));let r=h2(e,t),o=e.injectorIndex;if(db(r)){let a=dp(r),s=up(r,t),c=s[_e].data;for(let l=0;l<8;l++)t[o+l]=s[a+l]|c[a+l]}return t[o+8]=r,o}function _g(e,t){e.push(0,0,0,0,0,0,0,0,t)}function pb(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function h2(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;r!==null;){if(i=vb(r),i===null)return rc;if(n++,r=r[Pa],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return rc}function Bg(e,t,n){ZD(e,t,n)}function YD(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let i=n.length,r=0;for(;r<i;){let o=n[r];if(lb(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(o===t)return n[r+1];r=r+2}}}return null}function fb(e,t,n){if(n&8||e!==void 0)return e;Lh(t,"NodeInjector")}function mb(e,t,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let r=e[er],o=Ci(void 0);try{return r?r.get(t,i,n&8):Gm(t,i,n&8)}finally{Ci(o)}}return fb(i,t,n)}function gb(e,t,n,i=0,r){if(e!==null){if(t[Fe]&2048&&!(i&2)){let a=QD(e,t,n,i,Ir);if(a!==Ir)return a}let o=yb(e,t,n,i,Ir);if(o!==Ir)return o}return mb(t,n,i,r)}function yb(e,t,n,i,r){let o=JD(n);if(typeof o=="function"){if(!gg(t,e,i))return i&1?fb(r,n,i):mb(t,n,i,r);try{let a;if(a=o(i),a==null&&!(i&8))Lh(n);else return a}finally{yg()}}else if(typeof o=="number"){let a=null,s=pb(e,t),c=rc,l=i&1?t[Nn][Yn]:null;for((s===-1||i&4)&&(c=s===-1?h2(e,t):t[s+8],c===rc||!bw(i,!1)?s=-1:(a=t[_e],s=dp(c),t=up(c,t)));s!==-1;){let u=t[_e];if(ww(o,s,u.data)){let d=XD(s,t,n,a,i,l);if(d!==Ir)return d}c=t[s+8],c!==rc&&bw(i,t[_e].data[s+8]===l)&&ww(o,s,t)?(a=u,s=dp(c),t=up(c,t)):s=-1}}return r}function XD(e,t,n,i,r,o){let a=t[_e],s=a.data[e+8],c=i==null?Kr(s)&&Vg:i!=a&&(s.type&3)!==0,l=r&1&&o===s,u=op(s,a,n,c,l);return u!==null?ql(t,a,u,s):Ir}function op(e,t,n,i,r){let o=e.providerIndexes,a=t.data,s=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=i?s:s+u,h=r?s+u:l;for(let p=d;p<h;p++){let f=a[p];if(p<c&&n===f||p>=c&&f.type===n)return p}if(r){let p=a[c];if(p&&Sr(p)&&p.type===n)return c}return null}function ql(e,t,n,i){let r=e[n],o=t.data;if(r instanceof za){let a=r;a.resolving&&$m(Ox(o[n]));let s=xw(a.canSeeViewProviders);a.resolving=!0;let c=o[n].type||o[n],l,u=a.injectImpl?Ci(a.injectImpl):null,d=gg(e,i,0);try{r=e[n]=a.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&BD(n,o[n],t)}finally{u!==null&&Ci(u),xw(s),a.resolving=!1,yg()}}return r}function JD(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Da)?e[Da]:void 0;return typeof t=="number"?t>=0?t&ub:KD:t}function ww(e,t,n){let i=1<<e;return!!(n[t+(e>>hb)]&i)}function bw(e,t){return!(e&2)&&!(e&1&&t)}var Ba=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return gb(this._tNode,this._lView,t,Ca(i),n)}};function KD(){return new Ba(_n(),$e())}function ar(e){return lc(()=>{let t=e.prototype.constructor,n=t[Il]||zg(t),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){let o=r[Il]||zg(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function zg(e){return Vm(e)?()=>{let t=zg(bn(e));return t&&t()}:Sa(e)}function QD(e,t,n,i,r){let o=e,a=t;for(;o!==null&&a!==null&&a[Fe]&2048&&!Ra(a);){let s=yb(o,a,n,i|2,Ir);if(s!==Ir)return s;let c=o.parent;if(!c){let l=a[rg];if(l){let u=l.get(n,Ir,i);if(u!==Ir)return u}c=vb(a),a=a[Pa]}o=c}return r}function vb(e){let t=e[_e],n=t.type;return n===2?t.declTNode:n===1?e[Yn]:null}function Jl(e){return YD(_n(),e)}function eT(){return dc(_n(),$e())}function dc(e,t){return new ln(zi(e,t))}var ln=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=eT}return e})();function tT(e){return e instanceof ln?e.nativeElement:e}function nT(){return this._results[Symbol.iterator]()}var pp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qt}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=Fx(t);(this._changesDetected=!Nx(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nT},kb="ngSkipHydration",iT="ngskiphydration";function Mb(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let i=t[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===iT)return!0}return!1}function xb(e){return e.hasAttribute(kb)}function fp(e){return(e.flags&128)===128}function wb(e){if(fp(e))return!0;let t=e.parent;for(;t;){if(fp(e)||Mb(t))return!0;t=t.parent}return!1}var p2=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(p2||{}),bb=new Map,rT=0;function oT(){return rT++}function aT(e){bb.set(e[Ll],e)}function jg(e){bb.delete(e[Ll])}var Cw="__ngContext__";function uc(e,t){_i(t)?(e[Cw]=t[Ll],aT(t)):e[Cw]=t}function Cb(e){return _b(e[Ks])}function Sb(e){return _b(e[Vi])}function _b(e){for(;e!==null&&!Ii(e);)e=e[Vi];return e}var Hg;function f2(e){Hg=e}function Kl(){if(Hg!==void 0)return Hg;if(typeof document<"u")return document;throw new ce(210,!1)}var Dr=new ae("",{providedIn:"root",factory:()=>sT}),sT="ng",Tp=new ae(""),xt=new ae("",{providedIn:"platform",factory:()=>"unknown"});var Pp=new ae("",{providedIn:"root",factory:()=>Kl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function cT(){let e=new $a;return e.store=lT(Kl(),X(Dr)),e}var $a=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:cT});store={};onSerializeCallbacks={};get(n,i){return this.store[n]!==void 0?this.store[n]:i}set(n,i){this.store[n]=i}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,i){this.onSerializeCallbacks[n]=i}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function lT(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var Ib="h",Eb="b",dT="f",uT="n",Db="e",Tb="t",Ap="c",m2="x",$l="r",Pb="i",Ab="n",g2="d";var Lb="di",Ob="s",Rb="p";var Ql=new ae(""),Nb=!1,y2=new ae("",{providedIn:"root",factory:()=>Nb});var v2=new ae(""),Fb=!1,Vb=new ae(""),k2=new ae("",{providedIn:"root",factory:()=>new Map});var ed="ngb";var Bb=(e,t,n)=>{let i=e,r=i.__jsaction_fns??new Map,o=r.get(t)??[];o.push(n),r.set(t,o),i.__jsaction_fns=r},zb=(e,t)=>{let n=e,i=n.getAttribute(ed)??"",r=t.get(i)??new Set;r.has(n)||r.add(n),t.set(i,r)};var jb=e=>{e.removeAttribute(Qh.JSACTION),e.removeAttribute(ed),e.__jsaction_fns=void 0},Hb=new ae("",{providedIn:"root",factory:()=>({})});function M2(e,t){let n=t?.__jsaction_fns?.get(e.type);if(!(!n||!t?.isConnected))for(let i of n)i(e)}var Ug=new Map;function Ub(e,t){return Ug.set(e,t),()=>Ug.delete(e)}var Sw=!1,qb=(e,t,n,i)=>{};function hT(e,t,n,i){qb(e,t,n,i)}function $b(){Sw||(qb=(e,t,n,i)=>{let r=e[er].get(Dr);Ug.get(r)?.(t,n,i)},Sw=!0)}var Lp=new ae("");var pT="__nghData__",x2=pT,fT="__nghDeferData__",Gb=fT,ap="ngh",Wb="nghm",Zb=()=>null;function mT(e,t,n=!1){let i=e.getAttribute(ap);if(i==null)return null;let[r,o]=i.split("|");if(i=n?o:r,!i)return null;let a=o?`|${o}`:"",s=n?r:a,c={};if(i!==""){let u=t.get($a,null,{optional:!0});u!==null&&(c=u.get(x2,[])[Number(i)])}let l={data:c,firstChild:e.firstChild??null};return n&&(l.firstChild=e,Op(l,0,e.nextSibling)),s?e.setAttribute(ap,s):e.removeAttribute(ap),l}function Yb(){Zb=mT}function Xb(e,t,n=!1){return Zb(e,t,n)}function Jb(e){let t=e._lView;return t[_e].type===2?null:(Ra(t)&&(t=t[Lt]),t)}function gT(e){return e.textContent?.replace(/\s/gm,"")}function yT(e){let t=Kl(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let a=gT(o);return a==="ngetn"||a==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function Op(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function qg(e,t){return e.segmentHeads?.[t]??null}function Kb(e){return e.get(Vb,!1,{optional:!0})}function vT(e,t){let n=e.data,i=n[Db]?.[t]??null;return i===null&&n[Ap]?.[t]&&(i=w2(e,t)),i}function Qb(e,t){return e.data[Ap]?.[t]??null}function w2(e,t){let n=Qb(e,t)??[],i=0;for(let r of n)i+=r[$l]*(r[m2]??1);return i}function kT(e){if(typeof e.disconnectedNodes>"u"){let t=e.data[g2];e.disconnectedNodes=t?new Set(t):null}return e.disconnectedNodes}function td(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[g2];e.disconnectedNodes=n?new Set(n):null}return!!kT(e)?.has(t)}function MT(e,t){let n=t.get(Lp),r=t.get($a).get(Gb,{}),o=!1,a=e,s=null,c=[];for(;!o&&a;){o=n.has(a);let l=n.hydrating.get(a);if(s===null&&l!=null){s=l.promise;break}c.unshift(a),a=r[a][Rb]}return{parentBlockPromise:s,hydrationQueue:c}}function Ig(e){return!!e&&e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===Wb}function _w(e){for(;e&&e.nodeType===Node.TEXT_NODE;)e=e.previousSibling;return e}function eC(e){for(let i of e.body.childNodes)if(Ig(i))return;let t=_w(e.body.previousSibling);if(Ig(t))return;let n=_w(e.head.lastChild);if(!Ig(n))throw new ce(-507,!1)}function tC(e,t){let n=e.contentQueries;if(n!==null){let i=He(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a!==-1){let s=e.data[a];Zh(o),s.contentQueries(2,t[a],a)}}}finally{He(i)}}}function $g(e,t,n){Zh(0);let i=He(null);try{t(e,n)}finally{He(i)}}function b2(e,t,n){if(zh(t)){let i=He(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let a=r;a<o;a++){let s=e.data[a];if(s.contentQueries){let c=n[a];s.contentQueries(1,c,a)}}}finally{He(i)}}}var io=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(io||{});var tp;function xT(){if(tp===void 0&&(tp=null,Ys.trustedTypes))try{tp=Ys.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return tp}function Iw(e){return xT()?.createScriptURL(e)||e}var mp=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Th})`}};function Ga(e){return e instanceof mp?e.changingThisBreaksApplicationSecurity:e}function Rp(e,t){let n=nC(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Th})`)}return n===t}function nC(e){return e instanceof mp&&e.getTypeName()||null}var wT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function C2(e){return e=String(e),e.match(wT)?e:"unsafe:"+e}var nd=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(nd||{});function Ot(e){let t=rC();return t?t.sanitize(nd.URL,e)||"":Rp(e,"URL")?Ga(e):C2(Ta(e))}function iC(e){let t=rC();if(t)return Iw(t.sanitize(nd.RESOURCE_URL,e)||"");if(Rp(e,"ResourceURL"))return Iw(Ga(e));throw new ce(904,!1)}function bT(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?iC:Ot}function S2(e,t,n){return bT(t,n)(e)}function rC(){let e=$e();return e&&e[wr].sanitizer}var CT=/^>|^->|<!--|-->|--!>|<!-$/g,ST=/(<|>)/g,_T="\u200B$1\u200B";function IT(e){return e.replace(CT,t=>t.replace(ST,_T))}function ro(e){return e.ownerDocument}function oC(e){return e.ownerDocument.body}function aC(e){return e instanceof Function?e():e}function ET(e,t,n){let i=e.length;for(;;){let r=e.indexOf(t,n);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}var sC="ng-template";function DT(e,t,n,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&ET(t[r+1].toLowerCase(),n,0)!==-1)return!0}else if(_2(e))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function _2(e){return e.type===4&&e.value!==sC}function TT(e,t,n){let i=e.type===4&&!n?sC:e.value;return t===i}function PT(e,t,n){let i=4,r=e.attrs,o=r!==null?OT(r):0,a=!1;for(let s=0;s<t.length;s++){let c=t[s];if(typeof c=="number"){if(!a&&!ir(i)&&!ir(c))return!1;if(a&&ir(c))continue;a=!1,i=c|i&1;continue}if(!a)if(i&4){if(i=2|i&1,c!==""&&!TT(e,c,n)||c===""&&t.length===1){if(ir(i))return!1;a=!0}}else if(i&8){if(r===null||!DT(e,r,c,n)){if(ir(i))return!1;a=!0}}else{let l=t[++s],u=AT(c,r,_2(e),n);if(u===-1){if(ir(i))return!1;a=!0;continue}if(l!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(ir(i))return!1;a=!0}}}}return ir(i)||a}function ir(e){return(e&1)===0}function AT(e,t,n,i){if(t===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){let a=t[r];if(a===e)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=t[++r];for(;typeof s=="string";)s=t[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return RT(t,e)}function cC(e,t,n=!1){for(let i=0;i<t.length;i++)if(PT(e,t[i],n))return!0;return!1}function LT(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if((n&1)===0)return t[n+1]}return null}function OT(e){for(let t=0;t<e.length;t++){let n=e[t];if(lb(n))return t}return e.length}function RT(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function NT(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function Ew(e,t){return e?":not("+t.trim()+")":t}function FT(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let a=e[n];if(typeof a=="string")if(i&2){let s=e[++n];r+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!ir(a)&&(t+=Ew(o,r),r=""),i=a,o=o||!ir(i);n++}return r!==""&&(t+=Ew(o,r)),t}function VT(e){return e.map(FT).join(",")}function BT(e){let t=[],n=[],i=1,r=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")r===2?o!==""&&t.push(o,e[++i]):r===8&&n.push(o);else{if(!ir(r))break;r=o}i++}return n.length&&t.push(1,...n),t}var Xn={};function lC(e,t){return e.createText(t)}function zT(e,t,n){e.setValue(t,n)}function dC(e,t){return e.createComment(IT(t))}function I2(e,t,n){return e.createElement(t,n)}function gp(e,t,n,i,r){e.insertBefore(t,n,i,r)}function uC(e,t,n){e.appendChild(t,n)}function Dw(e,t,n,i,r){i!==null?gp(e,t,n,i,r):uC(e,t,n)}function E2(e,t,n){e.removeChild(null,t,n)}function hC(e){e.textContent=""}function jT(e,t,n){e.setAttribute(t,"style",n)}function HT(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function pC(e,t,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&UD(e,t,i),r!==null&&HT(e,t,r),o!==null&&jT(e,t,o)}function D2(e,t,n,i,r,o,a,s,c,l,u){let d=Lt+i,h=d+r,p=UT(d,h),f=typeof l=="function"?l():l;return p[_e]={type:e,blueprint:p,template:n,queries:null,viewQuery:s,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1,ssrId:u}}function UT(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:Xn);return n}function qT(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=D2(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function T2(e,t,n,i,r,o,a,s,c,l,u){let d=t.blueprint.slice();return d[Zn]=r,d[Fe]=i|4|128|8|64|1024,(l!==null||e&&e[Fe]&2048)&&(d[Fe]|=2048),ag(d),d[en]=d[Pa]=e,d[Cn]=n,d[wr]=a||e&&e[wr],d[bt]=s||e&&e[bt],d[er]=c||e&&e[er]||null,d[Yn]=o,d[Ll]=oT(),d[Bi]=u,d[rg]=l,d[Nn]=t.type==2?e[Nn]:d,d}function $T(e,t,n){let i=zi(t,e),r=qT(n),o=e[wr].rendererFactory,a=P2(e,T2(e,r,null,fC(n),i,t,null,o.createRenderer(i,n),null,null,null));return e[t.index]=a}function fC(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function mC(e,t,n,i){if(n===0)return-1;let r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function P2(e,t){return e[Ks]?e[ig][Vi]=t:e[Ks]=t,e[ig]=t,t}function _(e=1){gC(Ht(),$e(),eo()+e,!1)}function gC(e,t,n,i){if(!i)if((t[Fe]&3)===3){let o=e.preOrderCheckHooks;o!==null&&ip(t,o,n)}else{let o=e.preOrderHooks;o!==null&&rp(t,o,0,n)}No(n)}var Np=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Np||{});function Gg(e,t,n,i){let r=He(null);try{let[o,a,s]=e.inputs[n],c=null;(a&Np.SignalBased)!==0&&(c=t[o][Ln]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):s!==null&&(i=s.call(t,i)),e.setInput!==null?e.setInput(t,c,i,n,o):rb(t,c,o,i)}finally{He(r)}}function yC(e,t,n,i,r){let o=eo(),a=i&2;try{No(-1),a&&t.length>Lt&&gC(e,t,Lt,!1),kt(a?2:0,r,n),n(i,r)}finally{No(o),kt(a?3:1,r,n)}}function Fp(e,t,n){KT(e,t,n),(n.flags&64)===64&&QT(e,t,n)}function A2(e,t,n=zi){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],s=a===-1?n(t,e):e[a];e[r++]=s}}}function GT(e,t,n,i){let o=i.get(y2,Nb)||n===io.ShadowDom,a=e.selectRootElement(t,o);return WT(a),a}function WT(e){vC(e)}var vC=()=>null;function ZT(e){xb(e)?hC(e):yT(e)}function kC(){vC=ZT}function YT(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function MC(e,t,n,i,r,o){let a=t[_e];if(R2(e,a,t,n,i)){Kr(e)&&JT(t,e.index);return}XT(e,t,n,i,r,o)}function XT(e,t,n,i,r,o){if(e.type&3){let a=zi(e,t);n=YT(n),i=o!=null?o(i,e.value||"",n):i,r.setProperty(a,n,i)}else e.type&12}function JT(e,t){let n=ji(t,e);n[Fe]&16||(n[Fe]|=64)}function KT(e,t,n){let i=n.directiveStart,r=n.directiveEnd;Kr(n)&&$T(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||hp(n,t);let o=n.initialInputs;for(let a=i;a<r;a++){let s=e.data[a],c=ql(t,e,a,n);if(uc(c,t),o!==null&&iP(t,a-i,c,s,n,o),Sr(s)){let l=ji(n.index,t);l[Cn]=ql(t,e,a,n)}}}function QT(e,t,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,a=lw();try{No(o);for(let s=i;s<r;s++){let c=e.data[s],l=t[s];Wh(s),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eP(c,l)}}finally{No(-1),Wh(a)}}function eP(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function L2(e,t){let n=e.directiveRegistry,i=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];cC(t,o.selectors,!1)&&(i??=[],Sr(o)?i.unshift(o):i.push(o))}return i}function tP(e,t,n,i,r,o){let a=zi(e,t);nP(t[bt],a,o,e.value,n,i,r)}function nP(e,t,n,i,r,o,a){if(o==null)e.removeAttribute(t,r,n);else{let s=a==null?Ta(o):a(o,i||"",r);e.setAttribute(t,r,s,n)}}function iP(e,t,n,i,r,o){let a=o[t];if(a!==null)for(let s=0;s<a.length;s+=2){let c=a[s],l=a[s+1];Gg(i,n,c,l)}}function O2(e,t){let n=e[er];if(!n)return;n.get(li,null)?.(t)}function R2(e,t,n,i,r){let o=e.inputs?.[i],a=e.hostDirectiveInputs?.[i],s=!1;if(a)for(let c=0;c<a.length;c+=2){let l=a[c],u=a[c+1],d=t.data[l];Gg(d,n[l],u,r),s=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Gg(u,l,i,r),s=!0}return s}function rP(e,t){let n=ji(t,e),i=n[_e];oP(i,n);let r=n[Zn];r!==null&&n[Bi]===null&&(n[Bi]=Xb(r,n[er])),kt(18),N2(i,n,n[Cn]),kt(19,n[Cn])}function oP(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function N2(e,t,n){Yh(t);try{let i=e.viewQuery;i!==null&&$g(1,i,n);let r=e.template;r!==null&&yC(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[br]?.finishViewCreation(e),e.staticContentQueries&&tC(e,t),e.staticViewQueries&&$g(2,e.viewQuery,n);let o=e.components;o!==null&&aP(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Fe]&=-5,Xh()}}function aP(e,t){for(let n=0;n<t.length;n++)rP(e,t[n])}function Vp(e,t,n,i){let r=He(null);try{let o=t.tView,s=e[Fe]&4096?4096:16,c=T2(e,o,n,s,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=e[t.index];c[Lo]=l;let u=e[br];return u!==null&&(c[br]=u.createEmbeddedView(o)),N2(o,c,n),c}finally{He(r)}}function Gl(e,t){return!t||t.firstChild===null||fp(e)}var Tw=!1,sP=new ae(""),cP;function F2(e,t){return cP(e,t)}var Er=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Er||{});function Bo(e){return(e.flags&32)===32}function ic(e,t,n,i,r){if(i!=null){let o,a=!1;Ii(i)?o=i:_i(i)&&(a=!0,i=i[Zn]);let s=Ei(i);e===0&&n!==null?r==null?uC(t,n,s):gp(t,n,s,r||null,!0):e===1&&n!==null?gp(t,n,s,r||null,!0):e===2?E2(t,s,a):e===3&&t.destroyNode(s),o!=null&&vP(t,e,o,n,r)}}function lP(e,t){xC(e,t),t[Zn]=null,t[Yn]=null}function dP(e,t,n,i,r,o){i[Zn]=r,i[Yn]=t,zp(e,i,n,1,r,o)}function xC(e,t){t[wr].changeDetectionScheduler?.notify(9),zp(e,t,t[bt],2,null,null)}function uP(e){let t=e[Ks];if(!t)return Eg(e[_e],e);for(;t;){let n=null;if(_i(t))n=t[Ks];else{let i=t[Sn];i&&(n=i)}if(!n){for(;t&&!t[Vi]&&t!==e;)_i(t)&&Eg(t[_e],t),t=t[en];t===null&&(t=e),_i(t)&&Eg(t[_e],t),n=t&&t[Vi]}t=n}}function V2(e,t){let n=e[Oa],i=n.indexOf(t);n.splice(i,1)}function B2(e,t){if(Oo(t))return;let n=t[bt];n.destroyNode&&zp(e,t,n,3,null,null),uP(t)}function Eg(e,t){if(Oo(t))return;let n=He(null);try{t[Fe]&=-129,t[Fe]|=256,t[Si]&&Wu(t[Si]),pP(e,t),hP(e,t),t[_e].type===1&&t[bt].destroy();let i=t[Lo];if(i!==null&&Ii(t[en])){i!==t[en]&&V2(i,t);let r=t[br];r!==null&&r.detachView(e)}jg(t)}finally{He(n)}}function hP(e,t){let n=e.cleanup,i=t[Js];if(n!==null)for(let a=0;a<n.length-1;a+=2)if(typeof n[a]=="string"){let s=n[a+3];s>=0?i[s]():i[-s].unsubscribe(),a+=2}else{let s=i[n[a+1]];n[a].call(s)}i!==null&&(t[Js]=null);let r=t[Xr];if(r!==null){t[Xr]=null;for(let a=0;a<r.length;a++){let s=r[a];s()}}let o=t[Ol];if(o!==null){t[Ol]=null;for(let a of o)a.destroy()}}function pP(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=t[n[i]];if(!(r instanceof za)){let o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=r[o[a]],c=o[a+1];kt(4,s,c);try{c.call(s)}finally{kt(5,s,c)}}else{kt(4,r,o);try{o.call(r)}finally{kt(5,r,o)}}}}}function wC(e,t,n){return fP(e,t.parent,n)}function fP(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[Zn];if(Kr(i)){let{encapsulation:r}=e.data[i.directiveStart+i.componentOffset];if(r===io.None||r===io.Emulated)return null}return zi(i,n)}function bC(e,t,n){return gP(e,t,n)}function mP(e,t,n){return e.type&40?zi(e,n):null}var gP=mP,Pw;function Bp(e,t,n,i){let r=wC(e,i,t),o=t[bt],a=i.parent||t[Yn],s=bC(a,i,t);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Dw(o,r,n[c],s,!1);else Dw(o,r,n,s,!1);Pw!==void 0&&Pw(o,i,t,n,r)}function Hl(e,t){if(t!==null){let n=t.type;if(n&3)return zi(t,e);if(n&4)return Wg(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return Hl(e,i);{let r=e[t.index];return Ii(r)?Wg(-1,r):Ei(r)}}else{if(n&128)return Hl(e,t.next);if(n&32)return F2(t,e)()||Ei(e[t.index]);{let i=CC(e,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Po(e[Nn]);return Hl(r,i)}else return Hl(e,t.next)}}}return null}function CC(e,t){if(t!==null){let i=e[Nn][Yn],r=t.projection;return i.projection[r]}return null}function Wg(e,t){let n=Sn+e+1;if(n<t.length){let i=t[n],r=i[_e].firstChild;if(r!==null)return Hl(i,r)}return t[Cr]}function z2(e,t,n,i,r,o,a){for(;n!=null;){if(n.type===128){n=n.next;continue}let s=i[n.index],c=n.type;if(a&&t===0&&(s&&uc(Ei(s),i),n.flags|=2),!Bo(n))if(c&8)z2(e,t,n.child,i,r,o,!1),ic(t,e,r,s,o);else if(c&32){let l=F2(n,i),u;for(;u=l();)ic(t,e,r,u,o);ic(t,e,r,s,o)}else c&16?SC(e,t,i,n,r,o):ic(t,e,r,s,o);n=a?n.projectionNext:n.next}}function zp(e,t,n,i,r,o){z2(n,i,e.firstChild,t,r,o,!1)}function yP(e,t,n){let i=t[bt],r=wC(e,n,t),o=n.parent||t[Yn],a=bC(o,n,t);SC(i,0,t,n,r,a)}function SC(e,t,n,i,r,o){let a=n[Nn],c=a[Yn].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ic(t,e,r,u,o)}else{let l=c,u=a[en];fp(i)&&(l.flags|=128),z2(e,t,l,u,r,o,!0)}}function vP(e,t,n,i,r){let o=n[Cr],a=Ei(n);o!==a&&ic(t,e,i,o,r);for(let s=Sn;s<n.length;s++){let c=n[s];zp(c[_e],c,e,t,i,o)}}function kP(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Er.DashCase;r==null?e.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Er.Important),e.setStyle(n,i,r,o))}}function Wl(e,t,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&i.push(Ei(o)),Ii(o)&&_C(o,i);let a=n.type;if(a&8)Wl(e,t,n.child,i);else if(a&32){let s=F2(n,t),c;for(;c=s();)i.push(c)}else if(a&16){let s=CC(t,n);if(Array.isArray(s))i.push(...s);else{let c=Po(t[Nn]);Wl(c[_e],c,s,i,!0)}}n=r?n.projectionNext:n.next}return i}function _C(e,t){for(let n=Sn;n<e.length;n++){let i=e[n],r=i[_e].firstChild;r!==null&&Wl(i[_e],i,r,t)}e[Cr]!==e[Zn]&&t.push(e[Cr])}function IC(e){if(e[La]!==null){for(let t of e[La])t.impl.addSequence(t);e[La].length=0}}var EC=[];function MP(e){return e[Si]??xP(e)}function xP(e){let t=EC.pop()??Object.create(bP);return t.lView=e,t}function wP(e){e.lView[Si]!==e&&(e.lView=null,EC.push(e))}var bP=ge(ee({},ga),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Qs(e.lView)},consumerOnSignalRead(){this.lView[Si]=this}});function CP(e){let t=e[Si]??Object.create(SP);return t.lView=e,t}var SP=ge(ee({},ga),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Po(e.lView);for(;t&&!DC(t[_e]);)t=Po(t);t&&sg(t)},consumerOnSignalRead(){this.lView[Si]=this}});function DC(e){return e.type!==2}function TC(e){if(e[Ol]===null)return;let t=!0;for(;t;){let n=!1;for(let i of e[Ol])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=n&&!!(e[Fe]&8192)}}var _P=100;function j2(e,t=0){let i=e[wr].rendererFactory,r=!1;r||i.begin?.();try{IP(e,t)}finally{r||i.end?.()}}function IP(e,t){let n=pg();try{fg(!0),Zg(e,t);let i=0;for(;Fl(e);){if(i===_P)throw new ce(103,!1);i++,Zg(e,1)}}finally{fg(n)}}function PC(e,t){hg(t?Vl.Exhaustive:Vl.OnlyDirtyViews);try{j2(e)}finally{hg(Vl.Off)}}function EP(e,t,n,i){if(Oo(t))return;let r=t[Fe],o=!1,a=!1;Yh(t);let s=!0,c=null,l=null;o||(DC(e)?(l=MP(t),c=ya(l)):$u()===null?(s=!1,l=CP(t),c=ya(l)):t[Si]&&(Wu(t[Si]),t[Si]=null));try{ag(t),aw(e.bindingStartIndex),n!==null&&yC(e,t,n,2,i);let u=(r&3)===3;if(!o)if(u){let p=e.preOrderCheckHooks;p!==null&&ip(t,p,null)}else{let p=e.preOrderHooks;p!==null&&rp(t,p,0,null),Sg(t,0)}if(a||DP(t),TC(t),AC(t,0),e.contentQueries!==null&&tC(e,t),!o)if(u){let p=e.contentCheckHooks;p!==null&&ip(t,p)}else{let p=e.contentHooks;p!==null&&rp(t,p,1),Sg(t,1)}PP(e,t);let d=e.components;d!==null&&OC(t,d,0);let h=e.viewQuery;if(h!==null&&$g(2,h,i),!o)if(u){let p=e.viewCheckHooks;p!==null&&ip(t,p)}else{let p=e.viewHooks;p!==null&&rp(t,p,2),Sg(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Bh]){for(let p of t[Bh])p();t[Bh]=null}o||(IC(t),t[Fe]&=-73)}catch(u){throw o||Qs(t),u}finally{l!==null&&(Rs(l,c),s&&wP(l)),Xh()}}function AC(e,t){for(let n=Cb(e);n!==null;n=Sb(n))for(let i=Sn;i<n.length;i++){let r=n[i];LC(r,t)}}function DP(e){for(let t=Cb(e);t!==null;t=Sb(t)){if(!(t[Fe]&2))continue;let n=t[Oa];for(let i=0;i<n.length;i++){let r=n[i];sg(r)}}}function TP(e,t,n){kt(18);let i=ji(t,e);LC(i,n),kt(19,i[Cn])}function LC(e,t){jh(e)&&Zg(e,t)}function Zg(e,t){let i=e[_e],r=e[Fe],o=e[Si],a=!!(t===0&&r&16);if(a||=!!(r&64&&t===0),a||=!!(r&1024),a||=!!(o?.dirty&&wl(o)),a||=!1,o&&(o.dirty=!1),e[Fe]&=-9217,a)EP(i,e,i.template,e[Cn]);else if(r&8192){let s=He(null);try{TC(e),AC(e,1);let c=i.components;c!==null&&OC(e,c,1),IC(e)}finally{He(s)}}}function OC(e,t,n){for(let i=0;i<t.length;i++)TP(e,t[i],n)}function PP(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)No(~r);else{let o=r,a=n[++i],s=n[++i];cw(a,o);let c=t[o];kt(24,c),s(2,c),kt(25,c)}}}finally{No(-1)}}function jp(e,t){let n=pg()?64:1088;for(e[wr].changeDetectionScheduler?.notify(t);e;){e[Fe]|=n;let i=Po(e);if(Ra(e)&&!i)return e;e=i}return null}function RC(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function AP(e,t){let n=Sn+t;if(n<e.length)return e[n]}function Hp(e,t,n,i=!0){let r=t[_e];if(LP(r,t,e,n),i){let a=Wg(n,e),s=t[bt],c=s.parentNode(e[Cr]);c!==null&&dP(r,e[Yn],s,t,c,a)}let o=t[Bi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function NC(e,t){let n=yp(e,t);return n!==void 0&&B2(n[_e],n),n}function yp(e,t){if(e.length<=Sn)return;let n=Sn+t,i=e[n];if(i){let r=i[Lo];r!==null&&r!==e&&V2(r,i),t>0&&(e[n-1][Vi]=i[Vi]);let o=Tl(e,Sn+t);lP(i[_e],i);let a=o[br];a!==null&&a.detachView(o[_e]),i[en]=null,i[Vi]=null,i[Fe]&=-129}return i}function LP(e,t,n,i){let r=Sn+i,o=n.length;i>0&&(n[r-1][Vi]=t),i<o-Sn?(t[Vi]=n[r],Zm(n,Sn+i,t)):(n.push(t),t[Vi]=null),t[en]=n;let a=t[Lo];a!==null&&n!==a&&FC(a,t);let s=t[br];s!==null&&s.insertView(e),Hh(t),t[Fe]|=128}function FC(e,t){let n=e[Oa],i=t[en];if(_i(i))e[Fe]|=2;else{let r=i[en][Nn];t[Nn]!==r&&(e[Fe]|=2)}n===null?e[Oa]=[t]:n.push(t)}var Fo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[_e];return Wl(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Cn]}set context(t){this._lView[Cn]=t}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[en];if(Ii(t)){let n=t[Rl],i=n?n.indexOf(this):-1;i>-1&&(yp(t,i),Tl(n,i))}this._attachedToViewContainer=!1}B2(this._lView[_e],this._lView)}onDestroy(t){cg(this._lView,t)}markForCheck(){jp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Fe]&=-129}reattach(){Hh(this._lView),this._lView[Fe]|=128}detectChanges(){this._lView[Fe]|=1024,j2(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[er].get(sP,Tw)}catch{this.exhaustive=Tw}}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Ra(this._lView),n=this._lView[Lo];n!==null&&!t&&V2(n,this._lView),xC(this._lView[_e],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=t;let n=Ra(this._lView),i=this._lView[Lo];i!==null&&!n&&FC(i,this._lView),Hh(this._lView)}};var Vo=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=OP;constructor(n,i,r){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,r){let o=Vp(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:r});return new Fo(o)}}return e})();function OP(){return H2(_n(),$e())}function H2(e,t){return e.type&4?new Vo(t,e,dc(e,t)):null}function id(e,t,n,i,r){let o=e.data[t];if(o===null)o=RP(e,t,n,i,r),sw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let a=rw();o.injectorIndex=a===null?-1:a.injectorIndex}return Ro(o,!0),o}function RP(e,t,n,i,r){let o=ug(),a=qh(),s=a?o:o&&o.parent,c=e.data[t]=FP(e,s,n,t,i,r);return NP(e,c,o,a),c}function NP(e,t,n,i){e.firstChild===null&&(e.firstChild=t),n!==null&&(i?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function FP(e,t,n,i,r,o){let a=t?t.injectorIndex:-1,s=0;return Fa()&&(s|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var VP=new RegExp(`^(\\d+)*(${Eb}|${Ib})*(.*)`);function BP(e){let t=e.match(VP),[n,i,r,o]=t,a=i?parseInt(i,10):r,s=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;s.push(l,d)}return[a,...s]}function zP(e){return!e.prev&&e.parent?.type===8}function Dg(e){return e.index-Lt}function jP(e,t){let n=e.i18nNodes;if(n)return n.get(t)}function Up(e,t,n,i){let r=Dg(i),o=jP(e,r);if(o===void 0){let a=e.data[Ab];if(a?.[r])o=UP(a[r],n);else if(t.firstChild===i)o=e.firstChild;else{let s=i.prev===null,c=i.prev??i.parent;if(zP(i)){let l=Dg(i.parent);o=qg(e,l)}else{let l=zi(c,n);if(s)o=l.firstChild;else{let u=Dg(c),d=qg(e,u);if(c.type===2&&d){let p=w2(e,u)+1;o=qp(p,d)}else o=l.nextSibling}}}}return o}function qp(e,t){let n=t;for(let i=0;i<e;i++)n=n.nextSibling;return n}function HP(e,t){let n=e;for(let i=0;i<t.length;i+=2){let r=t[i],o=t[i+1];for(let a=0;a<o;a++)switch(r){case dT:n=n.firstChild;break;case uT:n=n.nextSibling;break}}return n}function UP(e,t){let[n,...i]=BP(e),r;if(n===Ib)r=t[Nn][Zn];else if(n===Eb)r=oC(t[Nn][Zn]);else{let o=Number(n);r=Ei(t[o+Lt])}return HP(r,i)}var qP=!1;function VC(e){qP=e}function $P(e){let t=e[Bi];if(t){let{i18nNodes:n,dehydratedIcuData:i}=t;if(n&&i){let r=e[bt];for(let o of i.values())GP(r,n,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function GP(e,t,n){for(let i of n.node.cases[n.case]){let r=t.get(i.index-Lt);r&&E2(e,r,!1)}}function U2(e){let t=e[tr]??[],i=e[en][bt],r=[];for(let o of t)o.data[Lb]!==void 0?r.push(o):BC(o,i);e[tr]=r}function WP(e){let{lContainer:t}=e,n=t[tr];if(n===null)return;let r=t[en][bt];for(let o of n)BC(o,r)}function BC(e,t){let n=0,i=e.firstChild;if(i){let r=e.data[$l];for(;n<r;){let o=i.nextSibling;E2(t,i,!1),i=o,n++}}}function $p(e){U2(e);let t=e[Zn];_i(t)&&vp(t);for(let n=Sn;n<e.length;n++)vp(e[n])}function vp(e){$P(e);let t=e[_e];for(let n=Lt;n<t.bindingStartIndex;n++)if(Ii(e[n])){let i=e[n];$p(i)}else _i(e[n])&&vp(e[n])}function q2(e){let t=e._views;for(let n of t){let i=Jb(n);i!==null&&i[Zn]!==null&&(_i(i)?vp(i):$p(i))}}function ZP(e,t,n,i){e!==null&&(n.cleanup(t),$p(e.lContainer),q2(i))}function YP(e,t){let n=[];for(let i of t)for(let r=0;r<(i[m2]??1);r++){let o={data:i,firstChild:null};i[$l]>0&&(o.firstChild=e,e=qp(i[$l],e)),n.push(o)}return[e,n]}var zC=()=>null,jC=()=>null;function HC(){zC=XP,jC=JP}function XP(e,t){return UC(e,t)?e[tr].shift():(U2(e),null)}function kp(e,t){return zC(e,t)}function JP(e,t,n){if(t.tView.ssrId===null)return null;let i=kp(e,t.tView.ssrId);return n[_e].firstUpdatePass&&i===null&&QP(n,t),i}function KP(e,t,n){return jC(e,t,n)}function QP(e,t){let n=t;for(;n;){if(Aw(e,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=t.next;n&&(n.flags&512)===512;){if(Aw(e,n))return;n=n.next}}function UC(e,t){let n=e[tr];return!t||n===null||n.length===0?!1:n[0].data[Pb]===t}function Aw(e,t){let n=t.tView?.ssrId;if(n==null)return!1;let i=e[t.index];return Ii(i)&&UC(i,n)?(U2(i),!0):!1}var qC=class{},Gp=class{},Yg=class{resolveComponentFactory(t){throw new ce(917,!1)}},rd=class{static NULL=new Yg},ja=class{},Jn=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>eA()}return e})();function eA(){let e=$e(),t=_n(),n=ji(t.index,e);return(_i(n)?n:e)[bt]}var $C=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>null})}return e})();var sp={},oc=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){let r=this.injector.get(t,sp,i);return r!==sp||n===sp?r:this.parentInjector.get(t,n,i)}};function Xg(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let s=t[a];if(typeof s=="number")o=s;else if(o==1)r=Ph(r,s);else if(o==2){let c=s,l=t[++a];i=Ph(i,c+": "+l+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function G(e,t=0){let n=$e();if(n===null)return se(e,t);let i=_n();return gb(i,n,bn(e),t)}function $2(){let e="invalid";throw new Error(e)}function G2(e,t,n,i,r){let o=i===null?null:{"":-1},a=r(e,n);if(a!==null){let s=a,c=null,l=null;for(let u of a)if(u.resolveHostDirectives!==null){[s,c,l]=u.resolveHostDirectives(a);break}iA(e,t,n,s,o,c,l)}o!==null&&i!==null&&tA(n,i,o)}function tA(e,t,n){let i=e.localNames=[];for(let r=0;r<t.length;r+=2){let o=n[t[r+1]];if(o==null)throw new ce(-301,!1);i.push(t[r],o)}}function nA(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function iA(e,t,n,i,r,o,a){let s=i.length,c=!1;for(let h=0;h<s;h++){let p=i[h];!c&&Sr(p)&&(c=!0,nA(e,n,h)),Bg(hp(n,t),e,p.type)}lA(n,e.data.length,s);for(let h=0;h<s;h++){let p=i[h];p.providersResolver&&p.providersResolver(p)}let l=!1,u=!1,d=mC(e,t,s,null);s>0&&(n.directiveToIndex=new Map);for(let h=0;h<s;h++){let p=i[h];if(n.mergedAttrs=sc(n.mergedAttrs,p.hostAttrs),oA(e,n,t,d,p),cA(d,p,r),a!==null&&a.has(p)){let[g,b]=a.get(p);n.directiveToIndex.set(p.type,[d,g+n.directiveStart,b+n.directiveStart])}else(o===null||!o.has(p))&&n.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let f=p.type.prototype;!l&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}rA(e,n,o)}function rA(e,t,n){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=e.data[i];if(n===null||!n.has(r))Lw(0,t,r,i),Lw(1,t,r,i),Rw(t,i,!1);else{let o=n.get(r);Ow(0,t,o,i),Ow(1,t,o,i),Rw(t,i,!0)}}}function Lw(e,t,n,i){let r=e===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a;e===0?a=t.inputs??={}:a=t.outputs??={},a[o]??=[],a[o].push(i),GC(t,o)}}function Ow(e,t,n,i){let r=e===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a=r[o],s;e===0?s=t.hostDirectiveInputs??={}:s=t.hostDirectiveOutputs??={},s[a]??=[],s[a].push(i,o),GC(t,a)}}function GC(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Rw(e,t,n){let{attrs:i,inputs:r,hostDirectiveInputs:o}=e;if(i===null||!n&&r===null||n&&o===null||_2(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let a=null,s=0;for(;s<i.length;){let c=i[s];if(c===0){s+=4;continue}else if(c===5){s+=2;continue}else if(typeof c=="number")break;if(!n&&r.hasOwnProperty(c)){let l=r[c];for(let u of l)if(u===t){a??=[],a.push(c,i[s+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){a??=[],a.push(l[u+1],i[s+1]);break}}s+=2}e.initialInputs??=[],e.initialInputs.push(a)}function oA(e,t,n,i,r){e.data[i]=r;let o=r.factory||(r.factory=Sa(r.type,!0)),a=new za(o,Sr(r),G);e.blueprint[i]=a,n[i]=a,aA(e,t,i,mC(e,n,r.hostVars,Xn),r)}function aA(e,t,n,i,r){let o=r.hostBindings;if(o){let a=e.hostBindingOpCodes;a===null&&(a=e.hostBindingOpCodes=[]);let s=~t.index;sA(a)!=s&&a.push(s),a.push(n,i,o)}}function sA(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function cA(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Sr(t)&&(n[""]=e)}}function lA(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function WC(e,t,n,i,r,o,a,s){let c=t.consts,l=Qr(c,a),u=id(t,e,2,i,l);return o&&G2(t,n,u,Qr(c,s),r),u.mergedAttrs=sc(u.mergedAttrs,u.attrs),u.attrs!==null&&Xg(u,u.attrs,!1),u.mergedAttrs!==null&&Xg(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function ZC(e,t){u2(e,t),zh(t)&&e.queries.elementEnd(t)}function W2(e){return XC(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function YC(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function XC(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Wp(e,t,n){return e[t]=n}function JC(e,t){return e[t]}function or(e,t,n){if(n===Xn)return!1;let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function Mp(e,t,n,i){let r=or(e,t,n);return or(e,t+1,i)||r}function KC(e,t,n,i,r){let o=Mp(e,t,n,i);return or(e,t+2,r)||o}function dA(e,t,n,i,r,o){let a=Mp(e,t,n,i);return Mp(e,t+2,r,o)||a}function Tg(e,t,n){return function i(r){let o=Kr(e)?ji(e.index,t):t;jp(o,5);let a=t[Cn],s=Nw(t,a,n,r),c=i.__ngNextListenerFn__;for(;c;)s=Nw(t,a,c,r)&&s,c=c.__ngNextListenerFn__;return s}}function Nw(e,t,n,i){let r=He(null);try{return kt(6,t,n),n(i)!==!1}catch(o){return O2(e,o),!1}finally{kt(7,t,n),He(r)}}function uA(e,t,n,i,r,o,a,s){let c=Nl(e),l=!1,u=null;if(!i&&c&&(u=hA(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=a,u.__ngLastListenerFn__=a,l=!0}else{let d=zi(e,n),h=i?i(d):d;hT(n,h,o,s);let p=r.listen(h,o,s),f=i?g=>i(Ei(g[e.index])):e.index;QC(f,t,n,o,s,p,!1)}return l}function hA(e,t,n,i){let r=e.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===n&&r[o+1]===i){let s=t[Js],c=r[o+2];return s&&s.length>c?s[c]:null}typeof a=="string"&&(o+=2)}return null}function QC(e,t,n,i,r,o,a){let s=t.firstCreatePass?dg(t):null,c=lg(n),l=c.length;c.push(r,o),s&&s.push(i,e,l,(l+1)*(a?-1:1))}function Fw(e,t,n,i,r,o){let a=t[n],s=t[_e],l=s.data[n].outputs[i],d=a[l].subscribe(o);QC(e.index,s,t,r,o,d,!0)}var Jg=Symbol("BINDING");var xp=class extends rd{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=xr(t);return new Ha(n,this.ngModule)}};function pA(e){return Object.keys(e).map(t=>{let[n,i,r]=e[t],o={propName:n,templateName:t,isSignal:(i&Np.SignalBased)!==0};return r&&(o.transform=r),o})}function fA(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function mA(e,t,n){let i=t instanceof jt?t:t?.injector;return i&&e.getStandaloneInjector!==null&&(i=e.getStandaloneInjector(i)||i),i?new oc(n,i):n}function gA(e){let t=e.get(ja,null);if(t===null)throw new ce(407,!1);let n=e.get($C,null),i=e.get(Jr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function yA(e,t){let n=(e.selectors[0][0]||"div").toLowerCase();return I2(t,n,n==="svg"?$x:n==="math"?Gx:null)}var Ha=class extends Gp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=pA(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=fA(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=VT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,i,r,o,a){kt(22);let s=He(null);try{let c=this.componentDef,l=vA(i,c,a,o),u=mA(c,r||this.ngModule,t),d=gA(u),h=d.rendererFactory.createRenderer(null,c),p=i?GT(h,i,c.encapsulation,u):yA(c,h),f=a?.some(Vw)||o?.some(x=>typeof x!="function"&&x.bindings.some(Vw)),g=T2(null,l,null,512|fC(c),null,null,d,h,u,null,Xb(p,u,!0));g[Lt]=p,Yh(g);let b=null;try{let x=WC(Lt,l,g,"#host",()=>l.directiveRegistry,!0,0);p&&(pC(h,p,x),uc(p,g)),Fp(l,g,x),b2(l,x,g),ZC(l,x),n!==void 0&&MA(x,this.ngContentSelectors,n),b=ji(x.index,g),g[Cn]=b[Cn],N2(l,g,null)}catch(x){throw b!==null&&jg(b),jg(g),x}finally{kt(23),Xh()}return new wp(this.componentType,g,!!f)}finally{He(s)}}};function vA(e,t,n,i){let r=e?["ng-version","20.0.2"]:BT(t.selectors[0]),o=null,a=null,s=0;if(n)for(let u of n)s+=u[Jg].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(a??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let h of d.bindings){s+=h[Jg].requiredVars;let p=u+1;h.create&&(h.targetIdx=p,(o??=[]).push(h)),h.update&&(h.targetIdx=p,(a??=[]).push(h))}}let c=[t];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,h=Fh(d);c.push(h)}return D2(0,null,kA(o,a),1,s,c,null,null,null,[r],null)}function kA(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let i of e)i.create();if(n&2&&t)for(let i of t)i.update()}}function Vw(e){let t=e[Jg].kind;return t==="input"||t==="twoWay"}var wp=class extends qC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=Na(n[_e],Lt),this.location=dc(this._tNode,n),this.instance=ji(this._tNode.index,n)[Cn],this.hostView=this.changeDetectorRef=new Fo(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView,o=R2(i,r[_e],r,t,n);this.previousInputValues.set(t,n);let a=ji(i.index,r);jp(a,1)}get injector(){return new Ba(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function MA(e,t,n){let i=e.projection=[];for(let r=0;r<t.length;r++){let o=n[r];i.push(o!=null&&o.length?Array.from(o):null)}}var sr=(()=>{class e{static __NG_ELEMENT_ID__=xA}return e})();function xA(){let e=_n();return t4(e,$e())}var wA=sr,e4=class extends wA{_lContainer;_hostTNode;_hostLView;constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return dc(this._hostTNode,this._hostLView)}get injector(){return new Ba(this._hostTNode,this._hostLView)}get parentInjector(){let t=h2(this._hostTNode,this._hostLView);if(db(t)){let n=up(t,this._hostLView),i=dp(t),r=n[_e].data[i+8];return new Ba(r,n)}else return new Ba(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Bw(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Sn}createEmbeddedView(t,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=kp(this._lContainer,t.ssrId),s=t.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,r,Gl(this._hostTNode,a)),s}createComponent(t,n,i,r,o,a,s){let c=t&&!RD(t),l;if(c)l=n;else{let b=n||{};l=b.index,i=b.injector,r=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef,a=b.directives,s=b.bindings}let u=c?t:new Ha(xr(t)),d=i||this.parentInjector;if(!o&&u.ngModule==null){let x=(c?d:this.parentInjector).get(jt,null);x&&(o=x)}let h=xr(u.componentType??{}),p=kp(this._lContainer,h?.id??null),f=p?.firstChild??null,g=u.create(d,r,f,o,a,s);return this.insertImpl(g.hostView,l,Gl(this._hostTNode,p)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let r=t._lView;if(Zx(r)){let s=this.indexOf(t);if(s!==-1)this.detach(s);else{let c=r[en],l=new e4(c,c[Yn],c[en]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),a=this._lContainer;return Hp(a,r,o,i),t.attachToViewContainerRef(),Zm(Pg(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Bw(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=yp(this._lContainer,n);i&&(Tl(Pg(this._lContainer),n),B2(i[_e],i))}detach(t){let n=this._adjustIndex(t,-1),i=yp(this._lContainer,n);return i&&Tl(Pg(this._lContainer),n)!=null?new Fo(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function Bw(e){return e[Rl]}function Pg(e){return e[Rl]||(e[Rl]=[])}function t4(e,t){let n,i=t[e.index];return Ii(i)?n=i:(n=RC(i,t,null,e),t[e.index]=n,P2(t,n)),n4(n,t,e,i),new e4(n,e,t)}function bA(e,t){let n=e[bt],i=n.createComment(""),r=zi(t,e),o=n.parentNode(r);return gp(n,o,i,n.nextSibling(r),!1),i}var n4=i4,Z2=()=>!1;function CA(e,t,n){return Z2(e,t,n)}function i4(e,t,n,i){if(e[Cr])return;let r;n.type&8?r=Ei(i):r=bA(t,n),e[Cr]=r}function SA(e,t,n){if(e[Cr]&&e[tr])return!0;let i=n[Bi],r=t.index-Lt;if(!i||wb(t)||td(i,r))return!1;let a=qg(i,r),s=i.data[Ap]?.[r],[c,l]=YP(a,s);return e[Cr]=c,e[tr]=l,!0}function _A(e,t,n,i){Z2(e,n,t)||i4(e,t,n,i)}function r4(){n4=_A,Z2=SA}var Kg=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Qg=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];r.push(s.clone())}return new e(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Y2(t,n).matches!==null&&this.queries[n].setDirty()}},e2=class{flags;read;predicate;constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=OA(t):this.predicate=t}},t2=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},n2=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,n,IA(n,o)),this.matchTNodeWithReadOption(t,n,op(n,t,o,!1,!1))}else i===Vo?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,op(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ln||r===sr||r===Vo&&n.type&4)this.addMatch(n.index,-2);else{let o=op(n,t,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function IA(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function EA(e,t){return e.type&11?dc(e,t):e.type&4?H2(e,t):null}function DA(e,t,n,i){return n===-1?EA(t,e):n===-2?TA(e,t,i):ql(e,e[_e],n,t)}function TA(e,t,n){if(n===ln)return dc(t,e);if(n===Vo)return H2(t,e);if(n===sr)return t4(t,e)}function o4(e,t,n,i){let r=t[br].queries[i];if(r.matches===null){let o=e.data,a=n.matches,s=[];for(let c=0;a!==null&&c<a.length;c+=2){let l=a[c];if(l<0)s.push(null);else{let u=o[l];s.push(DA(t,u,a[c+1],n.metadata.read))}}r.matches=s}return r.matches}function i2(e,t,n,i){let r=e.queries.getByIndex(n),o=r.matches;if(o!==null){let a=o4(e,t,r,n);for(let s=0;s<o.length;s+=2){let c=o[s];if(c>0)i.push(a[s/2]);else{let l=o[s+1],u=t[-c];for(let d=Sn;d<u.length;d++){let h=u[d];h[Lo]===h[en]&&i2(h[_e],h,l,i)}if(u[Oa]!==null){let d=u[Oa];for(let h=0;h<d.length;h++){let p=d[h];i2(p[_e],p,l,i)}}}}}return i}function PA(e,t){return e[br].queries[t].queryList}function AA(e,t,n){let i=new pp((n&4)===4);return Jx(e,t,i,i.destroy),(t[br]??=new Qg).queries.push(new Kg(i))-1}function LA(e,t,n){let i=Ht();return i.firstCreatePass&&(RA(i,new e2(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),AA(i,$e(),t)}function OA(e){return e.split(",").map(t=>t.trim())}function RA(e,t,n){e.queries===null&&(e.queries=new t2),e.queries.track(new n2(t,n))}function Y2(e,t){return e.queries.getByIndex(t)}function NA(e,t){let n=e[_e],i=Y2(n,t);return i.crossesNgTemplate?i2(n,e,t,[]):o4(n,e,i,t)}var zw=new Set;function di(e){zw.has(e)||(zw.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Ua=class{},Zp=class{};var bp=class extends Ua{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xp(this);constructor(t,n,i,r=!0){super(),this.ngModuleType=t,this._parent=n;let o=Jm(t);this._bootstrapComponents=aC(o.bootstrap),this._r3Injector=kg(t,n,[{provide:Ua,useValue:this},{provide:rd,useValue:this.componentFactoryResolver},...i],ci(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Cp=class extends Zp{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new bp(this.moduleType,t,[])}};var Zl=class extends Ua{injector;componentFactoryResolver=new xp(this);instance=null;constructor(t){super();let n=new Ia([...t.providers,{provide:Ua,useValue:this},{provide:rd,useValue:this.componentFactoryResolver}],t.parent||Al(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Wa(e,t,n=null){return new Zl({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var FA=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=Vh(!1,n.type),r=i.length>0?Wa([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:e,providedIn:"environment",factory:()=>new e(se(jt))})}return e})();function Se(e){return lc(()=>{let t=a4(e),n=ge(ee({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===p2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(FA).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||io.Emulated,styles:e.styles||Gn,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&di("NgStandalone"),s4(n);let i=e.dependencies;return n.directiveDefs=jw(i,!1),n.pipeDefs=jw(i,!0),n.id=HA(n),n})}function VA(e){return xr(e)||Fh(e)}function BA(e){return e!==null}function En(e){return lc(()=>({type:e.type,bootstrap:e.bootstrap||Gn,declarations:e.declarations||Gn,imports:e.imports||Gn,exports:e.exports||Gn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function zA(e,t){if(e==null)return Ao;let n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],o,a,s,c;Array.isArray(r)?(s=r[0],o=r[1],a=r[2]??o,c=r[3]||null):(o=r,a=r,s=Np.None,c=null),n[o]=[i,s,c],t[o]=a}return n}function jA(e){if(e==null)return Ao;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function St(e){return lc(()=>{let t=a4(e);return s4(t),t})}function a4(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Ao,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Gn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zA(e.inputs,t),outputs:jA(e.outputs),debugInfo:null}}function s4(e){e.features?.forEach(t=>t(e))}function jw(e,t){if(!e)return null;let n=t?Km:VA;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(BA)}function HA(e){let t=0,n=typeof e.consts=="function"?"":e.consts,i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of i.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function UA(e){return Object.getPrototypeOf(e.prototype).constructor}function Fn(e){let t=UA(e.type),n=!0,i=[e];for(;t;){let r;if(Sr(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ce(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);let a=e;a.inputs=Ag(e.inputs),a.declaredInputs=Ag(e.declaredInputs),a.outputs=Ag(e.outputs);let s=r.hostBindings;s&&ZA(e,s);let c=r.viewQuery,l=r.contentQueries;if(c&&GA(e,c),l&&WA(e,l),qA(e,r),Ax(e.outputs,r.outputs),Sr(r)&&r.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(e),s===Fn&&(n=!1)}}t=Object.getPrototypeOf(t)}$A(i)}function qA(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n])}}function $A(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=sc(r.hostAttrs,n=sc(n,r.hostAttrs))}}function Ag(e){return e===Ao?{}:e===Gn?[]:e}function GA(e,t){let n=e.viewQuery;n?e.viewQuery=(i,r)=>{t(i,r),n(i,r)}:e.viewQuery=t}function WA(e,t){let n=e.contentQueries;n?e.contentQueries=(i,r,o)=>{t(i,r,o),n(i,r,o)}:e.contentQueries=t}function ZA(e,t){let n=e.hostBindings;n?e.hostBindings=(i,r)=>{t(i,r),n(i,r)}:e.hostBindings=t}function YA(e,t,n,i,r,o,a,s,c){let l=t.consts,u=id(t,e,4,a||null,s||null);Uh()&&G2(t,n,u,Qr(l,c),L2),u.mergedAttrs=sc(u.mergedAttrs,u.attrs),u2(t,u);let d=u.tView=D2(2,u,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function Yp(e,t,n,i,r,o,a,s,c,l,u){let d=n+Lt,h=t.firstCreatePass?YA(d,t,e,i,r,o,a,s,l):t.data[d];c&&(h.flags|=c),Ro(h,!1);let p=c4(t,e,h,n);zl()&&Bp(t,e,p,h),uc(p,e);let f=RC(p,e,p,h);return e[d]=f,P2(e,f),CA(f,h,e),Nl(h)&&Fp(t,e,h),l!=null&&A2(e,h,u),h}function ne(e,t,n,i,r,o,a,s){let c=$e(),l=Ht(),u=Qr(l.consts,o);return Yp(c,l,e,t,n,i,r,u,void 0,a,s),ne}var c4=l4;function l4(e,t,n,i){return to(!0),t[bt].createComment("")}function XA(e,t,n,i){let r=t[Bi],o=!r||Fa()||Bo(n)||td(r,i);if(to(o),o)return l4(e,t);let a=r.data[Tb]?.[i]??null;a!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=a);let s=Up(r,e,t,n);Op(r,i,s);let c=w2(r,i);return qp(c,s)}function d4(){c4=XA}var Di=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.COMPLETE=2]="COMPLETE",e[e.FAILED=3]="FAILED",e}(Di||{}),Hw=0,JA=1,nn=function(e){return e[e.Placeholder=0]="Placeholder",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete",e[e.Error=3]="Error",e}(nn||{});var KA=0,od=1;var QA=4,e7=5;var t7=7,ac=8,n7=9,X2=function(e){return e[e.Manual=0]="Manual",e[e.Playthrough=1]="Playthrough",e}(X2||{});function cp(e,t){let n=r7(e),i=t[n];if(i!==null){for(let r of i)r();t[n]=null}}function i7(e){cp(1,e),cp(0,e),cp(2,e)}function r7(e){let t=QA;return e===1?t=e7:e===2&&(t=n7),t}var Xp=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(Xp||{}),Za=new ae(""),u4=!1,r2=class extends Qt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,tg()&&(this.destroyRef=X(no,{optional:!0})??void 0,this.pendingTasks=X(_r,{optional:!0})??void 0)}emit(t){let n=He(null);try{super.next(t)}finally{He(n)}}subscribe(t,n,i){let r=t,o=n||(()=>null),a=i;if(t&&typeof t=="object"){let c=t;r=c.next?.bind(c),o=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let s=super.subscribe({next:r,error:o,complete:a});return t instanceof Bt&&t.add(s),s}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Ve=r2;function h4(e){let t,n;function i(){e=jl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function Uw(e){return queueMicrotask(()=>e()),()=>{e=jl}}var J2="isAngularZone",Sp=J2+"_ID",o7=0,Ct=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ve(!1);onMicrotaskEmpty=new Ve(!1);onStable=new Ve(!1);onError=new Ve(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=u4}=t;if(typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,c7(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(J2)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ce(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,t,a7,jl,jl);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},a7={};function K2(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function s7(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){h4(()=>{e.callbackScheduled=!1,o2(e),e.isCheckStableRunning=!0,K2(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),o2(e)}function c7(e){let t=()=>{s7(e)},n=o7++;e._inner=e._inner.fork({name:"angular",properties:{[J2]:!0,[Sp]:n,[Sp+n]:!0},onInvokeTask:(i,r,o,a,s,c)=>{if(l7(c))return i.invokeTask(o,a,s,c);try{return qw(e),i.invokeTask(o,a,s,c)}finally{(e.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),$w(e)}},onInvoke:(i,r,o,a,s,c,l)=>{try{return qw(e),i.invoke(o,a,s,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!d7(c)&&t(),$w(e)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(e._hasPendingMicrotasks=a.microTask,o2(e),K2(e)):a.change=="macroTask"&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}function o2(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function qw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function $w(e){e._nesting--,K2(e)}var _p=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ve;onMicrotaskEmpty=new Ve;onStable=new Ve;onError=new Ve;run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}};function l7(e){return p4(e,"__ignore_ng_zone__")}function d7(e){return p4(e,"__scheduler_tick__")}function p4(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Q2=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),f4=[0,1,2,3],m4=(()=>{class e{ngZone=X(Ct);scheduler=X(Jr);errorHandler=X(Ji,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){X(Za,{optional:!0})}execute(){let n=this.sequences.size>0;n&&kt(16),this.executing=!0;for(let i of f4)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&kt(17)}register(n){let{view:i}=n;i!==void 0?((i[La]??=[]).push(n),Qs(i),i[Fe]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,i){return i?i.run(Xp.AFTER_NEXT_RENDER,n):n()}static \u0275prov=re({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ip=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,i,r,o,a=null){this.impl=t,this.hooks=n,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[La];t&&(this.view[La]=t.filter(n=>n!==this))}};function ad(e,t){!t?.injector&&ng(ad);let n=t?.injector??X(On);return di("NgAfterNextRender"),h7(e,n,t,!0)}function u7(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function h7(e,t,n,i){let r=t.get(Q2);r.impl??=t.get(m4);let o=t.get(Za,null,{optional:!0}),a=n?.manualCleanup!==!0?t.get(no):null,s=t.get(Kh,null,{optional:!0}),c=new Ip(r.impl,u7(e),s?.view,i,a,o?.snapshot(null));return r.impl.register(c),c}function g4(e){return e+1}function hc(e,t){let n=e[_e],i=g4(t.index);return e[i]}function sd(e,t){let n=g4(t.index);return e.data[n]}function p7(e,t,n){let i=t[_e],r=sd(i,n);switch(e){case nn.Complete:return r.primaryTmplIndex;case nn.Loading:return r.loadingTmplIndex;case nn.Error:return r.errorTmplIndex;case nn.Placeholder:return r.placeholderTmplIndex;default:return null}}function Gw(e,t){return t===nn.Placeholder?e.placeholderBlockConfig?.[Hw]??null:t===nn.Loading?e.loadingBlockConfig?.[Hw]??null:null}function f7(e){return e.loadingBlockConfig?.[JA]??null}function Ww(e,t){if(!e||e.length===0)return t;let n=new Set(e);for(let i of t)n.add(i);return e.length===n.size?e:Array.from(n)}function m7(e,t){let n=t.primaryTmplIndex+Lt;return Na(e,n)}var g7=(()=>{class e{cachedInjectors=new Map;getOrCreateInjector(n,i,r,o){if(!this.cachedInjectors.has(n)){let a=r.length>0?Wa(r,i,o):null;this.cachedInjectors.set(n,a)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:e,providedIn:"environment",factory:()=>new e})}return e})();var y4=new ae("");function Lg(e,t,n){return e.get(g7).getOrCreateInjector(t,e,n,"")}function y7(e,t,n){if(e instanceof oc){let r=e.injector,o=e.parentInjector,a=Lg(o,t,n);return new oc(r,a)}let i=e.get(jt);if(i!==e){let r=Lg(i,t,n);return new oc(e,r)}return Lg(e,t,n)}function Va(e,t,n,i=!1){let r=n[en],o=r[_e];if(Oo(r))return;let a=hc(r,t),s=a[od],c=a[t7];if(!(c!==null&&e<c)&&Zw(s,e)&&Zw(a[KA]??-1,e)){let l=sd(o,t),d=!i&&!0&&(f7(l)!==null||Gw(l,nn.Loading)!==null||Gw(l,nn.Placeholder))?M7:k7;try{d(e,a,n,t,r)}catch(h){O2(r,h)}}}function v7(e,t){let n=e[tr]?.findIndex(r=>r.data[Ob]===t[od])??-1;return{dehydratedView:n>-1?e[tr][n]:null,dehydratedViewIx:n}}function k7(e,t,n,i,r){kt(20);let o=p7(e,r,i);if(o!==null){t[od]=e;let a=r[_e],s=o+Lt,c=Na(a,s),l=0;NC(n,l);let u;if(e===nn.Complete){let f=sd(a,i),g=f.providers;g&&g.length>0&&(u=y7(r[er],f,g))}let{dehydratedView:d,dehydratedViewIx:h}=v7(n,t),p=Vp(r,c,null,{injector:u,dehydratedView:d});if(Hp(n,p,l,Gl(c,d)),jp(p,2),h>-1&&n[tr]?.splice(h,1),(e===nn.Complete||e===nn.Error)&&Array.isArray(t[ac])){for(let f of t[ac])f();t[ac]=null}}kt(21)}function Zw(e,t){return e<t}function Yw(e,t,n){e.loadingPromise.then(()=>{e.loadingState===Di.COMPLETE?Va(nn.Complete,t,n):e.loadingState===Di.FAILED&&Va(nn.Error,t,n)})}var M7=null;var Jp=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var ey=new ae("");function zo(e){return!!e&&typeof e.then=="function"}function ty(e){return!!e&&typeof e.subscribe=="function"}var ny=new ae("");function Kp(e){return Qi([{provide:ny,multi:!0,useValue:e}])}var iy=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=X(ny,{optional:!0})??[];injector=X(On);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=Rn(this.injector,r);if(zo(o))n.push(o);else if(ty(o)){let a=new Promise((s,c)=>{o.subscribe({complete:s,error:c})});n.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),oo=new ae("");function v4(){om(()=>{let e="";throw new ce(600,e)})}function k4(e){return e.isBoundToModule}var x7=10;var ui=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=X(li);afterRenderManager=X(Q2);zonelessEnabled=X(tc);rootEffectScheduler=X(Cg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=X(_r);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ae(n=>!n))}constructor(){X(Za,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=X(jt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,r=On.NULL){return this._injector.get(Ct).run(()=>{kt(10);let a=n instanceof Gp;if(!this._injector.get(iy).done){let f="";throw new ce(405,f)}let c;a?c=n:c=this._injector.get(rd).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=k4(c)?void 0:this._injector.get(Ua),u=i||c.selector,d=c.create(r,[],u,l),h=d.location.nativeElement,p=d.injector.get(ey,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Ul(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),kt(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){kt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Xp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ce(101,!1);let n=He(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,He(n),this.afterTick.next(),kt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ja,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<x7;)kt(14),this.synchronizeOnce(),kt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!Fl(r))continue;let o=i&&!this.zonelessEnabled?0:1;j2(r,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Fl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;Ul(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(oo,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ul(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ce(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ul(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function M4(e,t,n){let i=t[er],r=t[_e];if(e.loadingState!==Di.NOT_STARTED)return e.loadingPromise??Promise.resolve();let o=hc(t,n),a=m7(r,e);e.loadingState=Di.IN_PROGRESS,cp(1,o);let s=e.dependencyResolverFn,c=i.get(nc).add();return s?(e.loadingPromise=Promise.allSettled(s()).then(l=>{let u=!1,d=[],h=[];for(let p of l)if(p.status==="fulfilled"){let f=p.value,g=xr(f)||Fh(f);if(g)d.push(g);else{let b=Km(f);b&&h.push(b)}}else{u=!0;break}if(u){if(e.loadingState=Di.FAILED,e.errorTmplIndex===null){let p="",f=new ce(-750,!1);O2(t,f)}}else{e.loadingState=Di.COMPLETE;let p=a.tView;if(d.length>0){p.directiveRegistry=Ww(p.directiveRegistry,d);let f=d.map(b=>b.type),g=Vh(!1,...f);e.providers=g}h.length>0&&(p.pipeRegistry=Ww(p.pipeRegistry,h))}}),e.loadingPromise.finally(()=>{e.loadingPromise=null,c()})):(e.loadingPromise=Promise.resolve().then(()=>{e.loadingPromise=null,e.loadingState=Di.COMPLETE,c()}),e.loadingPromise)}function w7(e,t){return t[er].get(y4,null,{optional:!0})?.behavior!==X2.Manual}function b7(e,t,n){let i=t[_e],r=t[n.index];if(!w7(e,t))return;let o=hc(t,n),a=sd(i,n);switch(i7(o),a.loadingState){case Di.NOT_STARTED:Va(nn.Loading,n,r),M4(a,t,n),a.loadingState===Di.IN_PROGRESS&&Yw(a,n,r);break;case Di.IN_PROGRESS:Va(nn.Loading,n,r),Yw(a,n,r);break;case Di.COMPLETE:Va(nn.Complete,n,r);break;case Di.FAILED:Va(nn.Error,n,r);break;default:}}function x4(e,t,n){return qn(this,null,function*(){let i=e.get(Lp);if(i.hydrating.has(t))return;let{parentBlockPromise:o,hydrationQueue:a}=MT(t,e);if(a.length===0)return;o!==null&&a.shift(),_7(i,a),o!==null&&(yield o);let s=a[0];i.has(s)?yield Xw(e,a,n):i.awaitParentBlock(s,()=>qn(null,null,function*(){return yield Xw(e,a,n)}))})}function Xw(e,t,n){return qn(this,null,function*(){let i=e.get(Lp),r=i.hydrating,o=e.get(_r),a=o.add();for(let c=0;c<t.length;c++){let l=t[c],u=i.get(l);if(u!=null){if(yield E7(u),yield I7(e),C7(u)){WP(u),Jw(t.slice(c),i);break}r.get(l).resolve()}else{S7(c,t,i),Jw(t.slice(c),i);break}}let s=t[t.length-1];yield r.get(s)?.promise,o.remove(a),n&&n(t),ZP(i.get(s),t,i,e.get(ui))})}function C7(e){return hc(e.lView,e.tNode)[od]===nn.Error}function S7(e,t,n){let i=e-1,r=i>-1?n.get(t[i]):null;r&&$p(r.lContainer)}function Jw(e,t){let n=t.hydrating;for(let i in e)n.get(i)?.reject();t.cleanup(e)}function _7(e,t){for(let n of t)e.hydrating.set(n,Promise.withResolvers())}function I7(e){return new Promise(t=>ad(t,{injector:e}))}function E7(e){return qn(this,null,function*(){let{tNode:t,lView:n}=e,i=hc(n,t);return new Promise(r=>{D7(i,r),b7(2,n,t)})})}function D7(e,t){Array.isArray(e[ac])||(e[ac]=[]),e[ac].push(t)}function ao(e,t,n,i){let r=$e(),o=ec();if(or(r,o,t)){let a=Ht(),s=Jh();tP(s,r,e,t,n,i)}return ao}function cd(e,t,n,i,r,o,a,s){di("NgControlFlow");let c=$e(),l=Ht(),u=Qr(l.consts,o);return Yp(c,l,e,t,n,i,r,u,256,a,s),ry}function ry(e,t,n,i,r,o,a,s){di("NgControlFlow");let c=$e(),l=Ht(),u=Qr(l.consts,o);return Yp(c,l,e,t,n,i,r,u,512,a,s),ry}function ld(e,t){di("NgControlFlow");let n=$e(),i=ec(),r=n[i]!==Xn?n[i]:-1,o=r!==-1?Kw(n,Lt+r):void 0,a=0;if(or(n,i,e)){let s=He(null);try{if(o!==void 0&&NC(o,a),e!==-1){let c=Lt+e,l=Kw(n,c),u=T7(n[_e],c),d=KP(l,u,n),h=Vp(n,u,t,{dehydratedView:d});Hp(l,h,a,Gl(u,d))}}finally{He(s)}}else if(o!==void 0){let s=AP(o,a);s!==void 0&&(s[Cn]=t)}}function Kw(e,t){return e[t]}function T7(e,t){return Na(e,t)}function A(e,t,n){let i=$e(),r=ec();if(or(i,r,t)){let o=Ht(),a=Jh();MC(a,i,e,t,i[bt],n)}return A}function a2(e,t,n,i,r){R2(t,e,n,r?"class":"style",i)}function y(e,t,n,i){let r=$e(),o=Ht(),a=Lt+e,s=r[bt],c=o.firstCreatePass?WC(a,o,r,t,L2,Uh(),n,i):o.data[a],l=w4(o,r,c,s,t,e);r[a]=l;let u=Nl(c);return Ro(c,!0),pC(s,l,c),!Bo(c)&&zl()&&Bp(o,r,l,c),(Kx()===0||u)&&uc(l,r),Qx(),u&&(Fp(o,r,c),b2(o,c,r)),i!==null&&A2(r,c),y}function v(){let e=_n();qh()?$h():(e=e.parent,Ro(e,!1));let t=e;tw(t)&&iw(),ew();let n=Ht();return n.firstCreatePass&&ZC(n,t),t.classesWithoutHost!=null&&jD(t)&&a2(n,t,$e(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&HD(t)&&a2(n,t,$e(),t.stylesWithoutHost,!1),v}function Z(e,t,n,i){return y(e,t,n,i),v(),Z}var w4=(e,t,n,i,r,o)=>(to(!0),I2(i,r,vg()));function P7(e,t,n,i,r,o){let a=t[Bi],s=!a||Fa()||Bo(n)||td(a,o);if(to(s),s)return I2(i,r,vg());let c=Up(a,e,t,n);return Qb(a,o)&&Op(a,o,c.nextSibling),a&&(Mb(n)||xb(c))&&Kr(n)&&(nw(n),hC(c)),c}function b4(){w4=P7}function A7(e,t,n,i,r){let o=t.consts,a=Qr(o,i),s=id(t,e,8,"ng-container",a);a!==null&&Xg(s,a,!0);let c=Qr(o,r);return Uh()&&G2(t,n,s,c,L2),s.mergedAttrs=sc(s.mergedAttrs,s.attrs),t.queries!==null&&t.queries.elementStart(t,s),s}function so(e,t,n){let i=$e(),r=Ht(),o=e+Lt,a=r.firstCreatePass?A7(o,r,i,t,n):r.data[o];Ro(a,!0);let s=C4(r,i,a,e);return i[o]=s,zl()&&Bp(r,i,s,a),uc(s,i),Nl(a)&&(Fp(r,i,a),b2(r,a,i)),n!=null&&A2(i,a),so}function co(){let e=_n(),t=Ht();return qh()?$h():(e=e.parent,Ro(e,!1)),t.firstCreatePass&&(u2(t,e),zh(e)&&t.queries.elementEnd(e)),co}var C4=(e,t,n,i)=>(to(!0),dC(t[bt],""));function L7(e,t,n,i){let r,o=t[Bi],a=!o||Fa()||td(o,i)||Bo(n);if(to(a),a)return dC(t[bt],"");let s=Up(o,e,t,n),c=vT(o,i);return Op(o,i,s),r=qp(c,s),r}function S4(){C4=L7}function le(){return $e()}var dd="en-US";var O7=dd;function _4(e){typeof e=="string"&&(O7=e.toLowerCase().replace(/_/g,"-"))}function q(e,t,n){let i=$e(),r=Ht(),o=_n();return I4(r,i,i[bt],o,e,t,n),q}function I4(e,t,n,i,r,o,a){let s=!0,c=null;if((i.type&3||a)&&(c??=Tg(i,t,o),uA(i,e,t,a,n,r,o,c)&&(s=!1)),s){let l=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],p=u[d+1];c??=Tg(i,t,o),Fw(i,t,h,p,r,c)}if(l&&l.length)for(let d of l)c??=Tg(i,t,o),Fw(i,t,d,r,r,c)}}function V(e=1){return fw(e)}function R7(e,t){let n=null,i=LT(e);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){n=r;continue}if(i===null?cC(e,o,!0):NT(i,o))return r}return n}function oy(e){let t=$e()[Nn][Yn];if(!t.projection){let n=e?e.length:1,i=t.projection=Vx(n,null),r=i.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let a=e?R7(o,e):0;a!==null&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o)}o=o.next}}}function ay(e,t=0,n,i,r,o){let a=$e(),s=Ht(),c=i?e+1:null;c!==null&&Yp(a,s,c,i,r,o,null,n);let l=id(s,Lt+e,16,null,n||null);l.projection===null&&(l.projection=t),$h();let d=!a[Bi]||Fa();a[Nn][Yn].projection[l.projection]===null&&c!==null?N7(a,s,c):d&&!Bo(l)&&yP(s,a,l)}function N7(e,t,n){let i=Lt+n,r=t.data[i],o=e[i],a=kp(o,r.tView.ssrId),s=Vp(e,r,void 0,{dehydratedView:a});Hp(o,s,0,Gl(r,a))}function ft(e,t,n){LA(e,t,n)}function dt(e){let t=$e(),n=Ht(),i=mg();Zh(i+1);let r=Y2(n,i);if(e.dirty&&Wx(t)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let o=NA(t,i);e.reset(o,tT),e.notifyOnChanges()}return!0}return!1}function ut(){return PA($e(),mg())}function np(e,t){return e<<17|t<<2}function qa(e){return e>>17&32767}function F7(e){return(e&2)==2}function V7(e,t){return e&131071|t<<17}function s2(e){return e|2}function cc(e){return(e&131068)>>2}function Og(e,t){return e&-131069|t<<2}function B7(e){return(e&1)===1}function c2(e){return e|1}function z7(e,t,n,i,r,o){let a=o?t.classBindings:t.styleBindings,s=qa(a),c=cc(a);e[i]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Xs(d,u)>0)&&(l=!0)}else u=n;if(r)if(c!==0){let h=qa(e[s+1]);e[i+1]=np(h,s),h!==0&&(e[h+1]=Og(e[h+1],i)),e[s+1]=V7(e[s+1],i)}else e[i+1]=np(s,0),s!==0&&(e[s+1]=Og(e[s+1],i)),s=i;else e[i+1]=np(c,0),s===0?s=i:e[c+1]=Og(e[c+1],i),c=i;l&&(e[i+1]=s2(e[i+1])),Qw(e,u,i,!0),Qw(e,u,i,!1),j7(t,u,e,i,o),a=np(s,c),o?t.classBindings=a:t.styleBindings=a}function j7(e,t,n,i,r){let o=r?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Xs(o,t)>=0&&(n[i+1]=c2(n[i+1]))}function Qw(e,t,n,i){let r=e[n+1],o=t===null,a=i?qa(r):cc(r),s=!1;for(;a!==0&&(s===!1||o);){let c=e[a],l=e[a+1];H7(c,t)&&(s=!0,e[a+1]=i?c2(l):s2(l)),a=i?qa(l):cc(l)}s&&(e[n+1]=i?s2(r):c2(r))}function H7(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Xs(e,t)>=0:!1}var rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function U7(e){return e.substring(rr.key,rr.keyEnd)}function q7(e){return $7(e),E4(e,D4(e,0,rr.textEnd))}function E4(e,t){let n=rr.textEnd;return n===t?-1:(t=rr.keyEnd=G7(e,rr.key=t,n),D4(e,t,n))}function $7(e){rr.key=0,rr.keyEnd=0,rr.value=0,rr.valueEnd=0,rr.textEnd=e.length}function D4(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function G7(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Tr(e,t,n){return T4(e,t,n,!1),Tr}function Ce(e,t){return T4(e,t,null,!0),Ce}function Qp(e){Z7(eL,W7,e,!0)}function W7(e,t){for(let n=q7(t);n>=0;n=E4(t,n))Rh(e,U7(t),!0)}function T4(e,t,n,i){let r=$e(),o=Ht(),a=Gh(2);if(o.firstUpdatePass&&A4(o,e,a,i),t!==Xn&&or(r,a,t)){let s=o.data[eo()];L4(o,s,r,r[bt],e,r[a+1]=nL(t,n),i,a)}}function Z7(e,t,n,i){let r=Ht(),o=Gh(2);r.firstUpdatePass&&A4(r,null,o,i);let a=$e();if(n!==Xn&&or(a,o,n)){let s=r.data[eo()];if(O4(s,i)&&!P4(r,o)){let c=i?s.classesWithoutHost:s.stylesWithoutHost;c!==null&&(n=Ph(c,n||"")),a2(r,s,a,n,i)}else tL(r,s,a,a[bt],a[o+1],a[o+1]=Q7(e,t,n),i,o)}}function P4(e,t){return t>=e.expandoStartIndex}function A4(e,t,n,i){let r=e.data;if(r[n+1]===null){let o=r[eo()],a=P4(e,n);O4(o,i)&&t===null&&!a&&(t=!1),t=Y7(r,o,t,i),z7(r,o,t,n,a,i)}}function Y7(e,t,n,i){let r=dw(e),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(n=Rg(null,e,t,n,i),n=Yl(n,t.attrs,i),o=null);else{let a=t.directiveStylingLast;if(a===-1||e[a]!==r)if(n=Rg(r,e,t,n,i),o===null){let c=X7(e,t,i);c!==void 0&&Array.isArray(c)&&(c=Rg(null,e,t,c[1],i),c=Yl(c,t.attrs,i),J7(e,t,i,c))}else o=K7(e,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),n}function X7(e,t,n){let i=n?t.classBindings:t.styleBindings;if(cc(i)!==0)return e[qa(i)]}function J7(e,t,n,i){let r=n?t.classBindings:t.styleBindings;e[qa(r)]=i}function K7(e,t,n){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let a=e[o].hostAttrs;i=Yl(i,a,n)}return Yl(i,t.attrs,n)}function Rg(e,t,n,i,r){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=t[s],i=Yl(i,o.hostAttrs,r),o!==e);)s++;return e!==null&&(n.directiveStylingLast=s),i}function Yl(e,t,n){let i=n?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?r=a:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Rh(e,a,n?!0:t[++o]))}return e===void 0?null:e}function Q7(e,t,n){if(n==null||n==="")return Gn;let i=[],r=Ga(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function eL(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&Rh(e,i,n)}function tL(e,t,n,i,r,o,a,s){r===Xn&&(r=Gn);let c=0,l=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,p=l<o.length?o[l+1]:void 0,f=null,g;u===d?(c+=2,l+=2,h!==p&&(f=d,g=p)):d===null||u!==null&&u<d?(c+=2,f=u):(l+=2,f=d,g=p),f!==null&&L4(e,t,n,i,f,g,a,s),u=c<r.length?r[c]:null,d=l<o.length?o[l]:null}}function L4(e,t,n,i,r,o,a,s){if(!(t.type&3))return;let c=e.data,l=c[s+1],u=B7(l)?eb(c,t,n,r,cc(l),a):void 0;if(!Ep(u)){Ep(o)||F7(l)&&(o=eb(c,null,n,r,s,a));let d=og(eo(),n);kP(i,a,d,r,o)}}function eb(e,t,n,i,r,o){let a=t===null,s;for(;r>0;){let c=e[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[r+1];h===Xn&&(h=d?Gn:void 0);let p=d?Nh(h,i):u===i?h:void 0;if(l&&!Ep(p)&&(p=Nh(c,i)),Ep(p)&&(s=p,a))return s;let f=e[r+1];r=a?qa(f):cc(f)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(s=Nh(c,i))}return s}function Ep(e){return e!==void 0}function nL(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=ci(Ga(e)))),e}function O4(e,t){return(e.flags&(t?8:16))!==0}function I(e,t=""){let n=$e(),i=Ht(),r=e+Lt,o=i.firstCreatePass?id(i,r,1,t,null):i.data[r],a=R4(i,n,o,t,e);n[r]=a,zl()&&Bp(i,n,a,o),Ro(o,!1)}var R4=(e,t,n,i,r)=>(to(!0),lC(t[bt],i));function iL(e,t,n,i,r){let o=t[Bi],a=!o||Fa()||Bo(n)||td(o,r);return to(a),a?lC(t[bt],i):Up(o,e,t,n)}function N4(){R4=iL}function F4(e,t,n,i=""){return or(e,ec(),n)?t+Ta(n)+i:Xn}function rL(e,t,n,i,r,o=""){let a=ow(),s=Mp(e,a,n,r);return Gh(2),s?t+Ta(n)+i+Ta(r)+o:Xn}function fe(e){return Ie("",e),fe}function Ie(e,t,n){let i=$e(),r=F4(i,e,t,n);return r!==Xn&&V4(i,eo(),r),Ie}function ef(e,t,n,i,r){let o=$e(),a=rL(o,e,t,n,i,r);return a!==Xn&&V4(o,eo(),a),ef}function V4(e,t,n){let i=og(t,e);zT(e[bt],i,n)}function st(e,t,n){xg(t)&&(t=t());let i=$e(),r=ec();if(or(i,r,t)){let o=Ht(),a=Jh();MC(a,i,e,t,i[bt],n)}return st}function ht(e,t){let n=xg(e);return n&&e.set(t),n}function ct(e,t){let n=$e(),i=Ht(),r=_n();return I4(i,n,n[bt],r,e,t),ct}function Ya(e,t,n=""){return F4($e(),e,t,n)}function oL(e,t,n){let i=Ht();if(i.firstCreatePass){let r=Sr(e);l2(n,i.data,i.blueprint,r,!0),l2(t,i.data,i.blueprint,r,!1)}}function l2(e,t,n,i,r){if(e=bn(e),Array.isArray(e))for(let o=0;o<e.length;o++)l2(e[o],t,n,i,r);else{let o=Ht(),a=$e(),s=_n(),c=_a(e)?e:bn(e.provide),l=eg(e),u=s.providerIndexes&1048575,d=s.directiveStart,h=s.providerIndexes>>20;if(_a(e)||!e.multi){let p=new za(l,r,G),f=Fg(c,t,r?u:u+h,d);f===-1?(Bg(hp(s,a),o,c),Ng(o,e,t.length),t.push(c),s.directiveStart++,s.directiveEnd++,r&&(s.providerIndexes+=1048576),n.push(p),a.push(p)):(n[f]=p,a[f]=p)}else{let p=Fg(c,t,u+h,d),f=Fg(c,t,u,u+h),g=p>=0&&n[p],b=f>=0&&n[f];if(r&&!b||!r&&!g){Bg(hp(s,a),o,c);let x=cL(r?sL:aL,n.length,r,i,l);!r&&b&&(n[f].providerFactory=x),Ng(o,e,t.length,0),t.push(c),s.directiveStart++,s.directiveEnd++,r&&(s.providerIndexes+=1048576),n.push(x),a.push(x)}else{let x=B4(n[r?f:p],l,!r&&i);Ng(o,e,p>-1?p:f,x)}!r&&i&&b&&n[f].componentProviders++}}}function Ng(e,t,n,i){let r=_a(t),o=Ux(t);if(r||o){let c=(o?bn(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function B4(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Fg(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function aL(e,t,n,i){return d2(this.multi,[])}function sL(e,t,n,i){let r=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,s=ql(n,n[_e],this.providerFactory.index,i);o=s.slice(0,a),d2(r,o);for(let c=a;c<s.length;c++)o.push(s[c])}else o=[],d2(r,o);return o}function d2(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function cL(e,t,n,i,r){let o=new za(e,n,G);return o.multi=[],o.index=t,o.componentProviders=0,B4(o,r,i&&!n),o}function Hi(e,t=[]){return n=>{n.providersResolver=(i,r)=>oL(i,r?r(e):e,t)}}function ud(e,t,n){let i=Bl()+e,r=$e();return r[i]===Xn?Wp(r,i,n?t.call(n):t()):JC(r,i)}function pc(e,t,n,i){return lL($e(),Bl(),e,t,n,i)}function sy(e,t,n,i,r,o){return dL($e(),Bl(),e,t,n,i,r,o)}function cy(e,t,n,i,r,o,a,s,c,l){let u=Bl()+e,d=$e(),h=dA(d,u,n,i,r,o);return KC(d,u+4,a,s,c)||h?Wp(d,u+7,l?t.call(l,n,i,r,o,a,s,c):t(n,i,r,o,a,s,c)):JC(d,u+7)}function z4(e,t){let n=e[t];return n===Xn?void 0:n}function lL(e,t,n,i,r,o){let a=t+n;return or(e,a,r)?Wp(e,a+1,o?i.call(o,r):i(r)):z4(e,a+1)}function dL(e,t,n,i,r,o,a,s){let c=t+n;return KC(e,c,r,o,a)?Wp(e,c+3,s?i.call(s,r,o,a):i(r,o,a)):z4(e,c+3)}var Dp=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},ly=(()=>{class e{compileModuleSync(n){return new Cp(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),r=Jm(n),o=aC(r.declarations).reduce((a,s)=>{let c=xr(s);return c&&a.push(new Ha(c)),a},[]);return new Dp(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var uL=(()=>{class e{zone=X(Ct);changeDetectionScheduler=X(Jr);applicationRef=X(ui);applicationErrorHandler=X(li);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),j4=new ae("",{factory:()=>!1});function dy({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new Ct(ge(ee({},hy()),{scheduleInRootZone:n})),[{provide:Ct,useFactory:e},{provide:Ki,multi:!0,useFactory:()=>{let i=X(uL,{optional:!0});return()=>i.initialize()}},{provide:Ki,multi:!0,useFactory:()=>{let i=X(hL);return()=>{i.initialize()}}},t===!0?{provide:wg,useValue:!0}:[],{provide:bg,useValue:n??u4},{provide:li,useFactory:()=>{let i=X(Ct),r=X(jt),o;return a=>{o??=r.get(Ji),i.runOutsideAngular(()=>o.handleError(a))}}}]}function uy(e){let t=e?.ignoreChangesOutsideZone,n=e?.scheduleInRootZone,i=dy({ngZoneFactory:()=>{let r=hy(e);return r.scheduleInRootZone=n,r.shouldCoalesceEventChangeDetection&&di("NgZone_CoalesceEvent"),new Ct(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:n});return Qi([{provide:j4,useValue:!0},{provide:tc,useValue:!1},i])}function hy(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var hL=(()=>{class e{subscription=new Bt;initialized=!1;zone=X(Ct);pendingTasks=X(_r);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var H4=(()=>{class e{applicationErrorHandler=X(li);appRef=X(ui);taskService=X(_r);ngZone=X(Ct);zonelessEnabled=X(tc);tracing=X(Za,{optional:!0});disableScheduling=X(wg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Bt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(X(bg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _p||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let i=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Uw:h4;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Uw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function pL(){return typeof $localize<"u"&&$localize.locale||dd}var tf=new ae("",{providedIn:"root",factory:()=>X(tf,{optional:!0,skipSelf:!0})||pL()});function Ti(e){return Ex(e)}function jo(e,t){return Ju(e,t?.equal)}var U4=class{[Ln];constructor(t){this[Ln]=t}destroy(){this[Ln].destroy()}};var yy={JSACTION:"__jsaction",OWNER:"__owner"},W4={};function fL(e){return e[yy.JSACTION]}function q4(e,t){e[yy.JSACTION]=t}function mL(e){return W4[e]}function gL(e,t){W4[e]=t}var Ee={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},yL=[Ee.MOUSEENTER,Ee.MOUSELEAVE,"pointerenter","pointerleave"],ete=[Ee.CLICK,Ee.DBLCLICK,Ee.FOCUSIN,Ee.FOCUSOUT,Ee.KEYDOWN,Ee.KEYUP,Ee.KEYPRESS,Ee.MOUSEOVER,Ee.MOUSEOUT,Ee.SUBMIT,Ee.TOUCHSTART,Ee.TOUCHEND,Ee.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],vL=[Ee.FOCUS,Ee.BLUR,Ee.ERROR,Ee.LOAD,Ee.TOGGLE],vy=e=>vL.indexOf(e)>=0;function kL(e){return e===Ee.MOUSEENTER?Ee.MOUSEOVER:e===Ee.MOUSELEAVE?Ee.MOUSEOUT:e===Ee.POINTERENTER?Ee.POINTEROVER:e===Ee.POINTERLEAVE?Ee.POINTEROUT:e}function ML(e,t,n,i){let r=!1;vy(t)&&(r=!0);let o=typeof i=="boolean"?{capture:r,passive:i}:r;return e.addEventListener(t,n,o),{eventType:t,handler:n,capture:r,passive:i}}function xL(e,t){if(e.removeEventListener){let n=typeof t.passive=="boolean"?{capture:t.capture}:t.capture;e.removeEventListener(t.eventType,t.handler,n)}else e.detachEvent&&e.detachEvent(`on${t.eventType}`,t.handler)}function wL(e){e.preventDefault?e.preventDefault():e.returnValue=!1}var $4=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function bL(e){return e.which===2||e.which==null&&e.button===4}function CL(e){return $4&&e.metaKey||!$4&&e.ctrlKey||bL(e)||e.shiftKey}function SL(e,t,n){let i=e.relatedTarget;return(e.type===Ee.MOUSEOVER&&t===Ee.MOUSEENTER||e.type===Ee.MOUSEOUT&&t===Ee.MOUSELEAVE||e.type===Ee.POINTEROVER&&t===Ee.POINTERENTER||e.type===Ee.POINTEROUT&&t===Ee.POINTERLEAVE)&&(!i||i!==n&&!n.contains(i))}function _L(e,t){let n={};for(let i in e){if(i==="srcElement"||i==="target")continue;let r=i,o=e[r];typeof o!="function"&&(n[r]=o)}return e.type===Ee.MOUSEOVER?n.type=Ee.MOUSEENTER:e.type===Ee.MOUSEOUT?n.type=Ee.MOUSELEAVE:e.type===Ee.POINTEROVER?n.type=Ee.POINTERENTER:n.type=Ee.POINTERLEAVE,n.target=n.srcElement=t,n.bubbles=!1,n._originalEvent=e,n}var IL=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),af=class{element;handlerInfos=[];constructor(t){this.element=t}addEventListener(t,n,i){IL&&(this.element.style.cursor="pointer"),this.handlerInfos.push(ML(this.element,t,n(this.element),i))}cleanUp(){for(let t=0;t<this.handlerInfos.length;t++)xL(this.element,this.handlerInfos[t]);this.handlerInfos=[]}},EL={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Ho(e){return e.eventType}function ky(e,t){e.eventType=t}function rf(e){return e.event}function Z4(e,t){e.event=t}function Y4(e){return e.targetElement}function X4(e,t){e.targetElement=t}function J4(e){return e.eic}function DL(e,t){e.eic=t}function TL(e){return e.timeStamp}function PL(e,t){e.timeStamp=t}function of(e){return e.eia}function K4(e,t,n){e.eia=[t,n]}function py(e){e.eia=void 0}function nf(e){return e[1]}function AL(e){return e.eirp}function Q4(e,t){e.eirp=t}function e3(e){return e.eir}function t3(e,t){e.eir=t}function n3(e){return{eventType:e.eventType,event:e.event,targetElement:e.targetElement,eic:e.eic,eia:e.eia,timeStamp:e.timeStamp,eirp:e.eirp,eiack:e.eiack,eir:e.eir}}function LL(e,t,n,i,r,o,a,s){return{eventType:e,event:t,targetElement:n,eic:i,timeStamp:r,eia:o,eirp:a,eiack:s}}var fy=class e{eventInfo;constructor(t){this.eventInfo=t}getEventType(){return Ho(this.eventInfo)}setEventType(t){ky(this.eventInfo,t)}getEvent(){return rf(this.eventInfo)}setEvent(t){Z4(this.eventInfo,t)}getTargetElement(){return Y4(this.eventInfo)}setTargetElement(t){X4(this.eventInfo,t)}getContainer(){return J4(this.eventInfo)}setContainer(t){DL(this.eventInfo,t)}getTimestamp(){return TL(this.eventInfo)}setTimestamp(t){PL(this.eventInfo,t)}getAction(){let t=of(this.eventInfo);if(t)return{name:t[0],element:t[1]}}setAction(t){if(!t){py(this.eventInfo);return}K4(this.eventInfo,t.name,t.element)}getIsReplay(){return AL(this.eventInfo)}setIsReplay(t){Q4(this.eventInfo,t)}getResolved(){return e3(this.eventInfo)}setResolved(t){t3(this.eventInfo,t)}clone(){return new e(n3(this.eventInfo))}},OL={},RL=/\s*;\s*/,NL=Ee.CLICK,my=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:t=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=t,this.clickModSupport=n}resolveEventType(t){this.clickModSupport&&Ho(t)===Ee.CLICK&&CL(rf(t))?ky(t,Ee.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(t)}resolveAction(t){e3(t)||(this.populateAction(t,Y4(t)),t3(t,!0))}resolveParentAction(t){let n=of(t),i=n&&nf(n);py(t);let r=i&&this.getParentNode(i);r&&this.populateAction(t,r)}populateAction(t,n){let i=n;for(;i&&i!==J4(t)&&(i.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(i,t),!of(t));)i=this.getParentNode(i);let r=of(t);if(r&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(t),this.syntheticMouseEventSupport&&(Ho(t)===Ee.MOUSEENTER||Ho(t)===Ee.MOUSELEAVE||Ho(t)===Ee.POINTERENTER||Ho(t)===Ee.POINTERLEAVE)))if(SL(rf(t),Ho(t),nf(r))){let o=_L(rf(t),nf(r));Z4(t,o),X4(t,nf(r))}else py(t)}getParentNode(t){let n=t[yy.OWNER];if(n)return n;let i=t.parentNode;return i?.nodeName==="#document-fragment"?i?.host??null:i}populateActionOnElement(t,n){let i=this.parseActions(t),r=i[Ho(n)];r!==void 0&&K4(n,r,t),this.a11yClickSupport&&this.populateClickOnlyAction(t,n,i)}parseActions(t){let n=fL(t);if(!n){let i=t.getAttribute(Qh.JSACTION);if(!i)n=OL,q4(t,n);else{if(n=mL(i),!n){n={};let r=i.split(RL);for(let o=0;o<r.length;o++){let a=r[o];if(!a)continue;let s=a.indexOf(EL.EVENT_ACTION_SEPARATOR),c=s!==-1,l=c?a.substr(0,s).trim():NL,u=c?a.substr(s+1).trim():a;n[l]=u}gL(i,n)}q4(t,n)}}return n}addA11yClickSupport(t,n,i){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=t,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=i}},i3=function(e){return e[e.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",e}(i3||{}),gy=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(t,{actionResolver:n,eventReplayer:i}={}){this.dispatchDelegate=t,this.actionResolver=n,this.eventReplayer=i}dispatch(t){let n=new fy(t);this.actionResolver?.resolveEventType(t),this.actionResolver?.resolveAction(t);let i=n.getAction();if(i&&FL(i.element,n)&&wL(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(t){this.replayEventInfoWrappers.push(t),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function FL(e,t){return e.tagName==="A"&&(t.getEventType()===Ee.CLICK||t.getEventType()===Ee.CLICKMOD)}var r3=Symbol.for("propagationStopped"),My={REPLAY:101};var VL="`preventDefault` called during event replay.";var BL="`composedPath` called during event replay.",sf=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(t,n=!0){this.dispatchDelegate=t,this.clickModSupport=n,this.actionResolver=new my({clickModSupport:n}),this.dispatcher=new gy(i=>{this.dispatchToDelegate(i)},{actionResolver:this.actionResolver})}dispatch(t){this.dispatcher.dispatch(t)}dispatchToDelegate(t){for(t.getIsReplay()&&HL(t),zL(t);t.getAction();){if(UL(t),vy(t.getEventType())&&t.getAction().element!==t.getTargetElement()||(this.dispatchDelegate(t.getEvent(),t.getAction().name),jL(t)))return;this.actionResolver.resolveParentAction(t.eventInfo)}}};function zL(e){let t=e.getEvent(),n=e.getEvent().stopPropagation.bind(t),i=()=>{t[r3]=!0,n()};Xa(t,"stopPropagation",i),Xa(t,"stopImmediatePropagation",i)}function jL(e){return!!e.getEvent()[r3]}function HL(e){let t=e.getEvent(),n=e.getTargetElement(),i=t.preventDefault.bind(t);Xa(t,"target",n),Xa(t,"eventPhase",My.REPLAY),Xa(t,"preventDefault",()=>{throw i(),new Error(VL+"")}),Xa(t,"composedPath",()=>{throw new Error(BL+"")})}function UL(e){let t=e.getEvent(),n=e.getAction()?.element;n&&Xa(t,"currentTarget",n,{configurable:!0})}function Xa(e,t,n,{configurable:i=!1}={}){Object.defineProperty(e,t,{value:n,configurable:i})}function o3(e,t){e.ecrd(n=>{t.dispatch(n)},i3.I_AM_THE_JSACTION_FRAMEWORK)}function qL(e){return e?.q??[]}function $L(e){e&&(G4(e.c,e.et,e.h),G4(e.c,e.etc,e.h,!0))}function G4(e,t,n,i){for(let r=0;r<t.length;r++)e.removeEventListener(t[r],n,i)}var GL=!1,a3=(()=>{class e{static MOUSE_SPECIAL_SUPPORT=GL;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,i,r){let o=LL(n,i,i.target,r,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){Q4(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,i,r){if(n in this.eventHandlers||!this.containerManager||!e.MOUSE_SPECIAL_SUPPORT&&yL.indexOf(n)>=0)return;let o=(s,c,l)=>{this.handleEvent(s,c,l)};this.eventHandlers[n]=o;let a=kL(i||n);if(a!==n){let s=this.browserEventTypeToExtraEventTypes[a]||[];s.push(n),this.browserEventTypeToExtraEventTypes[a]=s}this.containerManager.addEventListener(a,s=>c=>{o(n,c,s)},r)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),$L(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let i=0;i<n.length;i++){let r=n[i],o=this.getEventTypesForBrowserEventType(r.eventType);for(let a=0;a<o.length;a++){let s=n3(r);ky(s,o[a]),this.handleEventInfo(s)}}}getEventTypesForBrowserEventType(n){let i=[];return this.eventHandlers[n]&&i.push(n),this.browserEventTypeToExtraEventTypes[n]&&i.push(...this.browserEventTypeToExtraEventTypes[n]),i}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,i){this.ecrd(n,i)}ecrd(n,i){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let r=0;r<this.queuedEventInfos.length;r++)this.handleEventInfo(this.queuedEventInfos[r]);this.queuedEventInfos=null}}}return e})();function s3(e,t=window){return qL(t._ejsas?.[e])}function xy(e,t=window){t._ejsas&&(t._ejsas[e]=void 0)}var m3=Symbol("InputSignalNode#UNSET"),kO=ge(ee({},Ku),{transformFn:void 0,applyValueToInputSignal(e,t){Ns(e,t)}});function g3(e,t){let n=Object.create(kO);n.value=e,n.transformFn=t?.transform;function i(){if(Os(n),n.value===m3){let r=null;throw new ce(-950,r)}return n.value}return i[Ln]=n,i}var uf=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Jl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},MO=new ae("");MO.__NG_ELEMENT_ID__=e=>{let t=_n();if(t===null)throw new ce(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new ce(204,!1)};function c3(e,t){return g3(e,t)}function xO(e){return g3(m3,e)}var y3=(c3.required=xO,c3);var wy=new ae(""),wO=new ae("");function hd(e){return!e.moduleRef}function bO(e){let t=hd(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Ct);return n.run(()=>{hd(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(li),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:i})}),hd(e)){let o=()=>t.destroy(),a=e.platformInjector.get(wy);a.add(o),t.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>e.moduleRef.destroy(),a=e.platformInjector.get(wy);a.add(o),e.moduleRef.onDestroy(()=>{Ul(e.allPlatformModules,e.moduleRef),r.unsubscribe(),a.delete(o)})}return SO(i,n,()=>{let o=t.get(iy);return o.runInitializers(),o.donePromise.then(()=>{let a=t.get(tf,dd);if(_4(a||dd),!t.get(wO,!0))return hd(e)?t.get(ui):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(hd(e)){let c=t.get(ui);return e.rootComponent!==void 0&&c.bootstrap(e.rootComponent),c}else return CO?.(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}var CO;function SO(e,t,n){try{let i=n();return zo(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e(i)),i}}var lf=null;function _O(e=[],t){return On.create({name:t,providers:[{provide:Pl,useValue:"platform"},{provide:wy,useValue:new Set([()=>lf=null])},...e]})}function IO(e=[]){if(lf)return lf;let t=_O(e);return lf=t,v4(),EO(t),t}function EO(e){let t=e.get(Tp,null);Rn(e,()=>{t?.forEach(n=>n())})}var cr=(()=>{class e{static __NG_ELEMENT_ID__=DO}return e})();function DO(e){return TO(_n(),$e(),(e&16)===16)}function TO(e,t,n){if(Kr(e)&&!n){let i=ji(e.index,t);return new Fo(i,i)}else if(e.type&175){let i=t[Nn];return new Fo(i,t)}return null}var by=class{constructor(){}supports(t){return W2(t)}create(t){return new Cy(t)}},PO=(e,t)=>t,Cy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||PO}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let a=!i||n&&n.currentIndex<l3(i,r,o)?n:i,s=l3(a,r,o),c=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(n=n._next,a.previousIndex==null)r++;else{o||(o=[]);let l=s-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let p=h<o.length?o[h]:o[h]=0,f=p+h;u<=f&&f<l&&(o[h]=p+1)}let d=a.previousIndex;o[d]=u-l}}s!==c&&t(a,s,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!W2(t))throw new ce(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,r,o,a;if(Array.isArray(t)){this.length=t.length;for(let s=0;s<this.length;s++)o=t[s],a=this._trackByFn(s,o),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,o,a,s),i=!0):(i&&(n=this._verifyReinsertion(n,o,a,s)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,YC(t,s=>{a=this._trackByFn(r,s),n===null||!Object.is(n.trackById,a)?(n=this._mismatch(n,s,a,r),i=!0):(i&&(n=this._verifyReinsertion(n,s,a,r)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new Sy(n,i),o,r)),t}_verifyReinsertion(t,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let r=n===null?this._itHead:n._next;return t._next=r,t._prev=n,r===null?this._itTail=t:r._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new hf),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hf),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Sy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},_y=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},hf=class{map=new Map;put(t){let n=t.trackById,i=this.map.get(n);i||(i=new _y,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,r=this.map.get(i);return r?r.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function l3(e,t,n){let i=e.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}function d3(){return new Iy([new by])}var Iy=(()=>{class e{factories;static \u0275prov=re({token:e,providedIn:"root",factory:d3});constructor(n){this.factories=n}static create(n,i){if(i!=null){let r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||d3()),deps:[[e,new ib,new Xl]]}}find(n){let i=this.factories.find(r=>r.supports(n));if(i!=null)return i;throw new ce(901,!1)}}return e})();function v3(e){kt(8);try{let{rootComponent:t,appProviders:n,platformProviders:i}=e,r=IO(i),o=[dy({}),{provide:Jr,useExisting:H4},gw,...n||[]],a=new Zl({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return bO({r3Injector:a.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}finally{kt(9)}}var cf=new WeakSet,u3="",df=[];function h3(e){return e.get(v2,Fb)}function k3(){let e=[{provide:v2,useFactory:()=>{let t=!0;{let n=X(Dr);t=!!window._ejsas?.[n]}return t&&di("NgEventReplay"),t}}];return e.push({provide:Ki,useValue:()=>{let t=X(ui),{injector:n}=t;if(!cf.has(t)){let i=X(k2);if(h3(n)){$b();let r=n.get(Dr),o=Ub(r,(a,s,c)=>{a.nodeType===Node.ELEMENT_NODE&&(Bb(a,s,c),zb(a,i))});t.onDestroy(o)}}},multi:!0},{provide:oo,useFactory:()=>{let t=X(ui),{injector:n}=t;return()=>{!h3(n)||cf.has(t)||(cf.add(t),t.onDestroy(()=>{cf.delete(t);{let i=n.get(Dr);xy(i)}}),t.whenStable().then(()=>{if(t.destroyed)return;let i=n.get(Hb);AO(i,n);let r=n.get(k2);r.get(u3)?.forEach(jb),r.delete(u3);let o=i.instance;Kb(n)?t.onDestroy(()=>o.cleanUp()):o.cleanUp()}))}},multi:!0}),e}var AO=(e,t)=>{let n=t.get(Dr),i=window._ejsas[n],r=e.instance=new a3(new af(i.c));for(let s of i.et)r.addEvent(s);for(let s of i.etc)r.addEvent(s);let o=s3(n);r.replayEarlyEventInfos(o),xy(n);let a=new sf(s=>{LO(t,s,s.currentTarget)});o3(r,a)};function LO(e,t,n){let i=(n&&n.getAttribute(ed))??"";/d\d+/.test(i)?OO(i,e,t,n):t.eventPhase===My.REPLAY&&M2(t,n)}function OO(e,t,n,i){df.push({event:n,currentTarget:i}),x4(t,e,RO)}function RO(e){let t=[...df],n=new Set(e);df=[];for(let{event:i,currentTarget:r}of t){let o=r.getAttribute(ed);n.has(o)?M2(i,r):df.push({event:i,currentTarget:r})}}var p3=!1;function NO(){p3||(p3=!0,Yb(),b4(),N4(),S4(),d4(),r4(),HC(),kC())}function FO(e){return e.whenStable()}function M3(){let e=[{provide:Ql,useFactory:()=>{let t=!0;return t=!!X($a,{optional:!0})?.get(x2,null),t&&di("NgHydration"),t}},{provide:Ki,useValue:()=>{VC(!1),X(Ql)&&(eC(Kl()),NO())},multi:!0}];return e.push({provide:y2,useFactory:()=>X(Ql)},{provide:oo,useFactory:()=>{if(X(Ql)){let t=X(ui);return()=>{FO(t).then(()=>{t.destroyed||q2(t)})}}return()=>{}},multi:!0}),Qi(e)}function Uo(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function x3(e){let t=xr(e);if(!t)return null;let n=new Ha(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var C3=null;function Ui(){return C3}function Ey(e){C3??=e}var pd=class{},fd=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>X(S3),providedIn:"platform"})}return e})(),Dy=new ae(""),S3=(()=>{class e extends fd{_location;_history;_doc=X(Ut);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ui().getBaseHref(this._doc)}onPopState(n){let i=Ui().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=Ui().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function pf(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function w3(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function lr(e){return e&&e[0]!=="?"?`?${e}`:e}var dr=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>X(mf),providedIn:"root"})}return e})(),ff=new ae(""),mf=(()=>{class e extends dr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??X(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return pf(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+lr(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){let a=this.prepareExternalUrl(r+lr(o));this._platformLocation.pushState(n,i,a)}replaceState(n,i,r,o){let a=this.prepareExternalUrl(r+lr(o));this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||e)(se(fd),se(ff,8))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qo=(()=>{class e{_subject=new Qt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=zO(w3(b3(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+lr(i))}normalize(n){return e.stripTrailingSlash(BO(this._basePath,b3(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+lr(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+lr(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=lr;static joinWithSlash=pf;static stripTrailingSlash=w3;static \u0275fac=function(i){return new(i||e)(se(dr))};static \u0275prov=re({token:e,factory:()=>VO(),providedIn:"root"})}return e})();function VO(){return new qo(se(dr))}function BO(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function b3(e){return e.replace(/\/index.html$/,"")}function zO(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Py=(()=>{class e extends dr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(n){let i=pf(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let a=this.prepareExternalUrl(r+lr(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,i,a)}replaceState(n,i,r,o){let a=this.prepareExternalUrl(r+lr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||e)(se(fd),se(ff,8))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();var Ty=/\s+/,_3=[],ur=(()=>{class e{_ngEl;_renderer;initialClasses=_3;rawClass;stateMap=new Map;constructor(n,i){this._ngEl=n,this._renderer=i}set klass(n){this.initialClasses=n!=null?n.trim().split(Ty):_3}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Ty):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let r=this.stateMap.get(n);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(Ty).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||e)(G(ln),G(Jn))};static \u0275dir=St({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();var gf=class{$implicit;ngForOf;index;count;constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qt=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let i=this._viewContainer;n.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new gf(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let s=i.get(o);i.move(s,a),I3(s,r)}});for(let r=0,o=i.length;r<o;r++){let s=i.get(r).context;s.index=r,s.count=o,s.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);I3(o,r)})}static ngTemplateContextGuard(n,i){return!0}static \u0275fac=function(i){return new(i||e)(G(sr),G(Vo),G(Iy))};static \u0275dir=St({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function I3(e,t){e.context.$implicit=t.item}var _t=(()=>{class e{_viewContainer;_context=new yf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,i){this._viewContainer=n,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){E3(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){E3(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,i){return!0}static \u0275fac=function(i){return new(i||e)(G(sr),G(Vo))};static \u0275dir=St({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),yf=class{$implicit=null;ngIf=null};function E3(e,t){if(e&&!e.createEmbeddedView)throw new ce(2020,!1)}var Ze=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=En({type:e});static \u0275inj=mn({})}return e})();function md(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var Ja=class{};var Ly="browser",jO="server";function pt(e){return e===Ly}function T3(e){return e===jO}var P3=(()=>{class e{static \u0275prov=re({token:e,providedIn:"root",factory:()=>new Ay(X(Ut),window)})}return e})(),Ay=class{document;window;offset=()=>[0,0];constructor(t,n){this.document=t,this.window=n}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,n){this.window.scrollTo(ge(ee({},n),{left:t[0],top:t[1]}))}scrollToAnchor(t,n){let i=HO(this.document,t);i&&(this.scrollToElement(i,n),i.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t,n){let i=t.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(ge(ee({},n),{left:r-a[0],top:o-a[1]}))}};function HO(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}r=i.nextNode()}}return null}var Mf=new ae(""),Fy=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r,o){return this._findPluginFor(i).addEventListener(n,i,r,o)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new ce(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||e)(se(Mf),se(Ct))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),gd=class{_doc;constructor(t){this._doc=t}manager},vf="ng-app-id";function A3(e){for(let t of e)t.remove()}function L3(e,t){let n=t.createElement("style");return n.textContent=e,n}function UO(e,t,n,i){let r=e.head?.querySelectorAll(`style[${vf}="${t}"],link[${vf}="${t}"]`);if(r)for(let o of r)o.removeAttribute(vf),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Ry(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Vy=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,this.isServer=T3(o),UO(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let r of n)this.addUsage(r,this.inline,L3);i?.forEach(r=>this.addUsage(r,this.external,Ry))}removeStyles(n,i){for(let r of n)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,i,r){let o=i.get(n);o?o.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(n,this.doc)))})}removeUsage(n,i){let r=i.get(n);r&&(r.usage--,r.usage<=0&&(A3(r.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])A3(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(n,L3(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(n,Ry(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(vf,this.appId),n.appendChild(i)}static \u0275fac=function(i){return new(i||e)(se(Ut),se(Dr),se(Pp,8),se(xt))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),Oy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},By=/%COMP%/g;var R3="%COMP%",qO=`_nghost-${R3}`,$O=`_ngcontent-${R3}`,GO=!0,WO=new ae("",{providedIn:"root",factory:()=>GO});function ZO(e){return $O.replace(By,e)}function YO(e){return qO.replace(By,e)}function N3(e,t){return t.map(n=>n.replace(By,e))}var zy=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,r,o,a,s,c,l=null,u=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new yd(n,a,c,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,i);return r instanceof kf?r.applyToHost(n):r instanceof vd&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,s=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case io.Emulated:o=new kf(c,l,i,this.appId,u,a,s,d,h);break;case io.ShadowDom:return new Ny(c,l,n,i,a,s,this.nonce,d,h);default:o=new vd(c,l,i,u,a,s,d,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||e)(se(Fy),se(Vy),se(Dr),se(WO),se(Ut),se(xt),se(Ct),se(Pp),se(Za,8))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),yd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,i,r,o){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Oy[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(O3(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(O3(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ce(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=Oy[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=Oy[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Er.DashCase|Er.Important)?t.style.setProperty(n,i,r&Er.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Er.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i,r){if(typeof t=="string"&&(t=Ui().getGlobalEventTarget(this.doc,t),!t))throw new ce(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,r)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function O3(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ny=class extends yd{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,i,r,o,a,s,c,l){super(t,o,a,c,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=N3(r.id,u);for(let h of u){let p=document.createElement("style");s&&p.setAttribute("nonce",s),p.textContent=h,this.shadowRoot.appendChild(p)}let d=r.getExternalStyles?.();if(d)for(let h of d){let p=Ry(h,o);s&&p.setAttribute("nonce",s),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vd=class extends yd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,i,r,o,a,s,c,l){super(t,o,a,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?N3(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},kf=class extends vd{contentAttr;hostAttr;constructor(t,n,i,r,o,a,s,c,l){let u=r+"-"+i.id;super(t,n,i,o,a,s,c,l,u),this.contentAttr=ZO(u),this.hostAttr=YO(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}};var xf=class e extends pd{supportsDOMEvents=!0;static makeCurrent(){Ey(new e)}onAndCancel(t,n,i,r){return t.addEventListener(n,i,r),()=>{t.removeEventListener(n,i,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=XO();return n==null?null:JO(n)}resetBaseElement(){kd=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return md(document.cookie,t)}},kd=null;function XO(){return kd=kd||document.head.querySelector("base"),kd?kd.getAttribute("href"):null}function JO(e){return new URL(e,document.baseURI).pathname}var KO=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),V3=(()=>{class e extends gd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r,o){return n.addEventListener(i,r,o),()=>this.removeEventListener(n,i,r,o)}removeEventListener(n,i,r,o){return n.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||e)(se(Ut))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),F3=["alt","control","meta","shift"],QO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},e9={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},B3=(()=>{class e extends gd{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,r,o){let a=e.parseEventName(i),s=e.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ui().onAndCancel(n,a.domEventName,s,o))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",s=i.indexOf("code");if(s>-1&&(i.splice(s,1),a="code."),F3.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=a,c}static matchEventFullKeyCode(n,i){let r=QO[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),F3.forEach(a=>{if(a!==r){let s=e9[a];s(n)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||e)(se(Ut))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();function jy(e,t){return v3(ee({rootComponent:e},t9(t)))}function t9(e){return{appProviders:[...a9,...e?.providers??[]],platformProviders:o9}}function n9(){xf.makeCurrent()}function i9(){return new Ji}function r9(){return f2(document),document}var o9=[{provide:xt,useValue:Ly},{provide:Tp,useValue:n9,multi:!0},{provide:Ut,useFactory:r9}];var a9=[{provide:Pl,useValue:"root"},{provide:Ji,useFactory:i9},{provide:Mf,useClass:V3,multi:!0,deps:[Ut]},{provide:Mf,useClass:B3,multi:!0,deps:[Ut]},zy,Vy,Fy,{provide:ja,useExisting:zy},{provide:Ja,useClass:KO},[]];var mc=class{},gc=class{},hr=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=n.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.addHeaderEntry(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let r=(t.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let a=this.headers.get(n);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}break}}addHeaderEntry(t,n){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(n):this.headers.set(i,[n])}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Cf=class{encodeKey(t){return z3(t)}encodeValue(t){return z3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function s9(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,s]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=n.get(a)||[];c.push(s),n.set(a,c)}),n}var c9=/%(\d[a-f0-9])/gi,l9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function z3(e){return encodeURIComponent(e).replace(c9,(t,n)=>l9[n]??t)}function wf(e){return`${e}`}var $t=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Cf,t.fromString){if(t.fromObject)throw new ce(2805,!1);this.map=s9(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let i=t.fromObject[n],r=Array.isArray(i)?i.map(wf):[wf(i)];this.map.set(n,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(wf(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(wf(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Sf=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function d9(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function j3(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function H3(e){return typeof Blob<"u"&&e instanceof Blob}function U3(e){return typeof FormData<"u"&&e instanceof FormData}function u9(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Md="Content-Type",_f="Accept",Gy="X-Request-URL",G3="text/plain",W3="application/json",Z3=`${W3}, ${G3}, */*`,fc=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,n,i,r){this.url=n,this.method=t.toUpperCase();let o;if(d9(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new hr,this.context??=new Sf,!this.params)this.params=new $t,this.urlWithParams=n;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=n;else{let s=n.indexOf("?"),c=s===-1?"?":s<n.length-1?"&":"";this.urlWithParams=n+c+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||j3(this.body)||H3(this.body)||U3(this.body)||u9(this.body)?this.body:this.body instanceof $t?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||U3(this.body)?null:H3(this.body)?this.body.type||null:j3(this.body)?null:typeof this.body=="string"?G3:this.body instanceof $t?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?W3:null}clone(t={}){let n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.keepalive??this.keepalive,a=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,c=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,d=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((p,f)=>p.set(f,t.setHeaders[f]),u)),t.setParams&&(d=Object.keys(t.setParams).reduce((p,f)=>p.set(f,t.setParams[f]),d)),new e(n,i,s,{params:d,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:c,transferCache:a,keepalive:o})}},uo=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(uo||{}),yc=class{headers;status;statusText;url;ok;type;constructor(t,n=200,i="OK"){this.headers=t.headers||new hr,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},xd=class e extends yc{constructor(t={}){super(t)}type=uo.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},$o=class e extends yc{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=uo.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},lo=class extends yc{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Y3=200,h9=204;function Hy(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache,keepalive:e.keepalive}}var rn=(()=>{class e{handler;constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof fc)o=n;else{let c;r.headers instanceof hr?c=r.headers:c=new hr(r.headers);let l;r.params&&(r.params instanceof $t?l=r.params:l=new $t({fromObject:r.params})),o=new fc(n,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive})}let a=we(o).pipe(Mr(c=>this.handler.handle(c)));if(n instanceof fc||r.observe==="events")return a;let s=a.pipe(fn(c=>c instanceof $o));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(Ae(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new ce(2806,!1);return c.body}));case"blob":return s.pipe(Ae(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new ce(2807,!1);return c.body}));case"text":return s.pipe(Ae(c=>{if(c.body!==null&&typeof c.body!="string")throw new ce(2808,!1);return c.body}));case"json":default:return s.pipe(Ae(c=>c.body))}case"response":return s;default:throw new ce(2809,!1)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:new $t().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,Hy(r,i))}post(n,i,r={}){return this.request("POST",n,Hy(r,i))}put(n,i,r={}){return this.request("PUT",n,Hy(r,i))}static \u0275fac=function(i){return new(i||e)(se(mc))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),p9=/^\)\]\}',?\n/;function q3(e){if(e.url)return e.url;let t=Gy.toLocaleLowerCase();return e.headers.get(t)}var X3=new ae(""),bf=(()=>{class e{fetchImpl=X(Uy,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n));ngZone=X(Ct);destroyRef=X(no);destroyed=!1;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0})}handle(n){return new qe(i=>{let r=new AbortController;return this.doRequest(n,r.signal,i).then(qy,o=>i.error(new lo({error:o}))),()=>r.abort()})}doRequest(n,i,r){return qn(this,null,function*(){let o=this.createRequestInit(n),a;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,ee({signal:i},o)));f9(p),r.next({type:uo.Sent}),a=yield p}catch(p){r.error(new lo({error:p,status:p.status??0,statusText:p.statusText,url:n.urlWithParams,headers:p.headers}));return}let s=new hr(a.headers),c=a.statusText,l=q3(a)??n.urlWithParams,u=a.status,d=null;if(n.reportProgress&&r.next(new xd({headers:s,status:u,statusText:c,url:l})),a.body){let p=a.headers.get("content-length"),f=[],g=a.body.getReader(),b=0,x,M,C=typeof Zone<"u"&&Zone.current,E=!1;if(yield this.ngZone.runOutsideAngular(()=>qn(this,null,function*(){for(;;){if(this.destroyed){yield g.cancel(),E=!0;break}let{done:F,value:m}=yield g.read();if(F)break;if(f.push(m),b+=m.length,n.reportProgress){M=n.responseType==="text"?(M??"")+(x??=new TextDecoder).decode(m,{stream:!0}):void 0;let k=()=>r.next({type:uo.DownloadProgress,total:p?+p:void 0,loaded:b,partialText:M});C?C.run(k):k()}}})),E){r.complete();return}let T=this.concatChunks(f,b);try{let F=a.headers.get(Md)??"";d=this.parseBody(n,T,F)}catch(F){r.error(new lo({error:F,headers:new hr(a.headers),status:a.status,statusText:a.statusText,url:q3(a)??n.urlWithParams}));return}}u===0&&(u=d?Y3:0),u>=200&&u<300?(r.next(new $o({body:d,headers:s,status:u,statusText:c,url:l})),r.complete()):r.error(new lo({error:d,headers:s,status:u,statusText:c,url:l}))})}parseBody(n,i,r){switch(n.responseType){case"json":let o=new TextDecoder().decode(i).replace(p9,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(n){let i={},r=n.withCredentials?"include":void 0;if(n.headers.forEach((o,a)=>i[o]=a.join(",")),n.headers.has(_f)||(i[_f]=Z3),!n.headers.has(Md)){let o=n.detectContentTypeHeader();o!==null&&(i[Md]=o)}return{body:n.serializeBody(),method:n.method,headers:i,credentials:r,keepalive:n.keepalive}}concatChunks(n,i){let r=new Uint8Array(i),o=0;for(let a of n)r.set(a,o),o+=a.length;return r}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),Uy=class{};function qy(){}function f9(e){e.then(qy,qy)}function J3(e,t){return t(e)}function m9(e,t){return(n,i)=>t.intercept(n,{handle:r=>e(r,i)})}function g9(e,t,n){return(i,r)=>Rn(n,()=>t(i,o=>e(o,r)))}var K3=new ae(""),Wy=new ae(""),Zy=new ae(""),Yy=new ae("",{providedIn:"root",factory:()=>!0});function y9(){let e=null;return(t,n)=>{e===null&&(e=(X(K3,{optional:!0})??[]).reduceRight(m9,J3));let i=X(nc);if(X(Yy)){let o=i.add();return e(t,n).pipe(To(o))}else return e(t,n)}}var If=(()=>{class e extends mc{backend;injector;chain=null;pendingTasks=X(nc);contributeToStability=X(Yy);constructor(n,i){super(),this.backend=n,this.injector=i}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Wy),...this.injector.get(Zy,[])]));this.chain=i.reduceRight((r,o)=>g9(r,o,this.injector),J3)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(n,r=>this.backend.handle(r)).pipe(To(i))}else return this.chain(n,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||e)(se(gc),se(jt))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();var v9=/^\)\]\}',?\n/,k9=RegExp(`^${Gy}:`,"m");function M9(e){return"responseURL"in e&&e.responseURL?e.responseURL:k9.test(e.getAllResponseHeaders())?e.getResponseHeader(Gy):null}var $y=(()=>{class e{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new ce(-2800,!1);n.keepalive;let i=this.xhrFactory;return(i.\u0275loadImpl?Et(i.\u0275loadImpl()):we(null)).pipe($n(()=>new qe(o=>{let a=i.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((g,b)=>a.setRequestHeader(g,b.join(","))),n.headers.has(_f)||a.setRequestHeader(_f,Z3),!n.headers.has(Md)){let g=n.detectContentTypeHeader();g!==null&&a.setRequestHeader(Md,g)}if(n.responseType){let g=n.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let s=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let g=a.statusText||"OK",b=new hr(a.getAllResponseHeaders()),x=M9(a)||n.url;return c=new xd({headers:b,status:a.status,statusText:g,url:x}),c},u=()=>{let{headers:g,status:b,statusText:x,url:M}=l(),C=null;b!==h9&&(C=typeof a.response>"u"?a.responseText:a.response),b===0&&(b=C?Y3:0);let E=b>=200&&b<300;if(n.responseType==="json"&&typeof C=="string"){let T=C;C=C.replace(v9,"");try{C=C!==""?JSON.parse(C):null}catch(F){C=T,E&&(E=!1,C={error:F,text:C})}}E?(o.next(new $o({body:C,headers:g,status:b,statusText:x,url:M||void 0})),o.complete()):o.error(new lo({error:C,headers:g,status:b,statusText:x,url:M||void 0}))},d=g=>{let{url:b}=l(),x=new lo({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:b||void 0});o.error(x)},h=!1,p=g=>{h||(o.next(l()),h=!0);let b={type:uo.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(b.total=g.total),n.responseType==="text"&&a.responseText&&(b.partialText=a.responseText),o.next(b)},f=g=>{let b={type:uo.UploadProgress,loaded:g.loaded};g.lengthComputable&&(b.total=g.total),o.next(b)};return a.addEventListener("load",u),a.addEventListener("error",d),a.addEventListener("timeout",d),a.addEventListener("abort",d),n.reportProgress&&(a.addEventListener("progress",p),s!==null&&a.upload&&a.upload.addEventListener("progress",f)),a.send(s),o.next({type:uo.Sent}),()=>{a.removeEventListener("error",d),a.removeEventListener("abort",d),a.removeEventListener("load",u),a.removeEventListener("timeout",d),n.reportProgress&&(a.removeEventListener("progress",p),s!==null&&a.upload&&a.upload.removeEventListener("progress",f)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(i){return new(i||e)(se(Ja))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),Q3=new ae(""),x9="XSRF-TOKEN",w9=new ae("",{providedIn:"root",factory:()=>x9}),b9="X-XSRF-TOKEN",C9=new ae("",{providedIn:"root",factory:()=>b9}),wd=class{},S9=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,i){this.doc=n,this.cookieName=i}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=md(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(i){return new(i||e)(se(Ut),se(w9))};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();function _9(e,t){let n=e.url.toLowerCase();if(!X(Q3)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let i=X(wd).getToken(),r=X(C9);return i!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),t(e)}var Ef=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(Ef||{});function e5(e,t){return{\u0275kind:e,\u0275providers:t}}function Df(...e){let t=[rn,$y,If,{provide:mc,useExisting:If},{provide:gc,useFactory:()=>X(X3,{optional:!0})??X($y)},{provide:Wy,useValue:_9,multi:!0},{provide:Q3,useValue:!0},{provide:wd,useClass:S9}];for(let n of e)t.push(...n.\u0275providers);return Qi(t)}var $3=new ae("");function t5(){return e5(Ef.LegacyInterceptors,[{provide:$3,useFactory:y9},{provide:Wy,useExisting:$3,multi:!0}])}function Xy(){return e5(Ef.Fetch,[bf,{provide:X3,useExisting:bf},{provide:gc,useExisting:bf}])}var Jy=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=En({type:e});static \u0275inj=mn({providers:[Df(t5())]})}return e})();var I9=new ae(""),E9="b",D9="h",T9="s",P9="st",A9="u",L9="rt",Ky=new ae(""),O9=["GET","HEAD"];function R9(e,t){let h=X(Ky),{isCacheActive:n}=h,i=GM(h,["isCacheActive"]),{transferCache:r,method:o}=e;if(!n||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!O9.includes(o)||!i.includeRequestsWithAuthHeaders&&N9(e)||i.filter?.(e)===!1)return t(e);let a=X($a);if(X(I9,{optional:!0}))throw new ce(2803,!1);let c=e.url,l=F9(e,c),u=a.get(l,null),d=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(d=r.includeHeaders),u){let{[E9]:p,[L9]:f,[D9]:g,[T9]:b,[P9]:x,[A9]:M}=u,C=p;switch(f){case"arraybuffer":C=new TextEncoder().encode(p).buffer;break;case"blob":C=new Blob([p]);break}let E=new hr(g);return we(new $o({body:C,headers:E,status:b,statusText:x,url:M}))}return t(e).pipe(Pt(p=>{p instanceof $o}))}function N9(e){return e.headers.has("authorization")||e.headers.has("proxy-authorization")}function n5(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function F9(e,t){let{params:n,method:i,responseType:r}=e,o=n5(n),a=e.serializeBody();a instanceof URLSearchParams?a=n5(a):typeof a!="string"&&(a="");let s=[i,r,t,a,o].join("|"),c=V9(s);return c}function V9(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function i5(e){return[{provide:Ky,useFactory:()=>(di("NgHttpTransferCache"),ee({isCacheActive:!0},e))},{provide:Zy,useValue:R9,multi:!0},{provide:oo,multi:!0,useFactory:()=>{let t=X(ui),n=X(Ky);return()=>{t.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var r5=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(i){return new(i||e)(se(Ut))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Tf=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e[e.I18nSupport=2]="I18nSupport",e[e.EventReplay=3]="EventReplay",e[e.IncrementalHydration=4]="IncrementalHydration",e}(Tf||{});function B9(e,t=[],n={}){return{\u0275kind:e,\u0275providers:t}}function o5(){return B9(Tf.EventReplay,k3())}function a5(...e){let t=[],n=new Set;for(let{\u0275providers:r,\u0275kind:o}of e)n.add(o),r.length&&t.push(r);let i=n.has(Tf.HttpTransferCacheOptions);return Qi([[],M3(),n.has(Tf.NoHttpTransferCache)||i?[]:i5({}),t])}var Ge="primary",Rd=Symbol("RouteTitle"),iv=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function es(e){return new iv(e)}function f5(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],s=e[o];if(a[0]===":")r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function j9(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Pr(e[n],t[n]))return!1;return!0}function Pr(e,t){let n=e?rv(e):void 0,i=t?rv(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!m5(e[r],t[r]))return!1;return!0}function rv(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function m5(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}else return e===t}function g5(e){return e.length>0?e[e.length-1]:null}function po(e){return km(e)?e:zo(e)?Et(Promise.resolve(e)):we(e)}var H9={exact:v5,subset:k5},y5={exact:U9,subset:q9,ignored:()=>!0};function s5(e,t,n){return H9[n.paths](e.root,t.root,n.matrixParams)&&y5[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function U9(e,t){return Pr(e,t)}function v5(e,t,n){if(!Ka(e.segments,t.segments)||!Lf(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!v5(e.children[i],t.children[i],n))return!1;return!0}function q9(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>m5(e[n],t[n]))}function k5(e,t,n){return M5(e,t,t.segments,n)}function M5(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!Ka(r,n)||t.hasChildren()||!Lf(r,n,i))}else if(e.segments.length===n.length){if(!Ka(e.segments,n)||!Lf(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!k5(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Ka(e.segments,r)||!Lf(e.segments,r,i)||!e.children[Ge]?!1:M5(e.children[Ge],t,o,i)}}function Lf(e,t,n){return t.every((i,r)=>y5[n](e[r].parameters,i.parameters))}var Lr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Mt([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=es(this.queryParams),this._queryParamMap}toString(){return W9.serialize(this)}},Mt=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Of(this)}},Go=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=es(this.parameters),this._parameterMap}toString(){return w5(this)}};function $9(e,t){return Ka(e,t)&&e.every((n,i)=>Pr(n.parameters,t[i].parameters))}function Ka(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function G9(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===Ge&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==Ge&&(n=n.concat(t(r,i)))}),n}var ts=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>new Wo,providedIn:"root"})}return e})(),Wo=class{parse(t){let n=new av(t);return new Lr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${bd(t.root,!0)}`,i=X9(t.queryParams),r=typeof t.fragment=="string"?`#${Z9(t.fragment)}`:"";return`${n}${i}${r}`}},W9=new Wo;function Of(e){return e.segments.map(t=>w5(t)).join("/")}function bd(e,t){if(!e.hasChildren())return Of(e);if(t){let n=e.children[Ge]?bd(e.children[Ge],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==Ge&&i.push(`${r}:${bd(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=G9(e,(i,r)=>r===Ge?[bd(e.children[Ge],!1)]:[`${r}:${bd(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ge]!=null?`${Of(e)}/${n[0]}`:`${Of(e)}/(${n.join("//")})`}}function x5(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pf(e){return x5(e).replace(/%3B/gi,";")}function Z9(e){return encodeURI(e)}function ov(e){return x5(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rf(e){return decodeURIComponent(e)}function c5(e){return Rf(e.replace(/\+/g,"%20"))}function w5(e){return`${ov(e.path)}${Y9(e.parameters)}`}function Y9(e){return Object.entries(e).map(([t,n])=>`;${ov(t)}=${ov(n)}`).join("")}function X9(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Pf(n)}=${Pf(r)}`).join("&"):`${Pf(n)}=${Pf(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var J9=/^[^\/()?;#]+/;function Qy(e){let t=e.match(J9);return t?t[0]:""}var K9=/^[^\/()?;=#]+/;function Q9(e){let t=e.match(K9);return t?t[0]:""}var eR=/^[^=?&#]+/;function tR(e){let t=e.match(eR);return t?t[0]:""}var nR=/^[^&#]+/;function iR(e){let t=e.match(nR);return t?t[0]:""}var av=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[Ge]=new Mt(t,n)),i}parseSegment(){let t=Qy(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(t),new Go(Rf(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Q9(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Qy(this.remaining);r&&(i=r,this.capture(i))}t[Rf(n)]=Rf(i)}parseQueryParam(t){let n=tR(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let a=iR(this.remaining);a&&(i=a,this.capture(i))}let r=c5(n),o=c5(i);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(o)}else t[r]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Qy(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ce(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Ge);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ge]:new Mt([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ce(4011,!1)}};function b5(e){return e.segments.length>0?new Mt([],{[Ge]:e}):e}function C5(e){let t={};for(let[i,r]of Object.entries(e.children)){let o=C5(r);if(i===Ge&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let n=new Mt(e.segments,t);return rR(n)}function rR(e){if(e.numberOfChildren===1&&e.children[Ge]){let t=e.children[Ge];return new Mt(e.segments.concat(t.segments),t.children)}return e}function Zo(e){return e instanceof Lr}function S5(e,t,n=null,i=null){let r=_5(e);return I5(r,t,n,i)}function _5(e){let t;function n(o){let a={};for(let c of o.children){let l=n(c);a[c.outlet]=l}let s=new Mt(o.url,a);return o===e&&(t=s),s}let i=n(e.root),r=b5(i);return t??r}function I5(e,t,n,i){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return ev(r,r,r,n,i);let o=oR(t);if(o.toRoot())return ev(r,r,new Mt([],{}),n,i);let a=aR(o,r,e),s=a.processChildren?Sd(a.segmentGroup,a.index,o.commands):D5(a.segmentGroup,a.index,o.commands);return ev(r,a.segmentGroup,s,n,i)}function Nf(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Id(e){return typeof e=="object"&&e!=null&&e.outlets}function ev(e,t,n,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let a;e===t?a=n:a=E5(e,t,n);let s=b5(C5(a));return new Lr(s,o,r)}function E5(e,t,n){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===t?i[r]=n:i[r]=E5(o,t,n)}),new Mt(e.segments,i)}var Ff=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&Nf(i[0]))throw new ce(4003,!1);let r=i.find(Id);if(r&&r!==g5(i))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function oR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Ff(!0,0,e);let t=0,n=!1,i=e.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?n=!0:s===".."?t++:s!=""&&r.push(s))}),r):[...r,o]},[]);return new Ff(n,t,i)}var Mc=class{segmentGroup;processChildren;index;constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function aR(e,t,n){if(e.isAbsolute)return new Mc(t,!0,0);if(!n)return new Mc(t,!1,NaN);if(n.parent===null)return new Mc(n,!0,0);let i=Nf(e.commands[0])?0:1,r=n.segments.length-1+i;return sR(n,r,e.numberOfDoubleDots)}function sR(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ce(4005,!1);r=i.segments.length}return new Mc(i,!1,r-o)}function cR(e){return Id(e[0])?e[0].outlets:{[Ge]:e}}function D5(e,t,n){if(e??=new Mt([],{}),e.segments.length===0&&e.hasChildren())return Sd(e,t,n);let i=lR(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new Mt(e.segments.slice(0,i.pathIndex),{});return o.children[Ge]=new Mt(e.segments.slice(i.pathIndex),e.children),Sd(o,0,r)}else return i.match&&r.length===0?new Mt(e.segments,{}):i.match&&!e.hasChildren()?sv(e,t,n):i.match?Sd(e,0,r):sv(e,t,n)}function Sd(e,t,n){if(n.length===0)return new Mt(e.segments,{});{let i=cR(n),r={};if(Object.keys(i).some(o=>o!==Ge)&&e.children[Ge]&&e.numberOfChildren===1&&e.children[Ge].segments.length===0){let o=Sd(e.children[Ge],t,n);return new Mt(e.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=D5(e.children[o],t,a))}),Object.entries(e.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new Mt(e.segments,r)}}function lR(e,t,n){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;let a=e.segments[r],s=n[i];if(Id(s))break;let c=`${s}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!d5(c,l,a))return o;i+=2}else{if(!d5(c,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function sv(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let o=n[r];if(Id(o)){let c=dR(o.outlets);return new Mt(i,c)}if(r===0&&Nf(n[0])){let c=e.segments[t];i.push(new Go(c.path,l5(n[0]))),r++;continue}let a=Id(o)?o.outlets[Ge]:`${o}`,s=r<n.length-1?n[r+1]:null;a&&s&&Nf(s)?(i.push(new Go(a,l5(s))),r+=2):(i.push(new Go(a,{})),r++)}return new Mt(i,{})}function dR(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=sv(new Mt([],{}),0,i))}),t}function l5(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function d5(e,t,n){return e==n.path&&Pr(t,n.parameters)}var xc="imperative",dn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(dn||{}),Ai=class{id;url;constructor(t,n){this.id=t,this.url=n}},Yo=class extends Ai{type=dn.NavigationStart;navigationTrigger;restoredState;constructor(t,n,i="imperative",r=null){super(t,n),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hi=class extends Ai{urlAfterRedirects;type=dn.NavigationEnd;constructor(t,n,i){super(t,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kn=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(Kn||{}),bc=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(bc||{}),Ar=class extends Ai{reason;code;type=dn.NavigationCancel;constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Or=class extends Ai{reason;code;type=dn.NavigationSkipped;constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r}},Cc=class extends Ai{error;target;type=dn.NavigationError;constructor(t,n,i,r){super(t,n),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ed=class extends Ai{urlAfterRedirects;state;type=dn.RoutesRecognized;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vf=class extends Ai{urlAfterRedirects;state;type=dn.GuardsCheckStart;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bf=class extends Ai{urlAfterRedirects;state;shouldActivate;type=dn.GuardsCheckEnd;constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zf=class extends Ai{urlAfterRedirects;state;type=dn.ResolveStart;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jf=class extends Ai{urlAfterRedirects;state;type=dn.ResolveEnd;constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hf=class{route;type=dn.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uf=class{route;type=dn.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qf=class{snapshot;type=dn.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$f=class{snapshot;type=dn.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gf=class{snapshot;type=dn.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wf=class{snapshot;type=dn.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sc=class{routerEvent;position;anchor;type=dn.Scroll;constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Dd=class{},_c=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function uR(e){return!(e instanceof Dd)&&!(e instanceof _c)}function hR(e,t){return e.providers&&!e._injector&&(e._injector=Wa(e.providers,t,`Route: ${e.path}`)),e._injector??t}function pr(e){return e.outlet||Ge}function pR(e,t){let n=e.filter(i=>pr(i)===t);return n.push(...e.filter(i=>pr(i)!==t)),n}function Nd(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Zf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Nd(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new ns(this.rootInjector)}},ns=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,i){let r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new Zf(this.rootInjector),this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(i){return new(i||e)(se(jt))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Yf=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=cv(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=cv(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=lv(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return lv(t,this._root).map(n=>n.value)}};function cv(e,t){if(e===t.value)return t;for(let n of t.children){let i=cv(e,n);if(i)return i}return null}function lv(e,t){if(e===t.value)return[t];for(let n of t.children){let i=lv(e,n);if(i.length)return i.unshift(t),i}return[]}var Pi=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function kc(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Td=class extends Yf{snapshot;constructor(t,n){super(t),this.snapshot=n,yv(this,t)}toString(){return this.snapshot.toString()}};function T5(e){let t=fR(e),n=new Dt([new Go("",{})]),i=new Dt({}),r=new Dt({}),o=new Dt({}),a=new Dt(""),s=new pi(n,i,o,a,r,Ge,e,t.root);return s.snapshot=t.root,new Td(new Pi(s,[]),t)}function fR(e){let t={},n={},i={},r="",o=new Qa([],t,i,r,n,Ge,e,null,{});return new Pd("",new Pi(o,[]))}var pi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,i,r,o,a,s,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ae(l=>l[Rd]))??we(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ae(t=>es(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ae(t=>es(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xf(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:ee(ee({},t.params),e.params),data:ee(ee({},t.data),e.data),resolve:ee(ee(ee(ee({},e.data),t.data),r?.data),e._resolvedData)}:i={params:ee({},e.params),data:ee({},e.data),resolve:ee(ee({},e.data),e._resolvedData??{})},r&&A5(r)&&(i.resolve[Rd]=r.title),i}var Qa=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Rd]}constructor(t,n,i,r,o,a,s,c,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=es(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=es(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Pd=class extends Yf{url;constructor(t,n){super(n),this.url=t,yv(this,n)}toString(){return P5(this._root)}};function yv(e,t){t.value._routerState=e,t.children.forEach(n=>yv(e,n))}function P5(e){let t=e.children.length>0?` { ${e.children.map(P5).join(", ")} } `:"";return`${e.value}${t}`}function tv(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Pr(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Pr(t.params,n.params)||e.paramsSubject.next(n.params),j9(t.url,n.url)||e.urlSubject.next(n.url),Pr(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function dv(e,t){let n=Pr(e.params,t.params)&&$9(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||dv(e.parent,t.parent))}function A5(e){return typeof e.title=="string"||e.title===null}var L5=new ae(""),Fd=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ge;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=y3(void 0);parentContexts=X(ns);location=X(sr);changeDetector=X(cr);inputBinder=X(Vd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=n;let r=this.location,a=n.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,c=new uv(n,s,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||e)};static \u0275dir=St({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[In]})}return e})(),uv=class{route;childContexts;parent;outletData;constructor(t,n,i,r){this.route=t,this.childContexts=n,this.parent=i,this.outletData=r}get(t,n){return t===pi?this.route:t===ns?this.childContexts:t===L5?this.outletData:this.parent.get(t,n)}},Vd=new ae(""),vv=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:i}=n,r=Cl([i.queryParams,i.params,i.data]).pipe($n(([o,a,s],c)=>(s=ee(ee(ee({},o),a),s),c===0?we(s):Promise.resolve(s)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(n);return}let a=x3(i.component);if(!a){this.unsubscribeFromRouteData(n);return}for(let{templateName:s}of a.inputs)n.activatedComponentRef.setInput(s,o[s])});this.outletDataSubscriptions.set(n,r)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})(),kv=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=Se({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Z(0,"router-outlet")},dependencies:[Fd],encapsulation:2})}return e})();function Mv(e){let t=e.children&&e.children.map(Mv),n=t?ge(ee({},e),{children:t}):ee({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=kv),n}function mR(e,t,n){let i=Ad(e,t._root,n?n._root:void 0);return new Td(i,t)}function Ad(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=gR(e,t,n);return new Pi(i,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>Ad(e,s)),a}}let i=yR(t.value),r=t.children.map(o=>Ad(e,o));return new Pi(i,r)}}function gR(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return Ad(e,i,r);return Ad(e,i)})}function yR(e){return new pi(new Dt(e.url),new Dt(e.params),new Dt(e.queryParams),new Dt(e.fragment),new Dt(e.data),e.outlet,e.component,e)}var Ic=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},O5="ngNavigationCancelingError";function Jf(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Zo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=R5(!1,Kn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function R5(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[O5]=!0,n.cancellationCode=t,n}function vR(e){return N5(e)&&Zo(e.url)}function N5(e){return!!e&&e[O5]}var kR=(e,t,n,i)=>Ae(r=>(new hv(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),hv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,i,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),tv(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=kc(n);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=kc(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=kc(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=kc(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Wf(o.value.snapshot))}),t.children.length&&this.forwardEvent(new $f(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(tv(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),tv(s.route.value),this.activateChildRoutes(t,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}else this.activateChildRoutes(t,null,i)}},Kf=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},wc=class{component;route;constructor(t,n){this.component=t,this.route=n}};function MR(e,t,n){let i=e._root,r=t?t._root:null;return Cd(i,r,n,[i.value])}function xR(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Dc(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!Bm(e)?e:t.get(e):i}function Cd(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=kc(t);return e.children.forEach(a=>{wR(a,o[a.value.outlet],n,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>_d(s,n.getContext(a),r)),r}function wR(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=bR(a,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Kf(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Cd(e,t,s?s.children:null,i,r):Cd(e,t,n,i,r),c&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new wc(s.outlet.component,a))}else a&&_d(t,s,r),r.canActivateChecks.push(new Kf(i)),o.component?Cd(e,null,s?s.children:null,i,r):Cd(e,null,n,i,r);return r}function bR(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Ka(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ka(e.url,t.url)||!Pr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dv(e,t)||!Pr(e.queryParams,t.queryParams);case"paramsChange":default:return!dv(e,t)}}function _d(e,t,n){let i=kc(e),r=e.value;Object.entries(i).forEach(([o,a])=>{r.component?t?_d(a,t.children.getContext(o),n):_d(a,null,n):_d(a,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new wc(t.outlet.component,r)):n.canDeactivateChecks.push(new wc(null,r)):n.canDeactivateChecks.push(new wc(null,r))}function Bd(e){return typeof e=="function"}function CR(e){return typeof e=="boolean"}function SR(e){return e&&Bd(e.canLoad)}function _R(e){return e&&Bd(e.canActivate)}function IR(e){return e&&Bd(e.canActivateChild)}function ER(e){return e&&Bd(e.canDeactivate)}function DR(e){return e&&Bd(e.canMatch)}function F5(e){return e instanceof Zr||e?.name==="EmptyError"}var Af=Symbol("INITIAL_VALUE");function Ec(){return $n(e=>Cl(e.map(t=>t.pipe(Fi(1),Sm(Af)))).pipe(Ae(t=>{for(let n of t)if(n!==!0){if(n===Af)return Af;if(n===!1||TR(n))return n}return!0}),fn(t=>t!==Af),Fi(1)))}function TR(e){return Zo(e)||e instanceof Ic}function PR(e,t){return Ft(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?we(ge(ee({},n),{guardsResult:!0})):AR(a,i,r,e).pipe(Ft(s=>s&&CR(s)?LR(i,o,e,t):we(s)),Ae(s=>ge(ee({},n),{guardsResult:s})))})}function AR(e,t,n,i){return Et(e).pipe(Ft(r=>VR(r.component,r.route,n,t,i)),Yr(r=>r!==!0,!0))}function LR(e,t,n,i){return Et(t).pipe(Mr(r=>Eo(RR(r.route.parent,i),OR(r.route,i),FR(e,r.path,n),NR(e,r.route,n))),Yr(r=>r!==!0,!0))}function OR(e,t){return e!==null&&t&&t(new Gf(e)),we(!0)}function RR(e,t){return e!==null&&t&&t(new qf(e)),we(!0)}function NR(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return we(!0);let r=i.map(o=>Sl(()=>{let a=Nd(t)??n,s=Dc(o,a),c=_R(s)?s.canActivate(t,e):Rn(a,()=>s(t,e));return po(c).pipe(Yr())}));return we(r).pipe(Ec())}function FR(e,t,n){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>xR(a)).filter(a=>a!==null).map(a=>Sl(()=>{let s=a.guards.map(c=>{let l=Nd(a.node)??n,u=Dc(c,l),d=IR(u)?u.canActivateChild(i,e):Rn(l,()=>u(i,e));return po(d).pipe(Yr())});return we(s).pipe(Ec())}));return we(o).pipe(Ec())}function VR(e,t,n,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return we(!0);let a=o.map(s=>{let c=Nd(t)??r,l=Dc(s,c),u=ER(l)?l.canDeactivate(e,t,n,i):Rn(c,()=>l(e,t,n,i));return po(u).pipe(Yr())});return we(a).pipe(Ec())}function BR(e,t,n,i){let r=t.canLoad;if(r===void 0||r.length===0)return we(!0);let o=r.map(a=>{let s=Dc(a,e),c=SR(s)?s.canLoad(t,n):Rn(e,()=>s(t,n));return po(c)});return we(o).pipe(Ec(),V5(i))}function V5(e){return pm(Pt(t=>{if(typeof t!="boolean")throw Jf(e,t)}),Ae(t=>t===!0))}function zR(e,t,n,i){let r=t.canMatch;if(!r||r.length===0)return we(!0);let o=r.map(a=>{let s=Dc(a,e),c=DR(s)?s.canMatch(t,n):Rn(e,()=>s(t,n));return po(c)});return we(o).pipe(Ec(),V5(i))}var Ld=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Od=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function vc(e){return $s(new Ld(e))}function jR(e){return $s(new ce(4e3,!1))}function HR(e){return $s(R5(!1,Kn.GuardRejected))}var pv=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return we(i);if(r.numberOfChildren>1||!r.children[Ge])return jR(`${t.redirectTo}`);r=r.children[Ge]}}applyRedirectCommands(t,n,i,r,o){return UR(n,r,o).pipe(Ae(a=>{if(a instanceof Lr)throw new Od(a);let s=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),t,i);if(a[0]==="/")throw new Od(s);return s}))}applyRedirectCreateUrlTree(t,n,i,r){let o=this.createSegmentGroup(t,n.root,i,r);return new Lr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[r]=n[s]}else i[r]=o}),i}createSegmentGroup(t,n,i,r){let o=this.createSegments(t,n.segments,i,r),a={};return Object.entries(n.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(t,c,i,r)}),new Mt(o,a)}createSegments(t,n,i,r){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new ce(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}};function UR(e,t,n){if(typeof e=="string")return we(e);let i=e,{queryParams:r,fragment:o,routeConfig:a,url:s,outlet:c,params:l,data:u,title:d}=t;return po(Rn(n,()=>i({params:l,data:u,queryParams:r,fragment:o,routeConfig:a,url:s,outlet:c,title:d})))}var fv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qR(e,t,n,i,r){let o=B5(e,t,n);return o.matched?(i=hR(t,i),zR(i,t,n,r).pipe(Ae(a=>a===!0?o:ee({},fv)))):we(o)}function B5(e,t,n){if(t.path==="**")return $R(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?ee({},fv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||f5)(n,e,t);if(!r)return ee({},fv);let o={};Object.entries(r.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=r.consumed.length>0?ee(ee({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function $R(e){return{matched:!0,parameters:e.length>0?g5(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function u5(e,t,n,i){return n.length>0&&ZR(e,n,i)?{segmentGroup:new Mt(t,WR(i,new Mt(n,e.children))),slicedSegments:[]}:n.length===0&&YR(e,n,i)?{segmentGroup:new Mt(e.segments,GR(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new Mt(e.segments,e.children),slicedSegments:n}}function GR(e,t,n,i){let r={};for(let o of n)if(e1(e,t,o)&&!i[pr(o)]){let a=new Mt([],{});r[pr(o)]=a}return ee(ee({},i),r)}function WR(e,t){let n={};n[Ge]=t;for(let i of e)if(i.path===""&&pr(i)!==Ge){let r=new Mt([],{});n[pr(i)]=r}return n}function ZR(e,t,n){return n.some(i=>e1(e,t,i)&&pr(i)!==Ge)}function YR(e,t,n){return n.some(i=>e1(e,t,i))}function e1(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function XR(e,t,n){return t.length===0&&!e.children[n]}var mv=class{};function JR(e,t,n,i,r,o,a="emptyOnly"){return new gv(e,t,n,i,r,a,o).recognize()}var KR=31,gv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,i,r,o,a,s){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new pv(this.urlSerializer,this.urlTree)}noMatchError(t){return new ce(4002,`'${t.segmentGroup}'`)}recognize(){let t=u5(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ae(({children:n,rootSnapshot:i})=>{let r=new Pi(i,n),o=new Pd("",r),a=S5(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(t){let n=new Qa([],Object.freeze({}),Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Ge,n).pipe(Ae(i=>({children:i,rootSnapshot:n})),bi(i=>{if(i instanceof Od)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ld?this.noMatchError(i):i}))}processSegmentGroup(t,n,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i,o):this.processSegment(t,n,i,i.segments,r,!0,o).pipe(Ae(a=>a instanceof Pi?[a]:[]))}processChildren(t,n,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return Et(o).pipe(Mr(a=>{let s=i.children[a],c=pR(n,a);return this.processSegmentGroup(t,c,s,a,r)}),Cm((a,s)=>(a.push(...s),a)),Do(null),bm(),Ft(a=>{if(a===null)return vc(i);let s=z5(a);return QR(s),we(s)}))}processSegment(t,n,i,r,o,a,s){return Et(n).pipe(Mr(c=>this.processSegmentAgainstRoute(c._injector??t,n,c,i,r,o,a,s).pipe(bi(l=>{if(l instanceof Ld)return we(null);throw l}))),Yr(c=>!!c),bi(c=>{if(F5(c))return XR(i,r,o)?we(new mv):vc(i);throw c}))}processSegmentAgainstRoute(t,n,i,r,o,a,s,c){return pr(i)!==a&&(a===Ge||!e1(r,o,i))?vc(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,a,c):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,o,a,c):vc(r)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,a,s){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=B5(n,r,o);if(!c)return vc(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KR&&(this.allowRedirects=!1));let p=new Qa(o,l,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,h5(r),pr(r),r.component??r._loadedComponent??null,r,p5(r)),f=Xf(p,s,this.paramsInheritanceStrategy);return p.params=Object.freeze(f.params),p.data=Object.freeze(f.data),this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,p,t).pipe($n(b=>this.applyRedirects.lineralizeSegments(r,b)),Ft(b=>this.processSegment(t,i,n,b.concat(h),a,!1,s)))}matchSegmentAgainstRoute(t,n,i,r,o,a){let s=qR(n,i,r,t,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe($n(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe($n(({routes:l})=>{let u=i._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:p}=c,f=new Qa(h,d,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,h5(i),pr(i),i.component??i._loadedComponent??null,i,p5(i)),g=Xf(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);let{segmentGroup:b,slicedSegments:x}=u5(n,h,p,l);if(x.length===0&&b.hasChildren())return this.processChildren(u,l,b,f).pipe(Ae(C=>new Pi(f,C)));if(l.length===0&&x.length===0)return we(new Pi(f,[]));let M=pr(i)===o;return this.processSegment(u,l,b,x,M?Ge:o,!0,f).pipe(Ae(C=>new Pi(f,C instanceof Pi?[C]:[])))}))):vc(n)))}getChildConfig(t,n,i){return n.children?we({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?we({routes:n._loadedRoutes,injector:n._loadedInjector}):BR(t,n,i,this.urlSerializer).pipe(Ft(r=>r?this.configLoader.loadChildren(t,n).pipe(Pt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):HR(n))):we({routes:[],injector:t})}};function QR(e){e.sort((t,n)=>t.value.outlet===Ge?-1:n.value.outlet===Ge?1:t.value.outlet.localeCompare(n.value.outlet))}function eN(e){let t=e.value.routeConfig;return t&&t.path===""}function z5(e){let t=[],n=new Set;for(let i of e){if(!eN(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=z5(i.children);t.push(new Pi(i.value,r))}return t.filter(i=>!n.has(i))}function h5(e){return e.data||{}}function p5(e){return e.resolve||{}}function tN(e,t,n,i,r,o){return Ft(a=>JR(e,t,n,i,a.extractedUrl,r,o).pipe(Ae(({state:s,tree:c})=>ge(ee({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function nN(e,t){return Ft(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return we(n);let o=new Set(r.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of j5(c))a.add(l);let s=0;return Et(a).pipe(Mr(c=>o.has(c)?iN(c,i,e,t):(c.data=Xf(c,c.parent,e).resolve,we(void 0))),Pt(()=>s++),Ws(1),Ft(c=>s===a.size?we(n):ai))})}function j5(e){let t=e.children.map(n=>j5(n)).flat();return[e,...t]}function iN(e,t,n,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!A5(r)&&(o[Rd]=r.title),Sl(()=>(e.data=Xf(e,e.parent,n).resolve,rN(o,e,t,i).pipe(Ae(a=>(e._resolvedData=a,e.data=ee(ee({},e.data),a),null)))))}function rN(e,t,n,i){let r=rv(e);if(r.length===0)return we({});let o={};return Et(r).pipe(Ft(a=>oN(e[a],t,n,i).pipe(Yr(),Pt(s=>{if(s instanceof Ic)throw Jf(new Wo,s);o[a]=s}))),Ws(1),Ae(()=>o),bi(a=>F5(a)?ai:$s(a)))}function oN(e,t,n,i){let r=Nd(t)??i,o=Dc(e,r),a=o.resolve?o.resolve(t,n):Rn(r,()=>o(t,n));return po(a)}function nv(e){return $n(t=>{let n=e(t);return n?Et(n).pipe(Ae(()=>t)):we(t)})}var xv=(()=>{class e{buildTitle(n){let i,r=n.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ge);return i}getResolvedTitleForRoute(n){return n.data[Rd]}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>X(H5),providedIn:"root"})}return e})(),H5=(()=>{class e extends xv{title;constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||e)(se(r5))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Xo=new ae("",{providedIn:"root",factory:()=>({})}),is=new ae(""),t1=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=X(ly);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return we(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=po(n.loadComponent()).pipe(Ae(q5),Pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),To(()=>{this.componentLoaders.delete(n)})),r=new Us(i,()=>new Qt).pipe(Hs());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return we({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=U5(i,this.compiler,n,this.onLoadEndListener).pipe(To(()=>{this.childrenLoaders.delete(i)})),a=new Us(o,()=>new Qt).pipe(Hs());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function U5(e,t,n,i){return po(e.loadChildren()).pipe(Ae(q5),Ft(r=>r instanceof Zp||Array.isArray(r)?we(r):Et(t.compileModuleAsync(r))),Ae(r=>{i&&i(e);let o,a,s=!1;return Array.isArray(r)?(a=r,s=!0):(o=r.create(n).injector,a=o.get(is,[],{optional:!0,self:!0}).flat()),{routes:a.map(Mv),injector:o}}))}function aN(e){return e&&typeof e=="object"&&"default"in e}function q5(e){return aN(e)?e.default:e}var n1=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>X(sN),providedIn:"root"})}return e})(),sN=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),wv=new ae(""),bv=new ae("");function $5(e,t,n){let i=e.get(bv),r=e.get(Ut);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,a=new Promise(l=>{o=l}),s=r.startViewTransition(()=>(o(),cN(e))),{onViewTransitionCreated:c}=i;return c&&Rn(e,()=>c({transition:s,from:t,to:n})),a}function cN(e){return new Promise(t=>{ad({read:()=>setTimeout(t)},{injector:e})})}var Cv=new ae(""),i1=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Qt;transitionAbortWithErrorSubject=new Qt;configLoader=X(t1);environmentInjector=X(jt);destroyRef=X(no);urlSerializer=X(ts);rootContexts=X(ns);location=X(qo);inputBindingEnabled=X(Vd,{optional:!0})!==null;titleStrategy=X(xv);options=X(Xo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=X(n1);createViewTransition=X(wv,{optional:!0});navigationErrorHandler=X(Cv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>we(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=r=>this.events.next(new Hf(r)),i=r=>this.events.next(new Uf(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;this.transitions?.next(ge(ee({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(n){return this.transitions=new Dt(null),this.transitions.pipe(fn(i=>i!==null),$n(i=>{let r=!1;return we(i).pipe($n(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Kn.SupersededByNewNavigation),ai;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ge(ee({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),s=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&s!=="reload"){let c="";return this.events.next(new Or(o.id,this.urlSerializer.serialize(o.rawUrl),c,bc.IgnoredSameUrlNavigation)),o.resolve(!1),ai}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return we(o).pipe($n(c=>(this.events.next(new Yo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ai:Promise.resolve(c))),tN(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Pt(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=ge(ee({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Ed(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:h}=o,p=new Yo(c,this.urlSerializer.serialize(l),u,d);this.events.next(p);let f=T5(this.rootComponentType).snapshot;return this.currentTransition=i=ge(ee({},o),{targetSnapshot:f,urlAfterRedirects:l,extras:ge(ee({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,we(i)}else{let c="";return this.events.next(new Or(o.id,this.urlSerializer.serialize(o.extractedUrl),c,bc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ai}}),Pt(o=>{let a=new Vf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ae(o=>(this.currentTransition=i=ge(ee({},o),{guards:MR(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),PR(this.environmentInjector,o=>this.events.next(o)),Pt(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Jf(this.urlSerializer,o.guardsResult);let a=new Bf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),fn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Kn.GuardRejected),!1)),nv(o=>{if(o.guards.canActivateChecks.length!==0)return we(o).pipe(Pt(a=>{let s=new zf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}),$n(a=>{let s=!1;return we(a).pipe(nN(this.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>s=!0,complete:()=>{s||this.cancelNavigationTransition(a,"",Kn.NoDataFromResolver)}}))}),Pt(a=>{let s=new jf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}))}),nv(o=>{let a=s=>{let c=[];s.routeConfig?.loadComponent&&!s.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(s.routeConfig).pipe(Pt(l=>{s.component=l}),Ae(()=>{})));for(let l of s.children)c.push(...a(l));return c};return Cl(a(o.targetSnapshot.root)).pipe(Do(null),Fi(1))}),nv(()=>this.afterPreactivation()),$n(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,s=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return s?Et(s).pipe(Ae(()=>i)):we(i)}),Ae(o=>{let a=mR(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=ge(ee({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Pt(()=>{this.events.next(new Dd)}),kR(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Fi(1),Sh(new qe(o=>{let a=i.abortController.signal,s=()=>o.next();return a.addEventListener("abort",s),()=>a.removeEventListener("abort",s)}).pipe(fn(()=>!r&&!i.targetRouterState),Pt(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Kn.Aborted)}))),Pt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Sh(this.transitionAbortWithErrorSubject.pipe(Pt(o=>{throw o}))),To(()=>{r||this.cancelNavigationTransition(i,"",Kn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),bi(o=>{if(this.destroyed)return i.resolve(!1),ai;if(r=!0,N5(o))this.events.next(new Ar(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),vR(o)?this.events.next(new _c(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Cc(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let s=Rn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(s instanceof Ic){let{message:c,cancellationCode:l}=Jf(this.urlSerializer,s);this.events.next(new Ar(i.id,this.urlSerializer.serialize(i.extractedUrl),c,l)),this.events.next(new _c(s.redirectTo,s.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(s){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(s)}}return ai}))}))}cancelNavigationTransition(n,i,r){let o=new Ar(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function lN(e){return e!==xc}var G5=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>X(dN),providedIn:"root"})}return e})(),Qf=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},dN=(()=>{class e extends Qf{static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),W5=(()=>{class e{urlSerializer=X(ts);options=X(Xo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=X(qo);urlHandlingStrategy=X(n1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Lr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:i,targetBrowserUrl:r}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,i):i,a=r??o;return a instanceof Lr?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:n,finalUrl:i,initialUrl:r}){i&&n?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=n):this.rawUrlTree=r}routerState=T5(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:()=>X(uN),providedIn:"root"})}return e})(),uN=(()=>{class e extends W5{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{n(i.url,i.state,"popstate")})})}handleRouterEvent(n,i){n instanceof Yo?this.updateStateMemento():n instanceof Or?this.commitTransition(i):n instanceof Ed?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof Dd?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof Ar&&n.code!==Kn.SupersededByNewNavigation&&n.code!==Kn.Redirect?this.restoreHistory(i):n instanceof Cc?this.restoreHistory(i,!0):n instanceof hi&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(n)||o){let s=this.browserPageId,c=ee(ee({},a),this.generateNgRouterState(r,s));this.location.replaceState(n,"",c)}else{let s=ee(ee({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(n,"",s)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function r1(e,t){e.events.pipe(fn(n=>n instanceof hi||n instanceof Ar||n instanceof Cc||n instanceof Or),Ae(n=>n instanceof hi||n instanceof Or?0:(n instanceof Ar?n.code===Kn.Redirect||n.code===Kn.SupersededByNewNavigation:!1)?2:1),fn(n=>n!==2),Fi(1)).subscribe(()=>{t()})}var hN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mt=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=X(Jp);stateManager=X(W5);options=X(Xo,{optional:!0})||{};pendingTasks=X(_r);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=X(i1);urlSerializer=X(ts);location=X(qo);urlHandlingStrategy=X(n1);injector=X(jt);_events=new Qt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=X(G5);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=X(is,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!X(Vd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Bt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ar&&i.code!==Kn.Redirect&&i.code!==Kn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof hi)this.navigated=!0;else if(i instanceof _c){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=ee({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lN(r.source)},a);this.scheduleNavigation(s,xc,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}uR(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i,r)=>{this.navigateToSyncWithBrowser(n,r,i)})}navigateToSyncWithBrowser(n,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let c=ee({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let s=this.parseUrl(n);this.scheduleNavigation(s,i,a,o).catch(c=>{this.injector.get(li)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Mv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,u=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":u=ee(ee({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=_5(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return I5(d,n,u,l??null)}navigateByUrl(n,i={skipLocationChange:!1}){let r=Zo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,xc,null,i)}navigate(n,i={skipLocationChange:!1}){return fN(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,i){let r;if(i===!0?r=ee({},hN):i===!1?r=ee({},pN):r=i,Zo(n))return s5(this.currentUrlTree,n,r);let o=this.parseUrl(n);return s5(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.entries(n).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(n,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,c,l;a?(s=a.resolve,c=a.reject,l=a.promise):l=new Promise((d,h)=>{s=d,c=h});let u=this.pendingTasks.add();return r1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:s,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function fN(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ce(4008,!1)}var o1=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=nr(null);get href(){return Ti(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Qt;applicationErrorHandler=X(li);options=X(Xo,{optional:!0});constructor(n,i,r,o,a,s){this.router=n,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=s,this.reactiveHref.set(X(new uf("href"),{optional:!0}));let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,i=r=>r==="merge"||r==="preserve";n||=i(this.queryParamsHandling),n||=!this.queryParamsHandling&&!i(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(r=>{r instanceof hi&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Zo(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,i,r,o,a){let s=this.urlTree;if(s===null||this.isAnchorElement&&(n!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,n,i):r.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Zo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||e)(G(mt),G(pi),Jl("tabindex"),G(Jn),G(ln),G(dr))};static \u0275dir=St({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(i,r){i&1&&q("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ao("href",r.reactiveHref(),S2)("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Uo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Uo],replaceUrl:[2,"replaceUrl","replaceUrl",Uo],routerLink:"routerLink"},features:[In]})}return e})();var zd=class{};var Z5=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(n,i,r,o){this.router=n,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(fn(n=>n instanceof hi),Mr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Wa(o.providers,n,`Route: ${o.path}`));let a=o._injector??n,s=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(s,o.children??o._loadedRoutes))}return Et(r).pipe(Gs())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(n,i):r=we(null);let o=r.pipe(Ft(a=>a===null?we(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Et([o,a]).pipe(Gs())}else return o})}static \u0275fac=function(i){return new(i||e)(se(mt),se(jt),se(zd),se(t1))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Y5=new ae(""),mN=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=xc;restoredId=0;store={};constructor(n,i,r,o,a={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Yo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof hi?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Or&&n.code===bc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Sc&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>qn(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Sc(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){$2()};static \u0275prov=re({token:e,factory:e.\u0275fac})}return e})();function _v(e,...t){return Qi([{provide:is,multi:!0,useValue:e},[],{provide:pi,useFactory:X5,deps:[mt]},{provide:oo,multi:!0,useFactory:J5},t.map(n=>n.\u0275providers)])}function X5(e){return e.routerState.root}function jd(e,t){return{\u0275kind:e,\u0275providers:t}}function J5(){let e=X(On);return t=>{let n=e.get(ui);if(t!==n.components[0])return;let i=e.get(mt),r=e.get(K5);e.get(Iv)===1&&i.initialNavigation(),e.get(tS,null,{optional:!0})?.setUpPreloading(),e.get(Y5,null,{optional:!0})?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var K5=new ae("",{factory:()=>new Qt}),Iv=new ae("",{providedIn:"root",factory:()=>1});function Q5(){let e=[{provide:Iv,useValue:0},Kp(()=>{let t=X(On);return t.get(Dy,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(mt),o=t.get(K5);r1(r,()=>{i(!0)}),t.get(i1).afterPreactivation=()=>(i(!0),o.closed?we(void 0):o),r.initialNavigation()}))})];return jd(2,e)}function eS(){let e=[Kp(()=>{X(mt).setUpLocationChangeListener()}),{provide:Iv,useValue:2}];return jd(3,e)}var tS=new ae("");function nS(e){return jd(0,[{provide:tS,useExisting:Z5},{provide:zd,useExisting:e}])}function iS(){return jd(8,[vv,{provide:Vd,useExisting:vv}])}function rS(e){di("NgRouterViewTransitions");let t=[{provide:wv,useValue:$5},{provide:bv,useValue:ee({skipNextTransition:!!e?.skipInitialTransition},e)}];return jd(9,t)}var oS=[qo,{provide:ts,useClass:Wo},mt,ns,{provide:pi,useFactory:X5,deps:[mt]},t1,[]],fr=(()=>{class e{constructor(){}static forRoot(n,i){return{ngModule:e,providers:[oS,[],{provide:is,multi:!0,useValue:n},[],i?.errorHandler?{provide:Cv,useValue:i.errorHandler}:[],{provide:Xo,useValue:i||{}},i?.useHash?yN():vN(),gN(),i?.preloadingStrategy?nS(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?kN(i):[],i?.bindToComponentInputs?iS().\u0275providers:[],i?.enableViewTransitions?rS().\u0275providers:[],MN()]}}static forChild(n){return{ngModule:e,providers:[{provide:is,multi:!0,useValue:n}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=En({type:e});static \u0275inj=mn({})}return e})();function gN(){return{provide:Y5,useFactory:()=>{let e=X(P3),t=X(Ct),n=X(Xo),i=X(i1),r=X(ts);return n.scrollOffset&&e.setOffset(n.scrollOffset),new mN(r,i,e,t,n)}}}function yN(){return{provide:dr,useClass:Py}}function vN(){return{provide:dr,useClass:mf}}function kN(e){return[e.initialNavigation==="disabled"?eS().\u0275providers:[],e.initialNavigation==="enabledBlocking"?Q5().\u0275providers:[]]}var Sv=new ae("");function MN(){return[{provide:Sv,useFactory:J5},{provide:oo,multi:!0,useExisting:Sv}]}var mS=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,i){this._renderer=n,this._elementRef=i}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(i){return new(i||e)(G(Jn),G(ln))};static \u0275dir=St({type:e})}return e})(),y1=(()=>{class e extends mS{static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275dir=St({type:e,features:[Fn]})}return e})(),Oc=new ae("");var xN={provide:Oc,useExisting:Wn(()=>Nr),multi:!0};function wN(){let e=Ui()?Ui().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var bN=new ae(""),Nr=(()=>{class e extends mS{_compositionMode;_composing=!1;constructor(n,i,r){super(n,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!wN())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(i){return new(i||e)(G(Jn),G(ln),G(bN,8))};static \u0275dir=St({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&q("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Hi([xN]),Fn]})}return e})();function Pv(e){return e==null||Av(e)===0}function Av(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Rc=new ae(""),v1=new ae(""),CN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Rr=class{static min(t){return gS(t)}static max(t){return SN(t)}static required(t){return yS(t)}static requiredTrue(t){return _N(t)}static email(t){return IN(t)}static minLength(t){return EN(t)}static maxLength(t){return DN(t)}static pattern(t){return TN(t)}static nullValidator(t){return s1()}static compose(t){return bS(t)}static composeAsync(t){return CS(t)}};function gS(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function SN(e){return t=>{if(t.value==null||e==null)return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function yS(e){return Pv(e.value)?{required:!0}:null}function _N(e){return e.value===!0?null:{required:!0}}function IN(e){return Pv(e.value)||CN.test(e.value)?null:{email:!0}}function EN(e){return t=>{let n=t.value?.length??Av(t.value);return n===null||n===0?null:n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}function DN(e){return t=>{let n=t.value?.length??Av(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function TN(e){if(!e)return s1;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(Pv(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function s1(e){return null}function vS(e){return e!=null}function kS(e){return zo(e)?Et(e):e}function MS(e){let t={};return e.forEach(n=>{t=n!=null?ee(ee({},t),n):t}),Object.keys(t).length===0?null:t}function xS(e,t){return t.map(n=>n(e))}function PN(e){return!e.validate}function wS(e){return e.map(t=>PN(t)?t:n=>t.validate(n))}function bS(e){if(!e)return null;let t=e.filter(vS);return t.length==0?null:function(n){return MS(xS(n,t))}}function Lv(e){return e!=null?bS(wS(e)):null}function CS(e){if(!e)return null;let t=e.filter(vS);return t.length==0?null:function(n){let i=xS(n,t).map(kS);return Mm(i).pipe(Ae(MS))}}function Ov(e){return e!=null?CS(wS(e)):null}function aS(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function SS(e){return e._rawValidators}function _S(e){return e._rawAsyncValidators}function Ev(e){return e?Array.isArray(e)?e:[e]:[]}function c1(e,t){return Array.isArray(e)?e.includes(t):e===t}function sS(e,t){let n=Ev(t);return Ev(e).forEach(r=>{c1(n,r)||n.push(r)}),n}function cS(e,t){return Ev(t).filter(n=>!c1(e,n))}var l1=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lv(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ov(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},fo=class extends l1{name;get formDirective(){return null}get path(){return null}},rs=class extends l1{_parent=null;name=null;valueAccessor=null},d1=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},AN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ble=ge(ee({},AN),{"[class.ng-submitted]":"isSubmitted"}),Ko=(()=>{class e extends d1{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(G(rs,2))};static \u0275dir=St({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ce("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Fn]})}return e})(),Nc=(()=>{class e extends d1{constructor(n){super(n)}static \u0275fac=function(i){return new(i||e)(G(fo,10))};static \u0275dir=St({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ce("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Fn]})}return e})();var Hd="VALID",a1="INVALID",Tc="PENDING",Ud="DISABLED",Jo=class{},u1=class extends Jo{value;source;constructor(t,n){super(),this.value=t,this.source=n}},$d=class extends Jo{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Gd=class extends Jo{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Pc=class extends Jo{status;source;constructor(t,n){super(),this.status=t,this.source=n}},h1=class extends Jo{source;constructor(t){super(),this.source=t}},p1=class extends Jo{source;constructor(t){super(),this.source=t}};function Rv(e){return(k1(e)?e.validators:e)||null}function LN(e){return Array.isArray(e)?Lv(e):e||null}function Nv(e,t){return(k1(t)?t.asyncValidators:e)||null}function ON(e){return Array.isArray(e)?Ov(e):e||null}function k1(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function IS(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new ce(1e3,"");if(!i[n])throw new ce(1001,"")}function ES(e,t,n){e._forEachChild((i,r)=>{if(n[r]===void 0)throw new ce(1002,"")})}var Ac=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ti(this.statusReactive)}set status(t){Ti(()=>this.statusReactive.set(t))}_status=jo(()=>this.statusReactive());statusReactive=nr(void 0);get valid(){return this.status===Hd}get invalid(){return this.status===a1}get pending(){return this.status==Tc}get disabled(){return this.status===Ud}get enabled(){return this.status!==Ud}errors;get pristine(){return Ti(this.pristineReactive)}set pristine(t){Ti(()=>this.pristineReactive.set(t))}_pristine=jo(()=>this.pristineReactive());pristineReactive=nr(!0);get dirty(){return!this.pristine}get touched(){return Ti(this.touchedReactive)}set touched(t){Ti(()=>this.touchedReactive.set(t))}_touched=jo(()=>this.touchedReactive());touchedReactive=nr(!1);get untouched(){return!this.touched}_events=new Qt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(sS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(sS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(cS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(cS(t,this._rawAsyncValidators))}hasValidator(t){return c1(this._rawValidators,t)}hasAsyncValidator(t){return c1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ge(ee({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new Gd(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),n&&t.emitEvent!==!1&&this._events.next(new Gd(!1,i))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ge(ee({},t),{sourceControl:i})),n&&t.emitEvent!==!1&&this._events.next(new $d(!1,i))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),n&&t.emitEvent!==!1&&this._events.next(new $d(!0,i))}markAsPending(t={}){this.status=Tc;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Pc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ge(ee({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ud,this.errors=null,this._forEachChild(r=>{r.disable(ge(ee({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new u1(this.value,i)),this._events.next(new Pc(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(ee({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Hd,this._forEachChild(i=>{i.enable(ge(ee({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ge(ee({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hd||this.status===Tc)&&this._runAsyncValidator(i,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new u1(this.value,n)),this._events.next(new Pc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ge(ee({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ud:Hd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Tc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let i=kS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Pc(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,i)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?Ud:this.errors?a1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tc)?Tc:this._anyControlsHaveStatus(a1)?a1:Hd}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),r&&this._events.next(new $d(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Gd(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){k1(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=LN(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ON(this._rawAsyncValidators)}},Lc=class extends Ac{constructor(t,n,i){super(Rv(n),Nv(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){ES(this,!0,t),Object.keys(t).forEach(i=>{IS(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Dv=class extends Lc{};var Zd=new ae("",{providedIn:"root",factory:()=>M1}),M1="always";function DS(e,t){return[...t.path,e]}function f1(e,t,n=M1){Fv(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),NN(e,t),VN(e,t),FN(e,t),RN(e,t)}function lS(e,t,n=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),g1(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function m1(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function RN(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Fv(e,t){let n=SS(e);t.validator!==null?e.setValidators(aS(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=_S(e);t.asyncValidator!==null?e.setAsyncValidators(aS(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();m1(t._rawValidators,r),m1(t._rawAsyncValidators,r)}function g1(e,t){let n=!1;if(e!==null){if(t.validator!==null){let r=SS(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.validator);o.length!==r.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let r=_S(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.asyncValidator);o.length!==r.length&&(n=!0,e.setAsyncValidators(o))}}}let i=()=>{};return m1(t._rawValidators,i),m1(t._rawAsyncValidators,i),n}function NN(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&TS(e,t)})}function FN(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&TS(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function TS(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function VN(e,t){let n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function PS(e,t){e==null,Fv(e,t)}function BN(e,t){return g1(e,t)}function AS(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function zN(e){return Object.getPrototypeOf(e.constructor)===y1}function LS(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function OS(e,t){if(!t)return null;Array.isArray(t);let n,i,r;return t.forEach(o=>{o.constructor===Nr?n=o:zN(o)?i=o:r=o}),r||i||n||null}function jN(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var HN={provide:fo,useExisting:Wn(()=>Yd)},qd=Promise.resolve(),Yd=(()=>{class e extends fo{callSetDisabledState;get submitted(){return Ti(this.submittedReactive)}_submitted=jo(()=>this.submittedReactive());submittedReactive=nr(!1);_directives=new Set;form;ngSubmit=new Ve;options;constructor(n,i,r){super(),this.callSetDisabledState=r,this.form=new Lc({},Lv(n),Ov(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){qd.then(()=>{let i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),f1(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){qd.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){qd.then(()=>{let i=this._findContainer(n.path),r=new Lc({});PS(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){qd.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){qd.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),LS(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new h1(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new p1(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(i){return new(i||e)(G(Rc,10),G(v1,10),G(Zd,8))};static \u0275dir=St({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&q("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Hi([HN]),Fn]})}return e})();function dS(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function uS(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Wd=class extends Ac{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,i){super(Rv(n),Nv(i,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),k1(n)&&(n.nonNullable||n.initialValueIsDefault)&&(uS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){dS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){dS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){uS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var UN=e=>e instanceof Wd;var qN={provide:rs,useExisting:Wn(()=>os)},hS=Promise.resolve(),os=(()=>{class e extends rs{_changeDetectorRef;callSetDisabledState;control=new Wd;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ve;constructor(n,i,r,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=OS(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),AS(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){f1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){hS.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,r=i!==0&&Uo(i);hS.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?DS(n,this._parent):[n]}static \u0275fac=function(i){return new(i||e)(G(fo,9),G(Rc,10),G(v1,10),G(Oc,10),G(cr,8),G(Zd,8))};static \u0275dir=St({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Hi([qN]),Fn,In]})}return e})();var Fc=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275dir=St({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})(),$N={provide:Oc,useExisting:Wn(()=>Vv),multi:!0},Vv=(()=>{class e extends y1{writeValue(n){let i=n??"";this.setProperty("value",i)}registerOnChange(n){this.onChange=i=>{n(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275dir=St({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&q("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Hi([$N]),Fn]})}return e})();var RS=new ae("");var GN={provide:fo,useExisting:Wn(()=>Bv)},Bv=(()=>{class e extends fo{callSetDisabledState;get submitted(){return Ti(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=jo(()=>this._submittedReactive());_submittedReactive=nr(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ve;constructor(n,i,r){super(),this.callSetDisabledState=r,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(g1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let i=this.form.get(n.path);return f1(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){lS(n.control||null,n,!1),jN(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this._submittedReactive.set(!0),LS(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new h1(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,i={}){this.form.reset(n,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new p1(this.form))}_updateDomValue(){this.directives.forEach(n=>{let i=n.control,r=this.form.get(n.path);i!==r&&(lS(i||null,n),UN(r)&&(f1(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let i=this.form.get(n.path);PS(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let i=this.form.get(n.path);i&&BN(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fv(this.form,this),this._oldForm&&g1(this._oldForm,this)}static \u0275fac=function(i){return new(i||e)(G(Rc,10),G(v1,10),G(Zd,8))};static \u0275dir=St({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&q("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Hi([GN]),Fn,In]})}return e})();var WN={provide:rs,useExisting:Wn(()=>zv)},zv=(()=>{class e extends rs{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new Ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,i,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=OS(this,o)}ngOnChanges(n){this._added||this._setUpControl(),AS(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return DS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||e)(G(fo,13),G(Rc,10),G(v1,10),G(Oc,10),G(RS,8))};static \u0275dir=St({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Hi([WN]),Fn,In]})}return e})();var ZN={provide:Oc,useExisting:Wn(()=>Vc),multi:!0};function NS(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function YN(e){return e.split(":")[0]}var Vc=(()=>{class e extends y1{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i=this._getOptionId(n),r=NS(i,n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=YN(n);return this._optionMap.has(i)?this._optionMap.get(i):n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275dir=St({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&q("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Hi([ZN]),Fn]})}return e})(),x1=(()=>{class e{_element;_renderer;_select;id;constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(NS(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||e)(G(ln),G(Jn),G(Vc,9))};static \u0275dir=St({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),XN={provide:Oc,useExisting:Wn(()=>FS),multi:!0};function pS(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function JN(e){return e.split(":")[0]}var FS=(()=>{class e extends y1{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let i;if(Array.isArray(n)){let r=n.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let c=a[s],l=this._getOptionValue(c.value);r.push(l)}}else{let a=i.options;for(let s=0;s<a.length;s++){let c=a[s];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,n(r)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=JN(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275dir=St({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&q("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Hi([XN]),Fn]})}return e})(),w1=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(pS(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(pS(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||e)(G(ln),G(Jn),G(FS,9))};static \u0275dir=St({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();function KN(e){return typeof e=="number"?e:parseFloat(e)}var VS=(()=>{class e{_validator=s1;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let i=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):s1,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(i){return new(i||e)};static \u0275dir=St({type:e,features:[In]})}return e})();var QN={provide:Rc,useExisting:Wn(()=>jv),multi:!0},jv=(()=>{class e extends VS{min;inputName="min";normalizeInput=n=>KN(n);createValidator=n=>gS(n);static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275dir=St({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&ao("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[Hi([QN]),Fn]})}return e})(),eF={provide:Rc,useExisting:Wn(()=>Xd),multi:!0};var Xd=(()=>{class e extends VS{required;inputName="required";normalizeInput=Uo;createValidator=n=>yS;enabled(n){return n}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ar(e)))(r||e)}})();static \u0275dir=St({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&ao("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Hi([eF]),Fn]})}return e})();var BS=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=En({type:e});static \u0275inj=mn({})}return e})(),Tv=class extends Ac{constructor(t,n,i){super(Rv(n),Nv(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){ES(this,!1,t),t.forEach((i,r)=>{IS(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function fS(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var zS=(()=>{class e{useNonNullable=!1;get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,i=null){let r=this._reduceControls(n),o={};return fS(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Lc(r,o)}record(n,i=null){let r=this._reduceControls(n);return new Dv(r,i)}control(n,i,r){let o={};return this.useNonNullable?(fS(i)?o=i:(o.validators=i,o.asyncValidators=r),new Wd(n,ge(ee({},o),{nonNullable:!0}))):new Wd(n,i,r)}array(n,i,r){let o=n.map(a=>this._createControl(a));return new Tv(o,i,r)}_reduceControls(n){let i={};return Object.keys(n).forEach(r=>{i[r]=this._createControl(n[r])}),i}_createControl(n){if(n instanceof Wd)return n;if(n instanceof Ac)return n;if(Array.isArray(n)){let i=n[0],r=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(i,r,o)}else return this.control(n)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Bc=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Zd,useValue:n.callSetDisabledState??M1}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=En({type:e});static \u0275inj=mn({imports:[BS]})}return e})(),jS=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:RS,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Zd,useValue:n.callSetDisabledState??M1}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=En({type:e});static \u0275inj=mn({imports:[BS]})}return e})();var C1=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"footer-content"]],template:function(n,i){n&1&&(y(0,"footer")(1,"div",0)(2,"p"),I(3,"\xA9 2025 UMLand. Todos os direitos reservados."),v(),y(4,"p"),I(5,"Desenvolvido por MATRIX"),v()()())},styles:["footer[_ngcontent-%COMP%]{width:100%;flex-shrink:0}.footer-content[_ngcontent-%COMP%]{text-align:center;padding:15px;background-color:var(--black);color:var(--white);font-size:14px;border-top:2px solid var(--yellow);width:100%}"]})};var on={production:"https://umland-backend-production.up.railway.app",local:"http://localhost:9090",get BASE_URL(){let e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?this.local:this.production},ENDPOINTS:{USERS:"/users",AVATARS:"/avatars",CHARACTERS:"/characters",PHASES:"/phases",ITEMS:"/items"}};var yn=class e{constructor(t,n){this.http=t;this.platformId=n;this.baseUrl=on.BASE_URL,pt(this.platformId)&&(this.baseUrl=window.apiUrl||this.baseUrl)}baseUrl;currentUser=null;userDataSubject=new Dt(null);userData$=this.userDataSubject.asObservable();registerUser(t){let n=`${this.baseUrl}/usuarios/`;return this.http.post(n,t).pipe(bi(i=>{throw console.error("Error during user registration:",i),{error:i.message||"Failed to register user",statusCode:i.status}}))}getDefaultUserData(t){return null}updateUserData(t){pt(this.platformId)&&(localStorage.setItem("currentUser",JSON.stringify(t)),this.userDataSubject.next(t))}loadUserData(){if(pt(this.platformId)){let t=localStorage.getItem("currentUser");if(t){let n=JSON.parse(t);return this.userDataSubject.next(n),n}}return null}getUserById(t){return we(null).pipe(wm(300),Ae(()=>{let n=this.getDefaultUserData(t);if(!n)throw new Error("User not found");if(pt(this.platformId)){let i=this.loadUserData();if(i)return{user:i,inventory:JSON.parse(localStorage.getItem("inventory")||"{}")}}return n}),bi(n=>{throw{error:n.message||"User not found",statusCode:404}}))}getUserByIdHttp(t){return this.http.get(`${this.baseUrl}/user/${t}`).pipe(bi(n=>{throw{error:n.message||"Failed to fetch user",statusCode:n.status}}))}static \u0275fac=function(n){return new(n||e)(se(rn),se(xt))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var fi=class e{constructor(t,n){this.http=t;this.platformId=n}tokenKey="authToken";userKey="authUser";api=on.BASE_URL;login(t){let n=new $t().set("email",t.email).set("password",t.password);return this.http.post(`${this.api}/users/login`,null,{params:n}).pipe(Ae(i=>{if(i&&i.length>0)return{token:"tokenDefault",user:i[0]};throw new Error("Usu\xE1rio n\xE3o encontrado")}),Pt(i=>{this.setToken(i.token),this.setUser(i.user),typeof localStorage<"u"&&localStorage.setItem("userId",i.user.id.toString())}))}register(t){console.log("Registrando usu\xE1rio com dados:",t);let n=new $t().set("name",t.name).set("email",t.email).set("password",t.password).set("idAvatar",t.idAvatar);return this.http.post(`${this.api}/users`,null,{params:n})}logout(){}setToken(t){pt(this.platformId)&&localStorage.setItem(this.tokenKey,t)}setUser(t){pt(this.platformId)&&localStorage.setItem(this.userKey,JSON.stringify(t))}getCurrentUser(){if(pt(this.platformId)){let t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}return null}clearAuth(){typeof localStorage<"u"&&(localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.userKey))}isLoggedIn(){return typeof localStorage<"u"?!!localStorage.getItem(this.tokenKey):!1}getToken(){return typeof localStorage<"u"?localStorage.getItem(this.tokenKey):null}getUser(){if(typeof localStorage<"u"){let t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}return null}validateToken(){return this.http.get(`${this.api}/auth/validate`)}logoutLocal(){this.clearAuth()}static \u0275fac=function(n){return new(n||e)(se(rn),se(xt))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var Vn=class e{notificationsSubject=new Dt([]);notifications$=this.notificationsSubject.asObservable();idCounter=0;maxNotifications=5;constructor(){}showSuccess(t,n=4e3){return this.addNotification({type:"success",message:t,duration:n,autoDismiss:!0})}showError(t,n=6e3){return this.addNotification({type:"error",message:t,duration:n,autoDismiss:!0})}showAchievement(t,n=5e3){return this.addNotification({type:"achievement",message:t,duration:n,autoDismiss:!0})}showNotification(t,n,i){let r={success:4e3,error:6e3,achievement:5e3};return this.addNotification({type:t,message:n,duration:i||r[t],autoDismiss:!0})}addNotification(t){let n=this.notificationsSubject.value,i=Date.now(),r=500,o=n.find(l=>l.type===t.type&&l.message===t.message&&l.timestamp&&i-l.timestamp<r);if(o)return o.id;let a=this.generateId(),s=ee({id:a,duration:4e3,autoDismiss:!0,timestamp:i},t),c=[...n,s];return c.length>this.maxNotifications&&(c=c.slice(-this.maxNotifications)),this.notificationsSubject.next(c),a}removeNotification(t){let i=this.notificationsSubject.value.filter(r=>r.id!==t);this.notificationsSubject.next(i)}clearAll(){this.notificationsSubject.next([])}getNotifications(){return this.notificationsSubject.value}generateId(){return`notification-${++this.idCounter}-${Date.now()}`}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var mi=class e{contextState=new Dt({context:"other",canUseItems:!1});contextState$=this.contextState.asObservable();constructor(){}setContext(t,n,i){let r=t==="game-phase";this.contextState.next({context:t,phaseId:n,gameMapId:i,canUseItems:r})}getCurrentContext(){return this.contextState.value}canUseItems(){return this.contextState.value.canUseItems}isInGamePhase(){return this.contextState.value.context==="game-phase"}isInGameMap(){return this.contextState.value.context==="game-map"}getCurrentPhaseId(){return this.contextState.value.phaseId}getCurrentGameMapId(){return this.contextState.value.gameMapId}static \u0275fac=function(n){return new(n||e)};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var Jd=class e{constructor(t,n,i,r,o){this.router=t;this.dataService=n;this.authService=i;this.notificationService=r;this.appContextService=o}email="";password="";isLoading=!1;ngOnInit(){this.appContextService.setContext("login")}ngOnDestroy(){this.appContextService.setContext("other")}onSubmit(){if(!this.email||!this.password){this.notificationService.showNotification("error","Por favor, preencha todos os campos.");return}this.isLoading=!0;let t={email:this.email.trim(),password:this.password};this.authService.login(t).subscribe({next:n=>{localStorage.setItem("currentUser",JSON.stringify(n.user)),console.log("\u2705 Usu\xE1rio salvo:",n.user),this.router.navigate(["/select-map"]).then(()=>{console.log("\u2705 Navega\xE7\xE3o realizada com sucesso")},i=>{console.error("\u274C Erro na navega\xE7\xE3o:",i),this.notificationService.showNotification("error","Login realizado, mas erro ao navegar."),this.isLoading=!1})},error:n=>{console.error("\u274C Erro no login:",n);let i=n.error?.message||"Erro ao fazer login. Verifique suas credenciais.";this.notificationService.showNotification("error",i),this.isLoading=!1},complete:()=>{this.isLoading=!1}})}static \u0275fac=function(n){return new(n||e)(G(mt),G(yn),G(fi),G(Vn),G(mi))};static \u0275cmp=Se({type:e,selectors:[["app-login"]],decls:39,vars:4,consts:[["loginForm","ngForm"],[1,"main-container"],[1,"login-container"],[1,"form-section-container"],[1,"welcome-section"],[1,"welcome-text"],["routerLink","/about",1,"login-button"],[1,"form-section"],[3,"ngSubmit"],[1,"form-group"],["type","email","name","email","placeholder","E-mail","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Senha","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"login-button",3,"disabled"],[1,"register-section"],[1,"register-card"],[1,"register-text-container"],[1,"register-text"],["type","button","routerLink","/register",1,"register-button"],[1,"logo-section"],["src","assets/images/umland.svg","alt","Logo",1,"logo"],["src","assets/images/characters/homem1.png",1,"floating-character","character-1","hover-effect"],["src","assets/images/characters/homem2.png",1,"floating-character","character-2","hover-effect"],["src","assets/images/characters/homem3.png",1,"floating-character","character-3","hover-effect"],["src","assets/images/characters/mulher1.png",1,"floating-character","character-4","hover-effect"],["src","assets/images/characters/mulher2.png",1,"floating-character","character-5","hover-effect"],["src","assets/images/characters/robo1.png",1,"floating-character","character-6","hover-effect"]],template:function(n,i){if(n&1){let r=le();y(0,"div",1)(1,"div",2)(2,"div",3)(3,"section",4)(4,"div",5)(5,"h2"),I(6,"Bem-vindo(a) \xE0 UMLand!"),v(),y(7,"p"),I(8,"Um jogo para praticar UML."),v()(),y(9,"button",6),I(10,"Sobre"),v()(),y(11,"div",7)(12,"form",8,0),q("ngSubmit",function(){return H(r),U(i.onSubmit())}),y(14,"div",9)(15,"input",10),ct("ngModelChange",function(a){return H(r),ht(i.email,a)||(i.email=a),U(a)}),v()(),y(16,"div",9)(17,"input",11),ct("ngModelChange",function(a){return H(r),ht(i.password,a)||(i.password=a),U(a)}),v()(),y(18,"div",12)(19,"button",13),I(20),v()()()(),y(21,"div",14)(22,"div",15)(23,"div",16)(24,"p",17),I(25,"Ainda n\xE3o tem uma conta?"),v(),y(26,"p",17),I(27,"Cadastre-se agora!"),v()(),y(28,"button",18),I(29,"Cadastrar"),v()()()(),y(30,"div",19),Z(31,"img",20)(32,"img",21)(33,"img",22)(34,"img",23)(35,"img",24)(36,"img",25)(37,"img",26),v()(),Z(38,"app-footer"),v()}n&2&&(_(15),st("ngModel",i.email),_(2),st("ngModel",i.password),_(2),A("disabled",i.isLoading),_(),Ie(" ",i.isLoading?"Entrando...":"Jogar"," "))},dependencies:[Ze,Bc,Fc,Nr,Ko,Nc,Xd,os,Yd,fr,o1,C1],styles:["img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}  body{padding:0!important}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.welcome-section[_ngcontent-%COMP%]{text-align:center;margin:1rem;background-color:var(--black);color:var(--white);display:flex;align-items:center;justify-content:center;width:100%;flex-direction:column;max-width:400px;padding:1.5rem;border-radius:8px;border:2px solid var(--yellow);gap:1rem}.welcome-text[_ngcontent-%COMP%]{gap:.5rem}.login-container[_ngcontent-%COMP%]{display:flex;flex:1;min-height:0;position:relative;z-index:3;height:auto}.logo-section[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:1rem;background-color:var(--white);position:relative;overflow:hidden}.logo[_ngcontent-%COMP%]{max-width:80%;height:auto;position:relative;z-index:2;animation:_ngcontent-%COMP%_floatLogo 3.5s ease-in-out infinite alternate}.form-section[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:1rem;width:100%}.form-section-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;width:40%}form[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:1.5rem;background-color:var(--black);border-radius:8px;border:2px solid var(--yellow)}form[_ngcontent-%COMP%]:hover{border-color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}input[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid var(--gray);border-radius:4px;background-color:var(--bg);color:var(--white);font-size:16px}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--yellow)}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1.5rem}.forgot-password[_ngcontent-%COMP%]{background:none;border:none;color:var(--white);cursor:pointer;font-size:15px;text-decoration:underline}.forgot-password[_ngcontent-%COMP%]:hover{color:var(--yellow)}.login-button[_ngcontent-%COMP%]{background-color:var(--yellow);color:var(--black);border:none;border-radius:4px;padding:12px 24px;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s}.login-button[_ngcontent-%COMP%]:hover{background-color:var(--gray)}.register-section[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:1rem;width:100%}.register-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:1.5rem;background-color:var(--black);border-radius:8px;border:2px solid var(--yellow);text-align:center}.register-card[_ngcontent-%COMP%]:hover, .welcome-section[_ngcontent-%COMP%]:hover{border-color:#fff}.register-text-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem;margin-bottom:1rem}.register-text[_ngcontent-%COMP%]{color:var(--white);font-size:18px;line-height:1.4}.register-button[_ngcontent-%COMP%]{background-color:var(--yellow);color:var(--black);border:none;border-radius:4px;padding:12px 24px;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s}.register-button[_ngcontent-%COMP%]:hover{background-color:var(--gray)}.animated-letters[_ngcontent-%COMP%]{position:absolute;left:10vw;top:10vh;z-index:1;width:20vw;height:60vh;pointer-events:none}.letter-line[_ngcontent-%COMP%]{position:absolute;width:4px;background:var(--yellow);border-radius:2px;opacity:.5;animation:_ngcontent-%COMP%_letterFloat 3s ease-in-out infinite alternate}.letter-u[_ngcontent-%COMP%]{left:0;top:0;height:50vh;animation-delay:0s}.letter-u-bottom[_ngcontent-%COMP%]{left:0;top:48vh;width:6vw;height:4px}.letter-m[_ngcontent-%COMP%]{left:8vw;top:0;height:50vh;animation-delay:.5s}.letter-m-mid[_ngcontent-%COMP%]{left:8vw;top:25vh;width:6vw;height:4px}.letter-l[_ngcontent-%COMP%]{left:16vw;top:0;height:50vh;animation-delay:1s}.letter-l-bottom[_ngcontent-%COMP%]{left:16vw;top:48vh;width:6vw;height:4px}@keyframes _ngcontent-%COMP%_letterFloat{0%{box-shadow:0 0 8px var(--yellow)}to{box-shadow:0 0 24px var(--yellow)}}@keyframes _ngcontent-%COMP%_floatLogo{0%{transform:translateY(0) scale(1.02);filter:drop-shadow(0 2px 8px var(--yellow))}to{transform:translateY(-18px) scale(1.07);filter:drop-shadow(0 8px 16px var(--gray))}}.floating-character[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;border-radius:50%;object-fit:cover;pointer-events:none}.character-1[_ngcontent-%COMP%]{z-index:10;top:10%;left:10%;animation:_ngcontent-%COMP%_floatCharacter1 8s ease-in-out infinite}.character-2[_ngcontent-%COMP%]{z-index:3;bottom:25%;left:80%;animation:_ngcontent-%COMP%_floatCharacter3 12s ease-in-out infinite}.character-3[_ngcontent-%COMP%]{z-index:1;bottom:15%;left:15%;animation:_ngcontent-%COMP%_floatCharacter3 12s ease-in-out infinite}.character-4[_ngcontent-%COMP%]{z-index:3;top:40%;left:50%;animation:_ngcontent-%COMP%_floatCharacter4 9s ease-in-out infinite}.character-5[_ngcontent-%COMP%]{z-index:10;top:20%;right:15%;animation:_ngcontent-%COMP%_floatCharacter2 10s ease-in-out infinite}.character-6[_ngcontent-%COMP%]{z-index:1;top:60%;left:40%;animation:_ngcontent-%COMP%_floatCharacter6 14s ease-in-out infinite}@keyframes _ngcontent-%COMP%_floatCharacter1{0%{transform:translate(0)}25%{transform:translate(150px)}50%{transform:translate(150px,100px)}75%{transform:translate(75px,100px)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_floatCharacter2{0%{transform:translate(0)}25%{transform:translate(-80px,60px)}50%{transform:translate(-160px,120px)}75%{transform:translate(-80px,60px)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_floatCharacter3{0%{transform:translate(0)}25%{transform:translate(100px,-50px)}50%{transform:translateY(-100px)}75%{transform:translate(-100px,-50px)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_floatCharacter4{0%{transform:translate(0)}20%{transform:translate(60px,-40px)}40%{transform:translate(-60px,-80px)}60%{transform:translate(80px,-120px)}80%{transform:translate(-40px,-80px)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_floatCharacter5{0%{transform:translate(0)}25%{transform:translate(-50px,-30px)}50%{transform:translate(-100px)}75%{transform:translate(-150px,-30px)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_floatCharacter6{0%{transform:translate(0)}12.5%{transform:translate(40px,-30px)}25%{transform:translateY(-60px)}37.5%{transform:translate(-40px,-30px)}50%{transform:translate(0)}62.5%{transform:translate(-40px,30px)}75%{transform:translateY(60px)}87.5%{transform:translate(40px,30px)}to{transform:translate(0)}}.hover-effect[_ngcontent-%COMP%]:hover{transition:transform .3s;border:2px solid var(--yellow);transform:scale(1.1,1.1,1.1)}"]})};var tF=["*"];var HS=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]];var US=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]];var qS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]];var $S=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],GS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]];var WS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]];var ZS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]];var YS=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]];var XS=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]];var JS=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]];var KS=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]];var QS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]];var e_=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]];var t_=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]];var n_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]];var i_=[["path",{d:"M12.75 7.09a3 3 0 0 1 2.16 2.16",key:"1d4wjd"}],["path",{d:"M17.072 17.072c-1.634 2.17-3.527 3.912-4.471 4.727a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 1.432-4.568",key:"12yil7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.475 2.818A8 8 0 0 1 20 10c0 1.183-.31 2.377-.81 3.533",key:"lhrkcz"}],["path",{d:"M9.13 9.13a3 3 0 0 0 3.74 3.74",key:"13wojd"}]];var r_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],o_=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]];var a_=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]];var s_=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]];var c_=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]];var l_=[["path",{d:"M19 13V19H13",key:"10vkzq"}],["path",{d:"M5 5L19 19",key:"5zm2fv"}]];var d_=[["path",{d:"M13 5H19V11",key:"1n1gyv"}],["path",{d:"M19 5L5 19",key:"72u4yj"}]];var u_=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]];var h_=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]];var p_=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]];var f_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]];var m_=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]];var g_=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],y_=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]];var v_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]];var k_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]];var M_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]];var x_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]];var w_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]];var Kd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},Hv=new ae("LucideIcons",{factory:()=>new Qd({})}),Qd=class{constructor(t){this.icons=t}getIcon(t){return this.hasIcon(t)?this.icons[t]:null}hasIcon(t){return typeof this.icons=="object"&&t in this.icons}},nF=(()=>{class e{constructor(){this.color=Kd.stroke,this.size=Kd.width,this.strokeWidth=Kd["stroke-width"],this.absoluteStrokeWidth=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function iF(e,t=3){return parseFloat(e.toFixed(t)).toString(10)}var Nt=(()=>{class e{constructor(n,i,r,o,a){this.elem=n,this.renderer=i,this.changeDetector=r,this.iconProviders=o,this.iconConfig=a,this.absoluteStrokeWidth=!1,this.defaultSize=Kd.height}get size(){return this._size??this.iconConfig.size}set size(n){n?this._size=this.parseNumber(n):delete this._size}get strokeWidth(){return this._strokeWidth??this.iconConfig.strokeWidth}set strokeWidth(n){n?this._strokeWidth=this.parseNumber(n):delete this._strokeWidth}ngOnChanges(n){if(n.name||n.img||n.color||n.size||n.absoluteStrokeWidth||n.strokeWidth||n.class){this.color=this.color??this.iconConfig.color,this.size=this.parseNumber(this.size??this.iconConfig.size),this.strokeWidth=this.parseNumber(this.strokeWidth??this.iconConfig.strokeWidth),this.absoluteStrokeWidth=this.absoluteStrokeWidth??this.iconConfig.absoluteStrokeWidth;let i=this.img??this.name;if(typeof i=="string"){let r=this.getIcon(this.toPascalCase(i));if(r)this.replaceElement(r);else throw new Error(`The "${i}" icon has not been provided by any available icon providers.`)}else if(Array.isArray(i))this.replaceElement(i);else throw new Error("No icon name or image has been provided.")}this.changeDetector.markForCheck()}replaceElement(n){let i=ge(ee({},Kd),{width:this.size,height:this.size,stroke:this.color??this.iconConfig.color,"stroke-width":this.absoluteStrokeWidth?iF(this.strokeWidth/(this.size/this.defaultSize)):this.strokeWidth.toString(10)}),r=this.createElement(["svg",i,n]);r.classList.add("lucide"),typeof this.name=="string"&&r.classList.add(`lucide-${this.name.replace("_","-")}`),this.class&&r.classList.add(...this.class.split(/ /).map(a=>a.trim()).filter(a=>a.length>0));let o=this.elem.nativeElement.childNodes;for(let a of o)this.renderer.removeChild(this.elem.nativeElement,a);this.renderer.appendChild(this.elem.nativeElement,r)}toPascalCase(n){return n.replace(/(\w)([a-z0-9]*)(_|-|\s*)/g,(i,r,o)=>r.toUpperCase()+o.toLowerCase())}parseNumber(n){if(typeof n=="string"){let i=parseInt(n,10);if(isNaN(i))throw new Error(`${n} is not numeric.`);return i}return n}getIcon(n){for(let i of Array.isArray(this.iconProviders)?this.iconProviders:[this.iconProviders])if(i.hasIcon(n))return i.getIcon(n);return null}createElement([n,i,r=[]]){let o=this.renderer.createElement(n,"http://www.w3.org/2000/svg");return Object.keys(i).forEach(a=>{let s=typeof i[a]=="string"?i[a]:i[a].toString(10);this.renderer.setAttribute(o,a,s)}),r.length&&r.forEach(a=>{let s=this.createElement(a);this.renderer.appendChild(o,s)}),o}}return e.\u0275fac=function(n){return new(n||e)(G(ln),G(Jn),G(cr),G(Hv),G(nF))},e.\u0275cmp=Se({type:e,selectors:[["lucide-angular"],["lucide-icon"],["i-lucide"],["span-lucide"]],inputs:{class:"class",name:"name",img:"img",color:"color",absoluteStrokeWidth:"absoluteStrokeWidth",size:"size",strokeWidth:"strokeWidth"},standalone:!1,features:[In],ngContentSelectors:tF,decls:1,vars:0,template:function(n,i){n&1&&(oy(),ay(0))},encapsulation:2}),e})(),Uv=class{constructor(t){this.icons=t}},rF=e=>new Qd(e??{}),ss=(()=>{class e{static pick(n){return{ngModule:e,providers:[{provide:Hv,multi:!0,useValue:new Qd(n)},{provide:Hv,multi:!0,useFactory:rF,deps:[[new Xl,Uv]]}]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=En({type:e}),e.\u0275inj=mn({imports:[[]]}),e})();var Gt=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=En({type:e});static \u0275inj=mn({imports:[ss.pick({X:x_,Store:m_,Backpack:HS,CircleDollarSign:ZS,Sparkles:p_,MoveUpRight:d_,MoveDownRight:l_,Lightbulb:QS,BookCheck:US,ChevronLeft:$S,ChevronRight:GS,MessageCircleQuestion:s_,Save:h_,TriangleAlert:v_,CircleCheckBig:WS,RotateCcw:u_,LogOut:n_,SquareCheck:f_,Infinity:JS,Loader2:t_,CloudUpload:YS,ToggleLeft:g_,ToggleRight:y_,Map:a_,MapPin:r_,MapPinned:o_,Gamepad2:XS,Users:M_,User:k_,Calendar:qS,MousePointerClick:c_,MapPinOff:i_,Linkedin:e_,Instagram:KS,Zap:w_}),ss]})};var at={};Un(at,{standard:()=>Zk});var Zk={};Un(Zk,{BorderedImage:()=>Oz,Circle:()=>Ez,Cylinder:()=>Vz,DoubleLink:()=>qz,Ellipse:()=>Dz,EmbeddedImage:()=>Rz,HeaderedRectangle:()=>Fz,Image:()=>Lz,InscribedImage:()=>Nz,Link:()=>Uz,Path:()=>Tz,Polygon:()=>Pz,Polyline:()=>Az,Rectangle:()=>Iz,ShadowLink:()=>$z,TextBlock:()=>Hz});var Tn={};Un(Tn,{Curve:()=>tt,Ellipse:()=>hn,Line:()=>oe,Path:()=>he,Point:()=>L,Polygon:()=>Qn,Polyline:()=>et,Rect:()=>te,bezier:()=>kF,ellipse:()=>hF,intersection:()=>Br,line:()=>mo,normalizeAngle:()=>un,point:()=>Uc,random:()=>S1,rect:()=>gF,scale:()=>sF,snapToGrid:()=>Fr,toDeg:()=>cs,toRad:()=>Wt,types:()=>De});var{round:oF,floor:aF,PI:b_}=Math,sF={linear:function(e,t,n){var i=e[1]-e[0],r=t[1]-t[0];return(n-e[0])/i*r+t[0]||0}},un=function(e){return e%360+(e<0?360:0)},Fr=function(e,t){return t*oF(e/t)},cs=function(e){return 180*e/b_%360},Wt=function(e,t){return t=t||!1,e=t?e:e%360,e*b_/180},S1=function(e,t){if(t===void 0)t=e===void 0?1:e,e=0;else if(t<e){let n=e;e=t,t=n}return aF(Math.random()*(t-e+1)+e)};var{cos:_1,sin:qv,atan2:cF}=Math,I1=function(e,t){var n=Wt(e.y),i=Wt(t.y),r=e.x,o=t.x,a=Wt(o-r),s=qv(a)*_1(i),c=_1(n)*qv(i)-qv(n)*_1(i)*_1(a),l=cs(cF(s,c)),u=["NE","E","SE","S","SW","W","NW","N"],d=l-22.5;return d<0&&(d+=360),d=parseInt(d/45),u[d]};var Hc=function(e,t){var n=e.x,i=e.y,r=t.x,o=t.y;return(n-=r)*n+(i-=o)*i};var E1=function(e,t){return Math.sqrt(Hc(e,t))};var De={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8};var{abs:D1,cos:$v,sin:Gv,sqrt:C_,min:S_,max:__,atan2:lF,round:I_,pow:dF,PI:E_}=Math,L=function(e,t){if(!(this instanceof L))return new L(e,t);if(typeof e=="string"){var n=e.split(e.indexOf("@")===-1?" ":"@");e=parseFloat(n[0]),t=parseFloat(n[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=e===void 0?0:e,this.y=t===void 0?0:t};L.fromPolar=function(e,t,n){n=new L(n);var i=D1(e*$v(t)),r=D1(e*Gv(t)),o=un(cs(t));return o<90?r=-r:o<180?(i=-i,r=-r):o<270&&(i=-i),new L(n.x+i,n.y+r)};L.random=function(e,t,n,i){return new L(S1(e,t),S1(n,i))};L.prototype={type:De.Point,chooseClosest:function(e){var t=e.length;if(t===1)return new L(e[0]);for(var n=null,i=1/0,r=0;r<t;r++){var o=new L(e[r]),a=this.squaredDistance(o);a<i&&(n=o,i=a)}return n},adhereToRect:function(e){return e.containsPoint(this)?this:(this.x=S_(__(this.x,e.x),e.x+e.width),this.y=S_(__(this.y,e.y),e.y+e.height),this)},angleBetween:function(e,t){var n=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return n<0&&(n+=360),n},bearing:function(e){return I1(this,e)},changeInAngle:function(e,t,n){return this.clone().offset(-e,-t).theta(n)-this.theta(n)},clone:function(){return new L(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new L(this.x-(e||0),this.y-(t||0))},distance:function(e){return E1(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){var n=this.x,i=this.y;return new L((1-t)*n+t*e.x,(1-t)*i+t*e.y)},magnitude:function(){return C_(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return D1(e.x-this.x)+D1(e.y-this.y)},move:function(e,t){var n=Wt(new L(e).theta(this)),i=this.offset($v(n)*t,-Gv(n)*t);return i},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new L(e).move(this,this.distance(e))},rotate:function(e,t){if(t===0)return this;e=e||new L(0,0),t=Wt(un(-t));var n=$v(t),i=Gv(t),r=n*(this.x-e.x)-i*(this.y-e.y)+e.x,o=i*(this.x-e.x)+n*(this.y-e.y)+e.y;return this.x=r,this.y=o,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=dF(10,e);break}return this.x=I_(this.x*t)/t,this.y=I_(this.y*t)/t,this},scale:function(e,t,n){return n=n&&new L(n)||new L(0,0),this.x=n.x+e*(this.x-n.x),this.y=n.y+t*(this.y-n.y),this},snapToGrid:function(e,t){return this.x=Fr(this.x,e),this.y=Fr(this.y,t||e),this},squaredDistance:function(e){return Hc(this,e)},theta:function(e){e=new L(e);var t=-(e.y-this.y),n=e.x-this.x,i=lF(t,n);return i<0&&(i=2*E_+i),180*i/E_},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new L(e)||new L(0,0);var t=this.x,n=this.y;return this.x=C_((t-e.x)*(t-e.x)+(n-e.y)*(n-e.y)),this.y=Wt(e.theta(new L(t,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){var t=new L(0,0);return t.angleBetween(this,e)}};L.prototype.translate=L.prototype.offset;var Uc=L;var{max:Wv,min:Zv}=Math,oe=function(e,t){if(!(this instanceof oe))return new oe(e,t);if(e instanceof oe)return new oe(e.start,e.end);this.start=new L(e),this.end=new L(t)};oe.prototype={type:De.Line,angle:function(){var e=new L(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=Zv(this.start.x,this.end.x),t=Zv(this.start.y,this.end.y),n=Wv(this.start.x,this.end.x),i=Wv(this.start.y,this.end.y);return new te(e,t,n-e,i-t)},bearing:function(){return I1(this.start,this.end)},clone:function(){return new oe(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new oe(this.start,e).vector()),n=Zv(1,Wv(0,t/this.squaredLength()));return n!==n?0:n},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,n=this.end;if(t.cross(e,n)!==0)return!1;var i=this.length();return!(new oe(t,e).length()>i||new oe(e,n).length()>i)},divideAt:function(e){var t=this.pointAt(e);return[new oe(this.start,t),new oe(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new oe(this.start,t),new oe(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var n=e.intersectionWithLine(this,t);return n&&e instanceof oe&&(n=n[0]),n}return null},intersectionWithLine:function(e){var t=new L(this.end.x-this.start.x,this.end.y-this.start.y),n=new L(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*n.y-t.y*n.x,r=new L(e.start.x-this.start.x,e.start.y-this.start.y),o=r.x*n.y-r.y*n.x,a=r.x*t.y-r.y*t.x;if(i===0||o*i<0||a*i<0)return null;if(i>0){if(o>i||a>i)return null}else if(o<i||a<i)return null;return[new L(this.start.x+o*t.x/i,this.start.y+o*t.y/i)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return E1(this.start,this.end)},midpoint:function(){return new L((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){let t=this.clone();if(!this.isDifferentiable())return t;let{start:n,end:i}=t,r=n.clone().rotate(i,270),o=i.clone().rotate(n,90);return n.move(o,e),i.move(r,e),t},pointAt:function(e){var t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)},pointAtLength:function(e){var t=this.start,n=this.end,i=!0;e<0&&(i=!1,e=-e);var r=this.length();return e>=r?i?n.clone():t.clone():this.pointAt((i?e:r-e)/r)},pointOffset:function(e){e=new L(e);var t=this.start,n=this.end,i=(n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x);return i/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this},setLength:function(e){var t=this.length();if(!t)return this;var n=e/t;return this.scale(n,n,this.start)},squaredLength:function(){return Hc(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,i=this.pointAt(e),r=new oe(t,n);return r.translate(i.x-t.x,i.y-t.y),r},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,i=this.pointAtLength(e),r=new oe(t,n);return r.translate(i.x-t.x,i.y-t.y),r},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new L(this.end.x-this.start.x,this.end.y-this.start.y)}};oe.prototype.intersection=oe.prototype.intersect;var mo=oe;var{sqrt:D_,round:T1,pow:uF}=Math,hn=function(e,t,n){if(!(this instanceof hn))return new hn(e,t,n);if(e instanceof hn)return new hn(new L(e.x,e.y),e.a,e.b);e=new L(e),this.x=e.x,this.y=e.y,this.a=t,this.b=n};hn.fromRect=function(e){return e=new te(e),new hn(e.center(),e.width/2,e.height/2)};hn.prototype={type:De.Ellipse,bbox:function(){return new te(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new L(this.x,this.y)},clone:function(){return new hn(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],n=e.start,i=e.end,r=this.a,o=this.b,a=e.vector(),s=n.difference(new L(this)),c=new L(a.x/(r*r),a.y/(o*o)),l=new L(s.x/(r*r),s.y/(o*o)),u=a.dot(c),d=a.dot(l),h=s.dot(l)-1,p=d*d-u*h;if(p<0)return null;if(p>0){var f=D_(p),g=(-d-f)/u,b=(-d+f)/u;if((g<0||1<g)&&(b<0||1<b))return null;0<=g&&g<=1&&t.push(n.lerp(i,g)),0<=b&&b<=1&&t.push(n.lerp(i,b))}else{var x=-d/u;if(0<=x&&x<=1)t.push(n.lerp(i,x));else return null}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new L(e),t&&e.rotate(new L(this.x,this.y),t);var n=e.x-this.x,i=e.y-this.y,r;if(n===0)return r=this.bbox().pointNearestToPoint(e),t?r.rotate(new L(this.x,this.y),-t):r;var o=i/n,a=o*o,s=this.a*this.a,c=this.b*this.b,l=D_(1/(1/s+a/c));l=n<0?-l:l;var u=o*l;return r=new L(this.x+l,this.y+u),t?r.rotate(new L(this.x,this.y),-t):r},normalizedDistance:function(e){var t=e.x,n=e.y,i=this.a,r=this.b,o=this.x,a=this.y;return(t-o)*(t-o)/(i*i)+(n-a)*(n-a)/(r*r)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=uF(10,e);break}return this.x=T1(this.x*t)/t,this.y=T1(this.y*t)/t,this.a=T1(this.a*t)/t,this.b=T1(this.b*t)/t,this},tangentTheta:function(e){var t=30,n=e.x,i=e.y,r=this.a,o=this.b,a=this.bbox().center(),s=a.x,c=a.y,l=n>a.x+r/2,u=n<a.x-r/2,d,h;return l||u?(d=n>a.x?i-t:i+t,h=r*r/(n-s)-r*r*(i-c)*(d-c)/(o*o*(n-s))+s):(h=i>a.y?n+t:n-t,d=o*o/(i-c)-o*o*(n-s)*(h-s)/(r*r*(i-c))+c),new L(h,d).theta(e)},toString:function(){return new L(this.x,this.y).toString()+" "+this.a+" "+this.b}};var hF=hn;var{abs:T_,cos:pF,sin:fF,min:eu,max:P_,round:P1,pow:mF}=Math,te=function(e,t,n,i){if(!(this instanceof te))return new te(e,t,n,i);Object(e)===e&&(t=e.y,n=e.width,i=e.height,e=e.x),this.x=e===void 0?0:e,this.y=t===void 0?0:t,this.width=n===void 0?0:n,this.height=i===void 0?0:i};te.fromEllipse=function(e){return e=new hn(e),new te(e.x-e.a,e.y-e.b,2*e.a,2*e.b)};te.fromPointUnion=function(...e){if(e.length===0)return null;let t=new L,n,i,r,o;n=i=1/0,r=o=-1/0;for(let a=0;a<e.length;a++){t.update(e[a]);let s=t.x,c=t.y;s<n&&(n=s),s>r&&(r=s),c<i&&(i=c),c>o&&(o=c)}return new te(n,i,r-n,o-i)};te.fromRectUnion=function(...e){if(e.length===0)return null;let t=new te,n,i,r,o;n=i=1/0,r=o=-1/0;for(let a=0;a<e.length;a++){t.update(e[a]);let s=t.x,c=t.y,l=s+t.width,u=c+t.height;s<n&&(n=s),l>r&&(r=l),c<i&&(i=c),u>o&&(o=u)}return new te(n,i,r-n,o-i)};te.prototype={type:De.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;let{width:t,height:n}=this,i=Wt(e),r=T_(fF(i)),o=T_(pF(i)),a=t*o+n*r,s=t*r+n*o;return this.x+=(t-a)/2,this.y+=(n-s)/2,this.width=a,this.height=s,this},bottomLeft:function(){return new L(this.x,this.y+this.height)},bottomLine:function(){return new oe(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new L(this.x+this.width/2,this.y+this.height)},center:function(){return new L(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new te(this)},containsPoint:function(e,t){let n,i;return!e||typeof e=="string"?{x:n,y:i}=new L(e):{x:n=0,y:i=0}=e,t&&t.strict?n>this.x&&n<this.x+this.width&&i>this.y&&i<this.y+this.height:n>=this.x&&n<=this.x+this.width&&i>=this.y&&i<=this.y+this.height},containsRect:function(e){var t=new te(this).normalize(),n=new te(e).normalize(),i=t.width,r=t.height,o=n.width,a=n.height;if(!i||!r||!o||!a)return!1;var s=t.x,c=t.y,l=n.x,u=n.y;return o+=l,i+=s,a+=u,r+=c,s<=l&&o<=i&&c<=u&&a<=r},corner:function(){return new L(this.x+this.width,this.y+this.height)},equals:function(e){var t=new te(this).normalize(),n=new te(e).normalize();return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height},inflate:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),n=this.corner(),i=e.origin(),r=e.corner();if(r.x<=t.x||r.y<=t.y||i.x>=n.x||i.y>=n.y)return null;var o=P_(t.x,i.x),a=P_(t.y,i.y);return new te(o,a,eu(n.x,r.x)-o,eu(n.y,r.y)-a)},intersectionWithLine:function(e){var t=this,n=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],i=[],r=[],o,a,s=n.length;for(a=0;a<s;a++)o=e.intersect(n[a]),o!==null&&r.indexOf(o.toString())<0&&(i.push(o),r.push(o.toString()));return i.length>0?i:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new L(e);var n=new L(this.x+this.width/2,this.y+this.height/2),i;t&&e.rotate(n,t);for(var r=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new oe(n,e),a=r.length-1;a>=0;--a){var s=r[a].intersection(o);if(s!==null){i=s;break}}return i&&t&&i.rotate(n,-t),i},leftLine:function(){return new oe(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new L(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new te(e),t||(t=e.center());var n,i,r,o,a,s,c,l,u=t.x,d=t.y;n=i=r=o=a=s=c=l=1/0;var h=e.topLeft();h.x<u&&(n=(this.x-u)/(h.x-u)),h.y<d&&(a=(this.y-d)/(h.y-d));var p=e.bottomRight();p.x>u&&(i=(this.x+this.width-u)/(p.x-u)),p.y>d&&(s=(this.y+this.height-d)/(p.y-d));var f=e.topRight();f.x>u&&(r=(this.x+this.width-u)/(f.x-u)),f.y<d&&(c=(this.y-d)/(f.y-d));var g=e.bottomLeft();return g.x<u&&(o=(this.x-u)/(g.x-u)),g.y>d&&(l=(this.y+this.height-d)/(g.y-d)),{sx:eu(n,i,r,o),sy:eu(a,s,c,l)}},maxRectUniformScaleToFit:function(e,t){var n=this.maxRectScaleToFit(e,t);return eu(n.sx,n.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,n=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=n,this.height=i,this},offset:function(e,t){return L.prototype.offset.call(this,e,t)},origin:function(){return new L(this.x,this.y)},pointNearestToPoint:function(e){if(e=new L(e),this.containsPoint(e)){var t=this.sideNearestToPoint(e);switch(t){case"right":return new L(this.x+this.width,e.y);case"left":return new L(this.x,e.y);case"bottom":return new L(e.x,this.y+this.height);case"top":return new L(e.x,this.y)}}return e.adhereToRect(this)},rightLine:function(){return new oe(this.topRight(),this.bottomRight())},rightMiddle:function(){return new L(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=mF(10,e);break}return this.x=P1(this.x*t)/t,this.y=P1(this.y*t)/t,this.width=P1(this.width*t)/t,this.height=P1(this.height*t)/t,this},scale:function(e,t,n){return n=this.origin().scale(e,t,n),this.x=n.x,this.y=n.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new L(e);var t=e.x-this.x,n=this.x+this.width-e.x,i=e.y-this.y,r=this.y+this.height-e.y,o=t,a="left";return n<o&&(o=n,a="right"),i<o&&(o=i,a="top"),r<o&&(a="bottom"),a},snapToGrid:function(e,t){var n=this.origin().snapToGrid(e,t),i=this.corner().snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new oe(this.topLeft(),this.topRight())},topMiddle:function(){return new L(this.x+this.width/2,this.y)},topRight:function(){return new L(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return te.fromRectUnion(this,e)},update:function(e,t,n,i){return Object(e)===e&&(t=e.y,n=e.width,i=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=n||0,this.height=i||0,this}};te.prototype.bottomRight=te.prototype.corner;te.prototype.topLeft=te.prototype.origin;te.prototype.translate=te.prototype.offset;var gF=te;function A1(e){let t=e.trim();if(t==="")return[];let n=[],i=t.split(/\b\s*,\s*|,\s*|\s+/),r=i.length;for(let o=0;o<r;o+=2)n.push({x:+i[o],y:+i[o+1]});return n}function L1(e){let t=e.length;if(t===0)return[];let n=[];for(let i=0;i<t;i++){let r=e[i].clone();n.push(r)}return n}function O1(e){let{abs:t}=Math;var n,i,r=e.length;if(r===0)return[];var o;for(n=0;n<r;n++)(o===void 0||e[n].y<o.y||e[n].y===o.y&&e[n].x>o.x)&&(o=e[n]);var a=[];for(n=0;n<r;n++){var s=o.theta(e[n]);s===0&&(s=360);var c=[e[n],n,s];a.push(c)}if(a.sort(function(B,j){var W=B[2]-j[2];return W===0&&(W=j[1]-B[1]),W}),a.length>2){var l=a[a.length-1];a.unshift(l)}for(var u={},d=[],h,p,f,g,b,x;a.length!==0;)if(h=a.pop(),p=h[0],!u.hasOwnProperty(h[0]+"@@"+h[1]))for(var M=!1;!M;)if(d.length<2)d.push(h),M=!0;else{f=d.pop(),g=f[0],b=d.pop(),x=b[0];var C=x.cross(g,p);if(C<0)d.push(b),d.push(f),d.push(h),M=!0;else if(C===0){var E=1e-10,T=g.angleBetween(x,p);t(T-180)<E||g.equals(p)||x.equals(g)?(u[f[0]+"@@"+f[1]]=g,d.push(b)):t((T+1)%360-1)<E&&(d.push(b),a.push(f))}else u[f[0]+"@@"+f[1]]=g,d.push(b)}d.length>2&&d.pop();var F,m=-1;for(i=d.length,n=0;n<i;n++){var k=d[n][1];(F===void 0||k<F)&&(F=k,m=n)}var w=[];if(m>0){var S=d.slice(m),D=d.slice(0,m);w=S.concat(D)}else w=d;var R=[];for(i=w.length,n=0;n<i;n++)R.push(w[n][0]);return R}var et=function(e){if(!(this instanceof et))return new et(e);if(typeof e=="string")return new et.parse(e);this.points=Array.isArray(e)?e.map(L):[]};et.parse=function(e){return new et(A1(e))};et.fromRect=function(e){return new et([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])};et.prototype={type:De.Polyline,bbox:function(){var e=1/0,t=-1/0,n=1/0,i=-1/0,r=this.points,o=r.length;if(o===0)return null;for(var a=0;a<o;a++){var s=r[a],c=s.x,l=s.y;c<e&&(e=c),c>t&&(t=c),l<n&&(n=l),l>i&&(i=l)}return new te(e,n,t-e,i-n)},clone:function(){return new et(L1(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),n=t.length;if(n===0||n===1)return 0;for(var i,r=1/0,o=0,a=n-1,s=0;s<a;s++){var c=new oe(t[s],t[s+1]),l=c.length(),u=c.closestPointNormalizedLength(e),d=c.pointAt(u),h=d.squaredDistance(e);h<r&&(r=h,i=o+u*l),o+=l}return i},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(t===0)return 0;var n=this.length();return n===0?0:t/n},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,n=t.length;if(n===0)return!1;for(var i=e.x,r=e.y,o=n-1,a=0,s=0,c=new oe,l=new oe,u=new L;a<n;a++){var d=t[o],h=t[a];if(e.equals(d)||(c.start=d,c.end=h,c.containsPoint(e)))return!0;if(r<=d.y&&r>h.y||r>d.y&&r<=h.y){var p=d.x-i>h.x-i?d.x-i:h.x-i;p>=0&&(u.x=i+p,u.y=r,l.start=e,l.end=u,c.intersect(l)&&s++)}o=a}return s%2===1},close:function(){let{start:e,end:t,points:n}=this;return e&&t&&!e.equals(t)&&n.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new et(O1(this.points))},equals:function(e){if(!e)return!1;var t=this.points,n=e.points,i=t.length;if(n.length!==i)return!1;for(var r=0;r<i;r++){var o=t[r],a=e.points[r];if(!o.equals(a))return!1}return!0},intersectionWithLine:function(e){for(var t=new oe(e),n=[],i=this.lengthPoints(),r=new oe,o=0,a=i.length-1;o<a;o++){r.start=i[o],r.end=i[o+1];var s=t.intersectionWithLine(r);s&&n.push(s[0])}return n.length>0?n:null},isDifferentiable:function(){var e=this.points,t=e.length;if(t===0)return!1;for(var n=new oe,i=t-1,r=0;r<i;r++)if(n.start=e[r],n.end=e[r+1],n.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(t===0)return 0;for(var n=0,i=t-1,r=0;r<i;r++)n+=e[r].distance(e[r+1]);return n},pointAt:function(e){var t=this.lengthPoints(),n=t.length;if(n===0)return null;if(n===1||e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();var i=this.length(),r=i*e;return this.pointAtLength(r)},pointAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(n===0)return null;if(n===1)return t[0].clone();var i=!0;e<0&&(i=!1,e=-e);for(var r=0,o=n-1,a=0;a<o;a++){var s=i?a:o-1-a,c=t[s],l=t[s+1],u=new oe(c,l),d=c.distance(l);if(e<=r+d)return u.pointAtLength((i?1:-1)*(e-r));r+=d}var h=i?t[n-1]:t[0];return h.clone()},round:function(e){for(var t=this.points,n=t.length,i=0;i<n;i++)t[i].round(e);return this},scale:function(e,t,n){for(var i=this.points,r=i.length,o=0;o<r;o++)i[o].scale(e,t,n);return this},simplify:function(e={}){let t=this.points;if(t.length<3)return this;let n=e.threshold||1e-10,i=0;for(;t[i+2];){let r=i,o=i+1,a=i+2,s=t[r],c=t[o],l=t[a];new oe(s,l).closestPoint(c).distance(c)<=n?t.splice(o,1):i+=1}return this},tangentAt:function(e){var t=this.lengthPoints(),n=t.length;if(n===0||n===1)return null;e<0&&(e=0),e>1&&(e=1);var i=this.length(),r=i*e;return this.tangentAtLength(r)},tangentAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(n===0||n===1)return null;var i=!0;e<0&&(i=!1,e=-e);for(var r,o=0,a=n-1,s=0;s<a;s++){var c=i?s:a-1-s,l=t[c],u=t[c+1],d=new oe(l,u),h=l.distance(u);if(d.isDifferentiable()){if(e<=o+h)return d.tangentAtLength((i?1:-1)*(e-o));r=d}o+=h}if(r){var p=i?1:0;return r.tangentAt(p)}return null},toString:function(){return this.points+""},translate:function(e,t){for(var n=this.points,i=n.length,r=0;r<i;r++)n[r].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(t===0)return"";for(var n="",i=0;i<t;i++){var r=e[i];n+=r.x+","+r.y+" "}return n.trim()}};Object.defineProperty(et.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[0]}});Object.defineProperty(et.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.points,t=e.length;return t===0?null:this.points[t-1]}});var{abs:R1,sqrt:yF,min:A_,max:L_,pow:Yv}=Math,tt=function(e,t,n,i){if(!(this instanceof tt))return new tt(e,t,n,i);if(e instanceof tt)return new tt(e.start,e.controlPoint1,e.controlPoint2,e.end);this.start=new L(e),this.controlPoint1=new L(t),this.controlPoint2=new L(n),this.end=new L(i)};tt.throughPoints=function(){function e(n){var i=[],r=[],o=n.length-1,a;if(o==1)return i[0]=new L((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),r[0]=new L(2*i[0].x-n[0].x,2*i[0].y-n[0].y),[i,r];var s=[];for(a=1;a<o-1;a++)s[a]=4*n[a].x+2*n[a+1].x;s[0]=n[0].x+2*n[1].x,s[o-1]=(8*n[o-1].x+n[o].x)/2;var c=t(s);for(a=1;a<o-1;++a)s[a]=4*n[a].y+2*n[a+1].y;s[0]=n[0].y+2*n[1].y,s[o-1]=(8*n[o-1].y+n[o].y)/2;var l=t(s);for(a=0;a<o;a++)i.push(new L(c[a],l[a])),a<o-1?r.push(new L(2*n[a+1].x-c[a+1],2*n[a+1].y-l[a+1])):r.push(new L((n[o].x+c[o-1])/2,(n[o].y+l[o-1])/2));return[i,r]}function t(n){var i=n.length,r=[],o=[],a=2;r[0]=n[0]/a;for(var s=1;s<i;s++)o[s]=1/a,a=(s<i-1?4:3.5)-o[s],r[s]=(n[s]-r[s-1])/a;for(s=1;s<i;s++)r[i-s-1]-=o[i-s]*r[i-s];return r}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var i=e(n),r=[],o=i[0].length,a=0;a<o;a++){var s=new L(i[0][a].x,i[0][a].y),c=new L(i[1][a].x,i[1][a].y);r.push(new tt(n[a],s,c,n[a+1]))}return r}}();tt.prototype={type:De.Curve,bbox:function(){for(var e=this.start,t=this.controlPoint1,n=this.controlPoint2,i=this.end,r=e.x,o=e.y,a=t.x,s=t.y,c=n.x,l=n.y,u=i.x,d=i.y,h=new Array,p=new Array,f=[new Array,new Array],g,b,x,M,C,E,T,F,m=0;m<2;++m){if(m===0?(b=6*r-12*a+6*c,g=-3*r+9*a-9*c+3*u,x=3*a-3*r):(b=6*o-12*s+6*l,g=-3*o+9*s-9*l+3*d,x=3*s-3*o),R1(g)<1e-12){if(R1(b)<1e-12)continue;M=-x/b,0<M&&M<1&&p.push(M);continue}T=b*b-4*x*g,F=yF(T),!(T<0)&&(C=(-b+F)/(2*g),0<C&&C<1&&p.push(C),E=(-b-F)/(2*g),0<E&&E<1&&p.push(E))}for(var k=p.length,w=k,S,D,R;k--;)M=p[k],S=1-M,D=S*S*S*r+3*S*S*M*a+3*S*M*M*c+M*M*M*u,f[0][k]=D,R=S*S*S*o+3*S*S*M*s+3*S*M*M*l+M*M*M*d,f[1][k]=R,h[k]={X:D,Y:R};p[w]=0,p[w+1]=1,h[w]={X:r,Y:o},h[w+1]={X:u,Y:d},f[0][w]=r,f[1][w]=o,f[0][w+1]=u,f[1][w+1]=d,p.length=w+2,f[0].length=w+2,f[1].length=w+2,h.length=w+2;var B=A_.apply(null,f[0]),j=A_.apply(null,f[1]),W=L_.apply(null,f[0]),P=L_.apply(null,f[1]);return new te(B,j,W-B,P-j)},clone:function(){return new tt(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,r={precision:n,subdivisions:i};return this.lengthAtT(this.closestPointT(e,r),r)},closestPointNormalizedLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,r={precision:n,subdivisions:i},o=this.closestPointLength(e,r);if(!o)return 0;var a=this.length(r);return a===0?0:o/a},closestPointT:function(e,t){t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,r,o,a,s,c,l,u,d=i.length,h=d?1/d:0,p=0;p<d;p++){var f=i[p],g=f.start.distance(e),b=f.end.distance(e),x=g+b;(!u||x<u)&&(r=f,o=p*h,a=(p+1)*h,s=g,c=b,l=f.start.distance(f.end),u=x)}for(var M=Yv(10,-n);;){var C=s?R1(s-c)/s:0,E=c?R1(s-c)/c:0,T=C<M||E<M,F=s?s<l*M:!0,m=c?c<l*M:!0,k=F||m;if(T||k)return s<=c?o:a;var w=r.divide(.5);h/=2;var S=w[0].start.distance(e),D=w[0].end.distance(e),R=S+D,B=w[1].start.distance(e),j=w[1].end.distance(e),W=B+j;R<=W?(r=w[0],a-=h,s=S,c=D):(r=w[1],o+=h,s=B,c=j)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){var n=this.toPolyline(t);return n.containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var n=this.tAt(e,t);return this.divideAtT(n)},divideAtLength:function(e,t){var n=this.tAtLength(e,t);return this.divideAtT(n)},divideAtT:function(e){var t=this.start,n=this.controlPoint1,i=this.controlPoint2,r=this.end;if(e<=0)return[new tt(t,t,t,t),new tt(t,n,i,r)];if(e>=1)return[new tt(t,n,i,r),new tt(r,r,r,r)];var o=this.getSkeletonPoints(e),a=o.startControlPoint1,s=o.startControlPoint2,c=o.divider,l=o.dividerControlPoint1,u=o.dividerControlPoint2;return[new tt(t,a,s,c),new tt(c,l,u,r)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,n=this.controlPoint1,i=this.controlPoint2,r=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:i.clone(),divider:r.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:r.clone()};var o=new oe(t,n).pointAt(e),a=new oe(n,i).pointAt(e),s=new oe(i,r).pointAt(e),c=new oe(o,a).pointAt(e),l=new oe(a,s).pointAt(e),u=new oe(c,l).pointAt(e),d={startControlPoint1:o,startControlPoint2:c,divider:u,dividerControlPoint1:l,dividerControlPoint2:s};return d},getSubdivisions:function(e){e=e||{};var t=e.precision===void 0?this.PRECISION:e.precision,n=this.start,i=this.controlPoint1,r=this.controlPoint2,o=this.end,a=[new tt(n,i,r,o)];if(t===0)return a;var s=!this.isDifferentiable();if(s)return a;var c=this.endpointDistance(),l=Yv(10,-t),u=2,d=i.cross(n,o)===0&&r.cross(n,o)===0;d&&(u=2*t);for(var h=0;;){h+=1;for(var p=[],f=a.length,g=0;g<f;g++){var b=a[g],x=b.divide(.5);p.push(x[0],x[1])}for(var M=0,C=p.length,E=0;E<C;E++){var T=p[E];M+=T.endpointDistance()}if(h>=u){var F=M!==0?(M-c)/M:0;if(F<l)return p}a=p,c=M}},isDifferentiable:function(){var e=this.start,t=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(i))},length:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,i=0,r=n.length,o=0;o<r;o++){var a=n[o];i+=a.endpointDistance()}return i},lengthAtT:function(e,t){if(e<=0)return 0;t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,i=this.divide(e)[0],r=i.length({precision:n});return r},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var n=this.tAt(e,t);return this.pointAtT(n)},pointAtLength:function(e,t){var n=this.tAtLength(e,t);return this.pointAtT(n)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.tAt(e,t);return this.tangentAtT(n)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var n=this.tAtLength(e,t);return this.tangentAtT(n)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),n=t.startControlPoint2,i=t.dividerControlPoint1,r=t.divider,o=new oe(n,i);return o.translate(r.x-n.x,r.y-n.y),o},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,i=t.subdivisions===void 0?this.getSubdivisions({precision:n}):t.subdivisions,r={precision:n,subdivisions:i},o=this.length(r),a=o*e;return this.tAtLength(a,r)},tAtLength:function(e,t){var n=!0;e<0&&(n=!1,e=-e),t=t||{};for(var i=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:i}):t.subdivisions,o={precision:i,subdivisions:r},a,s,c,l,u,d=0,h=r.length,p=1/h,f=0;f<h;f++){var g=n?f:h-1-f,b=r[f],x=b.endpointDistance();if(e<=d+x){a=b,s=g*p,c=(g+1)*p,l=n?e-d:x+d-e,u=n?x+d-e:e-d;break}d+=x}if(!a)return n?1:0;for(var M=this.length(o),C=Yv(10,-i);;){var E;if(E=M!==0?l/M:0,E<C)return s;if(E=M!==0?u/M:0,E<C)return c;var T,F,m=a.divide(.5);p/=2;var k=m[0].endpointDistance(),w=m[1].endpointDistance();l<=k?(a=m[0],c-=p,T=l,F=k-T):(a=m[1],s+=p,T=l-k,F=w-T),l=T,u=F}},toPoints:function(e){e=e||{};for(var t=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:t}):e.subdivisions,i=[n[0].start.clone()],r=n.length,o=0;o<r;o++){var a=n[o];i.push(a.end.clone())}return i},toPolyline:function(e){return new et(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};tt.prototype.divide=tt.prototype.divideAtT;function ls(e){var t,n,i=[];for(n=arguments.length,t=1;t<n;t++)i.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var r=Object.create(e);for(n=i.length,t=0;t<n;t++){var o=i[t],a,s;for(s in o)o.hasOwnProperty(s)&&(delete r[s],a=Object.getOwnPropertyDescriptor(o,s),Object.defineProperty(r,s,a))}return r}var he=function(e){if(!(this instanceof he))return new he(e);if(typeof e=="string")return new he.parse(e);this.segments=[];var t,n;if(e)if(Array.isArray(e)&&e.length!==0)if(e=e.reduce(function(s,c){return s.concat(c)},[]),n=e.length,e[0].isSegment)for(t=0;t<n;t++){var i=e[t];this.appendSegment(i)}else{var r=null;for(t=0;t<n;t++){var o=e[t];if(!(o instanceof oe||o instanceof tt))throw new Error("Cannot construct a path segment from the provided object.");t===0&&this.appendSegment(he.createSegment("M",o.start)),r&&!r.end.equals(o.start)&&this.appendSegment(he.createSegment("M",o.start)),o instanceof oe?this.appendSegment(he.createSegment("L",o.end)):o instanceof tt&&this.appendSegment(he.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),r=o}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof oe)this.appendSegment(he.createSegment("M",e.start)),this.appendSegment(he.createSegment("L",e.end));else if(e instanceof tt)this.appendSegment(he.createSegment("M",e.start)),this.appendSegment(he.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else if(e instanceof et){if(!(e.points&&e.points.length!==0))return;for(n=e.points.length,t=0;t<n;t++){var a=e.points[t];t===0?this.appendSegment(he.createSegment("M",a)):this.appendSegment(he.createSegment("L",a))}}else throw new Error("Cannot construct a path from the provided object.")};he.parse=function(e){if(!e)return new he;for(var t=new he,n=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,i=e.match(n),r=i.length,o=0;o<r;o++){var a=i[o],s=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,c=a.match(s),l=he.createSegment.apply(this,c);t.appendSegment(l)}return t};he.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=he.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var n=[],i=arguments.length,r=1;r<i;r++)n.push(arguments[r]);return Vr(t,n)};he.prototype={type:De.Path,appendSegment:function(e){var t=this.segments,n=t.length,i,r=n!==0?t[n-1]:null,o=null;if(Array.isArray(e)){if(e=e.reduce(function(l,u){return l.concat(u)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var a=e.length,s=0;s<a;s++){var c=e[s];i=this.prepareSegment(c,r,o),t.push(i),r=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,r,o),t.push(i)}},bbox:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var n,i=0;i<t;i++){var r=e[i];if(r.isVisible){var o=r.bbox();n=n?n.union(o):o}}if(n)return n;var a=e[t-1];return new te(a.end.x,a.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,n=new he,i=0;i<t;i++){var r=e[i].clone();n.appendSegment(r)}return n},closestPoint:function(e,t){var n=this.closestPointT(e,t);return n?this.pointAtT(n):null},closestPointLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,r={precision:n,segmentSubdivisions:i},o=this.closestPointT(e,r);return o?this.lengthAtT(o,r):0},closestPointNormalizedLength:function(e,t){t=t||{};var n=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,r={precision:n,segmentSubdivisions:i},o=this.closestPointLength(e,r);if(o===0)return 0;var a=this.length(r);return a===0?0:o/a},closestPointT:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a,s=1/0,c=0;c<i;c++){var l=n[c],u=o[c];if(l.isVisible){var d=l.closestPointT(e,{precision:r,subdivisions:u}),h=l.pointAtT(d),p=new oe(h,e).squaredLength();p<s&&(a={segmentIndex:c,value:d},s=p)}}return a||{segmentIndex:i-1,value:1}},closestPointTangent:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;t=t||{};for(var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a,s=1/0,c=0;c<i;c++){var l=n[c],u=o[c];if(l.isDifferentiable()){var d=l.closestPointT(e,{precision:r,subdivisions:u}),h=l.pointAtT(d),p=new oe(h,e).squaredLength();p<s&&(a=l.tangentAtT(d),s=p)}}return a||null},containsPoint:function(e,t){var n=this.toPolylines(t);if(!n)return!1;for(var i=n.length,r=0,o=0;o<i;o++){var a=n[o];a.containsPoint(e)&&r++}return r%2===1},divideAt:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a={precision:r,segmentSubdivisions:o},s=this.length(a),c=s*e;return this.divideAtLength(c,a)},divideAtLength:function(e,t){var n=this.segments.length;if(n===0)return null;var i=!0;e<0&&(i=!1,e=-e),t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a,s,c=0,l,u,d,h,p;for(a=0;a<n;a++){var f=i?a:n-1-a;s=this.getSegment(f);var g=o[f],b=s.length({precision:r,subdivisions:g});if(s.isDifferentiable()&&(d=s,h=f,e<=c+b)){u=f,l=s.divideAtLength((i?1:-1)*(e-c),{precision:r,subdivisions:g});break}c+=b}if(!d)return null;l||(u=h,p=i?1:0,l=d.divideAtT(p));var x=this.clone();x.replaceSegment(u,l);var M=u,C=u+1,E=u+2;l[0].isDifferentiable()||(x.removeSegment(M),C-=1,E-=1);var T=x.getSegment(C).start;x.insertSegment(C,he.createSegment("M",T)),E+=1,l[1].isDifferentiable()||(x.removeSegment(E-1),E-=1);var F=E-M-1;for(a=E;a<x.segments.length;a++){var m=this.getSegment(a-F);if(s=x.getSegment(a),s.type==="Z"&&!m.subpathStartSegment.end.equals(s.subpathStartSegment.end)){var k=he.createSegment("L",m.end);x.replaceSegment(a,k)}}var w=new he(x.segments.slice(0,C)),S=new he(x.segments.slice(C));return[w,S]},equals:function(e){if(!e)return!1;var t=this.segments,n=e.segments,i=t.length;if(n.length!==i)return!1;for(var r=0;r<i;r++){var o=t[r],a=n[r];if(o.type!==a.type||!o.equals(a))return!1}return!0},getSegment:function(e){var t=this.segments,n=t.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){var t=this.segments,n=t.length;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,r=[],o=0;o<n;o++){var a=t[o],s=a.getSubdivisions({precision:i});r.push(s)}return r},getSubpaths:function(){let t=this.clone().validate().segments,n=t.length,i=[];for(let r=0;r<n;r++){let o=t[r];o.isSubpathStart?i.push(new he(o)):i[i.length-1].appendSegment(o)}return i},insertSegment:function(e,t){var n=this.segments,i=n.length;if(e<0&&(e=i+e+1),e>i||e<0)throw new Error("Index out of range.");var r,o=null,a=null;if(i!==0&&(e>=1?(o=n[e-1],a=o.nextSegment):a=n[0]),Array.isArray(t)){if(t=t.reduce(function(u,d){return u.concat(d)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var s=t.length,c=0;c<s;c++){var l=t[c];r=this.prepareSegment(l,o,a),n.splice(e+c,0,r),o=r}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,o,a),n.splice(e,0,r)}},intersectionWithLine:function(e,t){var n=null,i=this.toPolylines(t);if(!i)return null;for(var r=0,o=i.length;r<o;r++){var a=i[r],s=e.intersect(a);s&&(n||(n=[]),Array.isArray(s)?Array.prototype.push.apply(n,s):n.push(s))}return n},isDifferentiable:function(){for(var e=this.segments,t=e.length,n=0;n<t;n++){var i=e[n];if(i.isDifferentiable())return!0}return!1},isValid:function(){var e=this.segments,t=e.length===0||e[0].type==="M";return t},length:function(e){var t=this.segments,n=t.length;if(n===0)return 0;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o=0,a=0;a<n;a++){var s=t[a],c=r[a];o+=s.length({subdivisions:c})}return o},lengthAtT:function(e,t){var n=this.segments,i=n.length;if(i===0)return 0;var r=e.segmentIndex;if(r<0)return 0;var o=e.value;r>=i?(r=i-1,o=1):o<0?o=0:o>1&&(o=1),t=t||{};for(var a=t.precision===void 0?this.PRECISION:t.precision,s=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:a}):t.segmentSubdivisions,c,l=0,u=0;u<r;u++){var d=n[u];c=s[u],l+=d.length({precisison:a,subdivisions:c})}return d=n[r],c=s[r],l+=d.lengthAtT(o,{precisison:a,subdivisions:c}),l},pointAt:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a={precision:r,segmentSubdivisions:o},s=this.length(a),c=s*e;return this.pointAtLength(c,a)},pointAtLength:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;if(e===0)return this.start.clone();var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,s,c=0,l=0;l<i;l++){var u=r?l:i-1-l,d=n[u],h=a[u],p=d.length({precision:o,subdivisions:h});if(d.isVisible){if(e<=c+p)return d.pointAtLength((r?1:-1)*(e-c),{precision:o,subdivisions:h});s=d}c+=p}if(s)return r?s.end:s.start;var f=n[i-1];return f.end.clone()},pointAtT:function(e){var t=this.segments,n=t.length;if(n===0)return null;var i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=n)return t[n-1].pointAtT(1);var r=e.value;return r<0?r=0:r>1&&(r=1),t[i].pointAtT(r)},PRECISION:3,prepareSegment:function(e,t,n){e.previousSegment=t,e.nextSegment=n,t&&(t.nextSegment=e),n&&(n.previousSegment=e);var i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=n),i&&this.updateSubpathStartSegment(i),e},removeSegment:function(e){var t=this.segments,n=t.length;if(n===0)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var i=t.splice(e,1)[0],r=i.previousSegment,o=i.nextSegment;r&&(r.nextSegment=o),o&&(o.previousSegment=r),i.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(e,t){var n=this.segments,i=n.length;if(i===0)throw new Error("Path has no segments.");if(e<0&&(e=i+e),e>=i||e<0)throw new Error("Index out of range.");var r,o=n[e],a=o.previousSegment,s=o.nextSegment,c=o.isSubpathStart;if(Array.isArray(t)){if(t=t.reduce(function(h,p){return h.concat(p)},[]),!t[0].isSegment)throw new Error("Segments required.");n.splice(e,1);for(var l=t.length,u=0;u<l;u++){var d=t[u];r=this.prepareSegment(d,a,s),n.splice(e+u,0,r),a=r,c&&r.isSubpathStart&&(c=!1)}}else{if(!t||!t.isSegment)throw new Error("Segment required.");r=this.prepareSegment(t,a,s),n.splice(e,1,r),c&&r.isSubpathStart&&(c=!1)}c&&s&&this.updateSubpathStartSegment(s)},round:function(e){for(var t=this.segments,n=t.length,i=0;i<n;i++){var r=t[i];r.round(e)}return this},scale:function(e,t,n){for(var i=this.segments,r=i.length,o=0;o<r;o++){var a=i[o];a.scale(e,t,n)}return this},segmentAt:function(e,t){var n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null},segmentAtLength:function(e,t){var n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null},segmentIndexAt:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a={precision:r,segmentSubdivisions:o},s=this.length(a),c=s*e;return this.segmentIndexAtLength(c,a)},segmentIndexAtLength:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,s=null,c=0,l=0;l<i;l++){var u=r?l:i-1-l,d=n[u],h=a[u],p=d.length({precision:o,subdivisions:h});if(d.isVisible){if(e<=c+p)return u;s=u}c+=p}return s},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;e<0&&(e=0),e>1&&(e=1),t=t||{};var r=t.precision===void 0?this.PRECISION:t.precision,o=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,a={precision:r,segmentSubdivisions:o},s=this.length(a),c=s*e;return this.tangentAtLength(c,a)},tangentAtLength:function(e,t){var n=this.segments,i=n.length;if(i===0)return null;var r=!0;e<0&&(r=!1,e=-e),t=t||{};for(var o=t.precision===void 0?this.PRECISION:t.precision,a=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,s,c=0,l=0;l<i;l++){var u=r?l:i-1-l,d=n[u],h=a[u],p=d.length({precision:o,subdivisions:h});if(d.isDifferentiable()){if(e<=c+p)return d.tangentAtLength((r?1:-1)*(e-c),{precision:o,subdivisions:h});s=d}c+=p}if(s){var f=r?1:0;return s.tangentAtT(f)}return null},tangentAtT:function(e){var t=this.segments,n=t.length;if(n===0)return null;var i=e.segmentIndex;if(i<0)return t[0].tangentAtT(0);if(i>=n)return t[n-1].tangentAtT(1);var r=e.value;return r<0?r=0:r>1&&(r=1),t[i].tangentAtT(r)},toPoints:function(e){var t=this.segments,n=t.length;if(n===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,r=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,o=[],a=[],s=0;s<n;s++){var c=t[s];if(c.isVisible){var l=r[s];if(l.length>0){var u=l.map(function(d){return d.start});Array.prototype.push.apply(a,u)}else a.push(c.start)}else a.length>0&&(a.push(t[s-1].end),o.push(a),a=[])}return a.length>0&&(a.push(this.end),o.push(a)),o},toPolylines:function(e){var t=[],n=this.toPoints(e);if(!n)return null;for(var i=0,r=n.length;i<r;i++)t.push(new et(n[i]));return t},toString:function(){for(var e=this.segments,t=e.length,n="",i=0;i<t;i++){var r=e[i];n+=r.serialize()+" "}return n.trim()},translate:function(e,t){for(var n=this.segments,i=n.length,r=0;r<i;r++){var o=n[r];o.translate(e,t)}return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)t?e.subpathStartSegment=t.subpathStartSegment:e.subpathStartSegment=null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,he.createSegment("M",0,0)),this}};Object.defineProperty(he.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var n=0;n<t;n++){var i=e[n];if(i.isVisible)return i.start}return e[t-1].end}});Object.defineProperty(he.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(t===0)return null;for(var n=t-1;n>=0;n--){var i=e[n];if(i.isVisible)return i.end}return e[t-1].end}});function Vr(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}var us={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(us,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(us,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(us,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Dn=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Dn))return Vr(Dn,e);if(t===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var i;if(e[0]instanceof oe){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new L(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var r;for(i=[],n=0;n<t;n+=2)r=e.slice(n,n+2),i.push(Vr(Dn,r));return i}else{if(t===1)return this.end=new L(e[0]),this;var o;for(i=[],n=0;n<t;n+=1)o=e[n],i.push(new Dn(o));return i}},O_={clone:function(){return new Dn(this.end)},divideAt:function(e){var t=new oe(this.start,this.end),n=t.divideAt(e);return[new Dn(n[0]),new Dn(n[1])]},divideAtLength:function(e){var t=new oe(this.start,this.end),n=t.divideAtLength(e);return[new Dn(n[0]),new Dn(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(O_,"type",{configurable:!0,enumerable:!0,value:"L"});Dn.prototype=ls(us,oe.prototype,O_);var Li=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Li))return Vr(Li,e);if(t===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var i;if(e[0]instanceof tt){if(t===1)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===6)return this.controlPoint1=new L(+e[0],+e[1]),this.controlPoint2=new L(+e[2],+e[3]),this.end=new L(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var r;for(i=[],n=0;n<t;n+=6)r=e.slice(n,n+6),i.push(Vr(Li,r));return i}else{if(t===3)return this.controlPoint1=new L(e[0]),this.controlPoint2=new L(e[1]),this.end=new L(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");var o;for(i=[],n=0;n<t;n+=3)o=e.slice(n,n+3),i.push(Vr(Li,o));return i}},R_={clone:function(){return new Li(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var n=new tt(this.start,this.controlPoint1,this.controlPoint2,this.end),i=n.divideAt(e,t);return[new Li(i[0]),new Li(i[1])]},divideAtLength:function(e,t){var n=new tt(this.start,this.controlPoint1,this.controlPoint2,this.end),i=n.divideAtLength(e,t);return[new Li(i[0]),new Li(i[1])]},divideAtT:function(e){var t=new tt(this.start,this.controlPoint1,this.controlPoint2,this.end),n=t.divideAtT(e);return[new Li(n[0]),new Li(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(i))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,n=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(R_,"type",{configurable:!0,enumerable:!0,value:"C"});Li.prototype=ls(us,tt.prototype,R_);var ds=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof ds))return Vr(ds,e);if(t===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var i;if(e[0]instanceof oe){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}else if(e[0]instanceof tt){if(t===1)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}else if(typeof e[0]=="string"||typeof e[0]=="number"){if(t===2)return this.end=new L(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var r;for(i=[],n=0;n<t;n+=2)r=e.slice(n,n+2),n===0?i.push(Vr(ds,r)):i.push(Vr(Dn,r));return i}else{if(t===1)return this.end=new L(e[0]),this;var o;for(i=[],n=0;n<t;n+=1)o=e[n],n===0?i.push(new ds(o)):i.push(new Dn(o));return i}},Xv={bbox:function(){return null},clone:function(){return new ds(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(Xv,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(Xv,"type",{configurable:!0,enumerable:!0,value:"M"});ds.prototype=ls(us,Xv);var qc=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof qc))return Vr(qc,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},Jv={clone:function(){return new qc},divideAt:function(e){var t=new oe(this.start,this.end),n=t.divideAt(e);return[n[1].isDifferentiable()?new Dn(n[0]):this.clone(),new Dn(n[1])]},divideAtLength:function(e){var t=new oe(this.start,this.end),n=t.divideAtLength(e);return[n[1].isDifferentiable()?new Dn(n[0]):this.clone(),new Dn(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Jv,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(Jv,"type",{configurable:!0,enumerable:!0,value:"Z"});qc.prototype=ls(us,oe.prototype,Jv);var vF=he.segmentTypes={L:Dn,C:Li,M:ds,Z:qc,z:qc};he.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(vF).join("")+",.]*$");he.isDataSupported=function(e){return typeof e!="string"?!1:this.regexSupportedData.test(e)};var kF={curveThroughPoints:function(e){return console.warn("deprecated"),new he(tt.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var t=[],n=[],i=e.length-1,r;if(i==1)return t[0]=new L((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),n[0]=new L(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,n];var o=[];for(r=1;r<i-1;r++)o[r]=4*e[r].x+2*e[r+1].x;o[0]=e[0].x+2*e[1].x,o[i-1]=(8*e[i-1].x+e[i].x)/2;var a=this.getFirstControlPoints(o);for(r=1;r<i-1;++r)o[r]=4*e[r].y+2*e[r+1].y;o[0]=e[0].y+2*e[1].y,o[i-1]=(8*e[i-1].y+e[i].y)/2;var s=this.getFirstControlPoints(o);for(r=0;r<i;r++)t.push(new L(a[r],s[r])),r<i-1?n.push(new L(2*e[r+1].x-a[r+1],2*e[r+1].y-s[r+1])):n.push(new L((e[i].x+a[i-1])/2,(e[i].y+s[i-1])/2));return[t,n]},getCurveDivider:function(e,t,n,i){console.warn("deprecated");var r=new tt(e,t,n,i);return function(a){var s=r.divide(a);return[{p0:s[0].start,p1:s[0].controlPoint1,p2:s[0].controlPoint2,p3:s[0].end},{p0:s[1].start,p1:s[1].controlPoint1,p2:s[1].controlPoint2,p3:s[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,n=[],i=[],r=2;n[0]=e[0]/r;for(var o=1;o<t;o++)i[o]=1/r,r=(o<t-1?4:3.5)-i[o],n[o]=(e[o]-n[o-1])/r;for(o=1;o<t;o++)n[t-o-1]-=i[t-o]*n[t-o];return n},getInversionSolver:function(e,t,n,i){console.warn("deprecated");var r=new tt(e,t,n,i);return function(a){return r.closestPointT(a)}}};var Qn=function(e){if(!(this instanceof Qn))return new Qn(e);if(typeof e=="string")return new Qn.parse(e);this.points=Array.isArray(e)?e.map(L):[]};Qn.parse=function(e){return new Qn(A1(e))};Qn.fromRect=function(e){return new Qn([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])};Qn.prototype=ls(et.prototype,{type:De.Polygon,clone:function(){return new Qn(L1(this.points))},convexHull:function(){return new Qn(O1(this.points))},lengthPoints:function(){let{start:e,end:t,points:n}=this;return n.length<=1||e.equals(t)?n:[...n,e.clone()]}});var rk={};Un(rk,{ellipseWithEllipse:()=>F_,ellipseWithLine:()=>Kv,exists:()=>N_,lineWithLine:()=>hs,pathWithEllipse:()=>G_,pathWithLine:()=>$_,pathWithPath:()=>Z_,pathWithPolygon:()=>B1,pathWithPolyline:()=>nk,pathWithRect:()=>W_,polygonWithEllipse:()=>V1,polygonWithLine:()=>tk,polygonWithPolygon:()=>q_,polygonWithPolyline:()=>U_,polygonWithRect:()=>H_,polylineWithEllipse:()=>ek,polylineWithLine:()=>F1,polylineWithPolyline:()=>j_,polylineWithRect:()=>z_,rectWithEllipse:()=>B_,rectWithLine:()=>V_,rectWithRect:()=>Qv});function N_(e,t,n,i){switch(e.type){case De.Line:{switch(t.type){case De.Line:return hs(e,t)}break}case De.Ellipse:{switch(t.type){case De.Line:return Kv(e,t);case De.Ellipse:return F_(e,t)}break}case De.Rect:{switch(t.type){case De.Line:return V_(e,t);case De.Ellipse:return B_(e,t);case De.Rect:return Qv(e,t)}break}case De.Polyline:{switch(t.type){case De.Line:return F1(e,t);case De.Ellipse:return ek(e,t);case De.Rect:return z_(e,t);case De.Polyline:return j_(e,t)}break}case De.Polygon:{switch(t.type){case De.Line:return tk(e,t);case De.Ellipse:return V1(e,t);case De.Rect:return H_(e,t);case De.Polyline:return U_(e,t);case De.Polygon:return q_(e,t)}break}case De.Path:{switch(t.type){case De.Line:return $_(e,t,n);case De.Ellipse:return G_(e,t,n);case De.Rect:return W_(e,t,n);case De.Polyline:return nk(e,t,n);case De.Polygon:return B1(e,t,n);case De.Path:return Z_(e,t,n,i)}break}}switch(t.type){case De.Ellipse:case De.Rect:case De.Polyline:case De.Polygon:case De.Path:return N_(t,e,i,n);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function hs(e,t){let n=e.start.x,i=e.start.y,r=e.end.x,o=e.end.y,a=t.start.x,s=t.start.y,c=t.end.x,l=t.end.y,u=r-n,d=o-i,h=c-a,p=l-s,f=n-a,g=i-s,b=u*p-h*d,x=(u*g-d*f)/b,M=(h*g-p*f)/b;return x>=0&&x<=1&&M>=0&&M<=1}function Kv(e,t){let n=e.a,i=e.b,r=e.x,o=e.y,a=t.start.x-r,s=t.end.x-r,c=t.start.y-o,l=t.end.y-o,u=n*n,d=i*i,h=s-a,p=l-c,f=h*h/u+p*p/d,g=2*a*h/u+2*c*p/d,b=a*a/u+c*c/d-1,x=g*g-4*f*b;if(x===0){let M=-g/2/f;return M>=0&&M<=1}else if(x>0){let M=Math.sqrt(x),C=(-g+M)/2/f,E=(-g-M)/2/f;return C>=0&&C<=1||E>=0&&E<=1}return!1}function F_(e,t){return MF(e,0,t,0)}function V_(e,t){let{start:n,end:i}=t,{x:r,y:o,width:a,height:s}=e;return n.x>r+a&&i.x>r+a||n.x<r&&i.x<r||n.y>o+s&&i.y>o+s||n.y<o&&i.y<o?!1:e.containsPoint(t.start)||e.containsPoint(t.end)?!0:hs(e.topLine(),t)||hs(e.rightLine(),t)||hs(e.bottomLine(),t)||hs(e.leftLine(),t)}function B_(e,t){return Qv(e,te.fromEllipse(t))?V1(Qn.fromRect(e),t):!1}function Qv(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function F1(e,t){return Y_(e,t,{interior:!1})}function ek(e,t){return X_(e,t,{interior:!1})}function z_(e,t){return J_(e,t,{interior:!1})}function j_(e,t){return z1(e,t,{interior:!1})}function tk(e,t){return Y_(e,t,{interior:!0})}function V1(e,t){return X_(e,t,{interior:!0})}function H_(e,t){return J_(e,t,{interior:!0})}function U_(e,t){return z1(e,t,{interior:!0})}function q_(e,t){return ik(e,t,{interior:!0})}function $_(e,t,n){return e.getSubpaths().some(i=>{let[r]=i.toPolylines(n),{type:o}=i.getSegment(-1);return o==="Z"?tk(r,t):F1(r,t)})}function G_(e,t,n){return e.getSubpaths().some(i=>{let[r]=i.toPolylines(n),{type:o}=i.getSegment(-1);return o==="Z"?V1(r,t):ek(r,t)})}function W_(e,t,n){return B1(e,Qn.fromRect(t),n)}function nk(e,t,n){return K_(e,t,n,{interior:!1})}function B1(e,t,n){return K_(e,t,n,{interior:!0})}function Z_(e,t,n,i){return e.getSubpaths().some(r=>{let[o]=r.toPolylines(n),{type:a}=r.getSegment(-1);return a==="Z"?B1(t,o,i):nk(t,o,i)})}function Y_(e,t,n={}){let{interior:i=!1}=n,r;if(i){if(e.containsPoint(t.start))return!0;let{start:s,end:c,points:l}=e;r=c.equals(s)?l:[...l,s]}else r=e.points;let{length:o}=r,a=new oe;for(let s=0;s<o-1;s++)if(a.start=r[s],a.end=r[s+1],hs(t,a))return!0;return!1}function X_(e,t,n={}){let{start:i,end:r,points:o}=e;if(t.containsPoint(i))return!0;let a,{interior:s=!1}=n;if(s){if(e.containsPoint(t.center()))return!0;a=r.equals(i)?o:[...o,i]}else a=o;let{length:c}=a,l=new oe;for(let u=0;u<c-1;u++)if(l.start=a[u],l.end=a[u+1],Kv(t,l))return!0;return!1}function J_(e,t,n){let i=Qn.fromRect(t);return ik(e,i,n)}function K_(e,t,n,i){return e.getSubpaths().some(r=>{let[o]=r.toPolylines(n),{type:a}=r.getSegment(-1);return a==="Z"?ik(t,o,i):z1(t,o,i)})}function z1(e,t,n={}){let{interior:i=!1}=n,r;if(i){let{start:c}=t;if(e.containsPoint(c))return!0;r=e.clone().close()}else r=e;let o=t.points,{length:a}=o,s=new oe;for(let c=0;c<a-1;c++)if(s.start=o[c],s.end=o[c+1],F1(r,s))return!0;return!1}function ik(e,t,n){return t.containsPoint(e.start)||z1(e,t.clone().close(),n)}function MF(e,t,n,i){let{cos:r,sin:o}=Math,a=o(t),s=r(t),c=o(i),l=r(i),u=a*a,d=s*s,h=a*s,p=c*c,f=l*l,g=c*l,b=e.a*e.a,x=e.b*e.b,M=n.a*n.a,C=n.b*n.b,E=b*u+x*d,T=M*p+C*f,F=b*d+x*u,m=M*f+C*p,k=2*(x-b)*h,w=2*(C-M)*g,S=-2*E*e.x-k*e.y,D=-2*T*n.x-w*n.y,R=-k*e.x-2*F*e.y,B=-w*n.x-2*m*n.y,j=E*e.x*e.x+F*e.y*e.y+k*e.x*e.y-b*x,W=T*n.x*n.x+m*n.y*n.y+w*n.x*n.y-M*C;k=k/2,w=w/2,S=S/2,D=D/2,R=R/2,B=B/2;let P=ea([[E,k,S],[k,F,R],[S,R,j]]),O=ea([[T,w,D],[w,m,B],[D,B,W]]),N=.33333333*(ea([[T,k,S],[w,F,R],[D,R,j]])+ea([[E,w,S],[k,m,R],[S,B,j]])+ea([[E,k,D],[k,F,B],[S,R,W]])),z=.33333333*(ea([[E,w,D],[k,m,B],[S,B,W]])+ea([[T,k,D],[w,F,B],[D,R,W]])+ea([[T,w,S],[w,m,R],[D,B,j]])),ye=N1([[P,N],[N,z]]),ve=N1([[P,z],[N,O]]),it=N1([[N,z],[z,O]]);return!(N1([[2*ye,ve],[ve,2*it]])>0&&(z>0||N>0))}function N1(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function ea(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}var Br=rk;var xF=function(){var e=typeof window=="object"&&!!window.SVGAngle;if(!e)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},n="1.1",i=Math,r=i.PI,o=i.atan2,a=i.sqrt,s=i.min,c=i.max,l=i.cos,u=i.sin,d=function(m,k,w){if(!(this instanceof d))return d.apply(Object.create(d.prototype),arguments);if(m){if(d.isV(m)&&(m=m.node),k=k||{},d.isString(m)){if(m=m.trim(),m.toLowerCase()==="svg")m=d.createSvgDocument();else if(m[0]==="<"){var S=d.createSvgDocument(m);if(S.childNodes.length>1){var D=[],R,B;for(R=0,B=S.childNodes.length;R<B;R++){var j=S.childNodes[R];D.push(new d(document.importNode(j,!0)))}return D}m=document.importNode(S.firstChild,!0)}else m=document.createElementNS(t.svg,m);d.ensureId(m)}return this.node=m,this.setAttributes(k),w&&this.append(w),this}},h=d.prototype;Object.defineProperty(h,"id",{enumerable:!0,get:function(){return this.node.id},set:function(m){this.node.id=m}}),h.getTransformToElement=function(m){var k=this.node;if(d.isSVGGraphicsElement(m)&&d.isSVGGraphicsElement(k)){var w=d.toNode(m).getScreenCTM(),S=k.getScreenCTM();if(w&&S)return w.inverse().multiply(S)}return d.createSVGMatrix()},h.transform=function(m,k){var w=this.node;if(d.isUndefined(m))return d.transformStringToMatrix(this.attr("transform"));if(k&&k.absolute)return this.attr("transform",d.matrixToTransformString(m));var S=d.createSVGTransform(m);return w.transform.baseVal.appendItem(S),this},h.translate=function(m,k,w){w=w||{},k=k||0;var S=this.attr("transform")||"",D=d.parseTransformString(S);if(S=D.value,d.isUndefined(m))return D.translate;S=S.replace(/translate\([^)]*\)/g,"").trim();var R=w.absolute?m:D.translate.tx+m,B=w.absolute?k:D.translate.ty+k,j="translate("+R+","+B+")";return this.attr("transform",(j+" "+S).trim()),this},h.rotate=function(m,k,w,S){S=S||{};var D=this.attr("transform")||"",R=d.parseTransformString(D);if(D=R.value,d.isUndefined(m))return R.rotate;D=D.replace(/rotate\([^)]*\)/g,"").trim(),m%=360;var B=S.absolute?m:R.rotate.angle+m,j=k!==void 0&&w!==void 0?","+k+","+w:"",W="rotate("+B+j+")";return this.attr("transform",(D+" "+W).trim()),this},h.scale=function(m,k){k=d.isUndefined(k)?m:k;var w=this.attr("transform")||"",S=d.parseTransformString(w);if(w=S.value,d.isUndefined(m))return S.scale;w=w.replace(/scale\([^)]*\)/g,"").trim();var D="scale("+m+","+k+")";return this.attr("transform",(w+" "+D).trim()),this},h.bbox=function(m,k){var w,S=this.node,D=S.ownerSVGElement;if(!D)return new te(0,0,0,0);try{w=S.getBBox()}catch{w={x:S.clientLeft,y:S.clientTop,width:S.clientWidth,height:S.clientHeight}}if(m)return new te(w);var R=this.getTransformToElement(k||D);return d.transformRect(w,R)},h.getBBox=function(m){var k={},w,S=this.node,D=S.ownerSVGElement;if(!D||!d.isSVGGraphicsElement(S))return new te(0,0,0,0);if(m&&(m.target&&(k.target=d.toNode(m.target)),m.recursive&&(k.recursive=m.recursive)),k.recursive){var B=this.children(),j=B.length;if(j===0)return this.getBBox({target:k.target,recursive:!1});k.target||(k.target=this);for(var W=0;W<j;W++){var P=B[W],O;P.children().length===0?O=P.getBBox({target:k.target,recursive:!1}):O=P.getBBox({target:k.target,recursive:!0}),w?w=w.union(O):w=O}return w}else{try{w=S.getBBox()}catch{w={x:S.clientLeft,y:S.clientTop,width:S.clientWidth,height:S.clientHeight}}if(k.target){var R=this.getTransformToElement(k.target);return d.transformRect(w,R)}else return new te(w)}};function p(m,k){m||(m={});var w=d("textPath"),S=m.d;if(S&&m["xlink:href"]===void 0){var D=d("path").attr("d",S).appendTo(k.defs());w.attr("xlink:href","#"+D.id)}return d.isObject(m)&&w.attr(m),w.node}function f(m,k,w){w||(w={});for(var S=w.includeAnnotationIndices,D=w.eol,R=w.lineHeight,B=w.baseSize,j=0,W={},P=k.length-1,O=0;O<=P;O++){var N=k[O],z=null;if(d.isObject(N)){var ye=N.attrs,ve=d("tspan",ye),it=ve.node,wt=N.t;D&&O===P&&(wt+=D),it.textContent=wt;var pe=ye.class;pe&&ve.addClass(pe),S&&ve.attr("annotations",N.annotations),z=parseFloat(ye["font-size"]),isFinite(z)||(z=B),z&&z>j&&(j=z)}else D&&O===P&&(N+=D),it=document.createTextNode(N||" "),B&&B>j&&(j=B);m.appendChild(it)}return j&&(W.maxFontSize=j),R?W.lineHeight=R:j&&(W.lineHeight=j*1.2),W}var g=/em$/;function b(m,k){var w=parseFloat(m);return g.test(m)?w*k:w}function x(m,k,w,S){if(!Array.isArray(k))return 0;var D=k.length;if(!D)return 0;for(var R=k[0],B=b(R.maxFontSize,w)||w,j=0,W=b(S,w),P=1;P<D;P++){R=k[P];var O=b(R.lineHeight,w)||W;j+=O}var N=b(R.maxFontSize,w)||w,z;switch(m){case"middle":z=B/2-.15*N-j/2;break;case"bottom":z=-(.25*N)-j;break;case"top":default:z=.8*B;break}return z}h.text=function(m,k){if(m&&typeof m!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");m=d.sanitizeText(m),k||(k={});var w=k.displayEmpty,S=k.eol,D=k.textPath,R=k.textVerticalAnchor,B=R==="middle"||R==="bottom"||R==="top",j=k.x;j===void 0&&(j=this.attr("x")||0);var W=k.includeAnnotationIndices,P=k.annotations;P&&!d.isArray(P)&&(P=[P]);var O=k.lineHeight,N=O==="auto",z=N?"1.5em":O||"1em";this.empty(),this.attr({"xml:space":"preserve",display:m||w?null:"none"});var ye=parseFloat(this.attr("font-size"));ye||(ye=16,(B||P)&&this.attr("font-size",ye));var ve=document,it;D?(typeof D=="string"&&(D={d:D}),it=p(D,this)):it=ve.createDocumentFragment();for(var wt=0,pe=m.split(`
`),me=[],be,ke=0,Me=pe.length-1;ke<=Me;ke++){var Ne=z,rt="v-line",Te=ve.createElementNS(t.svg,"tspan"),lt=pe[ke],ze;if(lt)if(P){var Pe=d.annotateString(lt,P,{offset:-wt,includeAnnotationIndices:W});ze=f(Te,Pe,{includeAnnotationIndices:W,eol:ke!==Me&&S,lineHeight:N?null:z,baseSize:ye});var Ye=ze.lineHeight;Ye&&N&&ke!==0&&(Ne=Ye),ke===0&&(be=ze.maxFontSize*.8)}else S&&ke!==Me&&(lt+=S),Te.textContent=lt;else{Te.textContent="-",rt+=" v-empty-line";var de=Te.style;if(de.fillOpacity=0,de.strokeOpacity=0,P){ze={},Pe=d.findAnnotationsAtIndex(P,wt);let K=ye;for(let J=Pe.length;J>0;J--){let xe=Pe[J-1].attrs;if(!xe||!("font-size"in xe))continue;let It=parseFloat(xe["font-size"]);if(isFinite(It)){K=It;break}}N&&(ke>0?Ne=K*1.2:be=K*.8),Te.setAttribute("font-size",K),ze.maxFontSize=K}}ze&&me.push(ze),ke>0&&Te.setAttribute("dy",Ne),(ke>0||D)&&Te.setAttribute("x",j),Te.className.baseVal=rt,it.appendChild(Te),wt+=lt.length+1}if(B)if(P)Ne=x(R,me,ye,z);else if(R==="top")Ne="0.8em";else{var $;switch(Me>0?($=parseFloat(z)||1,$*=Me,g.test(z)||($/=ye)):$=0,R){case"middle":Ne=.3-$/2+"em";break;case"bottom":Ne=-$-.3+"em";break}}else R===0?Ne="0em":R?Ne=R:(Ne=0,this.attr("y")===null&&this.attr("y",be||"0.8em"));return it.firstChild.setAttribute("dy",Ne),this.append(it),this},h.removeAttr=function(m){let k=T[m],{ns:w,local:S}=d.qualifyAttr(k),D=this.node;return w?D.hasAttributeNS(w,S)&&D.removeAttributeNS(w,S):D.hasAttribute(k)&&D.removeAttribute(k),this},h.attr=function(m,k){if(d.isUndefined(m)){for(var w=this.node.attributes,S={},D=0;D<w.length;D++)S[w[D].name]=w[D].value;return S}if(d.isString(m)&&d.isUndefined(k))return this.node.getAttribute(T[m]);if(typeof m=="object")for(var R in m)m.hasOwnProperty(R)&&this.setAttribute(R,m[R]);else this.setAttribute(m,k);return this},h.normalizePath=function(){var m=this.tagName();return m==="PATH"&&this.attr("d",d.normalizePathData(this.attr("d"))),this},h.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},h.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},h.setAttributes=function(m){for(var k in m)m.hasOwnProperty(k)&&this.setAttribute(k,m[k]);return this},h.append=function(m){d.isArray(m)||(m=[m]);for(var k=0,w=m.length;k<w;k++)this.node.appendChild(d.toNode(m[k]));return this},h.prepend=function(m){var k=this.node.firstChild;return k?d(k).before(m):this.append(m)},h.before=function(m){var k=this.node,w=k.parentNode;if(w){d.isArray(m)||(m=[m]);for(var S=0,D=m.length;S<D;S++)w.insertBefore(d.toNode(m[S]),k)}return this},h.appendTo=function(m){return d.toNode(m).appendChild(this.node),this},h.svg=function(){return this.node instanceof window.SVGSVGElement?this:d(this.node.ownerSVGElement)},h.tagName=function(){return this.node.tagName.toUpperCase()},h.defs=function(){var m=this.svg()||this,k=m.node.getElementsByTagName("defs")[0];return k?d(k):d("defs").appendTo(m)},h.clone=function(){var m=d(this.node.cloneNode(!0));return m.node.id=d.uniqueId(),m},h.findOne=function(m){var k=this.node.querySelector(m);return k?d(k):void 0},h.find=function(m){var k=[],w=this.node.querySelectorAll(m);if(w)for(var S=0;S<w.length;S++)k.push(d(w[S]));return k},h.children=function(){for(var m=this.node.childNodes,k=[],w=0;w<m.length;w++){var S=m[w];S.nodeType===1&&k.push(d(m[w]))}return k},h.parent=function(){return d(this.node.parentNode)||null},h.index=function(){for(var m=0,k=this.node.previousSibling;k;)k.nodeType===1&&m++,k=k.previousSibling;return m},h.findParentByClass=function(m,k){for(var w=this.node.ownerSVGElement,S=this.node.parentNode;S&&S!==k&&S!==w;){var D=d(S);if(D.hasClass(m))return D;S=S.parentNode}return null},h.contains=function(m){var k=this.node,w=d.toNode(m),S=w&&w.parentNode;return k===S||!!(S&&S.nodeType===1&&k.compareDocumentPosition(S)&16)},h.toLocalPoint=function(m,k){var w=this.svg().node,S=w.createSVGPoint();S.x=m,S.y=k;try{var D=S.matrixTransform(w.getScreenCTM().inverse()),R=this.getTransformToElement(w).inverse()}catch{return S}return D.matrixTransform(R)},h.translateCenterToPoint=function(m){var k=this.getBBox({target:this.svg()}),w=k.center();return this.translate(m.x-w.x,m.y-w.y),this},h.translateAndAutoOrient=function(m,k,w){m=new L(m),k=new L(k),w||(w=this.svg());var S=this.scale();this.attr("transform","");var D=this.getBBox({target:w}).scale(S.sx,S.sy),R=d.createSVGTransform();R.setTranslate(-D.x-D.width/2,-D.y-D.height/2);var B=d.createSVGTransform(),j=m.angleBetween(k,m.clone().offset(1,0));j&&B.setRotate(j,0,0);var W=d.createSVGTransform(),P=m.clone().move(k,D.width/2);W.setTranslate(2*m.x-P.x,2*m.y-P.y);var O=this.getTransformToElement(w),N=d.createSVGTransform();return N.setMatrix(W.matrix.multiply(B.matrix.multiply(R.matrix.multiply(O.scale(S.sx,S.sy))))),this.attr("transform",d.matrixToTransformString(N.matrix)),this},h.animateAlongPath=function(m,k){k=d.toNode(k);var w=d.ensureId(k),S=d("animateMotion",m),D=d("mpath",{"xlink:href":"#"+w});S.append(D),this.append(S);try{S.node.beginElement()}catch{if(document.documentElement.getAttribute("smiling")==="fake"){var R=S.node;R.animators=[];var B=R.getAttribute("id");B&&(id2anim[B]=R);for(var j=getTargets(R),W=0,P=j.length;W<P;W++){var O=j[W],N=new Animator(R,O,W);animators.push(N),R.animators[W]=N,N.register()}}}return this};let M=/[^\x20\t\r\n\f]+/g;function C(m){return d.isString(m)?m.trim().match(M)||[]:[]}h.hasClass=function(m){return d.isString(m)?this.node.classList.contains(m.trim()):!1},h.addClass=function(m){return this.node.classList.add(...C(m)),this},h.removeClass=function(m){return this.node.classList.remove(...C(m)),this},h.toggleClass=function(m,k){let w=C(m);for(let S=0;S<w.length;S++)this.node.classList.toggle(w[S],k);return this},h.sample=function(m){m=m||1;for(var k=this.node,w=k.getTotalLength(),S=[],D=0,R;D<w;)R=k.getPointAtLength(D),S.push({x:R.x,y:R.y,distance:D}),D+=m;return S},h.convertToPath=function(){var m=d("path");m.attr(this.attr());var k=this.convertToPathData();return k&&m.attr("d",k),m},h.convertToPathData=function(){var m=this.tagName();switch(m){case"PATH":return this.attr("d");case"LINE":return d.convertLineToPathData(this.node);case"POLYGON":return d.convertPolygonToPathData(this.node);case"POLYLINE":return d.convertPolylineToPathData(this.node);case"ELLIPSE":return d.convertEllipseToPathData(this.node);case"CIRCLE":return d.convertCircleToPathData(this.node);case"RECT":return d.convertRectToPathData(this.node)}throw new Error(m+" cannot be converted to PATH.")},d.prototype.toGeometryShape=function(){var m,k,w,S,D,R,B,j,W,P,O,N,z,ye,ve;switch(this.tagName()){case"RECT":return m=parseFloat(this.attr("x"))||0,k=parseFloat(this.attr("y"))||0,w=parseFloat(this.attr("width"))||0,S=parseFloat(this.attr("height"))||0,new te(m,k,w,S);case"CIRCLE":return D=parseFloat(this.attr("cx"))||0,R=parseFloat(this.attr("cy"))||0,B=parseFloat(this.attr("r"))||0,new hn({x:D,y:R},B,B);case"ELLIPSE":return D=parseFloat(this.attr("cx"))||0,R=parseFloat(this.attr("cy"))||0,j=parseFloat(this.attr("rx"))||0,W=parseFloat(this.attr("ry"))||0,new hn({x:D,y:R},j,W);case"POLYLINE":return P=d.getPointsFromSvgNode(this),new et(P);case"POLYGON":return P=d.getPointsFromSvgNode(this),P.length>1&&P.push(P[0]),new et(P);case"PATH":return O=this.attr("d"),he.isDataSupported(O)||(O=d.normalizePathData(O)),new he(O);case"LINE":return N=parseFloat(this.attr("x1"))||0,ye=parseFloat(this.attr("y1"))||0,z=parseFloat(this.attr("x2"))||0,ve=parseFloat(this.attr("y2"))||0,new oe({x:N,y:ye},{x:z,y:ve})}return this.getBBox()},h.findIntersection=function(m,k){var w=this.svg().node;k=k||w;var S=this.getBBox({target:k}),D=S.center();if(S.intersectionWithLineFromCenterToPoint(m)){var R,B=this.tagName();if(B==="RECT"){var j=new te(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),W=this.getTransformToElement(k),P=d.decomposeMatrix(W),O=w.createSVGTransform();O.setRotate(-P.rotation,D.x,D.y);var N=d.transformRect(j,O.matrix.multiply(W));R=new te(N).intersectionWithLineFromCenterToPoint(m,P.rotation)}else if(B==="PATH"||B==="POLYGON"||B==="POLYLINE"||B==="CIRCLE"||B==="ELLIPSE"){var z=B==="PATH"?this:this.convertToPath(),ye=z.sample(),ve=1/0,it=[],wt,pe,me,be,ke,Me;for(wt=0;wt<ye.length;wt++)pe=ye[wt],me=d.createSVGPoint(pe.x,pe.y),me=me.matrixTransform(this.getTransformToElement(k)),pe=new L(me),be=pe.distance(D),ke=pe.distance(m)*1.1,Me=be+ke,Me<ve?(ve=Me,it=[{sample:pe,refDistance:ke}]):Me<ve+1&&it.push({sample:pe,refDistance:ke});it.sort(function(Ne,rt){return Ne.refDistance-rt.refDistance}),it[0]&&(R=it[0].sample)}return R}},h.setAttribute=function(m,k){let w=this.node;if(k===null)return this.removeAttr(m),this;let S=T[m],{ns:D}=d.qualifyAttr(S);return D?w.setAttributeNS(D,S,k):S==="id"?w.id=k:w.setAttribute(S,k),this},d.createSvgDocument=function(m){if(m){let w=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="${n}">${m}</svg>`,{documentElement:S}=d.parseXML(w,{async:!1});return S}let k=document.createElementNS(t.svg,"svg");return k.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),k.setAttribute("version",n),k},d.createSVGStyle=function(m){let{node:k}=d("style",{type:"text/css"},[d.createCDATASection(m)]);return k},d.createCDATASection=function(m=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(m)},d.idCounter=0,d.uniqueId=function(){return"v-"+ ++d.idCounter},d.toNode=function(m){return d.isV(m)?m.node:m.nodeName&&m||m[0]},d.ensureId=function(m){return m=d.toNode(m),m.id||(m.id=d.uniqueId())},d.sanitizeText=function(m){return(m||"").replace(/ /g,"\xA0")},d.isUndefined=function(m){return typeof m>"u"},d.isString=function(m){return typeof m=="string"},d.isObject=function(m){return m&&typeof m=="object"},d.isArray=Array.isArray,d.parseXML=function(m,k){k=k||{};var w;try{var S=new DOMParser;d.isUndefined(k.async)||(S.async=k.async),w=S.parseFromString(m,"text/xml")}catch{w=void 0}if(!w||w.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+m);return w};let E=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(m=>E[m]=m),E.xlinkShow="xlink:show",E.xlinkRole="xlink:role",E.xlinkActuate="xlink:actuate",E.xlinkHref="xlink:href",E.xlinkType="xlink:type",E.xlinkTitle="xlink:title",E.xmlBase="xml:base",E.xmlLang="xml:lang",E.xmlSpace="xml:space";let T=new Proxy(E,{get(m,k){return d.supportCamelCaseAttributes?k in m?m[k]:m[k]=k.replace(/[A-Z]/g,"-$&").toLowerCase():k}});Object.defineProperty(d,"attributeNames",{enumerable:!0,value:T,writable:!1}),Object.defineProperty(d,"supportCamelCaseAttributes",{enumerable:!0,value:!0,writable:!0}),d.qualifyAttr=function(m){if(m.indexOf(":")!==-1){var k=m.split(":");return{ns:t[k[0]],local:k[1]}}return{ns:null,local:m}},d.transformSeparatorRegex=/[ ,]+/,d.transformRegex=/\b\w+\([^()]+\)/g,d.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,d.transformTranslateRegex=/\btranslate\(([^()]+)\)/,d.transformRotateRegex=/\brotate\(([^()]+)\)/,d.transformScaleRegex=/\bscale\(([^()]+)\)/,d.transformStringToMatrix=function(m){let k=d.createSVGMatrix(),w=m&&m.match(d.transformRegex);if(!w)return k;let S=w.length;for(let D=0;D<S;D++){let B=w[D].match(d.transformFunctionRegex);if(B){let j,W,P,O,N,z=d.createSVGMatrix(),ye=B[1].toLowerCase(),ve=B[2].split(d.transformSeparatorRegex);switch(ye){case"scale":j=parseFloat(ve[0]),W=ve[1]===void 0?j:parseFloat(ve[1]),z=z.scaleNonUniform(j,W);break;case"translate":P=parseFloat(ve[0]),O=parseFloat(ve[1]),z=z.translate(P,O);break;case"rotate":N=parseFloat(ve[0]),P=parseFloat(ve[1])||0,O=parseFloat(ve[2])||0,P!==0||O!==0?z=z.translate(P,O).rotate(N).translate(-P,-O):z=z.rotate(N);break;case"skewx":N=parseFloat(ve[0]),z=z.skewX(N);break;case"skewy":N=parseFloat(ve[0]),z=z.skewY(N);break;case"matrix":z.a=parseFloat(ve[0]),z.b=parseFloat(ve[1]),z.c=parseFloat(ve[2]),z.d=parseFloat(ve[3]),z.e=parseFloat(ve[4]),z.f=parseFloat(ve[5]);break;default:continue}k=k.multiply(z)}}return k},d.matrixToTransformString=function(m){return m||(m=!0),"matrix("+(m.a!==void 0?m.a:1)+","+(m.b!==void 0?m.b:0)+","+(m.c!==void 0?m.c:0)+","+(m.d!==void 0?m.d:1)+","+(m.e!==void 0?m.e:0)+","+(m.f!==void 0?m.f:0)+")"},d.parseTransformString=function(m){var k,w,S;if(m){var D=d.transformSeparatorRegex;if(m.trim().indexOf("matrix")>=0){var R=d.transformStringToMatrix(m),B=d.decomposeMatrix(R);k=[B.translateX,B.translateY],S=[B.scaleX,B.scaleY],w=[B.rotation];var j=[];(k[0]!==0||k[1]!==0)&&j.push("translate("+k+")"),(S[0]!==1||S[1]!==1)&&j.push("scale("+S+")"),w[0]!==0&&j.push("rotate("+w+")"),m=j.join(" ")}else{let P=m.match(d.transformTranslateRegex);P&&(k=P[1].split(D));let O=m.match(d.transformRotateRegex);O&&(w=O[1].split(D));let N=m.match(d.transformScaleRegex);N&&(S=N[1].split(D))}}var W=S&&S[0]?parseFloat(S[0]):1;return{value:m,translate:{tx:k&&k[0]?parseInt(k[0],10):0,ty:k&&k[1]?parseInt(k[1],10):0},rotate:{angle:w&&w[0]?parseInt(w[0],10):0,cx:w&&w[1]?parseInt(w[1],10):void 0,cy:w&&w[2]?parseInt(w[2],10):void 0},scale:{sx:W,sy:S&&S[1]?parseFloat(S[1]):W}}},d.deltaTransformPoint=function(m,k){var w=k.x*m.a+k.y*m.c+0,S=k.x*m.b+k.y*m.d+0;return{x:w,y:S}},d.decomposeMatrix=function(m){var k=d.deltaTransformPoint(m,{x:0,y:1}),w=d.deltaTransformPoint(m,{x:1,y:0}),S=180/r*o(k.y,k.x)-90,D=180/r*o(w.y,w.x);return{translateX:m.e,translateY:m.f,scaleX:a(m.a*m.a+m.b*m.b),scaleY:a(m.c*m.c+m.d*m.d),skewX:S,skewY:D,rotation:S}},d.matrixToScale=function(m){var k,w,S,D;return m?(k=d.isUndefined(m.a)?1:m.a,D=d.isUndefined(m.d)?1:m.d,w=m.b,S=m.c):k=D=1,{sx:w?a(k*k+w*w):k,sy:S?a(S*S+D*D):D}},d.matrixToRotate=function(m){var k={x:0,y:1};return m&&(k=d.deltaTransformPoint(m,k)),{angle:un(cs(o(k.y,k.x))-90)}},d.matrixToTranslate=function(m){return{tx:m&&m.e||0,ty:m&&m.f||0}},d.isV=function(m){return m instanceof d},d.isVElement=d.isV,d.isSVGGraphicsElement=function(m){return m?(m=d.toNode(m),m instanceof SVGElement&&typeof m.getScreenCTM=="function"):!1};var F=d("svg").node;return d.createSVGMatrix=function(m){var k=F.createSVGMatrix();for(var w in m)k[w]=m[w];return k},d.createSVGTransform=function(m){return d.isUndefined(m)?F.createSVGTransform():(m instanceof SVGMatrix||(m=d.createSVGMatrix(m)),F.createSVGTransformFromMatrix(m))},d.createSVGPoint=function(m,k){var w=F.createSVGPoint();return w.x=m,w.y=k,w},d.transformRect=function(m,k){var w=F.createSVGPoint();w.x=m.x,w.y=m.y;var S=w.matrixTransform(k);w.x=m.x+m.width,w.y=m.y;var D=w.matrixTransform(k);w.x=m.x+m.width,w.y=m.y+m.height;var R=w.matrixTransform(k);w.x=m.x,w.y=m.y+m.height;var B=w.matrixTransform(k),j=s(S.x,D.x,R.x,B.x),W=c(S.x,D.x,R.x,B.x),P=s(S.y,D.y,R.y,B.y),O=c(S.y,D.y,R.y,B.y);return new te(j,P,W-j,O-P)},d.transformPoint=function(m,k){return new L(d.createSVGPoint(m.x,m.y).matrixTransform(k))},d.transformLine=function(m,k){return new oe(d.transformPoint(m.start,k),d.transformPoint(m.end,k))},d.transformPolyline=function(m,k){var w=m instanceof et?m.points:m;d.isArray(w)||(w=[]);for(var S=[],D=0,R=w.length;D<R;D++)S[D]=d.transformPoint(w[D],k);return new et(S)},d.styleToObject=function(m){for(var k={},w=m.split(";"),S=0;S<w.length;S++){var D=w[S],R=D.split("=");k[R[0].trim()]=R[1].trim()}return k},d.createSlicePathData=function(m,k,w,S){var D=2*r-1e-6,R=m,B=k,j=w,W=S,P=(W<j&&(P=j,j=W,W=P),W-j),O=P<r?"0":"1",N=l(j),z=u(j),ye=l(W),ve=u(W);return P>=D?R?"M0,"+B+"A"+B+","+B+" 0 1,1 0,"+-B+"A"+B+","+B+" 0 1,1 0,"+B+"M0,"+R+"A"+R+","+R+" 0 1,0 0,"+-R+"A"+R+","+R+" 0 1,0 0,"+R+"Z":"M0,"+B+"A"+B+","+B+" 0 1,1 0,"+-B+"A"+B+","+B+" 0 1,1 0,"+B+"Z":R?"M"+B*N+","+B*z+"A"+B+","+B+" 0 "+O+",1 "+B*ye+","+B*ve+"L"+R*ye+","+R*ve+"A"+R+","+R+" 0 "+O+",0 "+R*N+","+R*z+"Z":"M"+B*N+","+B*z+"A"+B+","+B+" 0 "+O+",1 "+B*ye+","+B*ve+"L0,0Z"},d.mergeAttrs=function(m,k){for(var w in k)w==="class"?m[w]=m[w]?m[w]+" "+k[w]:k[w]:w==="style"?d.isObject(m[w])&&d.isObject(k[w])?m[w]=d.mergeAttrs(m[w],k[w]):d.isObject(m[w])?m[w]=d.mergeAttrs(m[w],d.styleToObject(k[w])):d.isObject(k[w])?m[w]=d.mergeAttrs(d.styleToObject(m[w]),k[w]):m[w]=d.mergeAttrs(d.styleToObject(m[w]),d.styleToObject(k[w])):m[w]=k[w];return m},d.annotateString=function(m,k,w){k=k||[],w=w||{};for(var S=w.offset||0,D=[],R,B=[],j,W,P=0;P<m.length;P++){j=B[P]=m[P];for(var O=0;O<k.length;O++){var N=k[O],z=N.start+S,ye=N.end+S;P>=z&&P<ye&&(d.isObject(j)?j.attrs=d.mergeAttrs(d.mergeAttrs({},j.attrs),N.attrs):j=B[P]={t:m[P],attrs:N.attrs},w.includeAnnotationIndices&&(j.annotations||(j.annotations=[])).push(O))}W=B[P-1],W?d.isObject(j)&&d.isObject(W)?JSON.stringify(j.attrs)===JSON.stringify(W.attrs)?R.t+=j.t:(D.push(R),R=j):d.isObject(j)||d.isObject(W)?(D.push(R),R=j):R=(R||"")+j:R=j}return R&&D.push(R),D},d.findAnnotationsAtIndex=function(m,k){var w=[];return m&&m.forEach(function(S){S.start<k&&k<=S.end&&w.push(S)}),w},d.findAnnotationsBetweenIndexes=function(m,k,w){var S=[];return m&&m.forEach(function(D){(k>=D.start&&k<D.end||w>D.start&&w<=D.end||D.start>=k&&D.end<w)&&S.push(D)}),S},d.shiftAnnotations=function(m,k,w){return m&&m.forEach(function(S){S.start<k&&S.end>=k?S.end+=w:S.start>=k&&(S.start+=w,S.end+=w)}),m},d.convertLineToPathData=function(m){m=d(m);var k=["M",m.attr("x1"),m.attr("y1"),"L",m.attr("x2"),m.attr("y2")].join(" ");return k},d.convertPolygonToPathData=function(m){var k=d.getPointsFromSvgNode(m);return k.length===0?null:d.svgPointsToPath(k)+" Z"},d.convertPolylineToPathData=function(m){var k=d.getPointsFromSvgNode(m);return k.length===0?null:d.svgPointsToPath(k)},d.svgPointsToPath=function(m){for(var k=0,w=m.length;k<w;k++)m[k]=m[k].x+" "+m[k].y;return"M "+m.join(" L")},d.getPointsFromSvgNode=function(m){m=d.toNode(m);var k=[],w=m.points;if(w)for(var S=0,D=w.numberOfItems;S<D;S++)k.push(w.getItem(S));return k},d.KAPPA=.551784,d.convertCircleToPathData=function(m){m=d(m);var k=parseFloat(m.attr("cx"))||0,w=parseFloat(m.attr("cy"))||0,S=parseFloat(m.attr("r")),D=S*d.KAPPA,R=["M",k,w-S,"C",k+D,w-S,k+S,w-D,k+S,w,"C",k+S,w+D,k+D,w+S,k,w+S,"C",k-D,w+S,k-S,w+D,k-S,w,"C",k-S,w-D,k-D,w-S,k,w-S,"Z"].join(" ");return R},d.convertEllipseToPathData=function(m){m=d(m);var k=parseFloat(m.attr("cx"))||0,w=parseFloat(m.attr("cy"))||0,S=parseFloat(m.attr("rx")),D=parseFloat(m.attr("ry"))||S,R=S*d.KAPPA,B=D*d.KAPPA,j=["M",k,w-D,"C",k+R,w-D,k+S,w-B,k+S,w,"C",k+S,w+B,k+R,w+D,k,w+D,"C",k-R,w+D,k-S,w+B,k-S,w,"C",k-S,w-B,k-R,w-D,k,w-D,"Z"].join(" ");return j},d.convertRectToPathData=function(m){return m=d(m),d.rectToPath({x:parseFloat(m.attr("x"))||0,y:parseFloat(m.attr("y"))||0,width:parseFloat(m.attr("width"))||0,height:parseFloat(m.attr("height"))||0,rx:parseFloat(m.attr("rx"))||0,ry:parseFloat(m.attr("ry"))||0})},d.rectToPath=function(m){var k,w=m.x,S=m.y,D=m.width,R=m.height,B=s(m.rx||m["top-rx"]||0,D/2),j=s(m.rx||m["bottom-rx"]||0,D/2),W=s(m.ry||m["top-ry"]||0,R/2),P=s(m.ry||m["bottom-ry"]||0,R/2);return B||j||W||P?k=["M",w,S+W,"v",R-W-P,"a",j,P,0,0,0,j,P,"h",D-2*j,"a",j,P,0,0,0,j,-P,"v",-(R-P-W),"a",B,W,0,0,0,-B,-W,"h",-(D-2*B),"a",B,W,0,0,0,-B,W,"Z"]:k=["M",w,S,"H",w+D,"V",S+R,"H",w,"V",S,"Z"],k.join(" ")},d.normalizePathData=function(){var m=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,k=new RegExp("([a-z])["+m+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+m+"]*,?["+m+"]*)+)","ig"),w=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+m+"]*,?["+m+"]*","ig"),S=Math,D=S.PI,R=S.sin,B=S.cos,j=S.tan,W=S.asin,P=S.sqrt,O=S.abs;function N(pe,me,be,ke,Me,Ne){var rt=.3333333333333333,Te=2/3;return[rt*pe+Te*be,rt*me+Te*ke,rt*Me+Te*be,rt*Ne+Te*ke,Me,Ne]}function z(pe,me,be){var ke=pe*B(be)-me*R(be),Me=pe*R(be)+me*B(be);return{x:ke,y:Me}}function ye(pe,me,be,ke,Me,Ne,rt,Te,lt,ze){var Pe=D*120/180,Ye=D/180*(+Me||0),de=[],$;if(ze)wn=ze[0],Kt=ze[1],vl=ze[2],kl=ze[3];else{$=z(pe,me,-Ye),pe=$.x,me=$.y,$=z(Te,lt,-Ye),Te=$.x,lt=$.y;var K=(pe-Te)/2,J=(me-lt)/2,xe=K*K/(be*be)+J*J/(ke*ke);xe>1&&(xe=P(xe),be=xe*be,ke=xe*ke);var It=be*be,vt=ke*ke,K0=(Ne==rt?-1:1)*P(O((It*vt-It*J*J-vt*K*K)/(It*J*J+vt*K*K)));if(!Number.isFinite(K0))return[pe,me,Te,lt,Te,lt];var vl=K0*be*J/ke+(pe+Te)/2,kl=K0*-ke*K/be+(me+lt)/2,wn=W(((me-kl)/ke).toFixed(9)),Kt=W(((lt-kl)/ke).toFixed(9));wn=pe<vl?D-wn:wn,Kt=Te<vl?D-Kt:Kt,wn<0&&(wn=D*2+wn),Kt<0&&(Kt=D*2+Kt),rt&&wn>Kt&&(wn=wn-D*2),!rt&&Kt>wn&&(Kt=Kt-D*2)}var Q0=Kt-wn;if(O(Q0)>Pe){var g6=Kt,y6=Te,v6=lt;Kt=wn+Pe*(rt&&Kt>wn?1:-1),Te=vl+be*B(Kt),lt=kl+ke*R(Kt),de=ye(Te,lt,be,ke,Me,0,rt,y6,v6,[Kt,g6,vl,kl])}Q0=Kt-wn;var k6=B(wn),M6=R(wn),x6=B(Kt),w6=R(Kt),RM=j(Q0/4),NM=4/3*(be*RM),FM=4/3*(ke*RM),VM=[pe,me],As=[pe+NM*M6,me-FM*k6],BM=[Te+NM*w6,lt-FM*x6],zM=[Te,lt];if(As[0]=2*VM[0]-As[0],As[1]=2*VM[1]-As[1],ze)return[As,BM,zM].concat(de);de=[As,BM,zM].concat(de).join().split(",");for(var jM=[],b6=de.length,_o=0;_o<b6;_o++)jM[_o]=_o%2?z(de[_o-1],de[_o],Ye).y:z(de[_o],de[_o+1],Ye).x;return jM}function ve(pe){if(!pe)return null;var me={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},be=[];return String(pe).replace(k,function(ke,Me,Ne){var rt=[],Te=Me.toLowerCase();for(Ne.replace(w,function(lt,ze){ze&&rt.push(+ze)}),Te==="m"&&rt.length>2&&(be.push([Me].concat(rt.splice(0,2))),Te="l",Me=Me==="m"?"l":"L");rt.length>=me[Te]&&(be.push([Me].concat(rt.splice(0,me[Te]))),!!me[Te]););}),be}function it(pe){if((!Array.isArray(pe)||!Array.isArray(pe&&pe[0]))&&(pe=ve(pe)),!pe||!pe.length)return[["M",0,0]];for(var me=[],be=0,ke=0,Me=0,Ne=0,rt=0,Te,lt=pe.length,ze=rt;ze<lt;ze++){var Pe=[];me.push(Pe);var Ye=pe[ze];if(Te=Ye[0],Te!=Te.toUpperCase()){Pe[0]=Te.toUpperCase();var de,$;switch(Pe[0]){case"A":Pe[1]=Ye[1],Pe[2]=Ye[2],Pe[3]=Ye[3],Pe[4]=Ye[4],Pe[5]=Ye[5],Pe[6]=+Ye[6]+be,Pe[7]=+Ye[7]+ke;break;case"V":Pe[1]=+Ye[1]+ke;break;case"H":Pe[1]=+Ye[1]+be;break;case"M":for(Me=+Ye[1]+be,Ne=+Ye[2]+ke,de=Ye.length,$=1;$<de;$++)Pe[$]=+Ye[$]+($%2?be:ke);break;default:for(de=Ye.length,$=1;$<de;$++)Pe[$]=+Ye[$]+($%2?be:ke);break}}else for(var K=Ye.length,J=0;J<K;J++)Pe[J]=Ye[J];switch(Pe[0]){case"Z":be=+Me,ke=+Ne;break;case"H":be=Pe[1];break;case"V":ke=Pe[1];break;case"M":Me=Pe[Pe.length-2],Ne=Pe[Pe.length-1],be=Pe[Pe.length-2],ke=Pe[Pe.length-1];break;default:be=Pe[Pe.length-2],ke=Pe[Pe.length-1];break}}return me}function wt(pe){var me=it(pe),be={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function ke(de,$,K){var J,xe;if(!de)return["C",$.x,$.y,$.x,$.y,$.x,$.y];switch(de[0]in{T:1,Q:1}||($.qx=null,$.qy=null),de[0]){case"M":$.X=de[1],$.Y=de[2];break;case"A":parseFloat(de[1])===0||parseFloat(de[2])===0?de=["L",de[6],de[7]]:de=["C"].concat(ye.apply(0,[$.x,$.y].concat(de.slice(1))));break;case"S":K==="C"||K==="S"?(J=$.x*2-$.bx,xe=$.y*2-$.by):(J=$.x,xe=$.y),de=["C",J,xe].concat(de.slice(1));break;case"T":K==="Q"||K==="T"?($.qx=$.x*2-$.qx,$.qy=$.y*2-$.qy):($.qx=$.x,$.qy=$.y),de=["C"].concat(N($.x,$.y,$.qx,$.qy,de[1],de[2]));break;case"Q":$.qx=de[1],$.qy=de[2],de=["C"].concat(N($.x,$.y,de[1],de[2],de[3],de[4]));break;case"H":de=["L"].concat(de[1],$.y);break;case"V":de=["L"].concat($.x,de[1]);break;case"L":break;case"Z":break}return de}function Me(de,$){if(de[$].length>7){de[$].shift();for(var K=de[$];K.length;)Ne[$]="A",de.splice($++,0,["C"].concat(K.splice(0,6)));de.splice($,1),lt=me.length}}for(var Ne=[],rt="",Te="",lt=me.length,ze=0;ze<lt;ze++){me[ze]&&(rt=me[ze][0]),rt!=="C"&&(Ne[ze]=rt,ze>0&&(Te=Ne[ze-1])),me[ze]=ke(me[ze],be,Te),Ne[ze]!=="A"&&rt==="C"&&(Ne[ze]="C"),Me(me,ze);var Pe=me[ze],Ye=Pe.length;be.x=Pe[Ye-2],be.y=Pe[Ye-1],be.bx=parseFloat(Pe[Ye-4])||be.x,be.by=parseFloat(Pe[Ye-3])||be.y}return(!me[0][0]||me[0][0]!=="M")&&me.unshift(["M",0,0]),me}return function(pe){return wt(pe).join(",").split(",").join(" ")}}(),d.namespace=t,d.g=Tn,d}(),Y=xF;var nu="[object Arguments]",ok="[object Array]",G1="[object Boolean]",dk="[object Date]",oI="[object Error]",wF="[object Function]",ru="[object Map]",W1="[object Number]",bF="[object Null]",Gc="[object Object]",uk="[object RegExp]",ou="[object Set]",Z1="[object String]",Y1="[object Symbol]",CF="[object Undefined]",SF="[object WeakMap]",hk="[object ArrayBuffer]",pk="[object DataView]",aI="[object Float32Array]",sI="[object Float64Array]",cI="[object Int8Array]",lI="[object Int16Array]",dI="[object Int32Array]",uI="[object Uint8Array]",hI="[object Uint8ClampedArray]",pI="[object Uint16Array]",fI="[object Uint32Array]",_F={[nu]:!0,[ok]:!0,[hk]:!0,[pk]:!0,[G1]:!0,[dk]:!0,[aI]:!0,[sI]:!0,[cI]:!0,[lI]:!0,[dI]:!0,[ru]:!0,[W1]:!0,[Gc]:!0,[uk]:!0,[ou]:!0,[Z1]:!0,[Y1]:!0,[uI]:!0,[hI]:!0,[pI]:!0,[fI]:!0,[oI]:!1,[wF]:!1,[SF]:!1},fk="\\ud800-\\udfff",IF="\\u0300-\\u036f",EF="\\ufe20-\\ufe2f",DF="\\u20d0-\\u20ff",TF="\\u1ab0-\\u1aff",PF="\\u1dc0-\\u1dff",AF=IF+EF+DF+TF+PF,mI="\\u2700-\\u27bf",gI="a-z\\xdf-\\xf6\\xf8-\\xff",LF="\\xac\\xb1\\xd7\\xf7",OF="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",RF="\\u2000-\\u206f",NF=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yI="A-Z\\xc0-\\xd6\\xd8-\\xde",FF="\\ufe0e\\ufe0f",vI=LF+OF+RF+NF,kI="['\u2019]",Q_=`[${vI}]`,mk=`[${AF}]`,MI="\\d",VF=`[${mI}]`,xI=`[${gI}]`,wI=`[^${fk}${vI+MI+mI+gI+yI}]`,ak="\\ud83c[\\udffb-\\udfff]",BF=`(?:${mk}|${ak})`,bI=`[^${fk}]`,gk="(?:\\ud83c[\\udde6-\\uddff]){2}",yk="[\\ud800-\\udbff][\\udc00-\\udfff]",$c=`[${yI}]`,zF="\\u200d",eI=`(?:${xI}|${wI})`,jF=`(?:${$c}|${wI})`,tI=`(?:${kI}(?:d|ll|m|re|s|t|ve))?`,nI=`(?:${kI}(?:D|LL|M|RE|S|T|VE))?`,CI=`${BF}?`,SI=`[${FF}]?`,HF=`(?:${zF}(?:${[bI,gk,yk].join("|")})${SI+CI})*`,UF="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_I=SI+CI+HF,$F=`(?:${[VF,gk,yk].join("|")})${_I}`,GF=RegExp([`${$c}?${xI}+${tI}(?=${[Q_,$c,"$"].join("|")})`,`${jF}+${nI}(?=${[Q_,$c+eI,"$"].join("|")})`,`${$c}?${eI}+${tI}`,`${$c}+${nI}`,qF,UF,`${MI}+`,$F].join("|"),"g"),vk=200,sk="__hash_undefined__",WF=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,ZF=`[${fk}]`,YF=`${bI}${mk}?`,XF=`(?:${[YF,mk,gk,yk,ZF].join("|")})`,II=RegExp(`${ak}(?=${ak})|${XF+_I}`,"g"),JF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,KF=/^\w*$/,QF=46,eV=/\\(\\)?/g,tV=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),nV=/^(?:0|[1-9]\d*)$/,iV=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),rV=4294967294,oV=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,EI=e=>II.test(e),aV=e=>e.match(II)||[],sV=e=>e.split(""),DI=e=>EI(e)?aV(e):sV(e),cV=e=>e==null?[]:au(e).map(t=>e[t]),au=e=>Gi(e)?TI(e):Object.keys(Object(e)),lV=e=>{if(!X1(e))return Object.keys(e);var t=[];for(var n in Object(e))hasOwnProperty.call(e,n)&&n!="constructor"&&t.push(n);return t},TI=(e,t)=>{let n=Array.isArray(e),i=!n&&gr(e)&&$i(e)===nu,r=!n&&!i&&cu(e),o=n||i||r,a=e.length,s=new Array(o?a:0),c=o?-1:a;for(;++c<a;)s[c]=`${c}`;for(let l in e)(t||hasOwnProperty.call(e,l))&&!(o&&(l==="length"||bk(l,a)))&&s.push(l);return s},j1=(e,t)=>{let{length:n}=e;for(;n--;)if(Zc(e[n][0],t))return n;return-1},Zc=(e,t)=>e===t||e!==e&&t!==t,gr=e=>e!=null&&typeof e=="object",U1=(e,t,n)=>{if(!Re(n))return!1;let i=typeof t;return(i=="number"?Gi(n)&&t>-1&&t<n.length:i=="string"&&t in n)?Zc(n[t],e):!1},dV=e=>gr(e)&&$i(e)==ou,uV=e=>gr(e)&&$i(e)==ru,X1=e=>{let t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Object.prototype;return e===n},Yc=(e,t,n)=>{let i=e[t];(!(hasOwnProperty.call(e,t)&&Zc(i,n))||n===void 0&&!(t in e))&&(e[t]=n)},su=(e,t,n)=>{let i=-1,r=t.length;for(;++i<r;){let o=t[i];Yc(n,o,e[o])}return n},Gi=e=>e!=null&&typeof e!="function"&&typeof e.length=="number"&&e.length>-1&&e.length%1===0,Wc=e=>typeof e=="symbol"||gr(e)&&$i(e)===Y1,hV=e=>{let t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&hasOwnProperty.call(e,"index")&&(n.index=e.index,n.input=e.input),n},kk=(e,t)=>{let n=-1,i=e.length;for(t||(t=new Array(i));++n<i;)t[n]=e[n];return t},$i=e=>e==null?e===void 0?CF:bF:Object.prototype.toString.call(e),Mk=e=>{let t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},PI=(e,t)=>{let n=t?Mk(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},pV=e=>{let t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t},AI=e=>typeof e.constructor=="function"&&!X1(e)?Object.create(Object.getPrototypeOf(e)):{},xk=e=>e==null?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(n=>propertyIsEnumerable.call(e,n))),fV=(e,t)=>su(e,xk(e),t);function mV(e,t){let n=t?Mk(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var gV=(e,t,n)=>{let i=e.constructor;switch(t){case hk:return Mk(e);case G1:case dk:return new i(+e);case pk:return mV(e,n);case aI:case sI:case cI:case lI:case dI:case uI:case hI:case pI:case fI:return PI(e,n);case ru:return new i(e);case W1:case Z1:return new i(e);case uk:return pV(e);case ou:return new i;case Y1:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}},cu=e=>gr(e)&&WF.test($i(e)),ck=e=>{let t=Object.keys(e);return!Array.isArray(e)&&e!=null&&t.push(...xk(Object(e))),t},LI=e=>{let t=[];for(;e;)t.push(...xk(e)),e=Object.getPrototypeOf(Object(e));return t},OI=e=>{let t=[];for(let n in e)t.push(n);return Array.isArray(e)||t.push(...LI(e)),t},H1=({__data__:e},t)=>{let n=e;return EV(t)?n[typeof t=="string"?"string":"hash"]:n.map},yV=(e,t,n,i)=>{let r=ck(e),o=r.length,s=ck(t).length;if(o!=s)return!1;let c,l=o;for(;l--;)if(c=r[l],!hasOwnProperty.call(t,c))return!1;let u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;let h=!0;i.set(e,t),i.set(t,e);let p,f;for(;++l<o;){c=r[l];let g=e[c],b=t[c];if(!(p===void 0?g===b||n(g,b,i):p)){h=!1;break}f||(f=c=="constructor")}if(h&&!f){let g=e.constructor,b=t.constructor;g!=b&&"constructor"in e&&"constructor"in t&&!(typeof g=="function"&&g instanceof g&&typeof b=="function"&&b instanceof b)&&(h=!1)}return i.delete(e),i.delete(t),h},J1=(e,t,n)=>e===t?!0:e==null||t==null||!gr(e)&&!gr(t)?e!==e&&t!==t:vV(e,t,J1,n),vV=(e,t,n,i)=>{let r=Array.isArray(e),o=Array.isArray(t),a=r?ok:$i(e),s=o?ok:$i(t);a=a==nu?Gc:a,s=s==nu?Gc:s;let c=a==Gc,l=s==Gc,u=a==s;if(u&&!c)return i||(i=new ta),r||cu(e)?RI(e,t,!1,n,i):xV(e,t,a,n,i);let d=c&&hasOwnProperty.call(e,"__wrapped__"),h=l&&hasOwnProperty.call(t,"__wrapped__");if(d||h){let p=d?e.value():e,f=h?t.value():t;return i||(i=new ta),n(p,f,i)}return u?(i||(i=new ta),yV(e,t,n,i)):!1},RI=(e,t,n,i,r)=>{let a=e.length,s=t.length;if(a!=s)return!1;let c=r.get(e),l=r.get(t);if(c&&l)return c==t&&l==e;let u=-1,d=!0,h=n?new fs:void 0;for(r.set(e,t),r.set(t,e);++u<a;){let p,f=e[u],g=t[u];if(p!==void 0){if(p)continue;d=!1;break}if(h){if(!kV(t,(b,x)=>{if(!MV(h,x)&&(f===b||i(f,b,r)))return h.push(x)})){d=!1;break}}else if(!(f===g||i(f,g,r))){d=!1;break}}return r.delete(e),r.delete(t),d},kV=(e,t)=>{let n=-1,i=e==null?0:e.length;for(;++n<i;)if(t(e[n],n,e))return!0;return!1},MV=(e,t)=>e.has(t),iI=(e,t,n,i)=>!(e.byteLength!=t.byteLength||!n(new Uint8Array(e),new Uint8Array(t),i)),xV=(e,t,n,i,r)=>{switch(n){case pk:return e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset?!1:(e=e.buffer,t=t.buffer,iI(e,t,i,r));case hk:return iI(e,t,i,r);case G1:case dk:case W1:return Zc(+e,+t);case oI:return e.name==t.name&&e.message==t.message;case uk:case Z1:return e==`${t}`;case ru:var o=NI;case ou:if(o||(o=K1),e.size!=t.size)return!1;let a=r.get(e);if(a)return a==t;r.set(e,t);let s=RI(o(e),o(t),!0,i,r);return r.delete(e),s;case Y1:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},NI=e=>{let t=-1,n=Array(e.size);return e.forEach((i,r)=>{n[++t]=[r,i]}),n},K1=e=>{let t=-1,n=new Array(e.size);return e.forEach(i=>{n[++t]=i}),n},wk=(e,t)=>{if(Array.isArray(e))return!1;let n=typeof e;return n==="number"||n==="boolean"||e==null||Wc(e)?!0:KF.test(e)||!JF.test(e)||t!=null&&e in Object(t)},wV=e=>{let t=[];return e.charCodeAt(0)===QF&&t.push(""),e.replace(tV,(n,i,r,o)=>{let a=n;r?a=o.replace(eV,"$1"):i&&(a=i.trim()),t.push(a)}),t},na=(e,t)=>Array.isArray(e)?e:wk(e,t)?[e]:wV(`${e}`),lu=(e,t)=>{t=na(t,e);let n=0,i=t.length;for(;e!=null&&n<i;)e=e[ia(t[n])],n++;return n&&n==i?e:void 0};function bV(e,t){if(e!==t){let n=e!==void 0,i=e===null,r=e===e,o=Wc(e),a=t!==void 0,s=t===null,c=t===t,l=Wc(t);if(!s&&!l&&!o&&e>t||o&&a&&c&&!s&&!l||i&&a&&c||!n&&c||!r)return 1;if(!i&&!o&&!l&&e<t||l&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!c)return-1}return 0}function CV(e,t,n){let i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;for(;++i<a;){let c=i<s?n[i]:null,u=(c&&typeof c=="function"?c:bV)(r[i],o[i]);if(u)return c&&typeof c!="function"?u*(c=="desc"?-1:1):u}return e.index-t.index}var FI=(e,t)=>{let n=(a,s)=>!!(a==null?0:a.length)&&a.indexOf(s)>-1,i=!0,r=[],o=t.length;if(!e.length)return r;t.length>=vk&&(n=(a,s)=>a.has(s),i=!1,t=new fs(t));e:for(let a in e){let s=e[a],c=s;if(s=s!==0?s:0,i&&c===c){let l=o;for(;l--;)if(t[l]===c)continue e;r.push(s)}else n(t,c)||r.push(s)}return r};var ia=e=>{if(typeof e=="string"||Wc(e))return e;let t=`${e}`;return t=="0"&&1/e==-1/0?"-0":t},ps=(e,t=!1,n=!1,i=!0,r,o,a,s)=>{let c;if(r&&(c=a?r(e,o,a,s):r(e)),c!==void 0)return c;if(!Re(e))return e;let l=Array.isArray(e),u=$i(e);if(l){if(c=hV(e),!t)return kk(e,c)}else{let f=typeof e=="function";if(u===Gc||u===nu||f&&!a){if(c=n||f?{}:AI(e),!t)return n?SV(e,su(e,Object.keys(e),c)):fV(e,Object.assign(c,e))}else{if(f||!_F[u])return a?e:{};c=gV(e,u,t)}}s||(s=new ta);let d=s.get(e);if(d)return d;if(s.set(e,c),uV(e))return e.forEach((f,g)=>{c.set(g,ps(f,t,n,i,r,g,e,s))}),c;if(dV(e))return e.forEach(f=>{c.add(ps(f,t,n,i,r,f,e,s))}),c;if(cu(e))return c;let p=l?void 0:(i?n?OI:ck:n?BI:au)(e);return(p||e).forEach((f,g)=>{p&&(g=f,f=e[g]),Yc(c,g,ps(f,t,n,i,r,g,e,s))}),c},SV=(e,t)=>su(e,LI(e),t),VI=(e,t)=>t.length<2?e:lu(e,t.slice(0,-1)),_V=(e,t,n)=>{if(!Re(e))return e;t=na(t,e);let i=t.length,r=i-1,o=-1,a=e;for(;a!=null&&++o<i;){let s=ia(t[o]),c=n;if(o!=r){let l=a[s];c=void 0,c===void 0&&(c=Re(l)?l:bk(t[o+1])?[]:{})}Yc(a,s,c),a=a[s]}return e},bk=(e,t)=>{let n=typeof e;return t=t??Number.MAX_SAFE_INTEGER,!!t&&(n==="number"||n!=="symbol"&&nV.test(e))&&e>-1&&e%1==0&&e<t},IV=(e,t)=>{t=na(t,e),e=VI(e,t);let n=t[t.length-1];return e==null||delete e[ia(n)]},EV=e=>{let t=typeof e;return t==="string"||t==="number"||t==="symbol"||t==="boolean"?e!=="__proto__":e===null},BI=e=>{let t=[];for(let n in e)t.push(n);return t},DV=e=>{e=Object(e);let t={};for(let n in e)t[n]=e[n];return t},rI=(e,t)=>{if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]};function zI(e,t=!1){return(n,...i)=>{let r=-1,o=i.length,a=o>1?i[o-1]:void 0,s=o>2?i[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):t?(c,l)=>{if(Array.isArray(c)&&!Array.isArray(l))return l}:void 0,s&&U1(i[0],i[1],s)&&(a=o<3?void 0:a,o=1),n=Object(n);++r<o;){let c=i[r];c&&e(n,c,r,a)}return n}}var Ck=(e,t,n,i,r)=>{e!==t&&gi(t,(o,a)=>{if(Re(o))r||(r=new ta),TV(e,t,a,n,Ck,i,r);else{let s=i?i(e[a],o,`${a}`,e,t,r):void 0;s===void 0&&(s=o),lk(e,a,s)}})},TV=(e,t,n,i,r,o,a)=>{let s=rI(e,n),c=rI(t,n),l=a.get(c);if(l){lk(e,n,l);return}let u=o?o(s,c,`${n}`,e,t,a):void 0,d=u===void 0;if(d){let h=Array.isArray(c),p=!h&&cu(c);u=c,h||p?Array.isArray(s)?u=s:gr(s)&&Gi(s)?u=kk(s):p?(d=!1,u=PI(c,!0)):u=[]:yt(c)||iu(c)?(u=s,iu(s)?u=DV(s):(typeof s=="function"||!Re(s))&&(u=AI(c))):d=!1}d&&(a.set(c,u),r(u,c,i,o,a),a.delete(c)),lk(e,n,u)},lk=(e,t,n)=>{(n!==void 0&&!Zc(e[t],n)||n===void 0&&!(t in e))&&Yc(e,t,n)};function PV(e,t,n){let i=Object(e),r=n(e),{length:o}=r,a=-1;for(;o--;){let s=r[++a];if(t(i[s],s,i)===!1)break}return e}var AV=(e,t)=>e&&PV(e,t,au),Sk=(e,t)=>{if(e==null)return e;if(!Gi(e))return AV(e,t);let n=e.length,i=Object(e),r=-1;for(;++r<n&&t(i[r],r,i)!==!1;);return e};function LV(e){let t=e==null?0:e.length;return t?e[t-1]:void 0}var OV=Set&&1/K1(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function jI(e,t,n,i,r,o){return Re(e)&&Re(t)&&(o.set(t,e),Ck(e,t,void 0,jI,o),o.delete(t)),e}function RV(e,t,n){t.length?t=t.map(a=>Array.isArray(a)?s=>lu(s,a.length===1?a[0]:a):a):t=[a=>a];let i=-1,r=-1,o=Gi(e)?new Array(e.length):[];return Sk(e,a=>{let s=t.map(c=>c(a));o[++r]={criteria:s,index:++i,value:a}}),NV(o,(a,s)=>CV(a,s,n))}function NV(e,t){let{length:n}=e;for(e.sort(t);n--;)e[n]=e[n].value;return e}function HI(e){return e===e&&!Re(e)}function UI(e,t){return n=>n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}function qI(e,t){return e!=null&&KV(e,t,JV)}function FV(e,t){return wk(e)&&HI(t)?UI(ia(e),t):n=>{let i=lu(n,e);return i===void 0&&i===t?qI(n,e):J1(t,i)}}function $I(e){let t=VV(e);return t.length===1&&t[0][2]?UI(t[0][0],t[0][1]):n=>n===e||BV(n,e,t)}function VV(e){let t=au(e),n=t.length;for(;n--;){let i=t[n],r=e[i];t[n]=[i,r,HI(r)]}return t}function BV(e,t,n,i){let r=n.length,o=r,a=!i;if(e==null)return!o;let s,c;for(e=Object(e);r--;)if(s=n[r],a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1;for(;++r<o;){s=n[r];let l=s[0],u=e[l],d=s[1];if(a&&s[2]){if(u===void 0&&!(l in e))return!1}else{let h=new ta;if(i&&(c=i(u,d,l,e,t,h)),!(c===void 0?J1(d,u,h):c))return!1}}return!0}function zV(e){return wk(e)?jV(ia(e)):HV(e)}function jV(e){return t=>t?.[e]}function HV(e){return t=>lu(t,e)}function UV(e){return typeof e=="function"?e:e==null?t=>t:typeof e=="object"?Array.isArray(e)?FV(e[0],e[1]):$I(e):zV(e)}function Q1(){let e=UV;return arguments.length?e(arguments[0],arguments[1]):e}var qV=(e,t,n,i)=>{let r=-1,o=e==null?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n},$V=(e,t,n,i,r)=>(r(e,(o,a,s)=>{n=i?(i=!1,o):t(n,o,a,s)}),n);function GV(e,t,n){let i=Array.isArray(e)?qV:$V,r=arguments.length<3;return i(e,t,n,r,Sk)}var WV=e=>Array.isArray(e)||iu(e)||!!(e&&e[Symbol.isConcatSpreadable]);function GI(e,t,n,i,r){let o=-1,a=e.length;for(n||(n=WV),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?GI(s,t-1,n,i,r):r.push(...s):i||(r[r.length]=s)}return r}var iu=e=>gr(e)&&$i(e)=="[object Arguments]",ZV=(e,t)=>YV(e,t,(n,i)=>qI(e,i)),YV=(e,t,n)=>{let i=-1,r=t.length,o={};for(;++i<r;){let a=t[i],s=lu(e,a);n(s,a)&&_V(o,na(a,e),s)}return o},XV=e=>typeof e=="number"&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER,JV=(e,t)=>e!=null&&t in Object(e),KV=(e,t,n)=>{t=na(t,e);for(var i=-1,r=t.length,o=!1;++i<r;){var a=ia(t[i]);if(!(o=e!=null&&n(e,a)))break;e=e[a]}return o||++i!=r?o:(r=e==null?0:e.length,!!r&&XV(r)&&bk(a,r)&&(Array.isArray(e)||iu(e)))},QV=e=>e.match(oV),eB=e=>e.match(GF),tB=(e,t)=>t===void 0?(iV(e)?eB(e):QV(e))||[]:e.match(t)||[],nB=(e,t,n)=>{let{length:i}=e;return n=n===void 0?i:n,!t&&n>=i?e:e.slice(t,n)},iB=rB("toUpperCase");function rB(e){return t=>{if(!t)return"";let n=EI(t)?DI(t):void 0,i=n?n[0]:t[0],r=n?nB(n,1).join(""):t.slice(1);return i[e]()+r}}function WI(e){return $I(ps(e,!0))}var ta=class{constructor(t){let n=this.__data__=new tu(t);this.size=n.size}clear(){this.__data__=new tu,this.size=0}delete(t){let n=this.__data__,i=n.delete(t);return this.size=n.size,i}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,n){let i=this.__data__;if(i instanceof tu){let r=i.__data__;if(r.length<vk-1)return r.push([t,n]),this.size=++i.size,this;i=this.__data__=new q1(r)}return i.set(t,n),this.size=i.size,this}},tu=class{constructor(t){let n=-1,i=t==null?0:t.length;for(this.clear();++n<i;){let r=t[n];this.set(r[0],r[1])}}clear(){this.__data__=[],this.size=0}delete(t){let n=this.__data__,i=j1(n,t);if(i<0)return!1;let r=n.length-1;return i==r?n.pop():n.splice(i,1),--this.size,!0}get(t){let n=this.__data__,i=j1(n,t);return i<0?void 0:n[i][1]}has(t){return j1(this.__data__,t)>-1}set(t,n){let i=this.__data__,r=j1(i,t);return r<0?(++this.size,i.push([t,n])):i[r][1]=n,this}},q1=class{constructor(t){let n=-1,i=t==null?0:t.length;for(this.clear();++n<i;){let r=t[n];this.set(r[0],r[1])}}clear(){this.size=0,this.__data__={hash:new $1,map:new Map,string:new $1}}delete(t){let n=H1(this,t).delete(t);return this.size-=n?1:0,n}get(t){return H1(this,t).get(t)}has(t){return H1(this,t).has(t)}set(t,n){let i=H1(this,t),r=i.size;return i.set(t,n),this.size+=i.size==r?0:1,this}},$1=class{constructor(t){let n=-1,i=t==null?0:t.length;for(this.clear();++n<i;){let r=t[n];this.set(r[0],r[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){let n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}get(t){let i=this.__data__[t];return i===sk?void 0:i}has(t){return this.__data__[t]!==void 0}set(t,n){let i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n===void 0?sk:n,this}},fs=class{constructor(t){let n=-1,i=t==null?0:t.length;for(this.__data__=new q1;++n<i;)this.add(t[n])}add(t){return this.__data__.set(t,sk),this}has(t){return this.__data__.has(t)}};fs.prototype.push=fs.prototype.add;var _k=function(e){var t=Object.prototype.toString;return e===!0||e===!1||!!e&&typeof e=="object"&&t.call(e)===G1},Re=function(e){return!!e&&(typeof e=="object"||typeof e=="function")},an=function(e){var t=Object.prototype.toString;return typeof e=="number"||!!e&&typeof e=="object"&&t.call(e)===W1},gt=function(e){var t=Object.prototype.toString;return typeof e=="string"||!!e&&typeof e=="object"&&t.call(e)===Z1},ie=zI((e,t)=>{if(X1(t)||Gi(t)){su(t,au(t),e);return}for(var n in t)hasOwnProperty.call(t,n)&&Yc(e,n,t[n])});var ZI=(e,...t)=>{let n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&U1(t[0],t[1],r)&&(i=1);++n<i;){let o=t[n];if(o==null)continue;let a=Object.keys(o),s=a.length,c=-1;for(;++c<s;){let l=a[c],u=e[l];(u===void 0||Zc(u,Object.prototype[l])&&!hasOwnProperty.call(e,l))&&(e[l]=o[l])}}return e},sn=ZI,YI=function(...t){return t.push(void 0,jI),Tt.apply(void 0,t)},ms=YI,ei=(e,t,...n)=>{let i=-1,r=typeof t=="function",o=Gi(e)?new Array(e.length):[];return Sk(e,a=>{o[++i]=r?t.apply(a,n):XI(a,t,...n)}),o},XI=(e,t,...n)=>{t=na(t,e),e=VI(e,t);let i=e==null?e:e[ia(LV(t))];return i?.apply(e,n)},du=(e,t,n)=>{let i=0,r=e==null?0:e.length;if(r==0)return 0;n=Q1(n,2),t=n(t);let o=t!==t,a=t===null,s=Wc(t),c=t===void 0;for(;i<r;){let l,u=Math.floor((i+r)/2),d=n(e[u]),h=d!==void 0,p=d===null,f=d===d,g=Wc(d);o?l=f:c?l=f&&h:a?l=f&&h&&!p:s?l=f&&h&&!p&&!g:p||g?l=!1:l=d<t,l?i=u+1:r=u}return Math.min(r,rV)},Oi=(e,t)=>{let n=-1,i=(c,l)=>!!(c==null?0:c.length)&&c.indexOf(l)>-1;t=Q1(t,2);let r=!0,{length:o}=e,a=[],s=a;if(o>=vk){let c=t?null:OV(e);if(c)return K1(c);r=!1,i=(l,u)=>l.has(u),s=new fs}else s=t?[]:a;e:for(;++n<o;){let c=e[n],l=t?t(c):c;if(c=c!==0?c:0,r&&l===l){let u=s.length;for(;u--;)if(s[u]===l)continue e;t&&s.push(l),a.push(c)}else i(s,l)||(s!==a&&s.push(l),a.push(c))}return a},tn=e=>ps(e),Pn=e=>ps(e,!0),Zt=e=>{if(e==null)return!0;if(Gi(e)&&(Array.isArray(e)||typeof e=="string"||typeof e.splice=="function"||cu(e)||iu(e)))return!e.length;let t=$i(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(X1(e))return!lV(e).length;for(let n in e)if(hasOwnProperty.call(e,n))return!1;return!0},Ri=(e,t)=>J1(e,t),Be=e=>typeof e=="function",yt=e=>{if(!gr(e)||$i(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},Oe=e=>{if(!e)return[];if(Gi(e))return gt(e)?DI(e):kk(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){let i=e[Symbol.iterator](),r,o=[];for(;!(r=i.next()).done;)o.push(r.value);return o}let t=$i(e);return(t==ru?NI:t==ou?K1:cV)(e)};function Ik(e,t,n){if(typeof e!="function")throw new TypeError("Expected a function");let i,r,o,a,s,c,l=0,u=!1,d=!1,h=!0,p=!t&&t!==0&&window&&typeof window.requestAnimationFrame=="function";t=+t||0,Re(n)&&(u=!!n.leading,d="maxWait"in n,o=d?Math.max(+n.maxWait||0,t):o,h="trailing"in n?!!n.trailing:h);function f(m){let k=i,w=r;return i=r=void 0,l=m,a=e.apply(w,k),a}function g(m,k){return p?(window.cancelAnimationFrame(s),window.requestAnimationFrame(m)):setTimeout(m,k)}function b(m){if(p)return window.cancelAnimationFrame(m);clearTimeout(m)}function x(m){return l=m,s=g(E,t),u?f(m):a}function M(m){let k=m-c,w=m-l,S=t-k;return d?Math.min(S,o-w):S}function C(m){let k=m-c,w=m-l;return c===void 0||k>=t||k<0||d&&w>=o}function E(){let m=Date.now();if(C(m))return T(m);s=g(E,M(m))}function T(m){return s=void 0,h&&i?f(m):(i=r=void 0,a)}function F(...m){let k=Date.now(),w=C(k);if(i=m,r=this,c=k,w){if(s===void 0)return x(c);if(d)return s=g(E,t),f(c)}return s===void 0&&(s=g(E,t)),a}return F.cancel=()=>{s!==void 0&&b(s),l=0,i=c=r=s=void 0},F.flush=()=>s===void 0?a:T(Date.now()),F.pending=()=>s!==void 0,F}var Ek=(e,t)=>(t=Q1(t,2),GV(e,(n,i)=>{let r=t(i);return hasOwnProperty.call(n,r)?n[r].push(i):Yc(n,r,[i]),n},{})),gs=(e,t=[])=>{if(e==null)return[];let n=t.length;return n>1&&U1(e,t[0],t[1])?t=[]:n>2&&U1(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[Q1(t,2)]),RV(e,t.flat(1),[])},Dk=e=>(e==null?0:e.length)?GI(e,1/0):[],e0=(e,...t)=>Gi(e)?FI(e,t):[],Tk=(e,...t)=>gr(e)&&Gi(e)?FI(e,t.flat(1)):[];var Xc=(...e)=>{let t=e.flat(1);return Oi(t)},Bn=(e,t)=>{if(e==null)return!1;typeof t=="string"&&(t=t.split("."));let n=-1,i=e;for(;++n<t.length;){if(!i||!hasOwnProperty.call(i,t[n]))return!1;i=i[t[n]]}return!0},Je=(e,t,n)=>{t=na(t,e);let i=-1,r=t.length;for(r||(r=1,e=void 0);++i<r;){let o=e?.[ia(t[i])];o===void 0&&(i=r,o=n),e=typeof o=="function"?o.call(e):o}return e},yr=(e,...t)=>{let n={};if(e==null)return n;let i=!1;t=t.flat(1).map(o=>(o=na(o,e),i||(i=o.length>1),o)),su(e,OI(e),n),i&&(n=ps(n,!0,!0,!0,o=>yt(o)?void 0:o));let r=t.length;for(;r--;)IV(n,t[r]);return n},Pk=(e,...t)=>e==null?{}:ZV(e,t.flat(1/0));var gi=(e,t=n=>n)=>{let n=-1,i=Object(e),r=Gi(e)?TI(e,!0):BI(e),o=r.length;for(;o--;){let a=r[++n];if(t(i[a],a,i)===!1)break}},uu=(e="")=>tB(`${e}`.replace(/['\u2019]/g,"")).reduce((t,n,i)=>(n=n.toLowerCase(),t+(i?iB(n):n)),""),oB=0,zr=(e="")=>{let t=++oB;return`${e}`+t},Tt=zI((e,t,n,i)=>{Ck(e,t,n,i)},!0);var Ak=class{constructor(){this.map=new WeakMap}has(t,n){return n===void 0?this.map.has(t):n in this.map.get(t)}create(t){return this.has(t)||this.map.set(t,Object.create(null)),this.get(t)}get(t,n){if(!this.has(t))return;let i=this.map.get(t);return n===void 0?i:i[n]}set(t,n,i){if(n===void 0)return;let r=this.create(t);typeof n=="string"?r[n]=i:Object.assign(r,n)}remove(t,n){if(this.has(t))if(n===void 0)this.map.delete(t);else{let i=this.map.get(t);delete i[n]}}},Lk=Ak;var yi=new Lk,t0=new Lk;var ra=function(e,t){if(!(this instanceof ra))return new ra(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?n0:i0,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Object.assign(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this.envelope=!0};ra.prototype={constructor:ra,isDefaultPrevented:i0,isPropagationStopped:i0,isImmediatePropagationStopped:i0,preventDefault:function(){let e=this.originalEvent;this.isDefaultPrevented=n0,e&&e.preventDefault()},stopPropagation:function(){let e=this.originalEvent;this.isPropagationStopped=n0,e&&e.stopPropagation()},stopImmediatePropagation:function(){let e=this.originalEvent;this.isImmediatePropagationStopped=n0,e&&e.stopImmediatePropagation(),this.stopPropagation()}};["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which"].forEach(e=>aB(e));function aB(e){Object.defineProperty(ra.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})}function n0(){return!0}function i0(){return!1}var Jc=typeof window<"u"?window.document:null,sB=Jc&&Jc.documentElement,JI=/^([^.]*)(?:\.(.+)|)/,KI=/[^\x20\t\r\n\f]+/g,ue=function(e){return new ue.Dom(e)};ue.fn=ue.prototype={constructor:ue,length:0};ue.guid=1;ue.data=t0;ue.merge=function(e,t){let n=+t.length,i=e.length;for(let r=0;r<n;r++)e[i++]=t[r];return e.length=i,e};ue.parseHTML=function(e){let t=Jc.implementation.createHTMLDocument(),n=t.createElement("base");n.href=Jc.location.href,t.head.appendChild(n),t.body.innerHTML=e;let i=t.getElementsByTagName("script");for(let r=0;r<i.length;r++)i[r].remove();return Array.from(t.body.childNodes)};typeof Symbol=="function"&&(ue.fn[Symbol.iterator]=Array.prototype[Symbol.iterator]);ue.fn.toArray=function(){return Array.from(this)};ue.fn.pushStack=function(e){let t=ue.merge(this.constructor(),e);return t.prevObject=this,t};ue.fn.find=function(e){let[t]=this,n=this.pushStack([]);if(!t)return n;let{nodeType:i}=t;return i!==1&&i!==9&&i!==11||(typeof e!="string"?t!==e&&t.contains(e)&&ue.merge(n,[e]):ue.merge(n,t.querySelectorAll(e))),n};ue.fn.add=function(e){let t=ue(e).toArray(),n=this.toArray(),i=this.pushStack([]);return ue.merge(i,Oi(n.concat(t))),i};ue.fn.addBack=function(){return this.add(this.prevObject)};ue.fn.filter=function(e){let t=[];for(let n=0;n<this.length;n++){let i=this[n];i.matches(e)&&t.push(i)}return this.pushStack(t)};var cB=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;function lB(e){return e[0]==="<"&&e[e.length-1]===">"&&e.length>=3}var QI=function(e){if(!e)return this;if(typeof e=="function")throw new Error("function not supported");if(arguments.length>1)throw new Error("selector with context not supported");if(e.nodeType)return this[0]=e,this.length=1,this;let t;if(lB(e+""))t=[null,e,null];else if(typeof e=="string")t=cB.exec(e);else return ue.merge(this,e);if(!t||!t[1])return dB.find(e);if(t[1])return ue.merge(this,ue.parseHTML(t[1])),this;let n=Jc.getElementById(t[2]);return n&&(this[0]=n,this.length=1),this};ue.Dom=QI;QI.prototype=ue.fn;ue.Event=ra;ue.event={special:Object.create(null)};ue.event.has=function(e,t){let n=yi.get(e,"events");return n?t?Array.isArray(n[t])&&n[t].length>0:!0:!1};ue.event.on=function(e,t,n,i,r,o){if(typeof t=="object"){typeof n!="string"&&(i=i||n,n=void 0);for(let a in t)ue.event.on(e,a,n,i,t[a],o);return e}if(i==null&&r==null?(r=n,i=n=void 0):r==null&&(typeof n=="string"?(r=i,i=void 0):(r=i,i=n,n=void 0)),!r)return e;if(o===1){let a=r;r=function(s){return ue().off(s),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ue.guid++)}for(let a=0;a<e.length;a++)ue.event.add(e[a],t,r,i,n)};ue.event.add=function(e,t,n,i,r){if(typeof e!="object")return;let o=yi.create(e),a;n.handler&&(a=n,n=a.handler,r=a.selector),r&&sB.matches(r),n.guid||(n.guid=ue.guid++);let s;(s=o.events)||(s=o.events=Object.create(null));let c;(c=o.handle)||(c=o.handle=function(d){return typeof ue<"u"?ue.event.dispatch.apply(e,arguments):void 0});let l=(t||"").match(KI)||[""],u=l.length;for(;u--;){let[,d,h=""]=JI.exec(l[u]);if(!d)continue;let p=h.split(".").sort(),f=ue.event.special[d],g=f&&(r?f.delegateType:f.bindType)||d;f=ue.event.special[g];let b=Object.assign({type:g,origType:d,data:i,handler:n,guid:n.guid,selector:r,namespace:p.join(".")},a),x;(x=s[g])||(x=s[g]=[],x.delegateCount=0,(!f||!f.setup||f.setup.call(e,i,p,c)===!1)&&e.addEventListener&&e.addEventListener(g,c)),f&&f.add&&(f.add.call(e,b),b.handler.guid||(b.handler.guid=n.guid)),r?x.splice(x.delegateCount++,0,b):x.push(b)}};ue.event.remove=function(e,t,n,i,r){let o=yi.get(e);if(!o||!o.events)return;let a=o.events,s=(t||"").match(KI)||[""],c=s.length;for(;c--;){let[,l,u=""]=JI.exec(s[c]);if(!l){for(let M in a)ue.event.remove(e,M+s[c],n,i,!0);continue}let d=ue.event.special[l],h=d&&(i?d.delegateType:d.bindType)||l,p=a[h];if(!p||p.length===0)continue;let f=u.split(".").sort(),g=u?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b=p.length,x=b;for(;x--;){let M=p[x];(r||l===M.origType)&&(!n||n.guid===M.guid)&&(!g||g.test(M.namespace))&&(!i||i===M.selector||i==="**"&&M.selector)&&(p.splice(x,1),M.selector&&p.delegateCount--,d&&d.remove&&d.remove.call(e,M))}b&&p.length===0&&((!d||!d.teardown||d.teardown.call(e,f,o.handle)===!1)&&e.removeEventListener&&e.removeEventListener(h,o.handle),delete a[h])}Zt(a)&&(yi.remove(e,"handle"),yi.remove(e,"events"))};ue.event.dispatch=function(e){let t=this,n=ue.event.fix(e);n.delegateTarget=t;let i=Array.from(arguments);i[0]=n;let r=yi.get(t,"events"),o=r&&r[n.type]||[],a=ue.event.special[n.type];if(a&&a.preDispatch&&a.preDispatch.call(t,n)===!1)return;let s=ue.event.handlers.call(t,n,o),c=0,l;for(;(l=s[c++])&&!n.isPropagationStopped();){n.currentTarget=l.elem;let u=0,d;for(;(d=l.handlers[u++])&&!n.isImmediatePropagationStopped();){n.handleObj=d,n.data=d.data;let h=ue.event.special[d.origType],p;h&&h.handle?p=h.handle:p=d.handler;let f=p.apply(l.elem,i);f!==void 0&&(n.result=f)===!1&&(n.preventDefault(),n.stopPropagation())}}return a&&a.postDispatch&&a.postDispatch.call(t,n),n.result};ue.event.handlers=function(e,t){let n=t.delegateCount,i=[];if(n&&!(e.type==="click"&&e.button>=1)){for(let r=e.target;r!==this;r=r.parentNode||this)if(r.nodeType===1&&!(e.type==="click"&&r.disabled===!0)){let o=[],a={};for(let s=0;s<n;s++){let c=t[s],l=c.selector+" ";a[l]===void 0&&(a[l]=r.matches(l)),a[l]&&o.push(c)}o.length&&i.push({elem:r,handlers:o})}}return n<t.length&&i.push({elem:this,handlers:t.slice(n)}),i};ue.event.fix=function(e){return e.envelope?e:new ra(e)};var dB=ue(Jc);var Nk={};Un(Nk,{addClass:()=>CB,append:()=>gB,appendTo:()=>vB,children:()=>IB,clone:()=>fB,closest:()=>EB,css:()=>xB,data:()=>wB,detach:()=>hB,empty:()=>pB,hasClass:()=>_B,height:()=>LB,html:()=>mB,off:()=>PB,offset:()=>RB,on:()=>DB,one:()=>TB,position:()=>OB,prepend:()=>yB,prependTo:()=>kB,remove:()=>uB,removeClass:()=>bB,toggleClass:()=>SB,width:()=>AB});function Ok(e){let t=e.length;for(;t--;)eE(e[t])}function eE(e){ue.event.remove(e),yi.remove(e),t0.remove(e)}function tE(e){for(let t=0;t<e.length;t++){let n=e[t];n.parentNode&&n.parentNode.removeChild(n)}}function uB(){for(let e=0;e<this.length;e++){let t=this[e];eE(t),Ok(t.getElementsByTagName("*"))}return tE(this),this}function hB(){return tE(this),this}function pB(){for(let e=0;e<this.length;e++){let t=this[e];t.nodeType===1&&(Ok(t.getElementsByTagName("*")),t.textContent="")}return this}function fB(){let e=[];for(let t=0;t<this.length;t++)e.push(this[t].cloneNode(!0));return this.pushStack(e)}function mB(e){let[t]=this;if(!t)return null;if(arguments.length===0)return t.innerHTML;if(e===void 0)return this;if(Ok(t.getElementsByTagName("*")),typeof e=="string"||typeof e=="number")t.innerHTML=e;else return t.innerHTML="",this.append(e);return this}function gB(...e){let[t]=this;return t?(e.forEach(n=>{n&&(typeof n=="string"?t.append(...ue.parseHTML(n)):n.toString()==="[object Object]"?this.append(...Array.from(n)):Array.isArray(n)?this.append(...n):t.appendChild(n))}),this):this}function yB(...e){let[t]=this;return t?(e.forEach(n=>{n&&(typeof n=="string"?t.prepend(...ue.parseHTML(n)):n.toString()==="[object Object]"?this.prepend(...Array.from(n)):Array.isArray(n)?this.prepend(...n):t.insertBefore(n,t.firstChild))}),this):this}function vB(e){return ue(e).append(this),this}function kB(e){return ue(e).prepend(this),this}var nE={};["width","height","top","bottom","left","right","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","margin","marginTop","marginBottom","marginLeft","marginRight"].forEach(e=>{nE[e]=!0});function MB(e,t,n){typeof n=="number"&&nE[uu(t)]&&(n+="px"),e.style[t]=n}function xB(e,t){let n;if(typeof e=="string")if(t===void 0){let[i]=this;return i?i.style[e]:null}else n={[e]:t};else if(e)n=e;else throw new Error("no styles provided");for(let i in n)if(n.hasOwnProperty(i))for(let r=0;r<this.length;r++)MB(this[r],i,n[i]);return this}function wB(e,t){if(arguments.length<2){let[n]=this;return n?e===void 0?n.dataset:n.dataset[e]:null}for(let n=0;n<this.length;n++)this[n].dataset[e]=t;return this}function Rk(e,t,n){for(let i=0;i<t.length;i++){let r=t[i];Y.prototype[e].apply({node:r},n)}}function bB(){return Rk("removeClass",this,arguments),this}function CB(){return Rk("addClass",this,arguments),this}function SB(){return Rk("toggleClass",this,arguments),this}function _B(){let[e]=this;return e?Y.prototype.hasClass.apply({node:e},arguments):!1}function IB(e){let t=[];for(let n=0;n<this.length;n++){let i=this[n],r=Array.from(i.children);typeof e=="string"&&(r=r.filter(o=>o.matches(e))),t.push(...r)}return this.pushStack(t)}function EB(e){let t=[];for(let n=0;n<this.length;n++){let i=this[n];if(typeof e=="string"){let r=i.closest(e);r&&t.push(r)}else{let[r]=ue(e);r&&r.contains(i)&&t.push(r)}}return this.pushStack(t)}function DB(e,t,n,i){return ue.event.on(this,e,t,n,i),this}function TB(e,t,n,i){return ue.event.on(this,e,t,n,i,1),this}function PB(e,t,n){if(e&&e.preventDefault&&e.handleObj){let i=e.handleObj;return ue(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this}if(typeof e=="object"){for(let i in e)this.off(i,t,e[i]);return this}(t===!1||typeof t=="function")&&(n=t,t=void 0);for(let i=0;i<this.length;i++)ue.event.remove(this[i],e,n,t);return this}function AB(){let[e]=this;if(e===window)return e.document.documentElement.clientWidth;if(!e)return;let t=window.getComputedStyle(e),n=e.offsetWidth,i=parseFloat(t.borderTopWidth),r=parseFloat(t.borderBottomWidth),o=parseFloat(t.paddingTop),a=parseFloat(t.paddingBottom);return n-r-i-o-a}function LB(){let[e]=this;if(e===window)return e.document.documentElement.clientHeight;if(!e)return;let t=window.getComputedStyle(e),n=e.offsetHeight,i=parseFloat(t.borderLeftWidth),r=parseFloat(t.borderRightWidth),o=parseFloat(t.paddingLeft),a=parseFloat(t.paddingRight);return n-i-r-o-a}function OB(){let[e]=this;if(!e)return;let t=ue(e),n,i,r,o={top:0,left:0};if(t.css("position")==="fixed")i=e.getBoundingClientRect();else{i=t.offset(),r=e.ownerDocument,n=e.offsetParent||r.documentElement;let c=l=>{let{position:u}=getComputedStyle(l);return u==="static"};for(;n&&n!==r.documentElement&&c(n);)n=n.offsetParent||r.documentElement;if(n&&n!==e&&n.nodeType===1&&!c(n)){let l=window.getComputedStyle(n),u=parseFloat(l.borderTopWidth)||0,d=parseFloat(l.borderLeftWidth)||0;o=ue(n).offset(),o.top+=u,o.left+=d}}let a=parseFloat(window.getComputedStyle(e).marginTop)||0,s=parseFloat(window.getComputedStyle(e).marginLeft)||0;return{top:i.top-o.top-a,left:i.left-o.left-s}}function RB(e){let[t]=this;if(e===void 0){if(!t)return null;if(!t.getClientRects().length)return{top:0,left:0};let a=t.getBoundingClientRect();return{top:a.top+window.scrollY,left:a.left+window.scrollX}}if(!t)return this;let n=window.getComputedStyle(t);n.position==="static"&&this.css("position","relative");let i=this.offset(),r=e.top-i.top,o=e.left-i.left;return this.css({top:(parseFloat(n.top)||0)+r+"px",left:(parseFloat(n.left)||0)+o+"px"}),this}var Fk={};Un(Fk,{animate:()=>NB,stop:()=>VB});var r0="animationFrameId",jr={};jr["transition-property"]=jr["transition-duration"]=jr["transition-delay"]=jr["transition-timing-function"]=jr["animation-name"]=jr["animation-duration"]=jr["animation-delay"]=jr["animation-timing-function"]="";function NB(e,t={}){this.stop();for(let n=0;n<this.length;n++)FB(this[n],e,t);return this}function FB(e,t,n={}){let{duration:i=400,easing:r="ease-in-out",delay:o=0,complete:a}=n,s=setTimeout(function(){let c=ue(e),l=!1,u="transitionend";i=i/1e3,o=o/1e3;let d={};if(typeof t=="string")d["animation-name"]=t,d["animation-duration"]=i+"s",d["animation-delay"]=o+"s",d["animation-timing-function"]=r,u="animationend";else{let f=[];for(var h in t)t.hasOwnProperty(h)&&(d[h]=t[h],f.push(h));i>0&&(d["transition-property"]=f.join(", "),d["transition-duration"]=i+"s",d["transition-delay"]=o+"s",d["transition-timing-function"]=r)}let p=function(f){if(f){if(f.target!==f.currentTarget)return;f.target.removeEventListener(u,p)}else e.removeEventListener(u,p);l=!0,c.css(jr),a&&a.call(e)};if(i>0){e.addEventListener(u,p);let f=setTimeout(function(){l||p(null)},(i+o)*1e3+25);yi.set(e,r0,{id:f,stop:()=>{clearTimeout(f),e.removeEventListener(u,p)}})}c.css(d),i<=0&&p(null)});yi.set(e,r0,{stop:()=>clearTimeout(s)})}function VB(){for(let e=0;e<this.length;e++){let t=this[e],n=yi.get(t,r0);n&&(n.stop(),yi.remove(t,r0))}return this.css(jr),this}var iE={outerWidth:"offsetWidth",outerHeight:"offsetHeight",innerWidth:"clientWidth",innerHeight:"clientHeight",scrollLeft:"scrollLeft",scrollTop:"scrollTop",val:"value",text:"textContent"},rE={disabled:"disabled",value:"value",text:"textContent"};function BB(e,t){if(!e)throw new Error("no property provided");if(arguments.length===1){let[n]=this;return n?n[e]:null}if(t===void 0)return this;for(let n=0;n<this.length;n++)this[n][e]=t;return this}function zB(e,t){let n;if(typeof e=="string")if(t===void 0){let[i]=this;return i?i.getAttribute(e):null}else n={[e]:t};else if(e)n=e;else throw new Error("no attributes provided");for(let i in n)if(n.hasOwnProperty(i)){let r=n[i];if(rE[i]){this.prop(rE[i],r);continue}for(let o=0;o<this.length;o++)r===null?this[o].removeAttribute(i):this[o].setAttribute(i,r)}return this}var oE={prop:BB,attr:zB};Object.keys(iE).forEach(e=>{oE[e]=function(...t){return this.prop(iE[e],...t)}});var aE=oE;var vr={useCSSSelectors:!1,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300};var o0=Object.create(null),sE=o0;o0.load={noBubble:!0};[["mouseenter","mouseover"],["mouseleave","mouseout"],["pointerenter","pointerover"],["pointerleave","pointerout"]].forEach(([e,t])=>{o0[e]={delegateType:t,bindType:t,handle:function(n){let i=this,r=n.relatedTarget,o=n.handleObj,a;return(!r||!i.contains(r))&&(n.type=o.origType,a=o.handler.apply(i,arguments),n.type=t),a}}});var jB=vr.doubleTapInterval,HB=30;o0.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(e,...t){let{handleObj:n,target:i}=e,r=ue.data.create(i),o=new Date().getTime(),a="lastTouch"in r?o-r.lastTouch:0;a<jB&&a>HB?(r.lastTouch=null,e.type=n.origType,n.handler.call(this,e,...t)):r.lastTouch=o}};Object.assign(ue.fn,Nk);Object.assign(ue.fn,Fk);Object.assign(ue.fn,aE);Object.assign(ue.event.special,sE);var ot=ue;var vi=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,vr.classNamePrefix.length)!==vr.classNamePrefix&&(t=vr.classNamePrefix+t),t}).join(" ")};var ys=function(e,t){let n={},i={},r=Y.namespace.svg,o=t||r,a=document.createDocumentFragment(),s=function(c,l,u){for(let d=0;d<c.length;d++){let h=c[d];if(typeof h=="string"){let T=document.createTextNode(h);l.appendChild(T);continue}if(!h.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");let p=h.tagName,f,g=h.hasOwnProperty("namespaceURI")?h.namespaceURI:u;f=document.createElementNS(g,p);let b=g===r,x=b?Y(f):ot(f),M=h.attributes;M&&x.attr(M);let C=h.style;if(C&&ot(f).css(C),h.hasOwnProperty("className")){let T=h.className;b?f.className.baseVal=T:f.className=T}if(h.hasOwnProperty("textContent")&&(f.textContent=h.textContent),h.hasOwnProperty("selector")){let T=h.selector;if(n[T])throw new Error("json-dom-parser: selector must be unique");n[T]=f,x.attr("joint-selector",T)}if(h.hasOwnProperty("groupSelector")){let T=h.groupSelector;Array.isArray(T)||(T=[T]);for(let F=0;F<T.length;F++){let m=T[F],k=i[m];k||(k=i[m]=[]),k.push(f)}}l.appendChild(f);let E=h.children;Array.isArray(E)&&s(E,f,g)}};return s(e,a,o),{fragment:a,selectors:n,groupSelectors:i}},pu=function(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);t=(t<<5)-t+i,t=t&t}return t},Hr=function(e,t,n){for(var i=Array.isArray(t)?t:t.split(n||"/"),r,o=0,a=i.length;o<a;)if(r=i[o++],Object(e)===e&&r in e)e=e[r];else return;return e},lE=function(e,t){return typeof t!="string"&&typeof t!="number"&&(t=String(t)),!(t==="constructor"&&typeof e[t]=="function"||t==="__proto__")},Vk=function(e,t,n,i){let r=Array.isArray(t)?t:t.split(i||"/"),o=r.length-1,a=e,s=0;for(;s<o;s++){let c=r[s];if(!lE(a,c))return e;a=a[c]||(a[c]={})}return a[r[o]]=n,e},Bk=function(e,t,n){let i=Array.isArray(t)?t:t.split(n||"/"),r=i.length-1,o=e,a=0;for(;a<r;a++){let s=i[a];if(!lE(o,s))return e;let c=o[s];if(!c)return e;o=c}return delete o[i[r]],e};var dE=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})},oa=function(e){return oa.id=oa.id||1,e===void 0?"j_"+oa.id++:(e.id=e.id===void 0?"j_"+oa.id++:e.id,e.id)};var vn=function(e){if(e.normalized)return e;let{originalEvent:t,target:n}=e,i=t&&t.changedTouches&&t.changedTouches[0];if(i)for(let r in i)e[r]===void 0&&(e[r]=i[r]);if(n){let r=n.correspondingUseElement;r&&(e.target=r)}return e.normalized=!0,e},uE=function(e){let r=0,o=0,a=0,s=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(r=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(r=o,o=0),a="deltaX"in e?e.deltaX:r*10,s="deltaY"in e?e.deltaY:o*10,(a||s)&&e.deltaMode&&(e.deltaMode==1?(a*=40,s*=40):(a*=800,s*=800)),e.deltaX===0&&e.deltaY!==0&&e.shiftKey&&(a=s,s=0,r=o,o=0),a&&!r&&(r=a<1?-1:1),s&&!o&&(o=s<1?-1:1),{spinX:r,spinY:o,deltaX:a,deltaY:s}},hE=function(e,t){return e>t?t:e<-t?-t:e},fu=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(n){var i=new Date().getTime(),r=Math.max(0,16-(i-t)),o=setTimeout(function(){n(i+r)},r);return t=i+r,o}}return function(n,i,...r){return e(i!==void 0?n.bind(i,...r):n)}}(),Kc=function(){var e,t=typeof window<"u";return t&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e}(),Yt=function(e){return gt(e)&&e.slice(-1)==="%"},UB=function(e,t){function n(s){var c=new RegExp("(?:\\d+(?:\\.\\d+)*)("+s+")$").exec(e);return c?c[1]:null}var i=parseFloat(e);if(Number.isNaN(i))return null;var r={};r.value=i;var o;if(t==null)o="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;o=t.join("|")}else gt(t)&&(o=t);var a=n(o);return a===null?null:(r.unit=a,r)},hu=0;function qB(e,t){let n=e.split(t),i=1;for(let r=0,o=n.length-1;r<o;r++){let a=[];(r>0||n[0]!=="")&&a.push(hu),a.push(t),(r<o-1||n[o]!=="")&&a.push(hu),n.splice(i,0,...a),i+=a.length+1}return n.filter(r=>r!=="")}function cE(e,t){if(e===null)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}var pE=function(e,t,n={},i={}){var r=t.width,o=t.height,a=i.svgDocument||Y("svg").node,s=Y("tspan").node,c=Y("text").attr(n).append(s).node,l=document.createTextNode("");c.style.opacity=0,c.style.display="block",s.style.display="block",s.appendChild(l),a.appendChild(c),i.svgDocument||document.body.appendChild(a);let u=i.preserveSpaces,d=" ",h=i.separator||i.separator===""?i.separator:d,p=typeof h=="string"?h:d;var f=i.eol||`
`,g=i.hyphen?new RegExp(i.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,b=i.maxLineCount;an(b)||(b=1/0);var x=e.split(h),M=[],C=[],E,T,F;u&&Y(s).attr("xml:space","preserve");for(var m=0,k=0,w=x.length;m<w;m++){var S=x[m];if(!(!S&&!u)&&typeof S=="string"){var D=!1;if(f&&S.indexOf(f)>=0)if(S.length>1){let ye=qB(x[m],f);x.splice(m,1,...ye),m--,w=x.length;continue}else{if(u&&typeof x[m-1]=="string"){x.splice(m,hu,"",hu),w+=2,m--;continue}C[++k]=!u||typeof x[m+1]=="string"?"":void 0,D=!0}if(!D){let ye;if(u?ye=C[k]!==void 0?C[k]+p+S:S:ye=C[k]?C[k]+p+S:S,l.data=ye,s.getComputedTextLength()<=r)C[k]=ye,(E||T)&&(M[k++]=!0,E=0,T=0);else{if(!C[k]||E){var R=!!E;if(E=S.length-1,R||!E){if(!E){if(!C[k]){C=[];break}x.splice(m,2,S+x[m+1]),w--,M[k++]=!0,m--;continue}x[m]=S.substring(0,E);let ve=x[m+1];x[m+1]=S.substring(E)+(ve===void 0||ve===hu?"":ve)}else{if(T)x.splice(m,2,x[m]+x[m+1]),T=0;else{var B=S.search(g);B>-1&&B!==S.length-1&&B!==0&&(T=B+1,E=0),x.splice(m,1,S.substring(0,T||E),S.substring(T||E)),w++}k&&!M[k-1]&&k--}(!u||C[k]!=="")&&m--;continue}k++,m--}}var j=null;if(C.length>b)j=b-1;else if(o!==void 0){if(F===void 0&&l.data!=="")if(n.lineHeight==="auto")F=cE({value:1.5,unit:"em"},c);else{let ye=UB(n.lineHeight,["em","px",""]);F=cE(ye,c)}F*C.length>o&&(j=Math.floor(o/F)-1)}if(j!==null){C.splice(j+1);var W=i.ellipsis;if(!W||j<0)break;typeof W!="string"&&(W="\u2026");var P=C[j];if(!P&&!D)break;var O=P.length,N,z;do{if(z=P[O],N=P.substring(0,O),z?z.match(h)&&(N+=z):N+=p,N+=W,l.data=N,s.getComputedTextLength()<=r){C[j]=N;break}O--}while(O>=0);break}}}return i.svgDocument?a.removeChild(c):document.body.removeChild(a),C.join(f)};var fE=function(e,t){e=ot(e).toArray();var n=e.map(function(r){var o=r.parentNode,a=o.insertBefore(document.createTextNode(""),r.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,a),o.removeChild(a)}});e.sort(t);for(var i=0;i<n.length;i++)n[i].call(e[i]);return e};var Ni=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var n,i,r,o;return n=i=r=o=0,isFinite(e.vertical)&&(n=r=+e.vertical),isFinite(e.horizontal)&&(i=o=+e.horizontal),isFinite(e.top)&&(n=+e.top),isFinite(e.right)&&(i=+e.right),isFinite(e.bottom)&&(r=+e.bottom),isFinite(e.left)&&(o=+e.left),{top:n,right:i,bottom:r,left:o}},mE={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){var i=(11-6*t-11*e)/4;return-i*i+n*n}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return .5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e,t,n){return t=t||0,n=n||1,function(i){var r=e(i);return r<t?t:r>n?n:r}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},a0={number:function(e,t){var n=t-e;return function(i){return e+n*i}},object:function(e,t){var n=Object.keys(e);return function(i){var r,o,a={};for(r=n.length-1;r!=-1;r--)o=n[r],a[o]=e[o]+(t[o]-e[o])*i;return a}},hexColor:function(e,t){var n=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),r=n&255,o=(i&255)-r,a=n&65280,s=(i&65280)-a,c=n&16711680,l=(i&16711680)-c;return function(u){var d=r+o*u&255,h=a+s*u&65280,p=c+l*u&16711680;return"#"+(1<<24|d|h|p).toString(16).slice(1)}},unit:function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(e),r=n.exec(t),o=r[1].indexOf("."),a=o>0?r[1].length-o-1:0;e=+i[1];var s=+r[1]-e,c=i[2];return function(l){return(e+s*l).toFixed(a)+c}}},gE={outline:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=Number.isFinite(e.margin)?e.margin:2,i=Number.isFinite(e.width)?e.width:1;return kr(t)({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:n+i,innerRadius:n})},highlight:function(e){var t='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return kr(t)({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return kr('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return kr(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kr('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kr('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return kr('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kr('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return kr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return kr('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}};var kr=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},e.replace(t,function(i){for(var r=Array.from(arguments),o=r.slice(1,4).find(function(c){return!!c}),a=o.split("."),s=n[a.shift()];s!==void 0&&a.length;)s=s[a.shift()];return s!==void 0?s:""})}};function yE(e,t,n,i){if(n===i)return{};let r={};return Object.keys(e).forEach(o=>{let a=e[o],s=t[o];if(!Array.isArray(a)&&!Array.isArray(s)&&Re(a)&&Re(s)){let c=n+1,l=yE(a,s,c,i);Object.keys(l).length>0?r[o]=l:(n===0||c===i)&&(r[o]={})}else Ri(a,s)||(r[o]=a)}),r}function vE(e,t,n){let{maxDepth:i=Number.POSITIVE_INFINITY}=n||{};return yE(e,t,0,i)}var kn={},kE=/\s+/,aa,vs=function(e,t,n,i,r){var o=0,a;if(n&&typeof n=="object")for(i!==void 0&&("context"in r)&&r.context===void 0&&(r.context=i),a=Object.keys(n);o<a.length;o++)t=vs(e,t,a[o],n[a[o]],r);else if(n&&kE.test(n))for(a=n.split(kE);o<a.length;o++)t=e(t,a[o],i,r);else t=e(t,n,i,r);return t};kn.on=function(e,t,n){if(this._events=vs($B,this._events||{},e,t,{context:n,ctx:this,listening:aa}),aa){var i=this._listeners||(this._listeners={});i[aa.id]=aa,aa.interop=!1}return this};kn.listenTo=function(e,t,n){if(!e)return this;var i=e._listenId||(e._listenId=zr("l")),r=this._listeningTo||(this._listeningTo={}),o=aa=r[i];o||(this._listenId||(this._listenId=zr("l")),o=aa=r[i]=new s0(this,e));var a=GB(e,t,n,this);if(aa=void 0,a)throw a;return o.interop&&o.on(t,n),this};var $B=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return e},GB=function(e,t,n,i){try{e.on(t,n,i)}catch(r){return r}};kn.off=function(e,t,n){return this._events?(this._events=vs(xE,this._events,e,t,{context:n,listeners:this._listeners}),this):this};kn.stopListening=function(e,t,n){var i=this._listeningTo;if(!i)return this;for(var r=e?[e._listenId]:Object.keys(i),o=0;o<r.length;o++){var a=i[r[o]];if(!a)break;a.obj.off(t,n,this),a.interop&&a.off(t,n)}return Zt(i)&&(this._listeningTo=void 0),this};var xE=function(e,t,n,i){if(e){var r=i.context,o=i.listeners,a=0,s;if(!t&&!r&&!n){if(o!=null)for(s=Object.keys(o);a<s.length;a++)o[s[a]].cleanup();return}for(s=t?[t]:Object.keys(e);a<s.length;a++){t=s[a];var c=e[t];if(!c)break;for(var l=[],u=0;u<c.length;u++){var d=c[u];if(n&&n!==d.callback&&n!==d.callback._callback||r&&r!==d.context)l.push(d);else{var h=d.listening;h&&h.off(t,n)}}l.length?e[t]=l:delete e[t]}return e}};kn.once=function(e,t,n){var i=vs(wE,{},e,t,this.off.bind(this));return typeof e=="string"&&n==null&&(t=void 0),this.on(i,t,n)};kn.listenToOnce=function(e,t,n){var i=vs(wE,{},t,n,this.stopListening.bind(this,e));return this.listenTo(e,i)};var wE=function(e,t,n,i){if(n){var r=e[t]=WB(function(){i(t,r),n.apply(this,arguments)});r._callback=n}return e},WB=function(e){var t;if(typeof e!="function")throw new TypeError("Expected a function");var n=2;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=void 0),t}};kn.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return vs(ZB,this._events,e,void 0,n),this};var ZB=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&ME(r,i),o&&ME(o,[t].concat(i))}return e},ME=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},s0=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};s0.prototype.on=kn.on;s0.prototype.off=function(e,t){var n;this.interop?(this._events=vs(xE,this._events,e,t,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=this.count===0),n&&this.cleanup()};s0.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]};kn.bind=kn.on;kn.unbind=kn.off;var Qc=function(e,t){var n=this,i;return e&&Bn(e,"constructor")?i=e.constructor:i=function(){return n.apply(this,arguments)},ie(i,n,t),i.prototype=Object.assign(Object.create(n.prototype),e),i.prototype.constructor=i,i.__super__=n.prototype,i},YB=function(e,t,n,i){switch(t){case 1:return function(){return e[n](this[i])};case 2:return function(r){return e[n](this[i],r)};case 3:return function(r,o){return e[n](this[i],bE(r,this),o)};case 4:return function(r,o,a){return e[n](this[i],bE(r,this),o,a)};default:return function(){var r=Array.prototype.slice.call(arguments);return r.unshift(this[i]),e[n].apply(e,r)}}},CE=function(e,t,n,i){gi(n,function(r,o){t[o]&&(e.prototype[o]=YB(t,r,o,i))})},bE=function(e,t){return Be(e)?e:Re(e)&&!t._isModel(e)?XB(e):gt(e)?function(n){return n.get(e)}:e},XB=function(e){var t=WI(e);return function(n){return t(n.attributes)}};var ti=function(e,t){var n=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=zr(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection);var i=Je(this,"defaults");n=sn(ie({},i,n),i),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};ie(ti.prototype,kn,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return tn(this.attributes)},get:function(e){return this.attributes[e]},has:function(e){return this.get(e)!=null},set:function(e,t,n){if(e==null)return this;var i;if(typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var r=n.unset,o=n.silent,a=[],s=this._changing;this._changing=!0,s||(this._previousAttributes=tn(this.attributes),this.changed={});var c=this.attributes,l=this.changed,u=this._previousAttributes;for(var d in i)t=i[d],Ri(c[d],t)||a.push(d),Ri(u[d],t)?delete l[d]:l[d]=t,r?delete c[d]:c[d]=t;if(this.idAttribute in i){var h=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,h,n)}if(!o){a.length&&(this._pending=n);for(var p=0;p<a.length;p++)this.trigger("change:"+a[p],this,c[a[p]],n)}if(s)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,ie({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,ie({},e,{unset:!0}))},hasChanged:function(e){return e==null?!Zt(this.changed):Bn(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?tn(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,n={},i;for(var r in e){var o=e[r];Ri(t[r],o)||(n[r]=o,i=!0)}return i?n:!1},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return tn(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isValid:function(e){return this._validate({},ie({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=ie({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,ie(t,{validationError:n})),!1):!0}});ti.extend=Qc;function c0(e){e=Oi(e);let t=Oe(e).reduce(function(n,i){return n[i.id]=i.clone(),n},{});return Oe(e).forEach(function(n){let i=t[n.id];if(i.isLink()){let a=i.source(),s=i.target();a.id&&t[a.id]&&i.prop("source/id",t[a.id].id),s.id&&t[s.id]&&i.prop("target/id",t[s.id].id)}let r=n.get("parent");r&&t[r]&&i.set("parent",t[r].id);let o=Oe(n.get("embeds")).reduce(function(a,s){return t[s]&&a.push(t[s].id),a},[]);Zt(o)||i.set("embeds",o)}),t}var JB=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],KB=JB.reduce((e,t)=>(e[t]=!0,e),{}),QB={qualify:function(e){return yt(e)},set:function(e,t,n){Object.keys(e).forEach(function(i){if(KB[i]&&i in n){let r=e[i];n.tagName==="SELECT"&&Array.isArray(r)?Array.from(n.options).forEach(function(o,a){o.selected=r.includes(o.value)}):n[i]=r}})}},SE=QB;function l0(e,t,n){return function(i,r){var o=Yt(i);i=parseFloat(i),o&&(i/=100);var a;if(isFinite(i)){var s=r[n]();o||i>0&&i<1?a=s[e]+r[t]*i:a=s[e]+i}var c=L();return c[e]=a||0,c}}function sa(e,t){return function(n,i){var r=Yt(n);n=parseFloat(n),r&&(n/=100);var o={};if(isFinite(n)){var a=r||n>=0&&n<=1?n*i[t]:Math.max(n+i[t],0);o[e]=a}return o}}var ni={"ref-x":{position:l0("x","width","origin")},"ref-y":{position:l0("y","height","origin")},"ref-dx":{position:l0("x","width","corner")},"ref-dy":{position:l0("y","height","corner")},"ref-width":{set:sa("width","width")},"ref-height":{set:sa("height","height")},"ref-rx":{set:sa("rx","width")},"ref-ry":{set:sa("ry","height")},"ref-cx":{set:sa("cx","width")},"ref-cy":{set:sa("cy","height")},"ref-r-inscribed":{set:function(e){var t=sa(e,"width"),n=sa(e,"height");return function(i,r){var o=r.height>r.width?t:n;return o(i,r)}}("r")},"ref-r-circumscribed":{set:function(e,t){var n=Yt(e);e=parseFloat(e),n&&(e/=100);var i=Math.sqrt(t.height*t.height+t.width*t.width),r;return isFinite(e)&&(n||e>=0&&e<=1?r=e*i:r=Math.max(e+i,0)),{r}}}};ni.refX=ni["ref-x"];ni.refY=ni["ref-y"];ni["ref-x2"]=ni["ref-x"];ni["ref-y2"]=ni["ref-y"];ni["ref-width2"]=ni["ref-width"];ni["ref-height2"]=ni["ref-height"];ni["ref-r"]=ni["ref-r-inscribed"];var _E=ni;var go={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},ez=Object.keys(go).map(e=>go[e]).join(""),zk="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",tz=/\s/g,IE=new RegExp(`^(${zk}\\*)?([${ez}])(/${zk})?([-+]{1,2}${zk})?$`,"g");function DE(e){throw new Error(`Invalid calc() expression: ${e}`)}function nz(e,t){let n=IE.exec(e.replace(tz,""));n||DE(e),IE.lastIndex=0;let[,i,r,o,a]=n,{x:s,y:c,width:l,height:u}=t,d=0;switch(r){case go.width:{d=l;break}case go.height:{d=u;break}case go.x:{d=s;break}case go.y:{d=c;break}case go.minimum:{d=Math.min(u,l);break}case go.maximum:{d=Math.max(u,l);break}case go.diagonal:{d=Math.sqrt(u*u+l*l);break}}return i&&(d*=parseFloat(i)),o&&(d/=parseFloat(o.slice(1))),a&&(d+=iz(a)),d}function iz(e){if(!e)return 0;let[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function yo(e){return typeof e=="string"&&e.includes("calc")}var TE="calc(",EE=TE.length;function vo(e,t){let n=e,i=0;do{let r=n.indexOf(TE,i);if(r===-1)return n;let o=r+EE,a=1;e:do{switch(n[o]){case"(":{a++;break}case")":{if(a--,a===0)break e;break}case void 0:DE(n)}o++}while(!0);let s=n.slice(r+EE,o);yo(s)&&(s=vo(s,t));let c=String(nz(s,t));n=n.slice(0,r)+c+n.slice(o+1),i=r+c.length}while(!0)}function el(e,t,n){return n.text!==void 0}var jk=["font-weight","font-family","font-size","letter-spacing","text-transform"],PE={"line-height":{qualify:el},"text-vertical-anchor":{qualify:el},"text-path":{qualify:el},annotations:{qualify:el},eol:{qualify:el},"display-empty":{qualify:el},text:{qualify:function(e,t,n){let i=n["text-wrap"];return!i||!yt(i)},unset:function(e){e.textContent=""},set:function(e,t,n,i){let r="joint-text",o=ot.data.get(n,r),a=i["line-height"],s=i["text-vertical-anchor"],c=i["display-empty"],l=i["font-size"],u=i.annotations,d=i.eol,h=i.x,p=i["text-path"],f=JSON.stringify([e,a,u,s,d,c,p,h,l]);if(o===void 0||o!==f){if(l&&n.setAttribute("font-size",l),Re(p)){let g=p.selector;if(typeof g=="string"){let b=this.findNode(g);b instanceof SVGPathElement&&(p=ie({"xlink:href":"#"+b.id},p))}}Y(n).text(""+e,{lineHeight:a,annotations:u,textPath:p,x:h,textVerticalAnchor:s,eol:d,displayEmpty:c}),ot.data.set(n,r,f)}}},"text-wrap":{qualify:yt,set:function(e,t,n,i){var r={},o=e.width||0;Yt(o)?r.width=t.width*parseFloat(o)/100:yo(o)?r.width=Number(vo(o,t)):e.width===null?r.width=1/0:o<=0?r.width=t.width+o:r.width=o;var a=e.height||0;Yt(a)?r.height=t.height*parseFloat(a)/100:yo(a)?r.height=Number(vo(a,t)):e.height===null||(a<=0?r.height=t.height+a:r.height=a);var s,c=e.text;if(c===void 0&&(c=i.text),c!==void 0){let l=e.breakText||pE,u=getComputedStyle(n),d={};for(let h=0;h<jk.length;h++){let p=jk[h];p in i&&n.setAttribute(p,i[p]),d[p]=u[p]}d.lineHeight=i["line-height"],s=l(""+c,r,d,{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else s="";PE.text.set.call(this,s,t,n,i)},FONT_ATTRIBUTES:jk},title:{qualify:function(e,t){return t instanceof SVGElement},unset:function(e){ot.data.remove(e,"joint-title");let t=e.firstElementChild;t&&t.remove()},set:function(e,t,n){var i="joint-title",r=ot.data.get(n,i);if(r===void 0||r!==e){if(ot.data.set(n,i,e),n.tagName==="title"){n.textContent=e;return}var o=n.firstElementChild;if(o&&o.tagName==="title")o.textContent=e;else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=e,n.insertBefore(a,o)}}}}},AE=PE;function d0(e,t){var n=new L(1,0);return function(i){var r,o,a=this[e](i);return a?(o=t.rotate?a.vector().vectorAngle(n):0,r=a.start):(r=this.path.start,o=0),o===0?{transform:"translate("+r.x+","+r.y+")"}:{transform:"translate("+r.x+","+r.y+") rotate("+o+")"}}}function mu(){return this.model.isLink()}var gu={connection:{qualify:mu,unset:"d",set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let n;e<0?n=(this.getConnectionLength()+e)/2:n=e;let i=this.getConnection(),r=this.getConnectionSubdivisions(),o=i.divideAtLength(n,{segmentSubdivisions:r}),a=i.divideAtLength(-n,{segmentSubdivisions:r});o&&a&&(t=`${o[0].serialize()} ${a[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},"at-connection-length-keep-gradient":{qualify:mu,unset:"transform",set:d0("getTangentAtLength",{rotate:!0})},"at-connection-length-ignore-gradient":{qualify:mu,unset:"transform",set:d0("getTangentAtLength",{rotate:!1})},"at-connection-ratio-keep-gradient":{qualify:mu,unset:"transform",set:d0("getTangentAtRatio",{rotate:!0})},"at-connection-ratio-ignore-gradient":{qualify:mu,unset:"transform",set:d0("getTangentAtRatio",{rotate:!1})}};gu["at-connection-length"]=gu["at-connection-length-keep-gradient"];gu["at-connection-ratio"]=gu["at-connection-ratio-keep-gradient"];var LE=gu;function NE(e,t){var n="joint-shape",i=t&&t.resetOffset;return function(r,o,a){var s=ot.data.get(a,n);if(!s||s.value!==r){var c=e(r);s={value:r,shape:c,shapeBBox:c.bbox()},ot.data.set(a,n,s)}var l=s.shape.clone(),u=s.shapeBBox.clone(),d=u.origin(),h=o.origin();u.x=h.x,u.y=h.y;var p=o.maxRectScaleToFit(u,h),f=u.width===0||o.width===0?1:p.sx,g=u.height===0||o.height===0?1:p.sy;return l.scale(f,g,d),i&&l.translate(-d.x,-d.y),l}}function OE(e){function t(i){return new he(Y.normalizePathData(i))}var n=NE(t,e);return function(i,r,o){var a=n(i,r,o);return{d:a.serialize()}}}function RE(e){var t=NE(et,e);return function(n,i,r){var o=t(n,i,r);return{points:o.serialize()}}}var yu={"ref-d-reset-offset":{unset:"d",set:OE({resetOffset:!0})},"ref-d-keep-offset":{unset:"d",set:OE({resetOffset:!1})},"ref-points-reset-offset":{unset:"points",set:RE({resetOffset:!0})},"ref-points-keep-offset":{unset:"points",set:RE({resetOffset:!1})}};yu["ref-d"]=yu["ref-d-reset-offset"];yu["ref-points"]=yu["ref-points-reset-offset"];var FE=yu;function Hk(e){var t={},n=e.stroke;typeof n=="string"&&(t.stroke=n,t.fill=n);var i=e["stroke-opacity"];return i===void 0&&(i=e.opacity),i!==void 0&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),t}function VE(e){let{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}var rz={"source-marker":{qualify:yt,unset:"marker-start",set:function(e,t,n,i){return e=ie(Hk(i),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},"target-marker":{qualify:yt,unset:"marker-end",set:function(e,t,n,i){return e=ie(Hk(i),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},"vertex-marker":{qualify:yt,unset:"marker-mid",set:function(e,t,n,i){return e=ie(Hk(i),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},fill:{qualify:yt,set:VE},stroke:{qualify:yt,set:VE},filter:{qualify:yt,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}}},BE=rz;function zE(e,t,n){return function(i,r){var o;i==="middle"?o=r[t]/2:i===n?o=r[t]:isFinite(i)?o=i>-1&&i<1?-r[t]*i:-i:Yt(i)?o=r[t]*parseFloat(i)/100:o=0;var a=new L;return a[e]=-(r[e]+o),a}}var oz={"x-alignment":{offset:zE("x","width","right")},"y-alignment":{offset:zE("y","height","bottom")},"reset-offset":{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}}},jE=oz;function HE(e){return function(n,i,r){let o=Y(r);o.attr(e)!==n&&o.attr(e,n)}}var ks={ref:{},href:{set:HE("href")},"xlink:href":{set:HE("xlink:href")},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:yt,set:function(e,t,n){ot(n).css(e)}},html:{unset:function(e){ot(e).empty()},set:function(e,t,n){ot(n).html(e+"")}},props:SE};ie(ks,_E);ie(ks,AE);ie(ks,LE);ie(ks,FE);ie(ks,BE);ie(ks,jE);var vu=ks;var az=function(e,t){if(Array.isArray(e))return t};function UE(e){for(let t in e){let n=e[t];Re(n)&&!Array.isArray(n)&&Zt(n)&&delete e[t]}}var zn=ti.extend({constructor:function(e,t){var n,i=e||{};if(typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=zr("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),n=Je(this,"defaults")){let r=t&&t.mergeArrays===!0?!1:az;i=Tt({},n,i,r)}this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,n){throw new Error("Must define a translate() method.")},toJSON:function(e){let{ignoreDefaults:t,ignoreEmptyAttributes:n=!1}=e||{},i=Je(this.constructor.prototype,"defaults");if(t===!1){let s=Pn(this.attributes);return n&&UE(s),s}let r={},o=Pn(this.attributes);t===!0?r=i:(Array.isArray(t)?t:["attrs"]).forEach(c=>{r[c]=i[c]||{}});let a=vE(o,yr(r,"id","type"),{maxDepth:4});return n&&UE(a),a},initialize:function(e){let t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return dE()},processPorts:function(){var e=this.ports,t={};gi(this.get("attrs"),function(o,a){o&&o.port&&(o.port.id!==void 0?t[o.port.id]=o.port:t[o.port]={id:o.port})});var n={};if(gi(e,function(o,a){t[a]||(n[a]=!0)}),this.graph&&!Zt(n)){var i=this.graph.getConnectedLinks(this,{inbound:!0});i.forEach(function(o){n[o.get("target").port]&&o.remove()});var r=this.graph.getConnectedLinks(this,{outbound:!0});r.forEach(function(o){n[o.get("source").port]&&o.remove()})}this.ports=t},remove:function(e={}){let{graph:t,collection:n}=this;if(!t)return n&&n.remove(this,e),this;t.startBatch("remove");let i=this.getParentCell();i&&i.unembed(this,e);let r=this.getEmbeddedCells();for(let o=0,a=r.length;o<a;o++){let s=r[o];s&&s.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=sn(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];let i=e.foregroundEmbeds?n:gs(n,c=>c.z()),o=t.maxZIndex()-n.length+1,a=t.get("cells"),s=a.toArray().indexOf(i[0])!==a.length-n.length;s||(s=i.some(function(c,l){return c.z()!==o+l})),s&&(this.startBatch("to-front"),o=o+n.length,i.forEach(function(c,l){c.set("z",o+l,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=sn(e||{},{foregroundEmbeds:!0});let i;e.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),i.unshift(this)):i=[this];let r=e.foregroundEmbeds?i:gs(i,s=>s.z()),o=t.minZIndex();var n=t.get("cells");let a=n.toArray().indexOf(r[0])!==0;a||(a=r.some(function(s,c){return s.z()!==o+c})),a&&(this.startBatch("to-back"),o-=i.length,r.forEach(function(s,c){s.set("z",o+c,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t={}){let n=Array.isArray(e)?e:[e];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(t.reparent)Oi(n.map(r=>r.getParentCell())).forEach(r=>{r&&r._unembedCells(n,t)});else if(n.some(i=>i.isEmbedded()&&this.id!==i.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,t),this},unembed:function(e,t){let n=Array.isArray(e)?e:[e];return this._unembedCells(n,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(e,t){let n="embed";this.startBatch(n);let i=ie([],this.get("embeds"));e.forEach(r=>{i[r.isLink()?"unshift":"push"](r.id),r.parent(this.id,t)}),this.set("embeds",Oi(i),t),this.stopBatch(n)},_unembedCells:function(e,t){let n="unembed";this.startBatch(n),e.forEach(i=>i.unset("parent",t)),this.set("embeds",e0(this.get("embeds"),...e.map(i=>i.id)),t),this.stopBatch(n)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);let t=this.get("embeds");if(Zt(t))return[];let n=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(n=gs(n,i=>i.z())),n},_getEmbeddedCellsBfs:function(e){let t=[],n=[];for(n.push(this);n.length>0;){let i=n.shift();t.push(i);let r=i.getEmbeddedCells({sortSiblings:e});n.push(...r)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){let t=[],n=[];for(n.push(this);n.length>0;){let i=n.pop();t.push(i);let r=i.getEmbeddedCells({sortSiblings:e});for(let o=r.length-1;o>=0;--o)n.push(r[o])}return t.shift(),t},isEmbeddedIn:function(e,t){var n=gt(e)?e:e.id,i=this.parent();if(t=ie({deep:!0},t),this.graph&&t.deep){for(;i;){if(i===n)return!0;i=this.graph.getCell(i).parent()}return!1}else return i===n},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return Oe(c0([this].concat(this.getEmbeddedCells({deep:!0}))));var t=ti.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,n){var i="/",r=gt(e);if(r||Array.isArray(e))if(arguments.length>1){var o,a;r?(o=e,a=o.split("/")):(o=e.join(i),a=e.slice());var s=a[0],c=a.length;let C=n||{};C.propertyPath=o,C.propertyValue=t,C.propertyPathArray=a,"rewrite"in C||(C.rewrite=!1);for(var l={},u=l,d=s,h=1;h<c;h++){var p=a[h],f=Number.isFinite(r?Number(p):p);u=u[d]=f?[]:{},d=p}l=Vk(l,a,t,"/");var g=Tt({},this.attributes);C.rewrite&&Bk(g,o,"/");var b=Tt(g,l);return this.set(s,b[s],C)}else return Hr(this.attributes,e,i);let x=t||{};x.propertyPath=null,x.propertyValue=e,x.propertyPathArray=[],"rewrite"in x||(x.rewrite=!1);let M={};for(let C in e){let{changedValue:E}=Tt({},{changedValue:this.attributes[C]},{changedValue:e[C]});M[C]=E}return this.set(M,x)},removeProp:function(e,t){t=t||{};var n=Array.isArray(e)?e:e.split("/"),i=n[0];if(i==="attrs"&&(t.dirty=!0),n.length===1)return this.unset(e,t);var r=n.slice(1),o=this.get(i);return o==null?this:(o=Pn(o),Bk(o,r,"/"),this.set(i,o,t))},attr:function(e,t,n){var i=Array.from(arguments);return i.length===0?this.get("attrs"):(Array.isArray(e)?i[0]=["attrs"].concat(e):gt(e)?i[0]="attrs/"+e:i[0]={attrs:e},this.prop.apply(this,i))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,n,i){i=i||"/";var r={duration:100,delay:10,timingFunction:mE.linear,valueFunction:a0.number};n=ie(r,n);var o=0,a,s=(function(d){var h,p,f;o=o||d,d-=o,p=d/n.duration,p<1?this._transitionIds[e]=h=fu(s):(p=1,delete this._transitionIds[e]),f=a(n.timingFunction(p)),n.transitionId=h,this.prop(e,f,n),h||this.trigger("transition:end",this,e)}).bind(this);let{_scheduledTransitionIds:c}=this,l;var u=d=>{c[e]&&(c[e]=e0(c[e],l),c[e].length===0&&delete c[e]),this.stopPendingTransitions(e,i),a=n.valueFunction(Hr(this.attributes,e,i),t),this._transitionIds[e]=fu(d),this.trigger("transition:start",this,e)};return l=setTimeout(u,n.delay,s),c[e]||(c[e]=[]),c[e].push(l),l},getTransitions:function(){return Xc(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){let{_scheduledTransitionIds:n={}}=this,i=Object.keys(n);if(e){let r=e.split(t);i=i.filter(o=>Ri(r,o.split(t).slice(0,r.length)))}return i.forEach(r=>{n[r].forEach(a=>clearTimeout(a)),delete n[r]}),this},stopPendingTransitions(e,t="/"){let{_transitionIds:n={}}=this,i=Object.keys(n);if(e){let r=e.split(t);i=i.filter(o=>Ri(r,o.split(t).slice(0,r.length)))}i.forEach(r=>{let o=n[r];Kc(o),delete n[r],this.trigger("transition:end",this,r)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,ie({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,ie({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var n in e)!e.hasOwnProperty(n)||!this.hasChanged(n)||(t|=e[n]);return t},angle:function(){return 0},position:function(){return new L(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new L},getBBox:function(){return new te(0,0,0,0)},getPointRotatedAroundCenter(e,t,n){let i=new L(t,n);return e&&i.rotate(this.getBBox().center(),e),i},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,n=vu;return t&&t[e]||n[e]},define:function(e,t,n,i){n=ie({defaults:ms({type:e},t,this.prototype.defaults)},n);var r=this.extend(n,i);return typeof joint<"u"&&Bn(joint,"shapes")&&Vk(joint.shapes,e,r,"."),r}});var qE=function(e,t,n){if(gt(n)){if(!u0[n])throw new Error('Unknown wrapper: "'+n+'"');n=u0[n]}if(!Be(n))throw new Error("Wrapper must be a function.");Oe(t).forEach(function(i){e[i]=n(e[i])})},u0={cells:function(e){return function(){var t=Array.from(arguments),n=t.length,i=n>0&&t[0]||[],r=n>1&&t[n-1]||{};return Array.isArray(i)||(r instanceof zn?i=t:i instanceof zn&&(t.length>1&&t.pop(),i=t)),r instanceof zn&&(r={}),e.call(this,i,r)}}};var Vt={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function ku(e,t){let n=new te(e);switch(t){case void 0:throw new Error("Position required");case Vt.LEFT:case"leftMiddle":return n.leftMiddle();case Vt.RIGHT:case"rightMiddle":return n.rightMiddle();case Vt.TOP:case"topMiddle":return n.topMiddle();case Vt.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Vt.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Vt.TOP_RIGHT:case"topRight":return n.topRight();case Vt.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Vt.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Vt.CENTER:return n.center();default:throw new Error(`Unknown position: ${t}`)}}var $k={};Un($k,{absolute:()=>sz,bottom:()=>pz,ellipse:()=>mz,ellipseSpread:()=>fz,fn:()=>cz,left:()=>dz,line:()=>lz,right:()=>uz,top:()=>hz});function $E(e,t,n){var i=e.toJSON();return i.angle=t||0,sn({},n,i)}function Mu(e,t,n,i){return e.map(function(r,o,a){var s=this.pointAt((o+.5)/a.length);return(r.dx||r.dy)&&s.offset(r.dx||0,r.dy||0),$E(s.round(),0,qk(i,r))},mo(t,n))}function GE(e,t,n,i){var r=t.center(),o=t.width/t.height,a=t.topMiddle(),s=hn.fromRect(t);return e.map(function(c,l,u){var d=n+i(l,u.length),h=a.clone().rotate(r,-d).scale(o,1,r),p=c.compensateRotation?-s.tangentTheta(h):0;return(c.dx||c.dy)&&h.offset(c.dx||0,c.dy||0),c.dr&&h.move(r,c.dr),$E(h.round(),p,qk(t,c))})}function qk(e,t){let{x:n,y:i,angle:r}=t;return Yt(n)?n=parseFloat(n)/100*e.width:yo(n)&&(n=Number(vo(n,e))),Yt(i)?i=parseFloat(i)/100*e.height:yo(i)&&(i=Number(vo(i,e))),{x:n,y:i,angle:r}}function Uk(e,t){let{x:n,y:i}=qk(e,t);return new L(n||0,i||0)}var sz=function(e,t){return e.map(n=>{let i=Uk(t,n).round().toJSON();return i.angle=n.angle||0,i})},cz=function(e,t,n){return n.fn(e,t,n)},lz=function(e,t,n){var i=Uk(t,n.start||t.origin()),r=Uk(t,n.end||t.corner());return Mu(e,i,r,t)},dz=function(e,t,n){return Mu(e,t.origin(),t.bottomLeft(),t)},uz=function(e,t,n){return Mu(e,t.topRight(),t.corner(),t)},hz=function(e,t,n){return Mu(e,t.origin(),t.topRight(),t)},pz=function(e,t,n){return Mu(e,t.bottomLeft(),t.corner(),t)},fz=function(e,t,n){var i=n.startAngle||0,r=n.step||360/e.length;return GE(e,t,i,function(o){return o*r})},mz=function(e,t,n){var i=n.startAngle||0,r=n.step||20;return GE(e,t,i,function(o,a){return(o+.5-a/2)*r})};var Gk={};Un(Gk,{bottom:()=>Mz,inside:()=>Cz,insideOriented:()=>bz,left:()=>yz,manual:()=>gz,outside:()=>wz,outsideOriented:()=>xz,radial:()=>Sz,radialOriented:()=>_z,right:()=>vz,top:()=>kz});function ca(e,t){return ms({},e,t,{x:0,y:0,angle:0,attrs:{}})}function WE(e){var t=e.center(),n=t.theta(e.origin()),i=t.theta(e.bottomLeft()),r=t.theta(e.corner()),o=t.theta(e.topRight());return[n,o,r,i]}function ZE(e,t,n,i){i=sn({},i,{offset:15});var r=t.center().theta(e),o,a,s,c,l=i.offset,u=0;let[d,h,p,f]=WE(t);r<h||r>p?(s=".3em",o=l,a=0,c="start"):r<d?(o=0,a=-l,n?(u=-90,c="start",s=".3em"):(c="middle",s="0")):r<f?(s=".3em",o=-l,a=0,c="end"):(o=0,a=l,n?(u=90,c="start",s=".3em"):(c="middle",s=".6em"));var g=Math.round;return ca(i,{x:g(o),y:g(a),angle:u,attrs:{labelText:{y:s,textAnchor:c}}})}function YE(e,t,n,i){i=sn({},i,{offset:15});var r=t.center().theta(e),o,a,s,c,l=i.offset,u=0;let[d,h,p,f]=WE(t);r<h||r>p?(s=".3em",o=-l,a=0,c="end"):r<d?(o=0,a=l,n?(u=90,c="start",s=".3em"):(c="middle",s=".6em")):r<f?(s=".3em",o=l,a=0,c="start"):(o=0,a=-l,n?(u=-90,c="start",s=".3em"):(c="middle",s="0"));var g=Math.round;return ca(i,{x:g(o),y:g(a),angle:u,attrs:{labelText:{y:s,textAnchor:c}}})}function XE(e,t,n){n=sn({},n,{offset:20});var i=Uc(0,0),r=-e.theta(i),o=r,a=e.clone().move(i,n.offset).difference(e).round(),s=".3em",c;(r+90)%180===0?(c=t?"end":"middle",!t&&r===-270&&(s="0em")):r>-270&&r<-90?(c="start",o=r-180):c="end";var l=Math.round;return ca(n,{x:l(a.x),y:l(a.y),angle:t?o:0,attrs:{labelText:{y:s,textAnchor:c}}})}var gz=function(e,t,n){return ca(n)},yz=function(e,t,n){return ca(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},vz=function(e,t,n){return ca(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},kz=function(e,t,n){return ca(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Mz=function(e,t,n){return ca(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},xz=function(e,t,n){return ZE(e,t,!0,n)},wz=function(e,t,n){return ZE(e,t,!1,n)},bz=function(e,t,n){return YE(e,t,!0,n)},Cz=function(e,t,n){return YE(e,t,!1,n)},Sz=function(e,t,n){return XE(e.difference(t.center()),!1,n)},_z=function(e,t,n){return XE(e.difference(t.center()),!0,n)};var JE=function(e){var t=Pn(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=$k,this.portLabelLayoutNamespace=Gk,this._init(t)};JE.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var n=this.getGroup(e),i=this.getPortsByGroup(e),r=n.position||{},o=r.name,a=this.portLayoutNamespace;a[o]||(o="left");var s=r.args||{},c=i.map(function(d){return d&&d.position&&d.position.args}),l=a[o](c,t,s),u={ports:i,result:[]};return Oe(l).reduce((function(d,h,p){var f=d.ports[p];return d.result.push({portId:f.id,portTransformation:h,labelTransformation:this._getPortLabelLayout(f,L(h),t),portAttrs:f.attrs,portSize:f.size,labelSize:f.label.size}),d}).bind(this),u),u.result},_getPortLabelLayout:function(e,t,n){var i=this.portLabelLayoutNamespace,r=e.label.position.name||"left";return i[r]?i[r](t,n,e.label.position.args):null},_init:function(e){if(Re(e.groups))for(var t=Object.keys(e.groups),n=0,i=t.length;n<i;n++){var r=t[n];this.groups[r]=this._evaluateGroup(e.groups[r])}for(var o=Oe(e.items),a=0,s=o.length;a<s;a++)this.ports.push(this._evaluatePort(o[a]))},_evaluateGroup:function(e){return Tt(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=ie({},e),n=this.getGroup(e.group);return t.markup=t.markup||n.markup,t.attrs=Tt({},n.attrs,t.attrs),t.position=this._createPositionNode(n,t),t.label=Tt({},n.label,this._getLabel(t)),t.z=this._getZIndex(n,t),t.size=ie({},n.size,t.size),t},_getZIndex:function(e,t){return an(t.z)?t.z:an(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return Tt({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var n={},i;Be(e)?(i="fn",n.fn=e):gt(e)?i=e:e===void 0?i=t?"left":null:Array.isArray(e)?(i="absolute",n.x=e[0],n.y=e[1]):Re(e)&&(i=e.name,ie(n,e.args));var r={args:n};return i&&(r.name=i),r},_getLabel:function(e,t){var n=e.label||{},i=n;return i.position=this._getPosition(n.position,t),i}};var KE={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};Oe(e.items).forEach(function(s){t[s.id]=!0});var n=this.previous("ports")||{},i={};Oe(n.items).forEach(function(s){t[s.id]||(i[s.id]=!0)});var r=this.graph;if(r&&!Zt(i)){var o=r.getConnectedLinks(this,{inbound:!0});o.forEach(function(s){i[s.get("target").port]&&s.remove()});var a=r.getConnectedLinks(this,{outbound:!0});a.forEach(function(s){i[s.get("source").port]&&s.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return Pn(this.prop("ports/items"))||[]},getGroupPorts:function(e){let t=Oe(this.prop(["ports","items"])).filter(n=>n.group===e);return Pn(t)},getPort:function(e){return Pn(Oe(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortGroupNames:function(){return Object.keys(this._portSettingsData.groups)},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,te(this.size()));return t.reduce(function(n,i){var r=i.portTransformation;return n[i.portId]={x:r.x,y:r.y,angle:r.angle},n},{})},getPortIndex:function(e){var t=Re(e)?e.id:e;return this._isValidPortId(t)?Oe(this.prop("ports/items")).findIndex(function(n){return n.id===t}):-1},addPort:function(e,t){if(!Re(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var n=ie([],this.prop("ports/items"));return n.push(e),this.prop("ports/items",n,t),this},insertPort:function(e,t,n){let i=typeof e=="number"?e:this.getPortIndex(e);if(!Re(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");let r=ie([],this.prop("ports/items"));return r.splice(i,0,t),this.prop("ports/items",r,n),this},portProp:function(e,t,n,i){var r=this.getPortIndex(e);if(r===-1)throw new Error("Element: unable to find port with id "+e);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?o[0]=["ports","items",r].concat(t):gt(t)?o[0]=["ports/items/",r,"/",t].join(""):(o=["ports/items/"+r],yt(t)&&(o.push(t),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var n=Oe(e.items);return n.forEach(function(i){typeof i!="object"&&t.push("Element: invalid port ",i),this._isValidPortId(i.id)||(i.id=this.generatePortId())},this),Oi(n,"id").length!==n.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!Re(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",ie([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){let n=t||{},i=this.getPortIndex(e);if(i!==-1){let r=ie([],this.prop(["ports","items"]));r.splice(i,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],r,n),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let n,i;if(Array.isArray(e)){if(n=t||{},e.length===0)return this.this;i=ie([],this.prop(["ports","items"])).filter(function(o){return!e.some(function(a){let s=Re(a)?a.id:a;return o.id===s})})}else n=e||{},i=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],i,n),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new JE(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var i=n.filter(function(o){if(!t.find(function(a){return a.id===o.id}))return o}),r=t.filter(function(o){if(!n.find(function(a){return a.id===o.id}))return o});r.length>0&&this.trigger("ports:remove",this,r),i.length>0&&this.trigger("ports:add",this,i)}}},QE={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),n=0,i=t.node.childNodes.length;n<i;n++)e.push(t.node.childNodes[n]);var r=Ek(this.model._portSettingsData.getPorts(),"z"),o="auto";Oe(r[o]).forEach(function(u){var d=this._getPortElement(u);t.append(d),e.push(d)},this);for(var a=Object.keys(r),s=0;s<a.length;s++){var c=a[s];if(c!==o){var l=parseInt(c,10);this._appendPorts(r[c],l,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,n){var i=this._getContainerElement(),r=Oe(e).map(this._getPortElement,this);n[t]||t<0?Y(n[Math.max(t,0)]).before(r):i.append(r)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNodes:function(e,t){let n=this._portElementsCache[e];if(!n)return[];if(!t)return[n.portContentElement.node];let i=n.portElement.node,r=n.portSelectors;return this.findBySelector(t,i,r)},findPortNode:function(e,t){let[n=null]=this.findPortNodes(e,t);return n},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){ei(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,n,i,r;var o=Y(this.portContainerMarkup).addClass("joint-port"),a=this._getPortMarkup(e);if(Array.isArray(a)){var s=this.parseDOMJSON(a,o.node),c=s.fragment;c.childNodes.length>1?t=Y("g").append(c):t=Y(c.firstChild),r=s.selectors}else t=Y(a),Array.isArray(t)&&(t=Y("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group}),an(e.id)&&t.attr("port-id-type","number");let l=this._getPortLabelMarkup(e.label);if(Array.isArray(l)){let{fragment:g,selectors:b}=this.parseDOMJSON(l,o.node),x=g.childNodes.length;x>0&&(i=b,n=x===1?Y(g.firstChild):Y("g").append(g))}else n=Y(l),Array.isArray(n)&&(n=Y("g").append(n));var u;if(r&&i){for(var d in i)if(r[d]&&d!==this.selector)throw new Error("ElementView: selectors within port must be unique.");u=ie({},r,i)}else u=r||i||{};let h="portRoot",p="labelRoot",f="labelText";if(h in u||(u[h]=t.node),n){let g=n.node;if(p in u||(u[p]=g),!(f in u)){let b=n.tagName()==="TEXT"?g:Array.from(g.querySelectorAll("text"));u[f]=b,i||(i={}),i[f]=b}}return o.append(t.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:o,portLabelElement:n,portSelectors:u,portLabelSelectors:i,portContentElement:t,portContentSelectors:r},o},_updatePortGroup:function(e){for(var t=te(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(e,t),i=0,r=n.length;i<r;i++){var o=n[i],a=o.portId,s=this._portElementsCache[a]||{},c=o.portTransformation,l=o.labelTransformation;l&&s.portLabelElement&&(this.updateDOMSubtreeAttributes(s.portLabelElement.node,l.attrs,{rootBBox:new te(o.labelSize),selectors:s.portLabelSelectors}),this.applyPortTransform(s.portLabelElement,l,-c.angle||0)),this.updateDOMSubtreeAttributes(s.portElement.node,o.portAttrs,{rootBBox:new te(o.portSize),selectors:s.portSelectors}),this.applyPortTransform(s.portElement,c)}},applyPortTransform:function(e,t,n){var i=Y.createSVGMatrix().rotate(n||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(i,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}};var jn=zn.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),zn.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,n){let i=an(t);n=(i?n:e)||{};let{parentRelative:r,deep:o,restrictedArea:a}=n,s;if(r){if(!this.graph)throw new Error("Element must be part of a graph.");let c=this.getParentCell();c&&!c.isLink()&&(s=c.get("position"))}if(i){if(s&&(e+=s.x,t+=s.y),o||a){let{x:c,y:l}=this.get("position");this.translate(e-c,t-l,n)}else this.set("position",{x:e,y:t},n);return this}else{let c=L(this.get("position"));return r?c.difference(s):c}},translate:function(e,t,n){if(e=e||0,t=t||0,e===0&&t===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var i=this.get("position")||{x:0,y:0},r=n.restrictedArea;if(r&&n.translateBy===this.id)if(typeof r=="function"){var o=r.call(this,i.x+e,i.y+t,n);e=o.x-i.x,t=o.y-i.y}else{var a=this.getBBox({deep:!0}),s=i.x-a.x,c=i.y-a.y,l=Math.max(r.x+s,Math.min(r.x+r.width+s-a.width,i.x+e)),u=Math.max(r.y+c,Math.min(r.y+r.height+c-a.height,i.y+t));e=l-i.x,t=u-i.y}var d={x:i.x+e,y:i.y+t};return n.tx=e,n.ty=t,n.transition?(Re(n.transition)||(n.transition={}),this.transition("position",d,ie({},n.transition,{valueFunction:a0.object})),ei(this.getEmbeddedCells(),"translate",e,t,n)):(this.startBatch("translate",n),this.set("position",d,n),ei(this.getEmbeddedCells(),"translate",e,t,n),this.stopBatch("translate",n)),this},size:function(e,t,n){var i=this.get("size");return e===void 0?{width:i.width,height:i.height}:(Re(e)&&(n=t,t=an(e.height)?e.height:i.height,e=an(e.width)?e.width:i.width),this.resize(e,t,n))},resize:function(e,t,n){if(n=n||{},this.startBatch("resize",n),n.direction){var i=this.get("size");switch(n.direction){case"left":case"right":t=i.height;break;case"top":case"bottom":e=i.width;break}var r=un(this.get("angle")||0),o=this.getBBox(),a;if(r){var s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(s+=Math.floor((r+45)/90),s%=4);var c=o[["bottomLeft","corner","topRight","origin"][s]](),l=L(c).rotate(o.center(),-r),u=Math.sqrt(e*e+t*t)/2,d=s*Math.PI/2;d+=Math.atan(s%2==0?t/e:e/t),d-=Wt(r);var h=L.fromPolar(u,d,l);a=L(h).offset(e/-2,t/-2)}else switch(a=o.topLeft(),n.direction){case"top":case"top-right":a.offset(0,o.height-t);break;case"left":case"bottom-left":a.offset(o.width-e,0);break;case"top-left":a.offset(o.width-e,o.height-t);break}this.set("size",{width:e,height:t},n),this.position(a.x,a.y,n)}else this.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this},scale:function(e,t,n,i){var r=this.getBBox().scale(e,t,n);return this.startBatch("scale",i),this.position(r.x,r.y,i),this.resize(r.width,r.height,i),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){let{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");let n=this.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&ei(n,"fitToChildren",e),this._fitToElements(Object.assign({elements:n},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){let{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;let n=this.getParentCell();if(!n||!n.isElement())return this;let i=n.getEmbeddedCells().filter(r=>r.isElement());return i.length===0?this:(this.startBatch("fit-parent",e),n._fitToElements(Object.assign({elements:i},e)),e.deep&&n.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){let t=this.graph.getCellsBBox(e.elements);if(!t)return;let{expandOnly:n,shrinkOnly:i}=e;if(n&&i)return;let{x:r,y:o,width:a,height:s}=t,{left:c,right:l,top:u,bottom:d}=Ni(e.padding);r-=c,o-=u,a+=c+l,s+=d+u;let h=new te(r,o,a,s);if(n)h=this.getBBox().union(h);else if(i){let p=this.getBBox().intersect(h);if(!p)return;h=p}this.set({position:{x:h.x,y:h.y},size:{width:h.width,height:h.height}},e)},rotate:function(e,t,n,i){if(n){var r=this.getBBox().center(),o=this.get("size"),a=this.get("position");r.rotate(n,this.get("angle")-e);var s=r.x-o.width/2-a.x,c=r.y-o.height/2-a.y;this.startBatch("rotate",{angle:e,absolute:t,origin:n}),this.position(a.x+s,a.y+c,i),this.rotate(e,t,null,i),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,i);return this},angle:function(){return un(this.get("angle")||0)},getBBox:function(e={}){let{graph:t,attributes:n}=this,{deep:i,rotate:r}=e;if(i&&t){let d=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return d.push(this),t.getCellsBBox(d,e)}let{angle:o=0,position:{x:a,y:s},size:{width:c,height:l}}=n,u=new te(a,s,c,l);return r&&u.rotateAroundCenter(o),u},getPointFromConnectedLink:function(e,t){var n=this.getBBox(),i=n.center(),r=e.get(t);if(!r)return i;var o=r.port;if(!o||!this.hasPort(o))return i;var a=this.portProp(o,["group"]),s=this.getPortsPositions(a),c=new L(s[o]).offset(n.origin()),l=this.angle();return l&&c.rotate(i,-l),c}});ie(jn.prototype,KE);var Ms=zn.extend({defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,x:"calc(x)",y:"calc(y)",width:"calc(w)",height:"calc(h)"}},position:{distance:.5}}},defaults:{source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,n){if(e===void 0)return tn(this.get("source"));var i,r,o=e instanceof zn;if(o)return i=tn(t)||{},i.id=e.id,r=n,this.set("source",i,r);var a=!yt(e);return a?(i=tn(t)||{},i.x=e.x,i.y=e.y,r=n,this.set("source",i,r)):(i=e,r=t,this.set("source",i,r))},target:function(e,t,n){if(e===void 0)return tn(this.get("target"));var i,r,o=e instanceof zn;if(o)return i=tn(t)||{},i.id=e.id,r=n,this.set("target",i,r);var a=!yt(e);return a?(i=tn(t)||{},i.x=e.x,i.y=e.y,r=n,this.set("target",i,r)):(i=e,r=t,this.set("target",i,r))},router:function(e,t,n){if(e===void 0){var i=this.get("router");return i?typeof i=="object"?tn(i):i:null}var r=typeof e=="object"||typeof e=="function",o=r?e:{name:e,args:t},a=r?t:n;return this.set("router",o,a)},connector:function(e,t,n){if(e===void 0){var i=this.get("connector");return i?typeof i=="object"?tn(i):i:null}var r=typeof e=="object"||typeof e=="function",o=r?e:{name:e,args:t},a=r?t:n;return this.set("connector",o,a)},label:function(e,t,n){var i=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=i.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,n)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){let{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,n){if(!t)throw new Error("dia.Link: no label provided");var i=this.labels(),r=i.length;return e=isFinite(e)&&e!==null?e|0:r,e<0&&(e=r+e+1),i.splice(e,0,t),this.labels(i,n)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,n.splice(e,1),this.labels(n,t)},vertex:function(e,t,n){var i=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=i.length+e),arguments.length<=1)return this.prop(["vertices",e]);var r=this._normalizeVertex(t);return this.prop(["vertices",e],r,n)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var n=[],i=0;i<e.length;i++){var r=e[i],o=this._normalizeVertex(r);n.push(o)}return this.set("vertices",n,t)},insertVertex:function(e,t,n){if(!t)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),r=i.length;e=isFinite(e)&&e!==null?e|0:r,e<0&&(e=r+e+1);var o=this._normalizeVertex(t);return i.splice(e,0,o),this.vertices(i,n)},removeVertex:function(e,t){var n=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,n.splice(e,1),this.vertices(n,t)},_normalizeVertex:function(e){var t=!yt(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints(function(i){return{x:(i.x||0)+e,y:(i.y||0)+t}},n)},scale:function(e,t,n,i){return this.applyToPoints(function(r){return L(r).scale(e,t,n).toJSON()},i)},applyToPoints:function(e,t){if(!Be(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:i,target:r}=this.attributes;i.id||(n.source=e(i)),r.id||(n.target=e(r));var o=this.vertices();return o.length>0&&(n.vertices=o.map(e)),this.set(n,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new L(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new L(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){let e=[this.getSourcePoint(),...this.vertices().map(L),this.getTargetPoint()];return new et(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var n=this.getSourceElement(),i=this.getTargetElement(),r=this.getParentCell();n&&i&&(n===i||n.isEmbeddedIn(i)?t=i:i.isEmbeddedIn(n)?t=n:t=this.graph.getCommonAncestor(n,i)),r&&(!t||t.id!==r.id)&&r.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:n}=this.attributes,i=t.id,r=n.id;if(!i||!r)return!1;var o=i===r;if(!o&&e.deep&&this.graph){var a=this.getSourceCell(),s=this.getTargetCell();o=a.isEmbeddedIn(s)||s.isEmbeddedIn(a)}return o},getSourceCell:function(){let{graph:e,attributes:t}=this;var n=t.source;return n&&n.id&&e&&e.getCell(n.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){let{graph:e,attributes:t}=this;var n=t.target;return n&&n.id&&e&&e.getCell(n.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=gt(e)||an(e)?e:e.id,n=this.getRelationshipAncestor();return!!n&&(n.id===t||n.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var n=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&n}});var xu={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))},isSafari:function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[e];if(typeof n<"u")return n;try{n=t()}catch{n=!1}return this._results[e]=n,n}};var Iz=jn.define("standard.Rectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ez=jn.define("standard.Circle",{attrs:{root:{cursor:"move"},body:{cx:"calc(s/2)",cy:"calc(s/2)",r:"calc(s/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Dz=jn.define("standard.Ellipse",{attrs:{root:{cursor:"move"},body:{cx:"calc(w/2)",cy:"calc(h/2)",rx:"calc(w/2)",ry:"calc(h/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Tz=jn.define("standard.Path",{attrs:{root:{cursor:"move"},body:{d:"M 0 0 H calc(w) V calc(h) H 0 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Pz=jn.define("standard.Polygon",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Az=jn.define("standard.Polyline",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Lz=jn.define("standard.Image",{attrs:{root:{cursor:"move"},image:{width:"calc(w)",height:"calc(h)"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Oz=jn.define("standard.BorderedImage",{attrs:{root:{cursor:"move"},border:{width:"calc(w)",height:"calc(h)",stroke:"#333333",strokeWidth:2},background:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5,fill:"#FFFFFF"},image:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Rz=jn.define("standard.EmbeddedImage",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{width:"calc(0.3*w)",height:"calc(h-20)",x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",x:"calc(0.3*w+20)",y:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Nz=jn.define("standard.InscribedImage",{attrs:{root:{cursor:"move"},border:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",stroke:"#333333",strokeWidth:2},background:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",fill:"#FFFFFF"},image:{width:"calc(0.68*w)",height:"calc(0.68*h)",x:"calc(0.16*w)",y:"calc(0.16*h)",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Fz=jn.define("standard.HeaderedRectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{width:"calc(w)",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Wk=10,Vz=jn.define("standard.Cylinder",{attrs:{root:{cursor:"move"},body:{lateralArea:Wk,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{cx:"calc(w/2)",cy:Wk,rx:"calc(w/2)",ry:Wk,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var n={lateralArea:e},i=Yt(e),r=i?`calc(${parseFloat(e)/100}*h)`:e,o={cy:r,ry:r};return this.attr({body:n,top:o},t)}},{attributes:{"lateral-area":{set:function(e,t){var n=Yt(e);n&&(e=parseFloat(e)/100);var i=t.x,r=t.y,o=t.width,a=t.height,s=o/2,c=n?a*e:e,l=Y.KAPPA,u=l*s,d=l*(n?a*e:e),h=i,p=i+o/2,f=i+o,g=r+c,b=g-c,x=r+a-c,M=r+a,C=["M",h,g,"L",h,x,"C",i,x+d,p-u,M,p,M,"C",p+u,M,f,x+d,f,x,"L",f,g,"C",f,g-d,p+u,b,p,b,"C",p-u,b,h,g-d,h,g,"Z"];return{d:C.join(" ")}},unset:"d"}}}),Bz={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},zz={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},jz=xu.test("svgforeignobject")?Bz:zz,Hz=jn.define("standard.TextBlock",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{width:"calc(w)",height:"calc(h)"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},jz]},{attributes:{text:{set:function(e,t,n,i){if(n instanceof HTMLElement)n.textContent=e;else{var r=i.style||{},o={text:e,width:-5,height:"100%"},a=ie({"text-vertical-anchor":"middle"},r);return vu["text-wrap"].set.call(this,o,t,n,a),{fill:r.color||null}}},unset:function(e){if(e.textContent="",e instanceof SVGElement)return"fill"},position:function(e,t,n){if(n instanceof SVGElement)return t.center()}}}}),Uz=Ms.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),qz=Ms.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),$z=Ms.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,transform:"translate(3,6)",stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var f0={};Un(f0,{curve:()=>Jk,jumpover:()=>rj,normal:()=>oj,rounded:()=>cj,smooth:()=>lj,straight:()=>wu});var tl={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},Gz=Object.values(tl),Wz=10,Zz=1,wu=function(e,t,n=[],i={}){let{cornerType:r=tl.POINT,cornerRadius:o=Wz,cornerPreserveAspectRatio:a=!1,precision:s=Zz,raw:c=!1}=i;if(Gz.indexOf(r)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let l;if(r===tl.POINT||!o){let u=[e].concat(n).concat([t]),d=new et(u);l=new he(d)}else{l=new he,l.appendSegment(he.createSegment("M",e));let u,d=n.length;for(let h=0;h<d;h++){let p=new L(n[h]),f=n[h-1]||e,g=n[h+1]||t,b=u||p.distance(f)/2;u=p.distance(g)/2;let x,M;a?x=M=-Math.min(o,b,u):(x=-Math.min(o,b),M=-Math.min(o,u));let C=p.clone().move(f,x).round(s),E=p.clone().move(g,M).round(s);switch(l.appendSegment(he.createSegment("L",C)),r){case tl.CUBIC:{let T=.3333333333333333,F=2/3,m=new L(T*C.x+F*p.x,F*p.y+T*C.y),k=new L(T*E.x+F*p.x,F*p.y+T*E.y);l.appendSegment(he.createSegment("C",m,k,E));break}case tl.LINE:{l.appendSegment(he.createSegment("L",E));break}case tl.GAP:{l.appendSegment(he.createSegment("M",E));break}}}l.appendSegment(he.createSegment("L",t))}return c?l:l.serialize()};var Yz=5,e8=["arc","gap","cubic"],Xz=0,t8=1,Jz=["smooth"],h0=1/3,p0=2/3;function n8(e,t){let{x:n,y:i}=e,{x:r,y:o}=t;if(n>r){let a=n;n=r,r=a,a=i,i=o,o=a}if(i>o){let a=n;n=r,r=a,a=i,i=o,o=a}return[new L(n,i),new L(r,o)]}function Kz(e,t){let[{x:n,y:i},{x:r,y:o}]=n8(e.start,e.end),[{x:a,y:s},{x:c,y:l}]=n8(t.start,t.end),u=n<=c&&a<=r,d=i<=l&&s<=o;return u&&d}function Yk(e,t,n){var i=[].concat(e,n,t);return i.reduce(function(r,o,a){var s=i[a+1];return s!=null&&(r[a]=mo(o,s)),r},[])}function Qz(e){var t=e.paper,n=t._jumpOverUpdateList;if(n==null){n=t._jumpOverUpdateList=[];var i=t.model;i.on("batch:stop",function(){this.hasActiveBatch()||ej(t)}),i.on("reset",function(){n=t._jumpOverUpdateList=[]})}n.indexOf(e)<0&&(n.push(e),e.listenToOnce(e.model,"change:connector remove",function(){n.splice(n.indexOf(e),1)}))}function ej(e){for(var t=e._jumpOverUpdateList,n=0;n<t.length;n++){let i=t[n],r=i.getFlag(i.constructor.Flags.CONNECTOR);i.requestUpdate(r)}}function tj(e,t){return Oe(t).reduce(function(n,i){var r=e.intersection(i);return r&&n.push(r),n},[])}function i8(e,t){return mo(e,t).squaredLength()}function nj(e,t,n){return t.reduce(function(i,r,o){if(r.skip===!0)return i;var a=i.pop()||e,s=Uc(r).move(a.start,-n),c=Uc(r).move(a.start,+n),l=t[o+1];if(l!=null){var u=c.distance(l);u<=n&&(c=l.move(a.start,u),l.skip=!0)}else{var d=s.distance(a.end);if(d<n*2+t8)return i.push(a),i}var h=c.distance(a.start);if(h<n*2+t8)return i.push(a),i;var p=mo(s,c);return p.isJump=!0,i.push(mo(a.start,s),p,mo(c,a.end)),i},[])}function r8(e,t,n,i){var r=new he,o;return o=he.createSegment("M",e[0].start),r.appendSegment(o),Oe(e).forEach(function(a,s){if(a.isJump){var c,l,u,d;if(n==="arc"){c=-90,l=a.start.difference(a.end);var h=+(l.x<0||l.x===0&&l.y<0);h&&(c+=180);var p=a.midpoint(),f=new oe(p,a.end).rotate(p,c),g;g=new oe(a.start,p),u=g.pointAt(2/3).rotate(a.start,c),d=f.pointAt(1/3).rotate(f.end,-c),o=he.createSegment("C",u,d,f.end),r.appendSegment(o),g=new oe(p,a.end),u=f.pointAt(1/3).rotate(f.end,c),d=g.pointAt(1/3).rotate(a.end,-c),o=he.createSegment("C",u,d,a.end),r.appendSegment(o)}else if(n==="gap")o=he.createSegment("M",a.end),r.appendSegment(o);else if(n==="cubic"){c=a.start.theta(a.end);var b=t*.6,x=t*1.35;l=a.start.difference(a.end),h=+(l.x<0||l.x===0&&l.y<0),h&&(x*=-1),u=L(a.start.x+b,a.start.y+x).rotate(a.start,c),d=L(a.end.x-b,a.end.y+x).rotate(a.end,c),o=he.createSegment("C",u,d,a.end),r.appendSegment(o)}}else{var M=e[s+1];i==0||!M||M.isJump?(o=he.createSegment("L",a.end),r.appendSegment(o)):ij(i,r,a.end,a.start,M.end)}}),r}function ij(e,t,n,i,r){var o=n.distance(i)/2,a=n.distance(r)/2,s=-Math.min(e,o),c=-Math.min(e,a),l=n.clone().move(i,s).round(),u=n.clone().move(r,c).round(),d=new L(h0*l.x+p0*n.x,p0*n.y+h0*l.y),h=new L(h0*u.x+p0*n.x,p0*n.y+h0*u.y),p;p=he.createSegment("L",l),t.appendSegment(p),p=he.createSegment("C",d,h,u),t.appendSegment(p)}var rj=function(e,t,n,i){Qz(this);var r=i.raw,o=i.size||Yz,a=i.jump&&(""+i.jump).toLowerCase(),s=i.radius||Xz,c=i.ignoreConnectors||Jz;e8.indexOf(a)===-1&&(a=e8[0]);var l=this.paper,u=l.model,d=u.getLinks();if(d.length===1)return r8(Yk(e,t,n),o,a,s);var h=this.model,p=d.indexOf(h),f=l.options.defaultConnector||{},g=d.filter(function(T,F){var m=T.get("connector")||f;return Oe(c).includes(m.name)?!1:F>p?m.name!=="jumpover":!0}),b=g.map(function(T){return l.findViewByModel(T)}),x=Yk(e,t,n),M=b.map(function(T){return T==null?[]:T===this?x:Yk(T.sourcePoint,T.targetPoint,T.route)},this),C=x.reduce(function(T,F){var m=g.reduce(function(k,w,S){if(w!==h){let D=M[S].slice(),R=D.findIndex(j=>Kz(F,j));R>-1&&F.containsPoint(D[R].end)&&D.splice(R+1,1);let B=tj(F,D);k.push.apply(k,B)}return k},[]).sort(function(k,w){return i8(F.start,k)-i8(F.start,w)});return m.length>0?T.push.apply(T,nj(F,m,o)):T.push(F),T},[]),E=r8(C,o,a,s);return r?E:E.serialize()};var oj=function(e,t,n=[],i={}){let{raw:r}=i;return wu(e,t,n,{cornerType:"point",raw:r})};var aj=10,sj=0,cj=function(e,t,n=[],i={}){let{radius:r=aj,raw:o}=i;return wu(e,t,n,{cornerType:"cubic",cornerRadius:r,precision:sj,raw:o})};var lj=function(e,t,n,i){var r=i&&i.raw,o;if(n&&n.length!==0){var a=[e].concat(n).concat([t]),s=tt.throughPoints(a);o=new he(s)}else{o=new he;var c;if(c=he.createSegment("M",e),o.appendSegment(c),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var l=(e.x+t.x)/2;c=he.createSegment("C",l,e.y,l,t.y,t.x,t.y),o.appendSegment(c)}else{var u=(e.y+t.y)/2;c=he.createSegment("C",e.x,u,t.x,u,t.x,t.y),o.appendSegment(c)}}return r?o:o.serialize()};var Wi={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},ri={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Jk=function(e,t,n=[],i={},r){let o=!!i.raw,{direction:a=Wi.AUTO,precision:s=3}=i,c={coeff:i.distanceCoefficient||.6,angleTangentCoefficient:i.angleTangentCoefficient||80,tau:i.tension||.5,sourceTangent:i.sourceTangent?new L(i.sourceTangent):null,targetTangent:i.targetTangent?new L(i.targetTangent):null,rotate:!!i.rotate};typeof i.sourceDirection=="string"?c.sourceDirection=i.sourceDirection:typeof i.sourceDirection=="number"?c.sourceDirection=new L(1,0).rotate(null,i.sourceDirection):c.sourceDirection=i.sourceDirection?new L(i.sourceDirection).normalize():null,typeof i.targetDirection=="string"?c.targetDirection=i.targetDirection:typeof i.targetDirection=="number"?c.targetDirection=new L(1,0).rotate(null,i.targetDirection):c.targetDirection=i.targetDirection?new L(i.targetDirection).normalize():null;let l=[e,...n,t].map(g=>new L(g)),u;if(c.sourceTangent)u=c.sourceTangent;else{let g=fj(r,l,a,c),b=l[0].distance(l[1])*c.coeff,x=l[1].difference(l[0]).normalize(),M=Xk(g,x);if(M>Math.PI/4){let C=b+(M-Math.PI/4)*c.angleTangentCoefficient;u=g.clone().scale(C,C)}else u=g.clone().scale(b,b)}let d;if(c.targetTangent)d=c.targetTangent;else{let g=mj(r,l,a,c),b=l.length-1,x=l[b-1].distance(l[b])*c.coeff,M=l[b-1].difference(l[b]).normalize(),C=Xk(g,M);if(C>Math.PI/4){let E=x+(C-Math.PI/4)*c.angleTangentCoefficient;d=g.clone().scale(E,E)}else d=g.clone().scale(x,x)}let p=yj(l,u,d,c).map(g=>vj(g,c)),f=new he(p).round(s);return o?f:f.serialize()};Jk.Directions=Wi;Jk.TangentDirections=ri;function dj(e,t,n){let{sourceBBox:i}=e,r,o;if(!e.sourceView)i.x>t[1].x?r="right":r="left";else if(o=e.sourceView.model.angle(),n.rotate&&o){let s=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),c=t[0].clone();c.rotate(i.center(),o),r=s.sideNearestToPoint(c)}else r=i.sideNearestToPoint(t[0]);let a;switch(r){case"left":a=new L(-1,0);break;case"right":default:a=new L(1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function uj(e,t,n){let{targetBBox:i}=e,r,o;if(!e.targetView)i.x>t[t.length-2].x?r="left":r="right";else if(o=e.targetView.model.angle(),n.rotate&&o){let s=e.targetView.getNodeUnrotatedBBox(e.targetView.el),c=t[t.length-1].clone();c.rotate(i.center(),o),r=s.sideNearestToPoint(c)}else r=i.sideNearestToPoint(t[t.length-1]);let a;switch(r){case"left":a=new L(-1,0);break;case"right":default:a=new L(1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function hj(e,t,n){let{sourceBBox:i}=e,r,o;if(!e.sourceView)i.y>t[1].y?r="bottom":r="top";else if(o=e.sourceView.model.angle(),n.rotate&&o){let s=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),c=t[0].clone();c.rotate(i.center(),o),r=s.sideNearestToPoint(c)}else r=i.sideNearestToPoint(t[0]);let a;switch(r){case"top":a=new L(0,-1);break;case"bottom":default:a=new L(0,1);break}return n.rotate&&o&&a.rotate(null,-o),a}function pj(e,t,n){let{targetBBox:i}=e,r,o;if(!e.targetView)i.y>t[t.length-2].y?r="top":r="bottom";else if(o=e.targetView.model.angle(),n.rotate&&o){let s=e.targetView.getNodeUnrotatedBBox(e.targetView.el),c=t[t.length-1].clone();c.rotate(i.center(),o),r=s.sideNearestToPoint(c)}else r=i.sideNearestToPoint(t[t.length-1]);let a;switch(r){case"top":a=new L(0,-1);break;case"bottom":default:a=new L(0,1);break}return n.rotate&&o&&a.rotate(null,-o),a}function o8(e,t,n){let{sourceBBox:i}=e,r,o;if(!e.sourceView)r=i.sideNearestToPoint(t[1]);else if(o=e.sourceView.model.angle(),n.rotate&&o){let s=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),c=t[0].clone();c.rotate(i.center(),o),r=s.sideNearestToPoint(c)}else r=i.sideNearestToPoint(t[0]);let a;switch(r){case"top":a=new L(0,-1);break;case"bottom":a=new L(0,1);break;case"right":a=new L(1,0);break;case"left":a=new L(-1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function a8(e,t,n){let{targetBBox:i}=e,r,o;if(!e.targetView)r=i.sideNearestToPoint(t[t.length-2]);else if(o=e.targetView.model.angle(),n.rotate&&o){let s=e.targetView.getNodeUnrotatedBBox(e.targetView.el),c=t[t.length-1].clone();c.rotate(i.center(),o),r=s.sideNearestToPoint(c)}else r=i.sideNearestToPoint(t[t.length-1]);let a;switch(r){case"top":a=new L(0,-1);break;case"bottom":a=new L(0,1);break;case"right":a=new L(1,0);break;case"left":a=new L(-1,0);break}return n.rotate&&o&&a.rotate(null,-o),a}function s8(e,t,n){return t[1].difference(t[0]).normalize()}function c8(e,t,n){let i=t.length-1;return t[i-1].difference(t[i]).normalize()}function l8(e,t,n){let{sourceBBox:i}=e,r=i.center();return t[0].difference(r).normalize()}function d8(e,t,n){let{targetBBox:i}=e,r=i.center();return t[t.length-1].difference(r).normalize()}function fj(e,t,n,i){if(i.sourceDirection)switch(i.sourceDirection){case ri.UP:return new L(0,-1);case ri.DOWN:return new L(0,1);case ri.LEFT:return new L(-1,0);case ri.RIGHT:return new L(1,0);case ri.AUTO:return o8(e,t,i);case ri.CLOSEST_POINT:return s8(e,t,i);case ri.OUTWARDS:return l8(e,t,i);default:return i.sourceDirection}switch(n){case Wi.HORIZONTAL:return dj(e,t,i);case Wi.VERTICAL:return hj(e,t,i);case Wi.CLOSEST_POINT:return s8(e,t,i);case Wi.OUTWARDS:return l8(e,t,i);case Wi.AUTO:default:return o8(e,t,i)}}function mj(e,t,n,i){if(i.targetDirection)switch(i.targetDirection){case ri.UP:return new L(0,-1);case ri.DOWN:return new L(0,1);case ri.LEFT:return new L(-1,0);case ri.RIGHT:return new L(1,0);case ri.AUTO:return a8(e,t,i);case ri.CLOSEST_POINT:return c8(e,t,i);case ri.OUTWARDS:return d8(e,t,i);default:return i.targetDirection}switch(n){case Wi.HORIZONTAL:return uj(e,t,i);case Wi.VERTICAL:return pj(e,t,i);case Wi.CLOSEST_POINT:return c8(e,t,i);case Wi.OUTWARDS:return d8(e,t,i);case Wi.AUTO:default:return a8(e,t,i)}}function gj(e,t){let n=Math.cos(t),i=Math.sin(t),r=n*e.x-i*e.y,o=i*e.x+n*e.y;e.x=r,e.y=o}function Xk(e,t){let n=e.dot(t)/(e.magnitude()*t.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function u8(e,t){return e.x*t.y-e.y*t.x}function yj(e,t,n,i){let{tau:r,coeff:o}=i,a=[],s=[],c=[],l=e.length-1;for(let u=0;u<l;u++)a[u]=e[u].distance(e[u+1]);s[0]=t,s[l]=n;for(let u=1;u<l;u++){let d,h;u===1?d=e[u-1].clone().offset(s[u-1].x,s[u-1].y):d=e[u-1].clone(),u===l-1?h=e[u+1].clone().offset(s[u+1].x,s[u+1].y):h=e[u+1].clone();let p=d.difference(e[u]).normalize(),f=h.difference(e[u]).normalize(),g=Xk(p,f),b=(Math.PI-g)/2,x,M=u8(p,f),C;C=u8(e[u].difference(e[u+1]),e[u].difference(e[u-1])),M<0&&(b=-b),g<Math.PI/2&&(b<0&&C<0||b>0&&C>0)&&(b=b-Math.PI),x=f.clone(),gj(x,b);let E=x.clone(),T=x.clone(),F=a[u-1]*o,m=a[u]*o;E.scale(F,F),T.scale(m,m),s[u]=[E,T]}for(let u=0;u<l;u++){let d,h;u===0?d=e[u+1].difference(s[u].x/r,s[u].y/r):d=e[u+1].difference(s[u][1].x/r,s[u][1].y/r),u===l-1?h=e[u].clone().offset(s[u+1].x/r,s[u+1].y/r):h=e[u].difference(s[u+1][0].x/r,s[u+1][0].y/r),c[u]=[d,e[u],e[u+1],h]}return c}function vj(e,t){let{tau:n}=t,i=new L;i.x=e[1].x+(e[2].x-e[0].x)/(6*n),i.y=e[1].y+(e[2].y-e[0].y)/(6*n);let r=new L;return r.x=e[2].x+(e[3].x-e[1].x)/(6*n),r.y=e[2].y+(e[3].y-e[1].y)/(6*n),new tt(e[1],i,r,e[2])}var g0={};Un(g0,{addClass:()=>Pj,list:()=>Aj,mask:()=>Dj,opacity:()=>Tj,stroke:()=>Ij});var ko=function(e){this.cid=zr("view"),this.preinitialize.apply(this,arguments),ie(this,Pk(e,Mj)),this._ensureElement(),this.initialize.apply(this,arguments)},kj=/^(\S+)\s*(.*)$/,Mj=["model","collection","el","id","attributes","className","tagName","events","style"];ie(ko.prototype,kn,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof ot?e:ot(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=Je(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var n=e[t];if(Be(n)||(n=this[n]),!!n){var i=t.match(kj);this.delegate(i[1],i[2],n.bind(this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(Je(this,"el"));else{var e=ie({},Je(this,"attributes"));this.id&&(e.id=Je(this,"id")),this.className&&(e.class=Je(this,"className")),this.setElement(this._createElement(Je(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});ko.extend=Qc;var la={},ki=ko.extend({options:{},theme:null,themeClassNamePrefix:vi("theme-"),requireSetThemeOverride:!1,defaultTheme:vr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=ie({},this.options,e),ko.call(this,e)},initialize:function(){la[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(e){if(e||(e=Je(this,"children")),e){var t=this.svgElement,n=Y.namespace[t?"svg":"xhtml"],i=ys(e,n);(t?this.vel:this.$el).empty().append(i.fragment),this.childNodes=i.selectors}return this},findAttributeNode:function(e,t){let n=t;for(;n&&n.nodeType===1;){if(n.getAttribute(e))return n;if(n===this.el)return null;n=n.parentNode}return null},findAttribute:function(e,t){let n=this.findAttributeNode(e,t);return n&&n.getAttribute(e)},_ensureElement:function(){if(this.el)this.setElement(Je(this,"el"));else{var e=Je(this,"tagName"),t=ie({},Je(this,"attributes")),n=ie({},Je(this,"style"));this.id&&(t.id=Je(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(Y.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof ot?e:ot(e),this.el=this.$el[0],this.svgElement&&(this.vel=Y(this.el))},_ensureElClassName:function(){var e=Je(this,"className");if(e){var t=vi(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override?this:(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e,this)},addThemeClassName:function(e){if(e=e||this.theme,!e)return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){e=e||this.theme;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),la[this.cid]=null,ko.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,n){if(!t)return this;n||(n={});var i=this.getEventNamespace();for(var r in t){var o=t[r];typeof o!="function"&&(o=this[o]),o&&ot(e).on(r+i,n,o.bind(this))}return this},undelegateElementEvents:function(e){return ot(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=Je(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var n=e.data,i="__"+this.cid+"__";return t===void 0?n?n[i]||{}:{}:(n||(n=e.data={}),n[i]||(n[i]={}),ie(n[i],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&ie({},e[0])||{},n=e[1]&&ie({},e[1])||{},i=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return typeof i=="function"&&i.apply(this,arguments),this.render.__render__===i&&this.onRender(),this},t.render.__render__=i,ko.extend.call(this,t,n)}});var Mo=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,ie({silent:!0},t))},xj={add:!0,remove:!0,merge:!0},wj={add:!0,remove:!1},h8=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i=Array(e.length-n),r=t.length,o;for(o=0;o<i.length;o++)i[o]=e[o+n];for(o=0;o<r;o++)e[o+n]=t[o];for(o=0;o<i.length;o++)e[o+r+n]=i[o]};ie(Mo.prototype,kn,{model:ti,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){return this.set(e,ie({merge:!1},t,wj))},remove:function(e,t){t=ie({},t);var n=!Array.isArray(e);e=n?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),n?i[0]:i},set:function(e,t){if(e!=null){t=ie({},xj,t);var n=!Array.isArray(e);e=n?[e]:e.slice();var i=t.at;i!=null&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var r=[],o=[],a=[],s=[],c={},l=t.add,u=t.merge,d=t.remove,h=!1,p=this.comparator&&i==null&&t.sort!==!1,f=gt(this.comparator)?this.comparator:null,g,b;for(b=0;b<e.length;b++){g=e[b];var x=this.get(g);if(x){if(u&&g!==x){var M=this._isModel(g)?g.attributes:g;x.set(M,t),a.push(x),p&&!h&&(h=x.hasChanged(f))}c[x.cid]||(c[x.cid]=!0,r.push(x)),e[b]=x}else l&&(g=e[b]=this._prepareModel(g,t),g&&(o.push(g),this._addReference(g,t),c[g.cid]=!0,r.push(g)))}if(d){for(b=0;b<this.length;b++)g=this.models[b],c[g.cid]||s.push(g);s.length&&this._removeModels(s,t)}var C=!1,E=!p&&l&&d;if(r.length&&E?(C=this.length!==r.length||this.models.some(function(T,F){return T!==r[F]}),this.models.length=0,h8(this.models,r,0),this.length=this.models.length):o.length&&(p&&(h=!0),h8(this.models,o,i??this.length),this.length=this.models.length),h&&this.sort({silent:!0}),!t.silent){for(b=0;b<o.length;b++)i!=null&&(t.index=i+b),g=o[b],g.trigger("add",g,this,t);(h||C)&&this.trigger("sort",this,t),(o.length||s.length||a.length)&&(t.changes={added:o,removed:s,merged:a},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?tn(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,ie({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,ie({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,ie({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(e){if(e!=null)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e,e.idAttribute)]||e.cid&&this._byId[e.cid]},has:function(e){return this.get(e)!=null},at:function(e){return e<0&&(e+=this.length),this.models[e]},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return Be(t)&&(t=t.bind(this)),n===1||gt(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e,t){return e[t||this.model.prototype.idAttribute||"id"]},values:function(){return new bu(this,p8)},keys:function(){return new bu(this,f8)},entries:function(){return new bu(this,bj)},each:function(e,t){this.models.forEach(e,t)},filter:function(e,t){return this.models.filter(e,t)},find:function(e,t){return this.models.find(e,t)},findIndex:function(e,t){return this.models.findIndex(e,t)},first:function(){return this.models[0]},includes:function(e){return this.models.includes(e)},last:function(){return this.models[this.models.length-1]},isEmpty:function(){return!this.models.length},map:function(e,t){return this.models.map(e,t)},reduce:function(e,t=this.first()){return this.models.reduce(e,t)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?tn(t):{},t.collection=this;var n;return this.model.prototype?n=new this.model(e,t):n=this.model(e,t),n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.models.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes,r.idAttribute);a!=null&&delete this._byId[a],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return e.length>0&&!t.silent&&delete t.index,n},_isModel:function(e){return e instanceof ti},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes,e.idAttribute);n!=null&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes,e.idAttribute);n!=null&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if((e==="add"||e==="remove")&&n!==this)return;if(e==="changeId"){var r=this.modelId(t.previousAttributes(),t.idAttribute),o=this.modelId(t.attributes,t.idAttribute);r!=null&&delete this._byId[r],o!=null&&(this._byId[o]=t)}}this.trigger.apply(this,arguments)}});var m0=typeof Symbol=="function"&&Symbol.iterator;m0&&(Mo.prototype[m0]=Mo.prototype.values);var bu=function(e,t){this._collection=e,this._kind=t,this._index=0},p8=1,f8=2,bj=3;m0&&(bu.prototype[m0]=function(){return this});bu.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e=this._collection.at(this._index);this._index++;var t;if(this._kind===p8)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);this._kind===f8?t=n:t=[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Cj={toArray:1,sortBy:3},Sj=[Mo,Cj,"models"];function _j(e){var t=e[0],n=e[1],i=e[2];CE(t,{sortBy:gs,toArray:Oe},n,i)}_j(Sj);Mo.extend=Qc;function Cu(e){return e?Array.isArray(e)?e:[e]:[]}var Mn=ki.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){let{paper:n}=e;this.cellView=e,this.nodeSelector=t,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;let{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform()):this.postponedUpdate=!0,0},findNode(e,t=null){let n;if(typeof t=="string")n=e.findNode(t);else if(yt(t)){let i=e.model.isLink(),{label:r=null,port:o,selector:a}=t;i&&r!==null?n=e.findLabelNode(r,a):!i&&o?n=e.findPortNode(o,a):n=e.findNode(a)}else t&&(n=Y.toNode(t),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(e,t){let{options:n}=this,{layer:i}=n,{rotatableNode:r}=e,o=e.getNodeMatrix(t);return r?i?r.contains(t)?o:e.getRootRotateMatrix().inverse().multiply(o):e.getNodeRotateMatrix(t).multiply(o):o},mount(){let{MOUNTABLE:e,cellView:t,el:n,options:i,transformGroup:r,detachedTransformGroup:o,postponedUpdate:a,nodeSelector:s}=this;if(!e||r)return;if(a){this.update(t,s),this.transform();return}let{vel:c,paper:l}=t,{layer:u}=i;if(u){let d;o?(d=o,this.detachedTransformGroup=null):d=Y("g").addClass("highlight-transform").append(n),this.transformGroup=d,l.getLayerView(u).insertSortedNode(d.node,i.z)}else(!n.parentNode||n.nextSibling)&&c.append(n)},unmount(){let{MOUNTABLE:e,transformGroup:t,vel:n}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):n.remove())},transform(){let{transformGroup:e,cellView:t,updateRequested:n}=this;if(!e||t.model.isLink()||n)return;let i=t.getRootTranslateMatrix(),r=t.getRootRotateMatrix(),o=i.multiply(r);e.attr("transform",Y.matrixToTransformString(o))},update(){let{node:e,cellView:t,nodeSelector:n,updateRequested:i,id:r}=this;if(i)return;this.postponedUpdate=!1;let o=this.node=this.findNode(t,n);e&&this.unhighlight(t,e),o?(this.highlight(t,o),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",r,this))},onRemove(){let{node:e,cellView:t,id:n,constructor:i}=this;e&&this.unhighlight(t,e),this.unmount(),i._removeRef(t,n)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){let t=Je(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){let{cellView:e}=this;if(!e)return;let{model:t,paper:n}=e;Je(this,"UPDATE_ATTRIBUTES").some(r=>t.hasChanged(r))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,n){let i=this.uniqueId(t,n);this.add(e,t,i,n)},unhighlight:function(e,t,n){let i=this.uniqueId(t,n);this.remove(e,i)},get(e,t=null){let{cid:n}=e,{_views:i}=this,r=i[n];if(t===null){let o=[];if(!r)return o;for(let a in r){let s=r[a];s instanceof this&&o.push(s)}return o}else{if(!r)return null;if(t in r){let o=r[t];if(o instanceof this)return o}return null}},add(e,t,n,i={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");let r=Mn.get(e,n);r&&r.remove();let o=new this(i);return o.id=n,this._addRef(e,n,o),o.requestUpdate(e,t),o.listenToUpdateAttributes(e),o},_addRef(e,t,n){let{cid:i}=e,{_views:r}=this,o=r[i];o||(o=r[i]={}),o[t]=n},_removeRef(e,t){let{cid:n}=e,{_views:i}=this,r=i[n];if(r){t&&delete r[t];for(let o in r)return;delete i[n]}},remove(e,t=null){Cu(this.get(e,t)).forEach(n=>{n.remove()})},getAll(e,t=null){let n=[],{_views:i}=this;for(let r in i)for(let o in i[r]){let a=i[r][o];a.cellView.paper===e&&a instanceof this&&(t===null||o===t)&&n.push(a)}return n},removeAll(e,t=null){this.getAll(e,t).forEach(n=>n.remove())},update(e,t=null,n=!1){Cu(this.get(e,t)).forEach(i=>{(n||i.UPDATABLE)&&i.update()})},transform(e,t=null){Cu(this.get(e,t)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(e,t=null){Cu(this.get(e,t)).forEach(n=>n.unmount())},mount(e,t=null){Cu(this.get(e,t)).forEach(n=>n.mount())},uniqueId(e,t=""){return Y.ensureId(e)+JSON.stringify(t)}});var Ij=Mn.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){let{options:n}=this,{useFirstSubpath:i}=n,r;try{let o=Y(t);if(r=o.convertToPathData().trim(),o.tagName()==="PATH"&&i){let a=r.search(/.M/i)+1;a>0&&(r=r.substr(0,a))}}catch{let a=e.getNodeBoundingRect(t);r=Y.rectToPath(ie({},n,a.toJSON()))}return r},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){let{vel:n,options:i}=this,{padding:r,layer:o}=i,a=this.getNodeMatrix(e,t);if(r){!o&&t===e.el&&n.remove();let s=e.getNodeBoundingRect(t),c=s.x+s.width/2,l=s.y+s.height/2;s=Y.transformRect(s,a);let u=Math.max(s.width,1),d=Math.max(s.height,1),h=(u+r)/u,p=(d+r)/d,f=Y.createSVGMatrix({a:h,b:0,c:0,d:p,e:c-h*c,f:l-p*l});a=a.multiply(f)}n.attr({d:this.getPathData(e,t),transform:Y.matrixToTransformString(a)})},highlight(e,t){let{vel:n,options:i}=this;n.attr(i.attrs),i.nonScalingStroke&&n.attr("vector-effect","non-scaling-stroke"),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}});var m8=20;function Ej(e,t){let n=e.children();for(;n.length>0;){let i=n.shift();t(i)&&n.push(...i.children())}}var Dj=Mn.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:m8,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){let{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:i,MASK_REMOVE_TAGS:r}=this,o=t.tagName();if(!Y.isSVGGraphicsElement(t)||r.includes(o))return t.remove(),!1;if(i.includes(o)){let a=e.vel.findOne(`#${t.id}`);if(a){let{node:s}=a,c=e.getNodeBoundingRect(s);e.model.isElement()&&(c=Y.transformRect(c,e.getNodeMatrix(s)));let l=Y("rect",c.toJSON()),{x:u,y:d}=c.center(),{angle:h,cx:p=u,cy:f=d}=a.rotate();h&&l.rotate(h,p,f),t.parent().append(l)}return t.remove(),!1}return n.forEach(a=>{a==="fill"&&t.attr("fill")==="none"||t.removeAttr(a)}),!0},transformMaskRoot(e,t){let{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(i=>{t.removeAttr(i)})},getMaskShape(e,t){let{options:n,MASK_REPLACE_TAGS:i}=this,{deep:r}=n,o=t.tagName(),a;if(o==="G"){if(!r)return null;a=t.clone(),Ej(a,s=>this.transformMaskChild(e,s))}else{if(i.includes(o))return null;a=t.clone()}return this.transformMaskRoot(e,a),a},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){let{VISIBLE:n,INVISIBLE:i,options:r}=this,{padding:o,attrs:a}=r,s=parseFloat(Y("g").attr(a).attr("stroke-width")),c=t.attr("fill")!=="none",l=parseFloat(t.attr("stroke-width"));isNaN(l)&&(l=1);let u=l+o*2,d=u+s*2,h=this.getMaskShape(e,t);if(!h){let p=e.getNodeBoundingRect(t.node);p.inflate(p.width?0:.5,p.height?0:.5),h=Y("rect",p.toJSON())}return h.attr(a),Y("mask",{id:this.getMaskId()}).append([h.clone().attr({fill:c?n:"none",stroke:n,"stroke-width":d}),h.clone().attr({fill:c?i:"none",stroke:i,"stroke-width":u})])},removeMask(e){let t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){let{options:n,vel:i}=this,{padding:r,attrs:o,maskClip:a=m8,layer:s}=n,c="stroke"in o?o.stroke:"#000000";!s&&t===e.el&&i.remove();let l=e.getNodeBoundingRect(t).inflate(r+a),u=this.getNodeMatrix(e,t),d=this.getMask(e,Y(t));this.addMask(e.paper,d),i.attr(l.toJSON()),i.attr({transform:Y.matrixToTransformString(u),mask:`url(#${d.id})`,fill:c})},unhighlight(e){this.removeMask(e.paper)}});var Tj=Mn.extend({UPDATABLE:!1,MOUNTABLE:!1,highlight:function(e,t){let{alphaValue:n=.3}=this.options;t.style.opacity=n},unhighlight:function(e,t){t.style.opacity=""}});var g8=vi("highlighted"),Pj=Mn.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:g8},highlight:function(e,t){Y(t).addClass(this.options.className)},unhighlight:function(e,t){Y(t).removeClass(this.options.className)}},{className:g8});var Qk={ROW:"row",COLUMN:"column"},Aj=Mn.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){let n=e.model,{attribute:i,size:r=20,gap:o=5,direction:a=Qk.ROW}=this.options;if(!i)throw new Error("List: attribute is required");let s=typeof r=="number"?{width:r,height:r}:r,c=a===Qk.ROW,l=c?s.width:s.height,u=n.get(i);Array.isArray(u)||(u=[]);let d=this._prevItems||[],h=u.map((b,x)=>Ri(d[x],u[x]));if(d.length!==u.length||h.some(b=>!b)){let b=this.vel.children(),x=u.map((M,C)=>{let E=C in b?b[C].node:null;if(h[C])return E;let T=this.createListItem(M,s,E);if(!T)return null;if(!(T instanceof SVGElement))throw new Error("List: item must be an SVGElement");T.dataset.index=C,T.dataset.attribute=i;let F=C*(l+o);return T.setAttribute("transform",c?`translate(${F}, 0)`:`translate(0, ${F})`),T});this.vel.empty().append(x),this._prevItems=u}let p=u.length,f=p===0?0:p*l+(p-1)*o,g=c?{width:f,height:s.height}:{width:s.width,height:f};this.position(n,g)},position(e,t){let{vel:n,options:i}=this,{margin:r=5,position:o="top-left"}=i,{width:a,height:s}=e.size(),{left:c,right:l,top:u,bottom:d}=Ni(r),h=new te(c,u,a-(c+l),s-(u+d)),{x:p,y:f}=ku(h,o);switch(o){case Vt.CENTER:case Vt.TOP:case Vt.BOTTOM:{p-=t.width/2;break}case Vt.RIGHT:case Vt.BOTTOM_RIGHT:case Vt.TOP_RIGHT:{p-=t.width;break}}switch(o){case Vt.CENTER:case Vt.RIGHT:case Vt.LEFT:{f-=t.height/2;break}case Vt.BOTTOM:case Vt.BOTTOM_RIGHT:case Vt.BOTTOM_LEFT:{f-=t.height;break}}n.attr("transform",`translate(${p}, ${f})`)}},{Directions:Qk,Positions:Vt});var v0={};Un(v0,{anchor:()=>Vj,bbox:()=>Bj,boundary:()=>jj,rectangle:()=>zj});function y0(e,t,n){if(yt(n)){let{x:r,y:o}=n;if(isFinite(o)){let a=new oe(t,e),{start:s,end:c}=a.parallel(o);t=s,e=c}n=r}if(!isFinite(n))return e;var i=e.distance(t);return n===0&&i>0?e:e.move(t,-Math.min(n,i-1))}function nM(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function Lj(e,t,n=0){let i,r,o,a,{start:s,end:c}=e;switch(t){case"left":i="x",r=c,o=s,a=-1;break;case"right":i="x",r=s,o=c,a=1;break;case"top":i="y",r=c,o=s,a=-1;break;case"bottom":i="y",r=s,o=c,a=1;break;default:return}s[i]<c[i]?r[i]=o[i]:o[i]=r[i],isFinite(n)&&(r[i]+=a*n,o[i]+=a*n)}function Oj(e,t,n,i){let{offset:r,alignOffset:o,align:a}=i;return a&&Lj(e,a,o),y0(e.end,e.start,r)}function y8(e,t,n,i){var r=t.getNodeBBox(n);i.stroke&&r.inflate(nM(n)/2);var o=e.intersect(r),a=o?e.start.chooseClosest(o):e.end;return y0(a,e.start,i.offset)}function Rj(e,t,n,i){var r=t.model.angle();if(r===0)return y8(e,t,n,i);var o=t.getNodeUnrotatedBBox(n);i.stroke&&o.inflate(nM(n)/2);var a=o.center(),s=e.clone().rotate(a,r),c=s.setLength(1e6).intersect(o),l=c?s.start.chooseClosest(c).rotate(a,-r):e.end;return y0(l,e.start,i.offset)}function Nj(e){if(!e)return null;var t=e;do{var n=t.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")t=t.firstElementChild;else if(n==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var eM="segmentSubdivisons",tM="shapeBBox";function Fj(e,t,n,i){var r,o,a=i.selector,s=e.end;if(typeof a=="string"?r=t.findNode(a):a===!1?r=n:Array.isArray(a)?r=Hr(n,a):r=Nj(n),!Y.isSVGGraphicsElement(r)){if(r===n||!Y.isSVGGraphicsElement(n))return s;r=n}var c=t.getNodeShape(r),l=t.getNodeMatrix(r),u=t.getRootTranslateMatrix(),d=t.getRootRotateMatrix(),h=u.multiply(d).multiply(l),p=h.inverse(),f=Y.transformLine(e,p),g=f.start.clone(),b=t.getNodeData(r);if(i.insideout===!1){b[tM]||(b[tM]=c.bbox());var x=b[tM];if(x.containsPoint(g))return s}var M;if(c instanceof he){var C=i.precision||2;b[eM]||(b[eM]=c.getSegmentSubdivisions({precision:C})),M={precision:C,segmentSubdivisions:b[eM]}}i.extrapolate===!0&&f.setLength(1e6),o=f.intersect(c,M),o?Y.isArray(o)&&(o=g.chooseClosest(o)):i.sticky===!0&&(c instanceof te?o=c.pointNearestToPoint(g):c instanceof hn?o=c.intersectionWithLineFromCenterToPoint(g):o=c.closestPoint(g,M));var E=o?Y.transformPoint(o,h):s,T=i.offset||0;return i.stroke&&(T+=nM(r)/2),y0(E,e.start,T)}var Vj=Oj,Bj=y8,zj=Rj,jj=Fj;var I0={};Un(I0,{manhattan:()=>S0,metro:()=>aH,normal:()=>Hj,oneSide:()=>Uj,orthogonal:()=>b0,rightAngle:()=>gH});var Hj=function(e,t,n){return e};var Uj=function(e,t,n){var i=t.side||"bottom",r=Ni(t.padding||40),o=n.sourceBBox,a=n.targetBBox,s=o.center(),c=a.center(),l,u,d;switch(i){case"bottom":d=1,l="y",u="height";break;case"top":d=-1,l="y",u="height";break;case"left":d=-1,l="x",u="width";break;case"right":d=1,l="x",u="width";break;default:throw new Error("Router: invalid side")}return s[l]+=d*(o[u]/2+r[i]),c[l]+=d*(a[u]/2+r[i]),d*(s[l]-c[l])>0?c[l]=s[l]:s[l]=c[l],[s].concat(e,c)};var qj={N:"S",S:"N",E:"W",W:"E"},$j={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function x0(e,t,n){var i=new L(e.x,t.y);return n.containsPoint(i)&&(i=new L(t.x,e.y)),i}function rM(e,t){return e[t==="W"||t==="E"?"width":"height"]}function oi(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function k0(e){return new te(e.x,e.y,0,0)}function w0(e){var t=Ni(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function v8(e,t){return e.sourceBBox.clone().moveAndExpand(w0(t))}function k8(e,t){return e.targetBBox.clone().moveAndExpand(w0(t))}function Gj(e,t){if(e.sourceAnchor)return e.sourceAnchor;var n=v8(e,t);return n.center()}function Wj(e,t){if(e.targetAnchor)return e.targetAnchor;var n=k8(e,t);return n.center()}function M8(e,t,n){var i=new L(e.x,t.y),r=new L(t.x,e.y),o=oi(e,i),a=oi(e,r),s=qj[n],c=o===n||o!==s&&(a===s||a!==n)?i:r;return{points:[c],direction:oi(c,t)}}function M0(e,t,n){var i=x0(e,t,n);return{points:[i],direction:oi(i,t)}}function Zj(e,t,n,i){var r={},o=[new L(e.x,t.y),new L(t.x,e.y)],a=o.filter(function(d){return!n.containsPoint(d)}),s=a.filter(function(d){return oi(d,e)!==i}),c;if(s.length>0)c=s.filter(function(d){return oi(e,d)===i}).pop(),c=c||s[0],r.points=[c],r.direction=oi(c,t);else{c=Tk(o,a)[0];var l=new L(t).move(c,-rM(n,i)/2),u=x0(l,e,n);r.points=[u,l],r.direction=oi(l,t)}return r}function Yj(e,t,n,i){var r=M0(t,e,i),o=r.points[0];if(n.containsPoint(o)){r=M0(e,t,n);var a=r.points[0];if(i.containsPoint(a)){var s=new L(e).move(a,-rM(n,oi(e,a))/2),c=new L(t).move(o,-rM(i,oi(t,o))/2),l=new oe(s,c).midpoint(),u=M0(e,l,n),d=M8(l,t,u.direction);r.points=[u.points[0],d.points[0]],r.direction=d.direction}}return r}function iM(e,t,n,i,r){var o={},a=n.union(i).inflate(1),s=a.center().distance(t)>a.center().distance(e),c=s?t:e,l=s?e:t,u,d,h;return r?(u=L.fromPolar(a.width+a.height,$j[r],c),u=a.pointNearestToPoint(u).move(u,-1)):u=a.pointNearestToPoint(c).move(c,1),d=x0(u,l,a),u.round().equals(d.round())?(d=L.fromPolar(a.width+a.height,Wt(u.theta(c))+Math.PI/2,l),d=a.pointNearestToPoint(d).move(l,1).round(),h=x0(u,d,a),o.points=s?[d,h,u]:[u,h,d]):o.points=s?[d,u]:[u,d],o.direction=oi(s?u:d,t),o}function b0(e,t,n){var i=v8(n,t),r=k8(n,t),o=Gj(n,t),a=Wj(n,t);i=i.union(k0(o)),r=r.union(k0(a)),e=Oe(e).map(L),e.unshift(o),e.push(a);for(var s,c=[],l=0,u=e.length-1;l<u;l++){var d=null,h=e[l],p=e[l+1],f=!!oi(h,p);if(l===0)l+1===u?i.intersect(r.clone().inflate(1))?d=iM(h,p,i,r):f||(d=Yj(h,p,i,r)):i.containsPoint(p)?d=iM(h,p,i,k0(p).moveAndExpand(w0(t))):f||(d=M0(h,p,i));else if(l+1===u){var g=f&&oi(p,h)===s;r.containsPoint(h)||g?d=iM(h,p,k0(h).moveAndExpand(w0(t)),r,s):f||(d=Zj(h,p,r,s))}else f||(d=M8(h,p,s));d?(Array.prototype.push.apply(c,d.points),s=d.direction):s=oi(h,p),l+1<u&&c.push(p)}return c}var S8={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,n){if(!Be(b0))throw new Error("Manhattan requires the orthogonal router as default fallback.");return b0(e,ie({},S8,t),n)},fallbackRoute:function(e,t,n){return null},draggingRoute:null};function sM(e){this.map={},this.options=e,this.mapGridSize=100}sM.prototype.build=function(e,t){var n=this.options,i=Oe(n.excludeEnds).reduce(function(c,l){var u=t.get(l);if(u){var d=e.getCell(u.id);d&&c.push(d)}return c},[]),r=[],o=e.getCell(t.get("source").id);o&&(r=Xc(r,o.getAncestors().map(function(c){return c.id})));var a=e.getCell(t.get("target").id);a&&(r=Xc(r,a.getAncestors().map(function(c){return c.id})));var s=this.mapGridSize;return e.getElements().reduce(function(c,l){var u=Oe(n.excludeTypes).includes(l.get("type")),d=i.find(function(E){return E.id===l.id}),h=r.includes(l.id),p=u||d||h;if(!p)for(var f=l.getBBox().moveAndExpand(n.paddingBox),g=f.origin().snapToGrid(s),b=f.corner().snapToGrid(s),x=g.x;x<=b.x;x+=s)for(var M=g.y;M<=b.y;M+=s){var C=x+"@"+M;c[C]=c[C]||[],c[C].push(f)}return c},this.map),this};sM.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return Oe(this.map[t]).every(function(n){return!n.containsPoint(e)})};function xs(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}xs.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var n=du(this.items,e,(function(i){return this.values[i]}).bind(this));this.items.splice(n,0,e)};xs.prototype.remove=function(e){this.hash[e]=this.CLOSE};xs.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};xs.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};xs.prototype.isEmpty=function(){return this.items.length===0};xs.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function _8(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function I8(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function E8(e,t){if(e.sourceAnchor)return e.sourceAnchor;var n=_8(e,t);return n.center()}function Xj(e,t){if(e.targetAnchor)return e.targetAnchor;var n=I8(e,t);return n.center()}function oM(e,t,n,i,r){var o=360/n,a=e.theta(Jj(e,t,i,r)),s=un(a+o/2);return o*Math.floor(s/o)}function Jj(e,t,n,i){var r=i.step,o=t.x-e.x,a=t.y-e.y,s=o/n.x,c=a/n.y,l=s*r,u=c*r;return new L(e.x+l,e.y+u)}function x8(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function Kj(e,t,n){var i=n.step;Oe(n.directions).forEach(function(r){r.gridOffsetX=r.offsetX/i*t.x,r.gridOffsetY=r.offsetY/i*t.y})}function Qj(e,t,n){return{source:t.clone(),x:w8(n.x-t.x,e),y:w8(n.y-t.y,e)}}function w8(e,t){if(!e)return t;var n=Math.abs(e),i=Math.round(n/t);if(!i)return n;var r=i*t,o=n-r,a=o/i;return t+a}function eH(e,t){var n=t.source,i=Fr(e.x-n.x,t.x)+n.x,r=Fr(e.y-n.y,t.y)+n.y;return new L(i,r)}function Su(e,t){return e.round(t)}function C0(e,t,n){return Su(eH(e.clone(),t),n)}function _u(e){return e.clone().toString()}function aM(e){return new L(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function tH(e,t,n,i,r,o,a){for(var s=[],c=aM(r.difference(n)),l=_u(n),u=e[l],d;u;){d=t[l];var h=aM(d.difference(u));h.equals(c)||(s.unshift(d),c=h),l=_u(u),u=e[l]}var p=t[l],f=aM(p.difference(i));return f.equals(c)||s.unshift(p),s}function b8(e,t){for(var n=1/0,i=0,r=t.length;i<r;i++){var o=e.manhattanDistance(t[i]);o<n&&(n=o)}return n}function C8(e,t,n,i,r){var o=r.precision,a=r.directionMap,s=e.difference(t.center()),c=Re(a)?Object.keys(a):[],l=Oe(n),u=c.reduce(function(d,h){if(l.includes(h)){for(var p=a[h],f=new L(e.x+p.x*(Math.abs(s.x)+t.width),e.y+p.y*(Math.abs(s.y)+t.height)),g=new oe(e,f),b=g.intersect(t)||[],x=b.length,M,C=null,E=0;E<x;E++){var T=b[E],F=e.squaredDistance(T);(M===void 0||F>M)&&(M=F,C=T)}if(C){var m=C0(C,i,o);t.containsPoint(m)&&(m=C0(m.offset(p.x*i.x,p.y*i.y),i,o)),d.push(m)}}return d},[]);return t.containsPoint(e)||u.push(C0(e,i,o)),u}function nH(e,t,n,i){var r=i.precision,o,a;e instanceof te?o=Su(E8(this,i).clone(),r):o=Su(e.clone(),r),t instanceof te?a=Su(Xj(this,i).clone(),r):a=Su(t.clone(),r);var s=Qj(i.step,o,a),c,l,u,d;if(e instanceof te?(c=o,u=C8(c,e,i.startDirections,s,i)):(c=o,u=[c]),t instanceof te?(l=a,d=C8(a,t,i.endDirections,s,i)):(l=a,d=[l]),u=u.filter(Te=>!n(Te)),d=d.filter(Te=>!n(Te)),u.length>0&&d.length>0){for(var h=new xs,p={},f={},g={},b=0,x=u.length;b<x;b++){var M=u[b],C=_u(M);h.add(C,b8(M,d)),p[C]=M,g[C]=0}var E=i.previousDirectionAngle,T=E===void 0,F,m,k=i.directions;Kj(k,s,i);for(var w=k.length,S=Oe(d).reduce(function(Te,lt){var ze=_u(lt);return Te.push(ze),Te},[]),D=i.maximumLoops;!h.isEmpty()&&D>0;){var R=h.pop(),B=p[R],j=f[R],W=g[R],P=j===void 0,O=B.equals(c),N;P?T?O?N=null:N=oM(c,B,w,s,i):N=E:N=oM(j,B,w,s,i);var z=u.length===d.length;if(z){for(var ye=0;ye<u.length;ye++)if(!u[ye].equals(d[ye])){z=!1;break}}var ve=P&&z;if(!ve&&S.indexOf(R)>=0)return i.previousDirectionAngle=N,tH(f,p,B,c,l,s,i);for(b=0;b<w;b++){F=k[b];var it=F.angle;if(m=x8(N,it),!(!(T&&O)&&m>i.maxAllowedDirectionChange)){var wt=C0(B.clone().offset(F.gridOffsetX,F.gridOffsetY),s,r),pe=_u(wt);if(!(h.isClose(pe)||n(wt))){if(S.indexOf(pe)>=0){var me=wt.equals(l);if(!me){var be=oM(wt,l,w,s,i),ke=x8(it,be);if(ke>i.maxAllowedDirectionChange)continue}}var Me=F.cost,Ne=O?0:i.penalties[m],rt=W+Me+Ne;(!h.isOpen(pe)||rt<g[pe])&&(p[pe]=wt,f[pe]=B,g[pe]=rt,h.add(pe,rt+b8(wt,d)))}}}D--}}return i.fallbackRoute.call(this,c,l,i)}function iH(e){if(e.directions=Je(e,"directions"),e.penalties=Je(e,"penalties"),e.paddingBox=Je(e,"paddingBox"),e.padding=Je(e,"padding"),e.padding){var t=Ni(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}Oe(e.directions).forEach(function(n){var i=new L(0,0),r=new L(n.offsetX,n.offsetY);n.angle=un(i.theta(r))})}function rH(e,t,n){iH(t),n.options.perpendicular=!!t.perpendicular;var i=_8(n,t),r=I8(n,t),o=E8(n,t);let a;if(typeof t.isPointObstacle=="function")a=t.isPointObstacle;else{let C=new sM(t);C.build(n.paper.model,n.model),a=E=>!C.isPointAccessible(E)}for(var s=Oe(e).map(L),c=[],l=o,u,d,h=0,p=s.length;h<=p;h++){var f=null;if(d=u||i,u=s[h],!u){u=r;var g=!n.model.get("source").id||!n.model.get("target").id;if(g&&Be(t.draggingRoute)){var b=d===i?o:d,x=u.origin();f=t.draggingRoute.call(n,b,x,t)}}if(f=f||nH.call(n,d,u,a,t),f===null)return t.fallbackRouter(e,t,n);var M=f[0];M&&M.equals(l)&&f.shift(),l=f[f.length-1]||l,Array.prototype.push.apply(c,f)}return c}var S0=function(e,t,n){return rH(e,ie({},S8,t),n)};var oH={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),n=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:n},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:n},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:n},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:n}]},fallbackRoute:function(e,t,n){var i=e.theta(t),r=[],o={x:t.x,y:e.y},a={x:e.x,y:t.y};if(i%180>90){var s=o;o=a,a=s}var c=i%90<45?o:a,l=new oe(e,c),u=90*Math.ceil(i/90),d=L.fromPolar(l.squaredLength(),Wt(u+135),c),h=new oe(t,d),p=l.intersection(h),f=p||t,g=p?f:e,b=360/n.directions.length,x=g.theta(t),M=un(x+b/2),C=b*Math.floor(M/b);return n.previousDirectionAngle=C,f&&r.push(f.round()),r.push(t),r}},aH=function(e,t,n){if(!Be(S0))throw new Error("Metro requires the manhattan router.");return S0(e,ie({},oH,t),n)};var Q={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},D8=[Q.LEFT,Q.RIGHT,Q.TOP,Q.BOTTOM],xo={[Q.LEFT]:Q.RIGHT,[Q.RIGHT]:Q.LEFT,[Q.TOP]:Q.BOTTOM,[Q.BOTTOM]:Q.TOP},sH=[Q.TOP,Q.BOTTOM],ua={0:Q.RIGHT,180:Q.LEFT,270:Q.TOP,90:Q.BOTTOM};function Ur(e){return e.angle()}function nl(e){return new et(e).simplify({threshold:1}).points}function Iu(e,t){let{point:n,x0:i,y0:r,view:o,bbox:a,direction:s}=e,{point:c,x0:l,y0:u,view:d,bbox:h,direction:p}=t,f;if(o)o.model.isLink()?f=T8(c,n,o):s===Q.ANCHOR_SIDE?f=a.sideNearestToPoint(n):s===Q.MAGNET_SIDE?f=o.model.getBBox().sideNearestToPoint(n):f=s;else{let b=new te(i,r,0,0);f=D8.includes(s)?s:b.sideNearestToPoint(c)}let g;if(d)d.model.isLink()?g=T8(n,c,d):p===Q.ANCHOR_SIDE?g=h.sideNearestToPoint(c):p===Q.MAGNET_SIDE?g=d.model.getBBox().sideNearestToPoint(c):g=p;else{let b=new te(l,u,0,0);g=D8.includes(p)?p:b.sideNearestToPoint(n)}return[f,g]}function cH(e,t,n){let{x0:i,y0:r,width:o,height:a,point:s,margin:c}=e,l=i+o,u=r+a,d=i-c,h=l+c,p=r-c,{x:f}=s,{x0:g,y0:b}=t;return g===f&&b<r?Q.BOTTOM:g<f&&b<p?n.point.x===f?Q.BOTTOM:Q.RIGHT:g>f&&b<p?n.point.x===f?Q.BOTTOM:Q.LEFT:g<d&&b>p||g>h&&b>p?Q.TOP:g>=d&&g<=f&&b>u||g<=h&&g>=f&&b>u?n.point.x<g?Q.RIGHT:Q.LEFT:Q.BOTTOM}function lH(e,t,n){let{x0:i,y0:r,width:o,height:a,point:s,margin:c}=e,l=i+o,u=r+a,d=i-c,h=l+c,p=u+c,{x:f}=s,{x0:g,y0:b}=t;return g===f&&b>u?Q.TOP:g<f&&b>p?n.point.x===f?Q.TOP:Q.RIGHT:g>f&&b>p?n.point.x===f?Q.TOP:Q.LEFT:g<d&&b<p||g>h&&b<p?Q.BOTTOM:g>=d&&g<=f&&b<r||g<=h&&g>=f&&b<r?n.point.x<g?Q.RIGHT:Q.LEFT:Q.TOP}function dH(e,t,n){let{y0:i,x0:r,width:o,height:a,point:s,margin:c}=e,l=r+o,u=i+a,d=r-c,h=i-c,p=u+c,{x:f,y:g}=s,{x0:b,y0:x}=t;return b<f&&x===g?Q.RIGHT:b<=d&&x<g?Q.BOTTOM:b<=d&&x>g?Q.TOP:b>=d&&x<h||b>=d&&x>p?Q.LEFT:b>l&&x>=h&&x<=g||b>l&&x<=p&&x>=g?n.point.y<x?Q.BOTTOM:Q.TOP:Q.RIGHT}function uH(e,t,n){let{y0:i,x0:r,width:o,height:a,point:s,margin:c}=e,l=r+o,u=i+a,d=l+c,h=i-c,p=u+c,{x:f,y:g}=s,{x0:b,y0:x}=t;return b>f&&x===g?Q.LEFT:b>=d&&x<g?Q.BOTTOM:b>=d&&x>g?Q.TOP:b<=d&&x<h||b<=d&&x>p?Q.RIGHT:b<r&&x>=h&&x<=g||b<r&&x<=p&&x>=g?n.point.y<x?Q.BOTTOM:Q.TOP:Q.LEFT}function hH(e,t,n){let[i]=Iu(e,t);switch(i){case Q.TOP:return cH(e,t,n);case Q.RIGHT:return uH(e,t,n);case Q.BOTTOM:return lH(e,t,n);case Q.LEFT:return dH(e,t,n)}}function T8(e,t,n){let i=n.getTangentAtLength(n.getClosestPointLength(t)),r=Math.round(Ur(i)/90)*90;if(r%180===0&&e.y===t.y)return e.x<t.x?Q.LEFT:Q.RIGHT;if(e.x===t.x)return e.y<t.y?Q.TOP:Q.BOTTOM;switch(r){case 0:case 180:case 360:return e.y<t.y?Q.TOP:Q.BOTTOM;case 90:case 270:return e.x<t.x?Q.LEFT:Q.RIGHT}}function P8(e,t,n,i,r,o,a){i===Q.AUTO&&(i=r?Q.MAGNET_SIDE:Q.ANCHOR_SIDE);let s=e&&e.model.isElement(),{x:c,y:l,width:u=0,height:d=0}=s?te.fromRectUnion(n,e.model.getBBox()):o;return{point:t,x0:c,y0:l,view:e,bbox:n,width:u,height:d,direction:i,margin:s?a:0}}function pH({x:e,y:t}){let n=new L(e,t);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new te(e,t,0,0),width:0,height:0,direction:null,margin:0}}function _0(e,t,n){let i=t.point.clone(),{x0:r,y0:o,width:a,height:s}=t;switch(e){case"left":i.x=r-n;break;case"right":i.x=r+a+n;break;case"top":i.y=o-n;break;case"bottom":i.y=o+s+n;break}return i}function cM(e,t,{dx:n=0,dy:i=0}){let r={x:e.point.x+n,y:e.point.y+i},o={x:t.point.x+n,y:t.point.y+i};return[e.point,r,o,t.point]}function A8(e,t,n,i){let r=un(n-90),o=0,a=0;r===90?a=-i:r===180?o=-i:r===270?a=i:r===0&&(o=i);let s=cM(e,t,{dx:o,dy:a}),c=s[2],l=new oe(t.point,c),u=ua[Ur(l)];return{loopRoute:s,continueDirection:u}}function fH(e,t){let{x0:n,x1:i,outsidePoint:r}=e,{x0:o,x1:a,outsidePoint:s}=t,c=Math.min(n,o),l=Math.max(i,a);if(e.direction===t.direction){let M=e.y0<t.y0?e:t,C=M===e?t:e,E=e.direction===Q.TOP?M:C;c=E.x0,l=E.x1}let{x:u}=r,{x:d}=s,h=Math.abs(u-c),p=Math.abs(d-c),f=h+p,g=Math.abs(u-l),b=Math.abs(d-l),x=g+b;return[f,x]}function mH(e,t){let{y0:n,y1:i,outsidePoint:r}=e,{y0:o,y1:a,outsidePoint:s}=t,c=Math.min(n,o),l=Math.max(i,a);if(e.direction===t.direction){let M=e.x0<t.x0?e:t,C=M===e?t:e,E=e.direction===Q.LEFT?M:C;c=E.y0,l=E.y1}let{y:u}=r,{y:d}=s,h=Math.abs(u-c),p=Math.abs(d-c),f=h+p,g=Math.abs(u-l),b=Math.abs(d-l),x=g+b;return[f,x]}function L8(e,t,n){switch(t){case Q.LEFT:e.inflate(0,n).moveAndExpand({x:-n,width:n});break;case Q.RIGHT:e.inflate(0,n).moveAndExpand({width:n});break;case Q.TOP:e.inflate(n,0).moveAndExpand({y:-n,height:n});break;case Q.BOTTOM:e.inflate(n,0).moveAndExpand({height:n});break}return e}function da(e,t,n={}){let{point:i,x0:r,y0:o,width:a,height:s,margin:c}=e,{point:l,x0:u,y0:d,width:h,height:p,margin:f}=t,{targetInSourceBBox:g=!1}=n,b=u+h,x=d+p,M=r+a,C=o+s,E=r-c,T=M+c,F=o-c,m=C+c,k=u-f,w=b+f,S=d-f,D=x+f,[R,B]=Iu(e,t),j=_0(R,{point:i,x0:r,y0:o,width:a,height:s},c),W=_0(B,{point:l,x0:u,y0:d,width:h,height:p},f),{x:P,y:O}=j,{x:N,y:z}=W,ye=(u+b)/2,ve=(d+x)/2,it=(r+M)/2,wt=(o+C)/2,pe=(it<ye?M+u:b+r)/2,me=(wt<ve?C+d:x+o)/2,be=new te(r,o,a,s),ke=new te(u,d,h,p),Me=be.clone().inflate(c),Ne=ke.clone().inflate(f),rt=Object.assign({},e,{x1:M,y1:C,outsidePoint:j,direction:R}),Te=Object.assign({},t,{x1:b,y1:x,outsidePoint:W,direction:B}),[lt,ze]=fH(rt,Te),[Pe,Ye]=mH(rt,Te);if(R==="left"&&B==="right"){let de=Me.containsPoint(W),$=Ne.containsPoint(j);if(de||$){let J=(O+z)/2;return[{x:P,y:O},{x:P,y:J},{x:N,y:J},{x:N,y:z}]}if(E<N){let J=me,xe=P,It=N,vt=Pe<Ye;return(J>=F&&J<=m||J>=S&&J<=D)&&(m>=S&&vt?J=Math.min(S,F):F<=D&&!vt&&(J=Math.max(D,m)),xe=Math.min(P,k),It=Math.max(N,T),vt&&O<d||!vt&&O>x?xe=P:(vt&&z<o||!vt&&z>C)&&(It=N)),[{x:xe,y:O},{x:xe,y:J},{x:It,y:J},{x:It,y:z}]}let K=(P+N)/2;return[{x:K,y:O},{x:K,y:z}]}else if(R==="right"&&B==="left"){let de=Me.containsPoint(W),$=Ne.containsPoint(j);if(de||$){let J=(O+z)/2;return[{x:P,y:O},{x:P,y:J},{x:N,y:J},{x:N,y:z}]}if(T>N){let J=me,xe=P,It=N,vt=Pe<Ye;return(J>=F&&J<=m||J>=S&&J<=D)&&(m>=S&&vt?J=Math.min(S,F):F<=D&&!vt&&(J=Math.max(D,m)),xe=Math.max(P,w),It=Math.min(N,E),vt&&O<d||!vt&&O>x?xe=P:(vt&&z<o||!vt&&z>C)&&(It=N)),[{x:xe,y:O},{x:xe,y:J},{x:It,y:J},{x:It,y:z}]}let K=(P+N)/2;return[{x:K,y:O},{x:K,y:z}]}else if(R==="top"&&B==="bottom"){let de=Me.containsPoint(W),$=Ne.containsPoint(j);if(de||$){let J=(P+N)/2;return[{x:P,y:O},{x:J,y:O},{x:J,y:z},{x:N,y:z}]}if(F<z){let J=pe,xe=O,It=z,vt=lt<ze;return(J>=E&&J<=T||J>=k&&J<=w)&&(T>=k&&vt?J=Math.min(k,E):E<=w&&!vt&&(J=Math.max(w,T)),xe=Math.min(O,S),It=Math.max(z,m),vt&&P<u||!vt&&P>b?xe=O:(vt&&N<r||!vt&&N>M)&&(It=z)),[{x:P,y:xe},{x:J,y:xe},{x:J,y:It},{x:N,y:It}]}let K=(O+z)/2;return[{x:P,y:K},{x:N,y:K}]}else if(R==="bottom"&&B==="top"){let de=Me.containsPoint(W),$=Ne.containsPoint(j);if(de||$){let J=(P+N)/2;return[{x:P,y:O},{x:J,y:O},{x:J,y:z},{x:N,y:z}]}if(m>z){let J=pe,xe=O,It=z,vt=lt<ze;return(J>=E&&J<=T||J>=k&&J<=w)&&(T>=k&&vt?J=Math.min(k,E):E<=w&&!vt&&(J=Math.max(w,T)),xe=Math.max(O,D),It=Math.min(z,F),vt&&P<u||!vt&&P>b?xe=O:(vt&&N<r||!vt&&N>M)&&(It=z)),[{x:P,y:xe},{x:J,y:xe},{x:J,y:It},{x:N,y:It}]}let K=(O+z)/2;return[{x:P,y:K},{x:N,y:K}]}else if(R==="top"&&B==="top"){if((g||Br.rectWithRect(Me,ke)||O<=d&&(Me.bottomRight().x<=N||Me.bottomLeft().x>=N)||O>=d&&(Ne.bottomRight().x<=P||Ne.bottomLeft().x>=P))&&P!==N)return[{x:P,y:Math.min(O,z)},{x:N,y:Math.min(O,z)}];let $,K=Math.min((C+d)/2,z),J=Math.min((o+x)/2,O);return z<O?ze>lt?$=Math.min(P,k):$=Math.max(P,w):ze>lt?$=Math.min(N,E):$=Math.max(N,T),[{x:P,y:J},{x:$,y:J},{x:$,y:K},{x:N,y:K}]}else if(R==="bottom"&&B==="bottom"){if((g||Br.rectWithRect(Me,ke)||O>=z&&(Me.topRight().x<=N||Me.topLeft().x>=N)||O<=z&&(Ne.topRight().x<=P||Ne.topLeft().x>=P))&&P!==N)return[{x:P,y:Math.max(O,z)},{x:N,y:Math.max(O,z)}];let $,K=Math.max((o+x)/2,z),J=Math.max((C+d)/2,O);return z>O?ze>lt?$=Math.min(P,k):$=Math.max(P,w):ze>lt?$=Math.min(N,E):$=Math.max(N,T),[{x:P,y:J},{x:$,y:J},{x:$,y:K},{x:N,y:K}]}else if(R==="left"&&B==="left"){if((g||Br.rectWithRect(Me,ke)||P<=N&&(Me.bottomRight().y<=z||Me.topRight().y>=z)||P>=N&&(Ne.bottomRight().y<=O||Ne.topRight().y>=O))&&O!==z)return[{x:Math.min(P,N),y:O},{x:Math.min(P,N),y:z}];let $,K=Math.min((M+u)/2,N),J=Math.min((r+b)/2,P);return N>P?Pe<=Ye?$=Math.min(F,z):$=Math.max(m,z):Pe<=Ye?$=Math.min(S,O):$=Math.max(D,O),[{x:J,y:O},{x:J,y:$},{x:K,y:$},{x:K,y:z}]}else if(R==="right"&&B==="right"){if((g||Br.rectWithRect(Me,ke)||P>=N&&(Me.bottomLeft().y<=z||Me.topLeft().y>=z)||P<=N&&(Ne.bottomLeft().y<=O||Ne.topLeft().y>=O))&&O!==z)return[{x:Math.max(P,N),y:O},{x:Math.max(P,N),y:z}];let $,K=Math.max((r+b)/2,N),J=Math.max((M+u)/2,P);return N<=P?Pe<=Ye?$=Math.min(F,z):$=Math.max(m,z):Pe<=Ye?$=Math.min(S,O):$=Math.max(D,O),[{x:J,y:O},{x:J,y:$},{x:K,y:$},{x:K,y:z}]}else if(R==="top"&&B==="right"){if(Me.containsPoint(l)){if(P<=w){let J=Math.max(P+c,N),xe=Math.min(F,S);return[{x:P,y:xe},{x:J,y:xe},{x:J,y:z}]}let K=(P-c+N)/2;return[{x:P,y:O},{x:K,y:O},{x:K,y:z}]}if(F>z){if(P<N){let K=S;return D<=F&&w>=P&&(K=me),[{x:P,y:K},{x:N,y:K},{x:N,y:z}]}return[{x:P,y:z}]}let $=Math.max(pe,w);if(P>N&&C>=z)return[{x:P,y:O},{x:$,y:O},{x:$,y:z}];if($>E&&O<x){let K=Math.min(F,S),J=Math.max(T,w);return[{x:P,y:K},{x:J,y:K},{x:J,y:z}]}return[{x:P,y:O},{x:$,y:O},{x:$,y:z}]}else if(R==="top"&&B==="left"){if(Me.containsPoint(l)){if(P>=k){let J=Math.min(P-c,N),xe=Math.min(F,S);return[{x:P,y:xe},{x:J,y:xe},{x:J,y:z}]}let K=(P+c+N)/2;return[{x:P,y:O},{x:K,y:O},{x:K,y:z}]}if(F>z){if(P>N){let K=S;return D<=F&&k<=P&&(K=me),[{x:P,y:K},{x:N,y:K},{x:N,y:z}]}return[{x:P,y:z}]}let $=Math.min(k,pe);if(P<N&&C>=z)return[{x:P,y:O},{x:$,y:O},{x:$,y:z}];if($<T&&O<x){let K=Math.min(F,S),J=Math.min(E,k);return[{x:P,y:K},{x:J,y:K},{x:J,y:z}]}return[{x:P,y:O},{x:$,y:O},{x:$,y:z}]}else if(R==="bottom"&&B==="right"){if(Me.containsPoint(l)){if(P<=w){let J=Math.max(P+c,N),xe=Math.max(m,D);return[{x:P,y:xe},{x:J,y:xe},{x:J,y:z}]}let K=(P-c+N)/2;return[{x:P,y:O},{x:K,y:O},{x:K,y:z}]}if(m<z){if(P<N){let K=D;return S>=m&&w>=P&&(K=me),[{x:P,y:K},{x:N,y:K},{x:N,y:z}]}return[{x:P,y:z}]}let $=Math.max(pe,w);if(P>N&&o<=z)return[{x:P,y:O},{x:$,y:O},{x:$,y:z}];if($>E&&O>d){let K=Math.max(m,D),J=Math.max(T,w);return[{x:P,y:K},{x:J,y:K},{x:J,y:z}]}return[{x:P,y:O},{x:$,y:O},{x:$,y:z}]}else if(R==="bottom"&&B==="left"){if(Me.containsPoint(l)){if(P>=k){let J=Math.min(P-c,N),xe=Math.max(m,D);return[{x:P,y:xe},{x:J,y:xe},{x:J,y:z}]}let K=(P+c+N)/2;return[{x:P,y:O},{x:K,y:O},{x:K,y:z}]}if(m<z){if(P>N){let K=D;return S>=m&&k<=P&&(K=me),[{x:P,y:K},{x:N,y:K},{x:N,y:z}]}return[{x:P,y:z}]}let $=Math.min(k,pe);if(P<N&&o<=z)return[{x:P,y:O},{x:$,y:O},{x:$,y:z}];if($<T&&O>d){let K=Math.max(m,D),J=Math.min(E,k);return[{x:P,y:K},{x:J,y:K},{x:J,y:z}]}return[{x:P,y:O},{x:$,y:O},{x:$,y:z}]}else if(R==="left"&&B==="bottom"){if(Me.containsPoint(l)){if(O<=D){let J=Math.min(E,k),xe=Math.max(O+c,z);return[{x:J,y:O},{x:J,y:xe},{x:N,y:xe}]}let K=(O-c+z)/2;return[{x:P,y:O},{x:P,y:K},{x:N,y:K}]}if(E>N){if(O<z){let K=k;return w<=E&&D>=O&&(K=pe),[{x:K,y:O},{x:K,y:z},{x:N,y:z}]}return[{x:N,y:O}]}let $=Math.max(D,me);if(O>z&&M>=N)return[{x:P,y:O},{x:P,y:$},{x:N,y:$}];if($>F&&P<b){let K=Math.min(E,k),J=Math.max(m,D);return[{x:K,y:O},{x:K,y:J},{x:N,y:J}]}return[{x:P,y:O},{x:P,y:$},{x:N,y:$}]}else if(R==="left"&&B==="top"){if(Me.containsPoint(l)){if(O>=S){let J=Math.min(O-c,z),xe=Math.min(E,k);return[{x:xe,y:O},{x:xe,y:J},{x:N,y:J}]}let K=(O+c+z)/2;return[{x:P,y:O},{x:P,y:K},{x:N,y:K}]}if(E>N){if(O>z){let K=k;return w<=E&&S<=O&&(K=pe),[{x:K,y:O},{x:K,y:z},{x:N,y:z}]}return[{x:N,y:O}]}let $=Math.min(S,me);if(O<z&&M>=N)return[{x:P,y:O},{x:P,y:$},{x:N,y:$}];if($<m&&P<b){let K=Math.min(E,k),J=Math.min(F,S);return[{x:K,y:O},{x:K,y:J},{x:N,y:J}]}return[{x:P,y:O},{x:P,y:$},{x:N,y:$}]}else if(R==="right"&&B==="top"){if(Me.containsPoint(l)){if(O>=S){let J=Math.max(T,w),xe=Math.min(O-c,z);return[{x:J,y:O},{x:J,y:xe},{x:N,y:xe}]}let K=(O+c+z)/2;return[{x:P,y:O},{x:P,y:K},{x:N,y:K}]}if(T<N){if(O>z){let K=w;return k>=T&&S<=O&&(K=pe),[{x:K,y:O},{x:K,y:z},{x:N,y:z}]}return[{x:N,y:O}]}let $=Math.min(S,me);if(O<z&&r<=N)return[{x:P,y:O},{x:P,y:$},{x:N,y:$}];if($<m&&P>u){let K=Math.max(T,w),J=Math.min(F,S);return[{x:K,y:O},{x:K,y:J},{x:N,y:J}]}return[{x:P,y:O},{x:P,y:$},{x:N,y:$}]}else if(R==="right"&&B==="bottom"){if(Me.containsPoint(l)){if(O<=D){let J=Math.max(T,w),xe=Math.max(O+c,z);return[{x:J,y:O},{x:J,y:xe},{x:N,y:xe}]}let K=(O-c+z)/2;return[{x:P,y:O},{x:P,y:K},{x:N,y:K}]}if(T<N){if(O<z){let K=w;return k>=T&&D>=O&&(K=pe),[{x:K,y:O},{x:K,y:z},{x:N,y:z}]}return[{x:N,y:O}]}let $=Math.max(D,me);if(O>z&&r<=N)return[{x:P,y:O},{x:P,y:$},{x:N,y:$}];if($>F&&P>u){let K=Math.max(T,w),J=Math.max(m,D);return[{x:K,y:O},{x:K,y:J},{x:N,y:J}]}return[{x:P,y:O},{x:P,y:$},{x:N,y:$}]}}function O8(e,t,n){let i=e===Q.LEFT||e===Q.RIGHT,r=0,o=0;switch(un(Math.round(t))){case 0:case 90:r=i?0:n,o=i?n:0;break;case 180:case 270:r=i?0:-n,o=i?-n:0;break}return{dx:r,dy:o}}function N8(e,t,n){let{sourceDirection:i=Q.AUTO,targetDirection:r=Q.AUTO}=t,o=t.margin||20,a=t.useVertices||!1,s=!!n.model.source().port,c=P8(n.sourceView,n.sourceAnchor,n.sourceBBox,i,s,n.sourceAnchor,o),l=!!n.model.target().port,u=P8(n.targetView,n.targetAnchor,n.targetBBox,r,l,n.targetAnchor,o),d=[];if(!a||e.length===0)return nl(da(c,u));let h=e.map(C=>pH(C)),[p]=h,[f]=Iu(c,p),g=c.view&&c.view.model.isElement(),b=g?L8(c.view.model.getBBox(),f,o):null,x=g?b.containsPoint(p.point):!1;if(x){let C=_0(f,c,o),E=C.equals(p.point),T=c.point.x===p.point.x,F=c.point.y===p.point.y,m=T&&(f===Q.TOP||f===Q.BOTTOM),k=F&&(f===Q.LEFT||f===Q.RIGHT),w=new oe(c.point,C),S=w.containsPoint(p.point),D=x&&(k||m);if(E)d.push(c.point,p.point),p.direction=xo[f];else if(S||D){let R=Ur(S?w:new oe(c.point,p.point)),{dx:B,dy:j}=O8(f,R,o),W=cM({point:C},p,{dx:B,dy:j}),P=W[2],O=new oe(p.point,P),N=ua[Ur(O)];p.direction=N,d.push(...W)}else p.direction=f,p.margin=o,d.push(...da(c,p,{targetInSourceBBox:!0}),p.point)}else{let C=h[1]||u,E=hH(c,p,C);p.direction=E,d.push(...da(c,p),p.point)}for(let C=0;C<h.length-1;C++){let E=h[C],T=h[C+1],F=new oe(E.point,T.point),m=Ur(F);if(m%90===0){let S=ua[m],D=nl([...d,E.point]),R=new oe(D[D.length-2],D[D.length-1]),B=ua[Math.round(Ur(R))];if(S!==xo[B]){d.push(E.point,T.point);let[,j]=Iu(E,T);T.direction=j}else{let{loopRoute:j,continueDirection:W}=A8(E,T,m,o);T.direction=W,d.push(...j)}continue}let[k,w]=R8(E,T);E.direction=k,T.direction=w,d.push(...da(E,T),T.point)}let M=h[h.length-1];if(u.view&&u.view.model.isElement()){let[,C]=Iu(M,u),E=_0(C,u,o),T=nl([...d,M.point]),F=new oe(T[T.length-2],T[T.length-1]),m=Math.round(Ur(F)),k=ua[m],w=E.equals(M.point);if(!w||w&&k===C){M.direction=k;let S=da(M,u),[D,R]=nl([...S,u.point]),B=new oe(D,R),j=Math.round(Ur(B)),W=ua[j],P=L8(u.view.model.getBBox(),C,o),O=M.point.x===u.point.x,N=M.point.y===u.point.y,z=P.containsPoint(M.point),ye=O&&(C===Q.TOP||C===Q.BOTTOM),ve=N&&(C===Q.LEFT||C===Q.RIGHT);if(!w&&z&&(ve||ye)){let{dx:it,dy:wt}=O8(C,m,o);S=cM(M,{point:E},{dx:it,dy:wt})}else z&&C!==xo[k]?(M.margin=o,M.direction=C,S=da(M,u)):W!==k&&k===xo[W]&&(M.margin=o,S=da(M,u));d.push(...S)}}else{let C=M,E=u,T=new oe(C.point,E.point),F=Ur(T);if(F%90===0){let m=ua[F],k=nl(d),w=new oe(k[k.length-2],C.point),S=ua[Math.round(Ur(w))];if(m!==xo[S])d.push(C.point);else{let{loopRoute:D}=A8(C,E,F,o);D.pop(),d.push(...D)}}else{let[m,k]=R8(C,E);C.direction=m,E.direction=k,d.push(...da(C,E))}}return nl(d)}function R8(e,t){let n=e.direction,i=sH.includes(n),r=e.direction,o=t.direction;if(i){let a=e.point.y>t.point.y,s=t.point.x-e.point.x;n===Q.BOTTOM?(r=a?xo[n]:s>=0?Q.RIGHT:Q.LEFT,s>0?o=a?Q.LEFT:Q.TOP:s<0&&(o=a?Q.RIGHT:Q.TOP)):(r=a?s>=0?Q.RIGHT:Q.LEFT:xo[n],s>0?o=a?Q.BOTTOM:Q.LEFT:s<0&&(o=a?Q.BOTTOM:Q.RIGHT))}else{let a=e.point.x>t.point.x,s=t.point.y-e.point.y;n===Q.RIGHT?(r=a?xo[n]:s>=0?Q.BOTTOM:Q.TOP,s>0?o=a?Q.TOP:Q.LEFT:s<0&&(o=a?Q.BOTTOM:Q.LEFT)):(r=a?s>=0?Q.BOTTOM:Q.TOP:xo[n],s>0?o=a?Q.RIGHT:Q.TOP:s<0&&(o=a?Q.RIGHT:Q.BOTTOM))}return[r,o]}N8.Directions=Q;var gH=N8;var D0={};Un(D0,{bottom:()=>IH,bottomLeft:()=>AH,bottomRight:()=>LH,center:()=>SH,left:()=>EH,midSide:()=>RH,modelCenter:()=>NH,perpendicular:()=>OH,right:()=>DH,top:()=>_H,topLeft:()=>TH,topRight:()=>PH});var E0={};Un(E0,{connectionClosest:()=>V8,connectionLength:()=>vH,connectionPerpendicular:()=>xH,connectionRatio:()=>yH,resolveRef:()=>il});function yH(e,t,n,i){var r="ratio"in i?i.ratio:.5;return e.getPointAtRatio(r)}function vH(e,t,n,i){var r="length"in i?i.length:20;return e.getPointAtLength(r)}function kH(e,t,n,i){var r=1e6,o=e.getConnection(),a=e.getConnectionSubdivisions(),s=new oe(n.clone().offset(0,r),n.clone().offset(0,-r)),c=new oe(n.clone().offset(r,0),n.clone().offset(-r,0)),l=s.intersect(o,{segmentSubdivisions:a}),u=c.intersect(o,{segmentSubdivisions:a}),d=[];return l&&Array.prototype.push.apply(d,l),u&&Array.prototype.push.apply(d,u),d.length>0?n.chooseClosest(d):"fallbackAt"in i?F8(e,i.fallbackAt):V8(e,t,n,i)}function MH(e,t,n,i){var r=e.getClosestPoint(n);return r||new L}function il(e){return function(t,n,i,r){if(i instanceof Element){var o=this.paper.findView(i),a;if(o)if(o.isNodeConnection(i)){var s="fixedAt"in r?r.fixedAt:"50%";a=F8(o,s)}else a=o.getNodeBBox(i).center();else a=new L;return e.call(this,t,n,a,r)}return e.apply(this,arguments)}}function F8(e,t){var n=parseFloat(t);return Yt(t)?e.getPointAtRatio(n/100):e.getPointAtLength(n)}var xH=il(kH),V8=il(MH);function wo(e){return function(t,n,i,r){var o=!!r.rotate,a=o?t.getNodeUnrotatedBBox(n):t.getNodeBBox(n),s=a[e](),c=r.dx;if(c){var l=Yt(c);c=parseFloat(c),isFinite(c)&&(l&&(c/=100,c*=a.width),s.x+=c)}var u=r.dy;if(u){var d=Yt(u);u=parseFloat(u),isFinite(u)&&(d&&(u/=100,u*=a.height),s.y+=u)}return o?s.rotate(t.model.getBBox().center(),-t.model.angle()):s}}function wH(e,t,n,i){var r=e.model.angle(),o=e.getNodeBBox(t),a=o.center(),s=o.origin(),c=o.corner(),l=i.padding;if(isFinite(l)||(l=0),s.y+l<=n.y&&n.y<=c.y-l){var u=n.y-a.y;a.x+=r===0||r===180?0:u*1/Math.tan(Wt(r)),a.y+=u}else if(s.x+l<=n.x&&n.x<=c.x-l){var d=n.x-a.x;a.y+=r===90||r===270?0:d*Math.tan(Wt(r)),a.x+=d}return a}function bH(e,t,n,i){var r=!!i.rotate,o,a,s;r?(o=e.getNodeUnrotatedBBox(t),s=e.model.getBBox().center(),a=e.model.angle()):o=e.getNodeBBox(t);var c=i.padding;isFinite(c)&&o.inflate(c),r&&n.rotate(s,a);var l=o.sideNearestToPoint(n),u;switch(l){case"left":u=o.leftMiddle();break;case"right":u=o.rightMiddle();break;case"top":u=o.topMiddle();break;case"bottom":u=o.bottomMiddle();break}return r?u.rotate(s,-a):u}function CH(e,t,n,i,r){return e.model.getPointFromConnectedLink(this.model,r).offset(i.dx,i.dy)}var SH=wo("center"),_H=wo("topMiddle"),IH=wo("bottomMiddle"),EH=wo("leftMiddle"),DH=wo("rightMiddle"),TH=wo("origin"),PH=wo("topRight"),AH=wo("bottomLeft"),LH=wo("corner"),OH=il(wH),RH=il(bH),NH=CH;var bo={};Un(bo,{Cell:()=>zn,CellView:()=>je,Element:()=>jn,ElementView:()=>sl,Graph:()=>T0,HighlighterView:()=>Mn,LayersNames:()=>pn,Link:()=>Ms,LinkView:()=>ws,Paper:()=>WH,PaperLayer:()=>rl,ToolView:()=>hM,ToolsView:()=>ZH,attributes:()=>vu});var FH=Mo.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Bn(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){let i=t.collection.cellNamespace,{type:r}=e,o=Hr(i,r,".");if(!o)throw new Error(`dia.Graph: Could not find cell constructor for type: '${r}'. Make sure to add the constructor to 'cellNamespace'.`);return new o(e,t)},_addReference:function(e,t){Mo.prototype._addReference.apply(this,arguments),!t.dry&&!e.graph&&(e.graph=this.graph)},_removeReference:function(e,t){Mo.prototype._removeReference.apply(this,arguments),!t.dry&&e.graph===this.graph&&(e.graph=null)},comparator:function(e){return e.get("z")||0}}),T0=ti.extend({initialize:function(e,t){t=t||{};var n=new FH([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});ti.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:n}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:n}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],n.id&&this._in[n.id]&&this._in[n.id][e.id]&&delete this._in[n.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var n=e.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var n=e.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(e={}){var t=ti.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(e.cellAttributes),t},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,n){var i;return typeof e=="object"?(i=e,n=t):(i={})[e]=t,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,n),i=yr(i,"cells")),ti.prototype.set.call(this,i,n)},clear:function(e){e=ie({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var n=t.sortBy(function(i){return i.isLink()?1:2});do n.shift().remove(e);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e){let t;if(e instanceof ti?t=e.attributes:t=e,!gt(t.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof ti?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=Dk(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(n){this.addCell(n,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var n=Oe(e).map(function(i){return this._prepareCell(i,t)},this);return this.get("cells").reset(n,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),ei(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(e,n):this.removeLinks(e,n)),this.get("cells").remove(e,{silent:!0})},transferCellEmbeds:function(e,t,n={}){let i="transfer-embeds";this.startBatch(i);let r=e.getEmbeddedCells();t.embed(r,ge(ee({},n),{reparent:!0})),this.stopBatch(i)},transferCellConnectedLinks:function(e,t,n={}){let i="transfer-connected-links";this.startBatch(i),this.getConnectedLinks(e,n).forEach(o=>{o.getSourceCell()===e&&o.prop(["source","id"],t.id,n),o.getTargetCell()===e&&o.prop(["target","id"],t.id,n)}),this.stopBatch(i)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").toArray().filter(e=>e.isElement())},getLinks:function(){return this.get("cells").toArray().filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var n=t.indirect,i=t.inbound,r=t.outbound;i===void 0&&r===void 0&&(i=r=!0);var o=[],a={};r&&s(this,e),i&&c(this,e);function s(d,h){if(gi(d.getOutboundEdges(h.id),(function(f,g){if(!a[g]){var b=d.getCell(g);o.push(b),a[g]=!0,n&&(i&&c(d,b),r&&s(d,b))}}).bind(d)),n&&h.isLink()){var p=h.getTargetCell();p&&p.isLink()&&(a[p.id]||(o.push(p),s(d,p)))}}function c(d,h){if(gi(d.getInboundEdges(h.id),(function(f,g){if(!a[g]){var b=d.getCell(g);o.push(b),a[g]=!0,n&&(i&&c(d,b),r&&s(d,b))}}).bind(d)),n&&h.isLink()){var p=h.getSourceCell();p&&p.isLink()&&(a[p.id]||(o.push(p),c(d,p)))}}if(t.deep){var l=e.getEmbeddedCells({deep:!0}),u={};l.forEach(function(d){d.isElement()&&(u[d.id]=!0)}),l.forEach(function(d){d.isLink()||(r&&gi(this.getOutboundEdges(d.id),(function(h,p){if(!a[p]){var f=this.getCell(p),{source:g,target:b}=f.attributes,x=g.id,M=b.id;if(!t.includeEnclosed&&x&&u[x]&&M&&u[M])return;o.push(this.getCell(p)),a[p]=!0}}).bind(this)),i&&gi(this.getInboundEdges(d.id),(function(h,p){if(!a[p]){var f=this.getCell(p),{source:g,target:b}=f.attributes,x=g.id,M=b.id;if(!t.includeEnclosed&&x&&u[x]&&M&&u[M])return;o.push(this.getCell(p)),a[p]=!0}}).bind(this)))},this)}return o},getNeighbors:function(e,t){t||(t={});var n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var r=this.getConnectedLinks(e,t).reduce((function(s,c){var{source:l,target:u}=c.attributes,d=c.hasLoop(t);if(n&&Bn(l,"id")&&!s[l.id]){var h=this.getCell(l.id);h.isElement()&&(d||h&&h!==e&&(!t.deep||!h.isEmbeddedIn(e)))&&(s[l.id]=h)}if(i&&Bn(u,"id")&&!s[u.id]){var p=this.getCell(u.id);p.isElement()&&(d||p&&p!==e&&(!t.deep||!p.isEmbeddedIn(e)))&&(s[u.id]=p)}return s}).bind(this),{});if(e.isLink()){if(n){var o=e.getSourceCell();o&&o.isElement()&&!r[o.id]&&(r[o.id]=o)}if(i){var a=e.getTargetCell();a&&a.isElement()&&!r[a.id]&&(r[a.id]=a)}}return Oe(r)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(n){for(var i=[],r=n.get("parent");r;)i.push(r),r=this.getCell(r).get("parent");return i},this);e=e.sort(function(n,i){return n.length-i.length});var t=Oe(e.shift()).find(function(n){return e.every(function(i){return i.includes(n)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var n=[];return this.search(e,function(i){i!==e&&n.push(i)},ie({},t,{outbound:!0})),n},cloneCells:c0,cloneSubgraph:function(e,t){var n=this.getSubgraph(e,t);return this.cloneCells(n)},getSubgraph:function(e,t){t=t||{};var n=[],i={},r=[],o=[];return Oe(e).forEach(function(a){if(i[a.id]||(n.push(a),i[a.id]=a,a.isLink()?o.push(a):r.push(a)),t.deep){var s=a.getEmbeddedCells({deep:!0});s.forEach(function(c){i[c.id]||(n.push(c),i[c.id]=c,c.isLink()?o.push(c):r.push(c))})}}),o.forEach(function(a){var{source:s,target:c}=a.attributes;if(s.id&&!i[s.id]){var l=this.getCell(s.id);n.push(l),i[l.id]=l,r.push(l)}if(c.id&&!i[c.id]){var u=this.getCell(c.id);n.push(this.getCell(c.id)),i[u.id]=u,r.push(u)}},this),r.forEach(function(a){var s=this.getConnectedLinks(a,t);s.forEach(function(c){var{source:l,target:u}=c.attributes;!i[c.id]&&l.id&&i[l.id]&&u.id&&i[u.id]&&(n.push(c),i[c.id]=c)})},this),n},getPredecessors:function(e,t){t=t||{};var n=[];return this.search(e,function(i){i!==e&&n.push(i)},ie({},t,{inbound:!0})),n},search:function(e,t,n){n=n||{},n.breadthFirst?this.bfs(e,t,n):this.dfs(e,t,n)},bfs:function(e,t,n={}){let i={},r={},o=[];for(o.push(e),r[e.id]=0;o.length>0;){var a=o.shift();if(i[a.id]||(i[a.id]=!0,t.call(this,a,r[a.id])===!1))continue;let s=this.getNeighbors(a,n);for(let c=0,l=s.length;c<l;c++){let u=s[c];r[u.id]=r[a.id]+1,o.push(u)}}},dfs:function(e,t,n={}){let i={},r={},o=[];for(o.push(e),r[e.id]=0;o.length>0;){let a=o.pop();if(i[a.id]||(i[a.id]=!0,t.call(this,a,r[a.id])===!1))continue;let s=this.getNeighbors(a,n),c=o.length;for(let l=0,u=s.length;l<u;l++){let d=s[l];r[d.id]=r[a.id]+1,o.splice(c,0,d)}}},getSources:function(){var e=[];return gi(this._nodes,(function(t,n){(!this._in[n]||Zt(this._in[n]))&&e.push(this.getCell(n))}).bind(this)),e},getSinks:function(){var e=[];return gi(this._nodes,(function(t,n){(!this._out[n]||Zt(this._out[n]))&&e.push(this.getCell(n))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Zt(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Zt(this._out[e.id])},isSuccessor:function(e,t){var n=!1;return this.search(e,function(i){if(i===t&&i!==e)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(e,t){var n=!1;return this.search(e,function(i){if(i===t&&i!==e)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(e,t,n){n=n||{};var i=n.inbound,r=n.outbound;i===void 0&&r===void 0&&(i=r=!0);var o=!1;return this.getConnectedLinks(e,n).forEach(function(a){var{source:s,target:c}=a.attributes;if(i&&Bn(s,"id")&&s.id===t.id||r&&Bn(c,"id")&&c.id===t.id)return o=!0,!1}),o},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(n){n.set(n.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){ei(this.getConnectedLinks(e),"remove",t)},findElementsAtPoint:function(e,t){return this._filterAtPoint(this.getElements(),e,t)},findLinksAtPoint:function(e,t){return this._filterAtPoint(this.getLinks(),e,t)},findCellsAtPoint:function(e,t){return this._filterAtPoint(this.getCells(),e,t)},_filterAtPoint:function(e,t,n={}){return e.filter(i=>i.getBBox({rotate:!0}).containsPoint(t,n))},findElementsInArea:function(e,t={}){return this._filterInArea(this.getElements(),e,t)},findLinksInArea:function(e,t={}){return this._filterInArea(this.getLinks(),e,t)},findCellsInArea:function(e,t={}){return this._filterInArea(this.getCells(),e,t)},_filterInArea:function(e,t,n={}){let i=new te(t),{strict:r=!1}=n,o=r?"containsRect":"intersect";return e.filter(a=>i[o](a.getBBox({rotate:!0})))},findElementsUnderElement:function(e,t){return this._filterCellsUnderElement(this.getElements(),e,t)},findLinksUnderElement:function(e,t){return this._filterCellsUnderElement(this.getLinks(),e,t)},findCellsUnderElement:function(e,t){return this._filterCellsUnderElement(this.getCells(),e,t)},_isValidElementUnderElement:function(e,t){return e.id!==t.id&&!e.isEmbeddedIn(t)},_isValidLinkUnderElement:function(e,t){return e.source().id!==t.id&&e.target().id!==t.id&&!e.isEmbeddedIn(t)},_validateCellsUnderElement:function(e,t){return e.filter(n=>n.isLink()?this._isValidLinkUnderElement(n,t):this._isValidElementUnderElement(n,t))},_getFindUnderElementGeometry:function(e,t="bbox"){let n=e.getBBox({rotate:!0});return t!=="bbox"?ku(n,t):n},_filterCellsUnderElement:function(e,t,n={}){let i=this._getFindUnderElementGeometry(t,n.searchBy),r=i.type===De.Point?this._filterAtPoint(e,i):this._filterInArea(e,i,n);return this._validateCellsUnderElement(r,t)},findModelsInArea:function(e,t){return this.findElementsInArea(e,t)},findModelsFromPoint:function(e){return this.findElementsAtPoint(e)},findModelsUnderElement:function(e,t){return this.findElementsUnderElement(e,t)},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){let{rotate:n=!0}=t;return Oe(e).reduce(function(i,r){let o=r.getBBox({rotate:n});return o?i?i.union(o):o:i},null)},translate:function(e,t,n){var i=this.getCells().filter(function(r){return!r.isEmbedded()});return ei(i,"translate",e,t,n),this},resize:function(e,t,n){return this.resizeCells(e,t,this.getCells(),n)},resizeCells:function(e,t,n,i){var r=this.getCellsBBox(n);if(r){var o=Math.max(e/r.width,0),a=Math.max(t/r.height,0);ei(n,"scale",o,a,r.origin(),i)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",ie({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",ie({},t,{batchName:e}))},hasActiveBatch:function(e){let t=this._batches,n;return arguments.length===0?n=Object.keys(t):Array.isArray(e)?n=e:n=[e],n.some(i=>t[i]>0)}},{validations:{multiLinks:function(e,t){var{source:n,target:i}=t.attributes;if(n.id&&i.id){var r=t.getSourceCell();if(r){var o=e.getConnectedLinks(r,{outbound:!0}),a=o.filter(function(s){var{source:c,target:l}=s.attributes;return c&&c.id===n.id&&(!c.port||c.port===n.port)&&l&&l.id===i.id&&(!l.port||l.port===i.port)});if(a.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:n,target:i}=t.attributes;return n.id&&i.id}}});qE(T0.prototype,["resetCells","addCells","removeCells"],u0.cells);var pn={GRID:"grid",CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},rl=ki.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return vi(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){let{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){let{el:t,pivotNodes:n}=this;e=+e,e||(e=0);let i=n[e];if(i)return i;i=n[e]=document.createComment("z-index:"+(e+1));let r=-1/0;for(let o in n)o=+o,o<e&&o>r&&(r=o,e-1);if(r!==-1/0){let o=n[r];t.insertBefore(i,o.nextSibling)}else t.insertBefore(i,t.firstChild);return i},removePivots:function(){let{el:e,pivotNodes:t}=this;for(let n in t)e.removeChild(t[n]);this.pivotNodes={}}});var VH=["transform","x","y","cx","cy","dx","dy","x1","y1","x2","y2","points","d","r","rx","ry","width","height","stroke-width","font-size"],BH=["r","rx","ry","width","height","stroke-width","font-size"],zH=VH.reduce((e,t)=>(e[t]=!0,e),{}),jH=BH.reduce((e,t)=>(e[t]=!0,e),{});function lM(e,t){let n={};for(let i in e)e.hasOwnProperty(i)&&(n[i]=dM(i,e[i],t));return n}function dM(e,t,n){if(e in zH&&yo(t)){let i=vo(t,n);return e in jH&&(i=Math.max(0,i)),i}return t}var ol={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},HH={TOOLS:"TOOLS"},je=ki.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(n,i,r){e.push("type-"+r.slice(0,i+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},n=0,i,r,o,a=Je(this,"presentationAttributes");for(var s in a)if(a.hasOwnProperty(s)){var c=a[s];for(Array.isArray(c)||(c=[c]),i=0,r=c.length;i<r;i++){o=c[i];var l=e[o];l||(l=e[o]=1<<n++),t[s]|=l}}var u=Je(this,"initFlag");for(Array.isArray(u)||(u=[u]),i=0,r=u.length;i<r;i++)o=u[i],e[o]||(e[o]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var n=0;if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n|=t[e[i]];else n|=t[e];return n},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||oa(this),ki.call(this,e)},initialize:function(){this.setFlags(),ki.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var n=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!n||(t.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(n,t))},requestUpdate:function(e,t){let{paper:n}=this;n&&e>0&&n.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var n=ys(e),i=n.selectors,r=n.groupSelectors;for(var o in r){if(i[o])throw new Error("dia.CellView: ambiguous group selector");i[o]=r[o]}if(t){var a=this.selector;if(i[a])throw new Error("dia.CellView: ambiguous root selector.");i[a]=t}return{fragment:n.fragment,selectors:i}},can:function(e){var t=Be(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Re(t)&&t[e]!==!1||_k(t)&&t!==!1},findBySelector:function(e,t,n){if(!e||e===".")return[t];if(n){var i=n[e];if(i)return Array.isArray(i)?i:[i]}return this.useCSSSelectors?ot(t).find(e).toArray():[]},findNodes:function(e){return this.findBySelector(e,this.el,this.selectors)},findNode:function(e){let[t=null]=this.findNodes(e);return t},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var n=this.model;t=n.getBBox().bbox(n.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){let t=this.getNodeBoundingRect(e),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),i=this.getNodeMatrix(e);return Y.transformRect(t,n.multiply(i))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():Y.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),n=this.getNodeMatrix(e),i=this.getRootTranslateMatrix();return Y.transformRect(t,i.multiply(n))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),n=Y.createSVGMatrix().translate(t.x,t.y);return n},getRootRotateMatrix:function(){var e=Y.createSVGMatrix(),t=this.model,n=t.angle();if(n){var i=t.getBBox(),r=i.width/2,o=i.height/2;e=e.translate(r,o).rotate(n).translate(-r,-o)}return e},_notifyHighlight:function(e,t,n={}){let{el:i}=this,r;if(typeof t=="string"?r=this.findNode(t)||i:[r=i]=this.$(t),n.partial=r!==i,n.type===void 0){let o;switch(!0){case n.embedding:o=ol.EMBEDDING;break;case n.connecting:o=ol.CONNECTING;break;case n.magnetAvailability:o=ol.MAGNET_AVAILABILITY;break;case n.elementAvailability:o=ol.ELEMENT_AVAILABILITY;break;default:o=ol.DEFAULT;break}n.type=o}return this.notify(e,r,n),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){let t=this.el,n=this.$(e)[0];n||(n=t);do{let i=n.getAttribute("magnet"),r=n===t;if((i||r)&&i!=="false")return n;if(r)return;n=n.parentNode}while(n)},findProxyNode:function(e,t){e||(e=this.el);let n=e.getAttribute(`${t}-selector`);if(n){let i=this.findNode(n);if(i)return i}return e},getSelector:function(e,t){var n;if(e===this.el)return typeof t=="string"&&(n=":scope > "+t),n;if(e){var i=Y(e).index()+1;n=e.tagName+":nth-child("+i+")",t&&(n+=" > "+t),n=this.getSelector(e.parentNode,n)}return n},addLinkFromMagnet:function(e,t,n){var i=this.paper,r=i.model,o=i.getDefaultLink(this,e);return o.set({source:this.getLinkEnd(e,t,n,o,"source"),target:{x:t,y:n}}).addTo(r,{async:!1,ui:!0}),o.findView(i)},getLinkEnd:function(e,...t){let n=this.model,i=n.id,r=this.findAttributeNode("port",e),o=e.getAttribute("joint-selector"),a={id:i};if(o!=null&&(a.magnet=o),r!=null){let s=r.getAttribute("port");r.getAttribute("port-id-type")==="number"&&(s=parseInt(s,10)),a.port=s,!n.hasPort(s)&&!o&&(a.selector=this.getSelector(e))}else o==null&&this.el!==e&&(a.selector=this.getSelector(e));return this.customizeLinkEnd(a,e,...t)},customizeLinkEnd:function(e,t,n,i,r,o){let{paper:a}=this,{connectionStrategy:s}=a.options;if(typeof s=="function"){var c=s.call(a,e,this,t,new L(n,i),r,o,a);if(c)return c}return e},getMagnetFromLinkEnd:function(e){var t=e.port,n=e.magnet,i=this.model,r;return t!=null&&i.isElement()&&i.hasPort(t)?r=this.findPortNode(t,n)||this.el:(n||(n=e.selector),!n&&t!=null&&(n='[port="'+t+'"]'),r=this.findNode(n)),this.findProxyNode(r,"magnet")},dragLinkStart:function(e,t,n,i){this.model.startBatch("add-link");let r=this.addLinkFromMagnet(t,n,i);r.notifyPointerdown(e,n,i),r.eventData(e,r.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:r})},dragLink:function(e,t,n){var i=this.eventData(e),r=i.linkView;if(r)r.pointermove(e,t,n);else{var o=this.paper,a=o.options.magnetThreshold,s=this.getEventTarget(e),c=i.targetMagnet;if(a==="onleave"){if(c===s||Y(c).contains(s))return}else if(o.eventData(e).mousemoved<=a)return;this.dragLinkStart(e,c,t,n)}},dragLinkEnd:function(e,t,n){var i=this.eventData(e),r=i.linkView;r&&(r.pointerup(e,t,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Zt(t)||(e instanceof SVGElement?Y(e).attr(t):ot(e).attr(t))},processNodeAttributes:function(e,t){var n,i,r,o,a,s,c,l,u,d=[];let h={};for(n in t)t.hasOwnProperty(n)&&(h[Y.attributeNames[n]]=t[n]);for(n in h)if(h.hasOwnProperty(n))if(i=h[n],r=this.getAttributeDefinition(n),r)if(i===null){let p;if(Be(r.unset)?p=r.unset.call(this,e,h,this):p=r.unset,!p&&gt(r.set)&&(p=r.set),p||(p=n),gt(p)&&p){if(s||(s={}),p in s)continue;s[p]=i}else if(Array.isArray(p)&&p.length>0)for(s||(s={}),o=0,a=p.length;o<a;o++){let f=p[o];f in s||(s[f]=i)}}else!Be(r.qualify)||r.qualify.call(this,i,e,h,this)?(gt(r.set)&&(s||(s={}),s[r.set]=i),d.push(n,r)):(s||(s={}),s[n]=i);else s||(s={}),s[n]=i;for(o=0,a=d.length;o<a;o+=2)n=d[o],r=d[o+1],i=t[n],Be(r.set)&&(c||(c={}),c[n]=i),Be(r.position)&&(l||(l={}),l[n]=i),Be(r.offset)&&(u||(u={}),u[n]=i);return{raw:h,normal:s,set:c,position:l,offset:u}},updateRelativeAttributes:function(e,t,n,i){i||(i={});var r,o,a,s=lM(t.raw||{},n),c=t.normal||{};for(let k in c)c[k]=s[k];var l=t.set,u=t.position,d=t.offset;for(r in l){o=s[r],a=this.getAttributeDefinition(r);var h=a.set.call(this,o,n.clone(),e,s,this);Re(h)?ie(c,h):h!==void 0&&(c[r]=h)}if(e instanceof HTMLElement){this.setNodeAttributes(e,c);return}var p=c.transform,f=Y.transformStringToMatrix(p),g=L(f.e,f.f);p&&(c=yr(c,"transform"),f.e=f.f=0);var b,x,M;if(u||d){var C=this.getNodeScale(e,i.scalableNode);b=C.sx,x=C.sy}var E=!1;for(r in u)o=s[r],a=this.getAttributeDefinition(r),M=a.position.call(this,o,n.clone(),e,s,this),M&&(g.offset(L(M).scale(b,x)),E||(E=!0));this.setNodeAttributes(e,c);var T=!1;if(d){var F=this.getNodeBoundingRect(e);if(F.width>0&&F.height>0){var m=Y.transformRect(F,f).scale(1/b,1/x);for(r in d)o=s[r],a=this.getAttributeDefinition(r),M=a.offset.call(this,o,m,e,s,this),M&&(g.offset(L(M).scale(b,x)),T||(T=!0))}}(p!==void 0||E||T)&&(g.round(1),f.e=g.x,f.f=g.y,e.setAttribute("transform",Y.matrixToTransformString(f)))},getNodeScale:function(e,t){var n,i;if(t&&t.contains(e)){var r=t.scale();n=1/r.sx,i=1/r.sy}else n=1,i=1;return{sx:n,sy:i}},cleanNodesCache:function(){this.metrics={}},cleanNodeCache:function(e){let t=e.id;t&&delete this.metrics[t]},nodeCache:function(e){var t=this.metrics;if(!t)return{};var n=Y.ensureId(e),i=t[n];return i||(i=t[n]={}),i},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=Y(e).getBBox()),new te(t.boundingRect)},getNodeMatrix:function(e){let t=this.nodeCache(e);if(t.magnetMatrix===void 0){let{rotatableNode:n,el:i}=this,r;n&&n.contains(e)?r=n:r=i,t.magnetMatrix=Y(e).getTransformToElement(r)}return Y.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=Y(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,n,i){var r,o,a,s,c={},l=[];for(var u in e)if(e.hasOwnProperty(u)&&(a=e[u],!!yt(a))){var d=n[u]=this.findBySelector(u,t,i);for(r=0,o=d.length;r<o;r++){var h=d[r];s=Y.ensureId(h);var p=i&&i[u]===h,f=c[s];if(f){f.array||(l.push(s),f.array=!0,f.attributes=[f.attributes],f.selectedLength=[f.selectedLength]);var g=f.attributes,b=f.selectedLength;if(p)g.unshift(a),b.unshift(-1);else{var x=du(b,o);g.splice(x,0,a),b.splice(x,0,o)}}else c[s]={attributes:a,selectedLength:p?-1:o,node:h,array:!1}}}for(r=0,o=l.length;r<o;r++)s=l[r],a=c[s],a.attributes=Tt({},...a.attributes.reverse());return c},getEventTarget:function(e,t={}){let{target:n,type:i,clientX:r=0,clientY:o=0}=e;return t.fromPoint||i==="touchmove"||i==="touchend"||"pointerId"in e&&n.hasPointerCapture(e.pointerId)?document.elementFromPoint(r,o):n},updateDOMSubtreeAttributes:function(e,t,n){n||(n={}),n.rootBBox||(n.rootBBox=te()),n.selectors||(n.selectors=this.selectors);var i={},r={},o=[],a=[],s,c,l,u,d,h=n.roAttributes,p=this.findNodesAttributes(h||t,e,i,n.selectors),f=h?this.findNodesAttributes(t,e,i,n.selectors):p;for(var g in p)if(u=p[g],l=u.attributes,c=u.node,d=this.processNodeAttributes(c,l),!d.set&&!d.position&&!d.offset&&!d.raw.ref)this.setNodeAttributes(c,lM(d.normal,n.rootBBox));else{var b=f[g]&&f[g].attributes,x=b&&l.ref===void 0?b.ref:l.ref,M;if(x){if(M=(i[x]||this.findBySelector(x,e,n.selectors))[0],!M)throw new Error('dia.CellView: "'+x+'" reference does not exist.')}else M=null;if(s={node:c,refNode:M,processedAttributes:d,allAttributes:b},M){var C=a.findIndex(function(E){return E.refNode===c});C>-1?a.splice(C,0,s):a.push(s)}else o.push(s)}o.push(...a);for(let E=0,T=o.length;E<T;E++){s=o[E],c=s.node,M=s.refNode;let F=M?Y.ensureId(M):"",m=r[F];m||(m=r[F]=M?Y(M).getBBox({target:UH(c,M)}):n.rootBBox),h?(d=this.processNodeAttributes(c,s.allAttributes),this.mergeProcessedAttributes(d,s.processedAttributes)):d=s.processedAttributes,this.updateRelativeAttributes(c,d,m,n)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),ie(e.set,t.set),ie(e.position,t.position),ie(e.offset,t.offset);var n=e.normal&&e.normal.transform;n!==void 0&&t.normal&&(t.normal.transform=n),e.normal=t.normal},onMount(e){e||(this.mountTools(),Mn.mount(this))},onDetach(){this.unmountTools(),Mn.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){let e=this._toolsView;return e&&e.unmount(),this},mountTools(){let e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Mn.remove(this)},updateHighlighters:function(e=!1){Mn.update(this,null,e)},transformHighlighters:function(){Mn.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){let{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,n){this.notify("cell:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){this.notify("cell:pointerclick",e,t,n)},contextmenu:function(e,t,n){this.notify("cell:contextmenu",e,t,n)},pointerdown:function(e,t,n){let{model:i}=this,{graph:r}=i;r&&(i.startBatch("pointer"),this.eventData(e,{graph:r})),this.notify("cell:pointerdown",e,t,n)},pointermove:function(e,t,n){this.notify("cell:pointermove",e,t,n)},pointerup:function(e,t,n){let{graph:i}=this.eventData(e);this.notify("cell:pointerup",e,t,n),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,n,i){this.notify("cell:mousewheel",e,t,n,i)},onevent:function(e,t,n,i){this.notify(t,e,n,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){let{paper:t,model:n}=this;if(t.isAsync()){if(n.isLink()){let o=n.getSourceElement();if(o){let s=t.findViewByModel(o);s&&(t.dumpView(s),t.checkViewVisibility(s))}let a=n.getTargetElement();if(a){let s=t.findViewByModel(a);s&&(t.dumpView(s),t.checkViewVisibility(s))}}t.dumpView(this),t.checkViewVisibility(this)}let i=this.getEventTarget(e,{fromPoint:!0}),r=t.findView(i);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e},isIntersecting:function(e,t){return Br.exists(e,this.getNodeBBox(this.el),t)},isEnclosedIn:function(e){return e.containsRect(this.getNodeBBox(this.el))},isInArea:function(e,t={}){return t.strict?this.isEnclosedIn(e):this.isIntersecting(e)},isAtPoint:function(e,t){return this.getNodeBBox(this.el).containsPoint(e,t)}},{Flags:HH,Highlighting:ol,addPresentationAttributes:function(e){return Tt({},Je(this.prototype,"presentationAttributes"),e,function(t,n){if(!(!t||!n)&&(typeof t=="string"&&(t=[t]),typeof n=="string"&&(n=[n]),Array.isArray(t)&&Array.isArray(n)))return Oi(t.concat(n))})},evalAttribute:dM});Object.defineProperty(je.prototype,"useCSSSelectors",{get(){let e=this.model.useCSSSelectors;return e!==void 0?e:vr.useCSSSelectors}});function UH(e,t){let n=e;do{if(n.contains(t))return n;n=n.parentNode}while(n);return null}var nt={TOOLS:je.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},al={MOVE:"move",MAGNET:"magnet"},sl=je.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=je.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){je.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[nt.UPDATE],position:[nt.TRANSLATE,nt.TOOLS],size:[nt.RESIZE,nt.PORTS,nt.TOOLS],angle:[nt.ROTATE,nt.TOOLS],markup:[nt.RENDER],ports:[nt.PORTS]},initFlag:[nt.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){let{useCSSSelectors:n}=this;this.hasFlag(e,nt.PORTS)&&(this._removePorts(),this._cleanPortsCache());let i=!1;if(this.hasFlag(e,nt.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),i=!0,e=this.removeFlag(e,[nt.RENDER,nt.UPDATE,nt.RESIZE,nt.TRANSLATE,nt.ROTATE,nt.PORTS,nt.TOOLS]);else{let r=!1;this.hasFlag(e,nt.RESIZE)&&(this.resize(t),r=!0,e=this.removeFlag(e,[nt.RESIZE,nt.UPDATE]),n&&(e=this.removeFlag(e,nt.PORTS))),this.hasFlag(e,nt.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,nt.UPDATE),r=!0,n&&(e=this.removeFlag(e,nt.PORTS))),this.hasFlag(e,nt.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,nt.TRANSLATE),i=!0),this.hasFlag(e,nt.ROTATE)&&(this.rotate(),e=this.removeFlag(e,nt.ROTATE),i=!0),this.hasFlag(e,nt.PORTS)&&(this._renderPorts(),r=!0,e=this.removeFlag(e,nt.PORTS)),r&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(e,nt.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,nt.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache();let{useCSSSelectors:n}=this;n&&this._removePorts();var i=this.model,r=i.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new te(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===r?null:t}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),n=this.selectors=t.selectors;this.rotatableNode=Y(n[this.rotatableSelector])||null,this.scalableNode=Y(n[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(Y(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){let{x:e,y:t}=this.model.position();return`translate(${e},${t})`},getRotateString:function(){let e=this.model.angle();if(!e)return null;let{width:t,height:n}=this.model.size();return`rotate(${e},${t/2},${n/2})`},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,n=t.angle(),i=t.size(),r=this.scalableNode,o=!1;r.node.getElementsByTagName("path").length>0&&(o=!0);var a=r.getBBox({recursive:o}),s=i.width/(a.width||1),c=i.height/(a.height||1);r.attr("transform","scale("+s+","+c+")");var l=this.rotatableNode,u=l&&l.attr("transform");if(u){l.attr("transform",u+" rotate("+-n+","+i.width/2+","+i.height/2+")");var d=r.getBBox({target:this.paper.cells});t.set("position",{x:d.x,y:d.y},ie({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){let t=e.model||this.model,i=(e.paper||this.paper).model,r=e.initialZIndices={},o=t.getEmbeddedCells({deep:!0}),a=i.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...o,...a].forEach(l=>r[l.id]=l.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});let s=i.getElements().reduce((l,u)=>Math.max(l,u.attributes.z||0),0);a.forEach(l=>{l.attributes.z<=s&&l.set("z",s+1,{ui:!0})}),t.stopBatch("to-front");let c=t.parent();c?(i.getCell(c).unembed(t,{ui:!0}),e.initialParentId=c):e.initialParentId=null},processEmbedding:function(e={},t,n,i){let r=e.model||this.model,o=e.paper||this.paper,a=o.model,{findParentBy:s,frontParentOnly:c,validateEmbedding:l}=o.options,u;Be(s)?u=Oe(s.call(a,this,t,n,i)):s==="pointer"?u=a.findElementsAtPoint({x:n,y:i}):u=a.findElementsUnderElement(r,{searchBy:s}),u=u.filter(p=>p instanceof zn&&r.id!==p.id&&!p.isEmbeddedIn(r)),c&&(u=u.slice(-1));let d=null,h=e.candidateEmbedView;for(let p=u.length-1;p>=0;p--){let f=u[p];if(h&&h.model.id==f.id){d=h;break}else{let g=f.findView(o);if(!Be(l)||l.call(o,this,g)){d=g;break}}}d&&d!=h&&(this.clearEmbedding(e),e.candidateEmbedView=d.highlight(d.findProxyNode(null,"container"),{embedding:!0})),!d&&h&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){let t=e.candidateEmbedView,n=e.model||this.model,i=e.paper||this.paper;if(t)t.model.embed(n,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{let{validateUnembedding:r}=i.options,{initialParentId:o}=e;if(o&&typeof r=="function"&&!r.call(i,this)){this._disallowUnembed(e);return}}i.model.getConnectedLinks(n,{deep:!0}).forEach(r=>{r.reparent({ui:!0})})},_disallowUnembed:function(e){let{model:t,whenNotAllowed:n="revert"}=e,i=t||this.model,o=(e.paper||this.paper).model;switch(n){case"remove":{i.remove({ui:!0});break}case"revert":{let{initialParentId:a,initialPosition:s,initialZIndices:c}=e;if(s){let{x:u,y:d}=s;i.position(u,d,{deep:!0,ui:!0})}c&&Object.keys(c).forEach(u=>{let d=o.getCell(u);d&&d.set("z",c[u],{ui:!0})});let l=o.getCell(a);l&&l.embed(i,{ui:!0});break}}},getTargetParentView:function(e){let{candidateEmbedView:t=null}=this.eventData(e);return t},getDelegatedView:function(){for(var e=this,t=e.model,n=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=n.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);let n=e.getAttribute(`${t}-selector`);if(n){let i=this.findAttribute("port",e);if(i){let r=this.findPortNode(i,n);if(r)return r}else{let r=this.findNode(n);if(r)return r}}return e},notifyPointerdown(e,t,n){je.prototype.pointerdown.call(this,e,t,n),this.notify("element:pointerdown",e,t,n)},notifyPointermove(e,t,n){je.prototype.pointermove.call(this,e,t,n),this.notify("element:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("element:pointerup",e,t,n),je.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){je.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){je.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,n)},contextmenu:function(e,t,n){je.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragStart(e,t,n)},pointermove:function(e,t,n){let i=this.eventData(e),{targetMagnet:r,action:o,delegatedView:a}=i;switch(r&&this.magnetpointermove(e,r,t,n),o){case al.MAGNET:this.dragMagnet(e,t,n);break;case al.MOVE:(a||this).drag(e,t,n);default:if(i.preventPointerEvents)break;this.notifyPointermove(e,t,n);break}this.eventData(e,i)},pointerup:function(e,t,n){let i=this.eventData(e),{targetMagnet:r,action:o,delegatedView:a}=i;switch(r&&this.magnetpointerup(e,r,t,n),o){case al.MAGNET:this.dragMagnetEnd(e,t,n);break;case al.MOVE:(a||this).dragEnd(e,t,n);default:if(i.preventPointerEvents)break;this.notifyPointerup(e,t,n)}r&&this.magnetpointerclick(e,r,t,n),this.checkMouseleave(e)},mouseover:function(e){je.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){je.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){je.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){je.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,n,i){je.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,n,i)},onmagnet:function(e,t,n){let{currentTarget:i}=e;this.magnetpointerdown(e,i,t,n),this.eventData(e,{targetMagnet:i}),this.dragMagnetStart(e,t,n)},magnetpointerdown:function(e,t,n,i){this.notify("element:magnet:pointerdown",e,t,n,i)},magnetpointermove:function(e,t,n,i){this.notify("element:magnet:pointermove",e,t,n,i)},magnetpointerup:function(e,t,n,i){this.notify("element:magnet:pointerup",e,t,n,i)},magnetpointerdblclick:function(e,t,n,i){this.notify("element:magnet:pointerdblclick",e,t,n,i)},magnetcontextmenu:function(e,t,n,i){this.notify("element:magnet:contextmenu",e,t,n,i)},dragStart:function(e,t,n){if(this.isDefaultInteractionPrevented(e))return;var i=this.getDelegatedView();if(!i||!i.can("elementMove"))return;this.eventData(e,{action:al.MOVE,delegatedView:i});let r=i.model.position();i.eventData(e,{initialPosition:r,pointerOffset:r.difference(t,n),restrictedArea:this.paper.getRestrictedArea(i,t,n)})},dragMagnetStart:function(e,t,n){let{paper:i}=this,r=e.isPropagationStopped();if(r&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;let{targetMagnet:o=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!i.options.validateMagnet.call(i,this,o,e)){r?this.dragStart(e,t,n):this.pointerdown(e,t,n);return}i.options.magnetThreshold<=0&&this.dragLinkStart(e,o,t,n),this.eventData(e,{action:al.MAGNET})},snapToGrid:function(e,t,n){let i=this.paper.options.gridSize;return{x:Fr(t,i),y:Fr(n,i)}},drag:function(e,t,n){var i=this.paper,r=this.model,o=this.eventData(e),{pointerOffset:a,restrictedArea:s,embedding:c}=o;let{x:l,y:u}=this.snapToGrid(e,t+a.x,n+a.y);r.position(l,u,{restrictedArea:s,deep:!0,ui:!0}),i.options.embeddingMode&&(c||(this.prepareEmbedding(o),c=!0),this.processEmbedding(o,e,t,n)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,n){this.dragLink(e,t,n)},dragEnd:function(e,t,n){var i=this.eventData(e);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(e,t,n){this.dragLinkEnd(e,t,n)},magnetpointerclick:function(e,t,n,i){var r=this.paper;r.eventData(e).mousemoved>r.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,n,i)}},{Flags:nt});ie(sl.prototype,QE);var Ke={TOOLS:je.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LABELS:"LABELS",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},ws=je.extend({className:function(){var e=je.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},_labelCache:null,_labelSelectors:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){je.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Ke.RENDER],attrs:[Ke.UPDATE],router:[Ke.UPDATE],connector:[Ke.CONNECTOR],labels:[Ke.LABELS,Ke.TOOLS],labelMarkup:[Ke.LABELS],vertices:[Ke.UPDATE],source:[Ke.SOURCE,Ke.UPDATE],target:[Ke.TARGET,Ke.UPDATE]},initFlag:[Ke.RENDER,Ke.SOURCE,Ke.TARGET,Ke.TOOLS],UPDATE_PRIORITY:1,EPSILON:1e-6,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,Ke.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Ke.SOURCE)}if(this.hasFlag(e,Ke.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Ke.TARGET)}let{paper:n,sourceView:i,targetView:r}=this;if(n&&(i&&!n.isViewMounted(i)||r&&!n.isViewMounted(r)))return e;if(this.hasFlag(e,Ke.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[Ke.RENDER,Ke.UPDATE,Ke.LABELS,Ke.TOOLS,Ke.CONNECTOR]),xu.test("isSafari")&&this.__fixSafariBug268376(),e;let o=!1,{model:a}=this,{attributes:s}=a,c=this.hasFlag(e,Ke.LABELS);c&&(this.onLabelsChange(a,s.labels,t),e=this.removeFlag(e,Ke.LABELS),o=!0);let l=this.hasFlag(e,Ke.UPDATE),u=this.hasFlag(e,Ke.CONNECTOR);return(l||u)&&(l?t.translateBy&&a.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[Ke.UPDATE,Ke.TOOLS,Ke.CONNECTOR]),c=!1,o=!0),c&&this.updateLabelPositions(),o&&this.updateHighlighters(),this.hasFlag(e,Ke.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Ke.TOOLS)),e},__fixSafariBug268376:function(){let{el:e}=this,t=Array.from(e.childNodes),n=document.createDocumentFragment();for(let i=0,r=t.length;i<r;i++)e.removeChild(t[i]),n.appendChild(t[i]);e.appendChild(n)},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Ke.UPDATE),e)},isLabelsRenderRequired:function(e={}){let t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var n=e.propertyPathArray||[],i=n.length;if(i>1){var r=!!t[n[1]];if(r){if(i===2)return"markup"in Object(e.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=Y(e);Array.isArray(t)||(t=[t]),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=Y(e),n=document.createDocumentFragment();if(!Array.isArray(t))n.appendChild(t.node);else for(var i=0,r=t.length;i<r;i++){var o=t[i].node;n.appendChild(o)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,i=t.childNodes;return i.length>1||i[0].nodeName.toUpperCase()!=="G"?n=Y("g").append(t):n=Y(i[0]),n.addClass("label"),{node:n.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,n=this._labelCache={},i=this._labelSelectors={},r=this.model,o=r.attributes.labels||[],a=o.length;if(a===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=Y("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(vi(Je(this,"className"))),t.attr("model-id",r.id)));for(var s=0;s<a;s++){var c=o[s],l=this._normalizeLabelMarkup(this._getLabelMarkup(c.markup)),u,d;if(l)u=l.node,d=l.selectors;else{var h=r._builtins.defaultLabel,p=this._normalizeLabelMarkup(this._getLabelMarkup(h.markup)),f=r._getDefaultLabel(),g=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),b=g||p;u=b.node,d=b.selectors}u.setAttribute("label-idx",s),t.append(u),n[s]=u;var x=this.selector;if(d[x])throw new Error("dia.LinkView: ambiguous label root selector.");d[x]=u,i[s]=d}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){let{el:e,paper:t,model:n,_V:i,options:r}=this,{labels:o}=i;if(!o||!n.hasLabels())return;let{node:a}=o;r.labelsLayer?t.getLayerView(r.labelsLayer).insertSortedNode(a,n.get("z")):a.parentNode!==e&&e.appendChild(a)},unmountLabels:function(){let{options:e,_V:t}=this;if(!t)return;let{labels:n}=t;n&&e.labelsLayer&&n.remove()},findLabelNodes:function(e,t){let n=this._labelCache[e];if(!n)return[];let i=this._labelSelectors[e];return this.findBySelector(t,n,i)},findLabelNode:function(e,t){let[n=null]=this.findLabelNodes(e,t);return n},_mergeLabelAttrs:function(e,t,n,i){return t===null?null:t===void 0?n===null?null:n===void 0?e?void 0:i:e?n:Tt({},i,n):e?Tt({},n,t):Tt({},i,n,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:Tt({},t,e)},updateLabels:function(){if(!this._V.labels)return this;this.paper.options.labelLayer||this.cleanNodeCache(this.el);for(var e=this.model,t=e.get("labels")||[],n=this.can("labelMove"),i=e._builtins.defaultLabel,r=i.attrs,o=e._getDefaultLabel(),a=o.markup,s=o.attrs,c=o.size,l=0,u=t.length;l<u;l++){var d=this._labelCache[l];d.setAttribute("cursor",n?"move":"default");var h=this._labelSelectors[l],p=t[l],f=p.markup,g=p.attrs,b=p.size,x=this._mergeLabelAttrs(f||a,g,s,r),M=this._mergeLabelSize(b,c);this.updateDOMSubtreeAttributes(d,x,{rootBBox:new te(M),selectors:h})}return this},removeRedundantLinearVertices:function(e){let n=this.model,i=n.vertices(),r=[this.sourceAnchor,...i,this.targetAnchor],o=r.length,a=new et(r);a.simplify({threshold:.001});let s=a.points.map(l=>l.toJSON()),c=s.length;return o===c?0:(n.vertices(s.slice(1,c-1),e),o-c)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new L(this.sourceAnchor);case"target":return new L(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new L(this.sourcePoint);case"target":return new L(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){let{route:n,path:i}=this;if(!n||!i)return;let r=new et(n);r.translate(e,t),this.route=r.points,this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t),i.translate(e,t),this.updateDOM()},updateDOM(){let{el:e,model:t,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:n}),this.updateLabelPositions(),this.options.perpendicular=null},updateRoute:function(){let{model:e}=this,t=e.vertices(),n=this.findAnchors(t),i=this.sourceAnchor=n.source,r=this.targetAnchor=n.target,o=this.findRoute(t);this.route=o;var a=this.findConnectionPoints(o,i,r);this.sourcePoint=a.source,this.targetPoint=a.target},updatePath:function(){let{route:e,sourcePoint:t,targetPoint:n}=this,i=this.findPath(e,t.clone(),n.clone());this.path=i},findAnchorsOrdered:function(e,t,n,i){var r,o,a,s,c=this.model,l=c.get(e),u=c.get(n),d=this.getEndView(e),h=this.getEndView(n),p=this.getEndMagnet(e),f=this.getEndMagnet(n);d?(t?a=new L(t):h?a=f:a=new L(u),r=this.getAnchor(l.anchor,d,p,a,e)):r=new L(l),h?(s=new L(i||r),o=this.getAnchor(u.anchor,h,f,s,n)):o=new L(u);var g={};return g[e]=r,g[n]=o,g},findAnchors:function(e){var t=this.model,n=e[0],i=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",i,"source",n):this.findAnchorsOrdered("source",n,"target",i)},findConnectionPoints:function(e,t,n){var i=e[0],r=e[e.length-1],o=this.model,a=o.get("source"),s=o.get("target"),c=this.sourceView,l=this.targetView,u=this.paper.options,d,h,p;if(c&&!c.isNodeConnection(this.sourceMagnet)){d=this.sourceMagnet||c.el;var f=a.connectionPoint||u.defaultConnectionPoint,g=i||n,b=new oe(g,t);p=this.getConnectionPoint(f,c,d,b,"source")}else p=t;var x;if(l&&!l.isNodeConnection(this.targetMagnet)){h=this.targetMagnet||l.el;var M=s.connectionPoint||u.defaultConnectionPoint,C=r||t,E=new oe(C,n);x=this.getConnectionPoint(M,l,h,E,"target")}else x=n;return{source:p,target:x}},getAnchor:function(e,t,n,i,r){var o=t.isNodeConnection(n),a=this.paper.options;if(e||(o?e=a.defaultLinkAnchor:this.options.perpendicular?e={name:"perpendicular"}:e=a.defaultAnchor),!e)throw new Error("Anchor required.");var s;if(typeof e=="function")s=e;else{var c=e.name,l=o?"linkAnchorNamespace":"anchorNamespace";if(s=a[l][c],typeof s!="function")throw new Error("Unknown anchor: "+c)}var u=s.call(this,t,n,i,e.args||{},r,this);return u?u.round(this.decimalsRounding):new L},getConnectionPoint:function(e,t,n,i,r){var o,a=i.end,s=this.paper.options;if(!e)return a;var c;if(typeof e=="function")c=e;else{var l=e.name;if(c=s.connectionPointNamespace[l],typeof c!="function")throw new Error("Unknown connection point: "+l)}return o=c.call(this,i,t,n,e.args||{},r,this),o?o.round(this.decimalsRounding):a},isIntersecting:function(e,t){let n=this.getConnection();return n?Br.exists(e,n,t,{segmentSubdivisions:this.getConnectionSubdivisions()}):!1},isEnclosedIn:function(e){let t=this.getConnection();if(!t)return!1;let n=t.bbox();return n?e.containsRect(n):!1},isAtPoint:function(e){let t=new te(e);return t.inflate(this.EPSILON),this.isIntersecting(t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,n=t.position,i=e._getDefaultLabel(),r=this._normalizeLabelPosition(i.position);return Tt({},n,r)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:Tt({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,n=t.get("labels")||[];if(!n.length)return this;for(var i=this._getDefaultLabelPositionProperty(),r=0,o=n.length;r<o;r++){var a=this._labelCache[r];if(a){var s=n[r],c=this._normalizeLabelPosition(s.position),l=this._mergeLabelPositionProperty(c,i),u=this._getLabelTransformationMatrix(l);a.setAttribute("transform",Y.matrixToTransformString(u)),this._cleanLabelMatrices(r)}}return this},_cleanLabelMatrices:function(e){let{metrics:t,_labelSelectors:n}=this,i=n[e];if(i)for(let r in i){let{id:o}=i[r];o&&o in t&&delete t[o].magnetMatrix}},updateEndProperties:function(e){let{model:t,paper:n}=this,i=`${e}View`,r=t.get(e),o=r&&r.id;if(!o)return this[i]=null,this.updateEndMagnet(e),!0;let a=n.getModelById(o);if(!a)throw new Error("LinkView: invalid "+e+" cell.");let s=a.findView(n);return s?(this[i]=s,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){let t=`${e}Magnet`,n=this.getEndView(e);if(n){let i=n.getMagnetFromLinkEnd(this.model.get(e));i===n.el&&(i=null),this[t]=i}else this[t]=null},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:Tt({},t,e)},addLabel:function(e,t,n,i){var r,o,a=0,s;typeof e!="number"?(r=e.x,o=e.y,typeof t=="number"?(a=t,s=n):s=t):(r=e,o=t,typeof n=="number"?(a=n,s=i):s=n);var c=this._getDefaultLabelPositionArgs(),l=s,u=this._mergeLabelPositionArgs(l,c),d={position:this.getLabelPosition(r,o,a,u)},h=-1;return this.model.insertLabel(h,d,s),h},addVertex:function(e,t,n){var i=typeof e!="number",r=i?e.x:e,o=i?e.y:t,a=i?t:n,s={x:r,y:o},c=this.getVertexIndex(r,o);return this.model.insertVertex(c,s,a),c},sendToken:function(e,t,n){function i(d,h){return function(){d.remove(),typeof h=="function"&&h()}}var r,o,a;Re(t)?(r=t.duration,o=t.direction==="reverse",a=t.connection):(r=t,o=!1,a=null),r=r||1e3;var s={dur:r+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(s.keyPoints="1;0",s.keyTimes="0;1");var c=Y(e),l;if(typeof a=="string")l=this.findNode(a);else{var u=this._V;l=u.connection?u.connection.node:this.el.querySelector("path")}if(!(l instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");c.appendTo(this.paper.cells).animateAlongPath(s,l),setTimeout(i(c,n),r)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||I0,n=this.model.router(),i=this.paper.options.defaultRouter;if(!n)if(i)n=i;else return e.map(L);var r=Be(n)?n:t[n.name];if(!Be(r))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{},a=r.call(this,e,o,this);return a||e.map(L)},findPath:function(e,t,n){var i=this.paper.options.connectorNamespace||f0,r=this.model.connector(),o=this.paper.options.defaultConnector;r||(r=o||{});var a=Be(r)?r:i[r.name];if(!Be(a))throw new Error('dia.LinkView: unknown connector: "'+r.name+'".');var s=tn(r.args||{});s.raw=!0;var c=a.call(this,t,n,e,s,this);return typeof c=="string"&&(c=new he(Y.normalizePathData(c))),c},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var n=e.serialize();return t.data=n,n},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var n=e.getSegmentSubdivisions();return t.segmentSubdivisions=n,n},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var n=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=n,n},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Yt(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,n,i){var r={},o=0,a;typeof n=="number"?(o=n,a=i):a=n,a&&(r.args=a);var s=!(a&&a.absoluteDistance),c=a&&a.absoluteDistance&&a.reverseDistance,l=a&&a.absoluteOffset,u=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},h=new L(e,t),p=u.closestPointT(h,d),f=u.lengthAtT(p,d);s&&(f=f/this.getConnectionLength()||0),c&&(f=-1*(this.getConnectionLength()-f)||1),r.distance=f;var g;l||(g=u.tangentAtT(p));var b;if(g)b=g.pointOffset(h);else{var x=u.pointAtT(p),M=h.difference(x);b={x:M.x,y:M.y}}return r.offset=b,r.angle=o,r},_getLabelTransformationMatrix:function(e){var t,n=0,i={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")i=e.args||{},t=e.distance,n=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var r=t>0&&t<=1,o=0,a={x:0,y:0};if(e.offset){var s=e.offset;typeof s=="number"&&(o=s),s.x&&(a.x=s.x),s.y&&(a.y=s.y)}var c=a.x!==0||a.y!==0||o===0,l=i.keepGradient,u=i.ensureLegibility,d=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},p=r?t*this.getConnectionLength():t,f=d.tangentAtLength(p,h),g,b=n;if(f){if(c)g=f.start.clone(),g.offset(a);else{var x=f.clone();x.rotate(f.start,-90),x.setLength(o),g=x.end}l&&(b=f.angle()+n,u&&(b=un((b+90)%180-90)))}else g=d.start.clone(),c&&g.offset(a);return Y.createSVGMatrix().translate(g.x,g.y).rotate(b)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new L(t.e,t.f)},getVertexIndex:function(e,t){for(var n=this.model,i=n.vertices(),r=this.getClosestPointLength(new L(e,t)),o=0,a=i.length;o<a;o++){var s=i[o],c=this.getClosestPointLength(s);if(r<c)break}return o},notifyPointerdown(e,t,n){je.prototype.pointerdown.call(this,e,t,n),this.notify("link:pointerdown",e,t,n)},notifyPointermove(e,t,n){je.prototype.pointermove.call(this,e,t,n),this.notify("link:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("link:pointerup",e,t,n),je.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){je.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){je.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,n)},contextmenu:function(e,t,n){je.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragStart(e,t,n)},pointermove:function(e,t,n){var i=this._dragData;i&&this.eventData(e,i);var r=this.eventData(e);switch(r.action){case"label-move":this.dragLabel(e,t,n);break;case"arrowhead-move":this.dragArrowhead(e,t,n);break;case"move":this.drag(e,t,n);break}i&&ie(i,this.eventData(e)),this.notifyPointermove(e,t,n)},pointerup:function(e,t,n){var i=this._dragData;i&&(this.eventData(e,i),this._dragData=null);var r=this.eventData(e);switch(r.action){case"label-move":this.dragLabelEnd(e,t,n);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,n);break;case"move":this.dragEnd(e,t,n)}this.notifyPointerup(e,t,n),this.checkMouseleave(e)},mouseover:function(e){je.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){je.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){je.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){je.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,n,i){je.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,n,i)},onlabel:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragLabelStart(e,t,n);var i=this.eventData(e).stopPropagation;i&&e.stopPropagation()},dragLabelStart:function(e,t,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var i=e.currentTarget,r=parseInt(i.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),a=this._normalizeLabelPosition(this._getLabelPositionProperty(r)),s=this._mergeLabelPositionProperty(a,o),c=this.getLabelCoordinates(s),l=c.x-t,u=c.y-n,d=this._getLabelPositionAngle(r),h=this._getLabelPositionArgs(r),p=this._getDefaultLabelPositionArgs(),f=this._mergeLabelPositionArgs(h,p);this.eventData(e,{action:"label-move",labelIdx:r,dx:l,dy:u,positionAngle:d,positionArgs:f,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragArrowheadStart:function(e,t,n){if(this.can("arrowheadMove")){var i=e.target,r=i.getAttribute("end"),o=this.startArrowheadMove(r,{ignoreBackwardsCompatibility:!0});this.eventData(e,o)}},dragStart:function(e,t,n){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:n})},dragLabel:function(e,t,n){var i=this.eventData(e),r={position:this.getLabelPosition(t+i.dx,n+i.dy,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete r.position.offset;let o={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(o.async=!1),this.model.label(i.labelIdx,r,o)},dragArrowhead:function(e,t,n){this.paper.options.snapLinks?!this._snapArrowhead(e,t,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,n):this._connectArrowhead(this.getEventTarget(e),t,n,this.eventData(e))},drag:function(e,t,n){var i=this.eventData(e);this.model.translate(t-i.dx,n-i.dy,{ui:!0}),this.eventData(e,{dx:t,dy:n})},dragLabelEnd:function(){},dragArrowheadEnd:function(e,t,n){var i=this.eventData(e),r=this.paper;r.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,t,n),r.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,e)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var n=e.arrowhead,i=e.initialEnd,r=this.model.prop(n),o=r&&!Ms.endsEqual(i,r);if(o){var a=this.paper;i.id&&this.notify("link:disconnect",t,a.findViewByModel(i.id),e.initialMagnet,n),r.id&&this.notify("link:connect",t,a.findViewByModel(r.id),e.magnetUnderPointer,n)}},_snapToPoints:function(e,t,n){let i=null,r=1/0,o=null,a=1/0,s=e.x,c=e.y;for(let l=0;l<t.length;l++){let u=Math.abs(t[l].x-e.x);u<r&&(r=u,i=t[l]);let d=Math.abs(t[l].y-e.y);d<a&&(a=d,o=t[l])}return r<n&&(s=i.x),a<n&&(c=o.y),{x:s,y:c}},_snapArrowheadSelf:function(e,t,n){let{paper:i,model:r}=this,{snapLinksSelf:o}=i.options,a=this.eventData(e),s=o.radius||20,c=this.getEndAnchor(a.arrowhead==="source"?"target":"source"),l=r.vertices(),u=[c,...l],d=this._snapToPoints({x:t,y:n},u,s),h=i.localToClientPoint(d);this._connectArrowhead(document.elementFromPoint(h.x,h.y),d.x,d.y,this.eventData(e))},_snapArrowhead:function(e,t,n){let{paper:i}=this,{snapLinks:r,connectionStrategy:o}=i.options,a=this.eventData(e),s=!1;var c=r.radius||50,l=i.findElementViewsInArea({x:t-c,y:n-c,width:2*c,height:2*c},r.findInAreaOptions),u=a.closestView||null,d=a.closestMagnet||null,h=a.magnetProxy||null;a.closestView=a.closestMagnet=a.magnetProxy=null;var p=Number.MAX_VALUE,f=new L(t,n);l.forEach(function(T){let F=[];T.el.getAttribute("magnet")!=="false"&&F.push({bbox:T.model.getBBox(),magnet:T.el}),T.$("[magnet]").toArray().forEach(m=>{F.push({bbox:T.getNodeBBox(m),magnet:m})}),F.forEach(m=>{let{magnet:k,bbox:w}=m,S=w.center().squaredDistance(f);S<p&&(d===k||i.options.validateConnection.apply(i,a.validateConnectionArgs(T,T.el===k?null:k)))&&(p=S,a.closestView=T,a.closestMagnet=k)})},this);var g,b=null,x=a.closestView,M=a.closestMagnet;M&&(b=a.magnetProxy=x.findProxyNode(M,"highlighter"));var C=a.arrowhead,E=d!==M;if(u&&E&&u.unhighlight(h,{connecting:!0,snapping:!0}),x){let{prevEnd:T,prevX:F,prevY:m}=a;if(a.prevX=t,a.prevY=n,s=!0,!E&&(typeof o!="function"||F===t&&m===n)||(g=x.getLinkEnd(M,t,n,this.model,C),!E&&Ri(T,g)))return s;a.prevEnd=g,E&&x.highlight(b,{connecting:!0,snapping:!0})}else g={x:t,y:n};return this.model.set(C,g||{x:t,y:n},{ui:!0}),u&&this.notify("link:snap:disconnect",e,u,d,C),x&&this.notify("link:snap:connect",e,x,M,C),s},_snapArrowheadEnd:function(e){var t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(n)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,n,i){let{paper:r,model:o}=this;if(i.eventTarget!==e){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});let a=i.viewUnderPointer=r.findView(e);if(a){let s=i.magnetUnderPointer=a.findMagnet(e),c=i.magnetProxy=a.findProxyNode(s,"highlighter");s&&this.paper.options.validateConnection.apply(r,i.validateConnectionArgs(a,s))?c&&a.highlight(c,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=e,o.set(i.arrowhead,{x:t,y:n},{ui:!0})},_connectArrowheadEnd:function(e={},t,n){let{model:i}=this,{viewUnderPointer:r,magnetUnderPointer:o,magnetProxy:a,arrowhead:s}=e;if(!o||!a||!r)return;r.unhighlight(a,{connecting:!0});let c=r.getLinkEnd(o,t,n,i,s);i.set(s,c,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var n,i=0,r=0;e==="source"?(i=2,n="target"):(r=2,n="source");var o=this.model.get(n);if(o.id){var a=t[i]=this.paper.findViewByModel(o.id),s=a.getMagnetFromLinkEnd(o);s===a.el&&(s=void 0),t[i+1]=s}function c(l,u){return t[r]=l,t[r+1]=l.el===u?void 0:u,t}return c},_markAvailableMagnets:function(e){function t(d,h){var p=d.paper,f=p.options.validateConnection;return f.apply(p,this.validateConnectionArgs(d,h))}var n=this.paper,i=n.model.getCells();e.marked={};for(var r=0,o=i.length;r<o;r++){var a=i[r].findView(n);if(a){var s=Array.prototype.slice.call(a.el.querySelectorAll("[magnet]"));a.el.getAttribute("magnet")!=="false"&&s.push(a.el);var c=s.filter(t.bind(e,a));if(c.length>0){for(var l=0,u=c.length;l<u;l++)a.highlight(c[l],{magnetAvailability:!0});a.highlight(null,{elementAvailability:!0}),e.marked[a.model.id]=c}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),n,i,r=0,o=t.length;r<o;r++){n=t[r],i=e.marked[n];var a=this.paper.findViewByModel(n);if(a){for(var s=0,c=i.length;s<c;s++)a.unhighlight(i[s],{magnetAvailability:!0});a.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var n={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:tn(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(n),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){je.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){je.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){je.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Ke});Object.defineProperty(ws.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new te(t.x,t.y)}var n=this.sourceMagnet;return e.isNodeConnection(n)?new te(this.sourceAnchor):e.getNodeBBox(n||e.el)}});Object.defineProperty(ws.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new te(t.x,t.y)}var n=this.targetMagnet;return e.isNodeConnection(n)?new te(this.targetAnchor):e.getNodeBBox(n||e.el)}});var B8=rl.extend({style:{"pointer-events":"none"},_gridCache:null,_gridSettings:null,init(){rl.prototype.init.apply(this,arguments);let{options:{paper:e}}=this;this._gridCache=null,this._gridSettings=[],this.listenTo(e,"transform resize",this.updateGrid)},setGrid(e){this._gridSettings=this.getGridSettings(e),this.renderGrid()},getGridSettings(e){let t=[];return e&&(Array.isArray(e)?e:[e||{}]).forEach(i=>{t.push(...this._resolveDrawGridOption(i))}),t},removeGrid(){let{_gridCache:e}=this;e&&(e.root.remove(),this._gridCache=null)},renderGrid(){let{options:{paper:e}}=this,{_gridSettings:t}=this;if(this.removeGrid(),t.length===0)return;let n=e.options.drawGridSize||e.options.gridSize;if(n<=1)return;let i=this._getGridRefs();t.forEach((r,o)=>{let a=this._getPatternId(o),s=Tt({},r),{scaleFactor:c=1}=s;s.width=n*c||1,s.height=n*c||1;let l;i.exist(a)?l=i.get(a):(l=Y("pattern",{id:a,patternUnits:"userSpaceOnUse"},Y(s.markup)),i.add(a,l)),Be(s.render)&&s.render(l.node.firstChild,s,e),l.attr({width:s.width,height:s.height})}),i.root.appendTo(this.el),this.updateGrid()},updateGrid(){let{_gridCache:e,_gridSettings:t,options:{paper:n}}=this;if(!e)return;let{root:i,patterns:r}=e,{x:o,y:a,width:s,height:c}=n.getArea();i.attr({x:o,y:a,width:s,height:c});for(let l in r)r[l].attr({x:-o,y:-a});t.forEach((l,u)=>{if(Be(l.update)){let d=r[this._getPatternId(u)];l.update(d.node.firstChild,l,n)}})},_getPatternId(e){return`pattern_${this.options.paper.cid}_${e}`},_getGridRefs(){let{_gridCache:e}=this;if(e)return e;let t=Y("defs"),n=Y("svg",{width:"100%",height:"100%"},[t]);return e=this._gridCache={root:n,patterns:{},add:function(i,r){let o=Y("rect",{width:"100%",height:"100%",fill:`url(#${i})`});t.append(r),n.append(o),this.patterns[i]=r},get:function(i){return this.patterns[i]},exist:function(i){return this.patterns[i]!==void 0}},e},_resolveDrawGridOption(e){var t=this.options.patterns;if(gt(e)&&Array.isArray(t[e]))return t[e].map(function(c){return ie({},c)});var n=e||{args:[{}]},i=Array.isArray(n),r=n.name;if(!i&&!r&&!n.markup&&(r="dot"),r&&Array.isArray(t[r])){var o=t[r].map(function(c){return ie({},c)}),a=Array.isArray(n.args)?n.args:[n.args||{}];sn(a[0],yr(e,"args"));for(var s=0;s<a.length;s++)o[s]&&ie(o[s],a[s]);return o}return i?n:[n]}});var cl={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},qH=50,z8=20,j8=1e3,$H=1/0,P0=9007199254740991,uM=je.Highlighting,H8={[uM.DEFAULT]:{name:"stroke",options:{padding:3}},[uM.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[uM.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},GH=[{name:pn.GRID},{name:pn.BACK},{name:pn.CELLS},{name:pn.LABELS},{name:pn.FRONT},{name:pn.TOOLS}],WH=ki.extend({className:"paper",options:{width:800,height:600,gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,elementView:sl,linkView:ws,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:H8,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:function(){let{cellNamespace:e}=this.model.get("cells"),t=Hr(e,["standard","Link"]);if(!t)throw new Error("dia.Paper: no default link model found. Use `options.defaultLink` to specify a default link model.");return new t},defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"boundary"},connectionStrategy:null,validateMagnet:function(e,t,n){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,n,i,r,o){return(r==="target"?n:e)instanceof sl},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:cl.APPROX,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,n,i,r){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||i.mounting||i.isolate||r.requestConnectedLinksUpdate(e,n,i)},onViewPostponed:function(e,t,n){return n.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:g0,anchorNamespace:D0,linkAnchorNamespace:E0,connectionPointNamespace:v0,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},stylesheet:`
        .joint-element .scalable * {
            vector-effect: non-scaling-stroke;
        }
    `,svg:null,viewport:null,defs:null,tools:null,layers:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,DEFAULT_FIND_BUFFER:200,init:function(){let{options:e}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Bn(joint,"shapes")?joint.shapes:null);let t=this.model=e.model||new T0;this._layers={},this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.resetViews(t.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates&&this._updates.id&&Kc(this._updates.id),this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("transform",this.update)},onCellAdded:function(e,t,n){var i=n.position;this.isAsync()||!an(i)?this.renderView(e,n):(n.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(e,n),i===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,n){let i=this.findViewByModel(e);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,n)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===cl.APPROX){let n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,n=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(t)&&!n.hasActiveBatch(i)&&this.updateViews(e)}var r=this.SORT_DELAYING_BATCHES;r.includes(t)&&!n.hasActiveBatch(r)&&this.sortViews()}},cloneOptions:function(){let{options:e}=this,{defaultConnector:t,defaultRouter:n,defaultConnectionPoint:i,defaultAnchor:r,defaultLinkAnchor:o,highlighting:a,cellViewNamespace:s,interactive:c}=e;!s&&typeof joint<"u"&&Bn(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),Be(t)||(e.defaultConnector=Pn(t)),Be(n)||(e.defaultRouter=Pn(n)),Be(i)||(e.defaultConnectionPoint=Pn(i)),Be(r)||(e.defaultAnchor=Pn(r)),Be(o)||(e.defaultLinkAnchor=Pn(o)),yt(c)&&(e.interactive=ie({},c)),yt(a)&&(e.highlighting=ms({},a,H8))},children:function(){var e=Y.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:vi("paper-background"),selector:"background",style:{position:"absolute",inset:0}},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",style:{position:"absolute",inset:0},children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:vi("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){let{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();let{el:e,childNodes:t,options:n,stylesheet:i}=this,{svg:r,defs:o,layers:a}=t;return e.style.position="relative",r.style.overflow=n.overflow?"visible":"hidden",this.svg=r,this.defs=o,this.layers=a,this.renderLayers(),Y.ensureId(r),this.addStylesheet(i),n.background&&this.drawBackground(n.background),n.drawGrid&&this.setGrid(n.drawGrid),this},addStylesheet:function(e){e&&Y(this.svg).prepend(Y.createSVGStyle(e))},createLayer(e){switch(e){case pn.GRID:return new B8({name:e,paper:this,patterns:this.constructor.gridPatterns});default:return new rl({name:e})}},renderLayers:function(e=GH){this.removeLayers(),e.forEach(({name:r,sorted:o})=>{let a=this.createLayer(r);this.layers.appendChild(a.el),this._layers[r]=a});let t=this.getLayerView(pn.CELLS),n=this.getLayerView(pn.TOOLS),i=this.getLayerView(pn.LABELS);this.tools=n.el,this.cells=this.viewport=t.el,t.vel.addClass(vi("viewport")),i.vel.addClass(vi("viewport")),t.el.style.webkitUserSelect="none",t.el.style.userSelect="none",i.el.style.webkitUserSelect="none",i.el.style.userSelect="none"},removeLayers:function(){let{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){let{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this._background&&this.updateBackgroundImage(this._background),this},scale:function(e,t,n){let i=this.matrix();return e===void 0?Y.matrixToScale(i):(t===void 0&&(t=e),e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE),i.a=e,i.d=t,this.matrix(i,n),this)},scaleUniformAtPoint:function(e,t,n){let{a:i,d:r,e:o,f:a}=this.matrix();if(e=Math.max(e||0,this.MIN_SCALE),e===i&&e===r)return this;let s=Y.createSVGMatrix().translate(o-t.x*(e-i),a-t.y*(e-r)).scale(e,e);return this.matrix(s,n),this},translate:function(e,t,n){let i=this.matrix();return e===void 0?Y.matrixToTranslate(i):(e||(e=0),t||(t=0),i.e===e&&i.f===t?this:(i.e=e,i.f=t,this.matrix(i,n),this))},matrix:function(e,t={}){var n=this.layers;if(e===void 0){var i=n.getAttribute("transform");return(this._viewportTransformString||null)===i?e=this._viewportMatrix:(e=n.getCTM(),this._viewportMatrix=e,this._viewportTransformString=i),Y.createSVGMatrix(e)}let r=this.matrix(),o=Y.createSVGMatrix(e),a=this._viewportTransformString,s=Y.matrixToTransformString(o);if(s===a)return this;if(!a&&Y.matrixToTransformString()===s)return this;let{a:c,d:l,e:u,f:d}=o;return n.setAttribute("transform",s),this._viewportMatrix=o,this._viewportTransformString=n.getAttribute("transform"),(c!==r.a||l!==r.d)&&this.trigger("scale",c,l,t),(u!==r.e||d!==r.f)&&this.trigger("translate",u,d,t),this.trigger("transform",o,t),this},clientMatrix:function(){return Y.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,n){if(e instanceof je)for(var i=e.model,r=this.model.getConnectedLinks(i),o=0,a=r.length;o<a;o++){var s=r[o],c=this.findViewByModel(s);if(c){var l=["UPDATE"];s.getTargetCell()===i&&l.push("TARGET"),s.getSourceCell()===i&&l.push("SOURCE");var u=Math.max(t+1,c.UPDATE_PRIORITY);this.scheduleViewUpdate(c,c.getFlag(l),u,n)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof je))return!1;var n=e.model;if(n.isElement())return!1;if((t&e.getFlag(["SOURCE","TARGET"]))===0){var i={silent:!0},r=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(r=this.dumpView(o,i),e.updateEndMagnet("source"));var a=0,s=this.findViewByModel(n.getTargetCell());if(s&&!this.isViewMounted(s)&&(a=this.dumpView(s,i),e.updateEndMagnet("target")),r===0&&a===0)return!this.dumpView(e,i)}return!1},requestViewUpdate:function(e,t,n,i){i||(i={}),this.scheduleViewUpdate(e,t,n,i);var r=this.isAsync();if(!(this.isFrozen()||r&&i.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var o=this.updateViews(i);r&&this.notifyAfterRender(o,i)}},scheduleViewUpdate:function(e,t,n,i){let{_updates:r,options:o}=this;r.idle&&o.autoFreeze&&(r.idle=!1,this.unfreeze());let{FLAG_REMOVE:a,FLAG_INSERT:s,UPDATE_PRIORITY:c,cid:l}=e,u=r.priorities[n];if(u||(u=r.priorities[n]={}),n>c)for(let p=n-1;p>=c;p--){let f=r.priorities[p];!f||!(l in f)||(u[l]|=f[l],delete f[l])}let d=u[l]||0;if((d&t)===t)return;d||r.count++,t&a&&d&s?u[l]^=s:t&s&&d&a&&(u[l]^=a),u[l]|=t;let h=o.onViewUpdate;typeof h=="function"&&h.call(this,e,t,n,i||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,n=e.cid,i=t.priorities[e.UPDATE_PRIORITY],r=this.registerMountedView(e)|i[n];return delete i[n],r},dumpView:function(e,t={}){let n=this.dumpViewUpdate(e);if(!n)return 0;let i=!t.silent;i&&this.notifyBeforeRender(t);let r=this.updateView(e,n,t);if(i){let o={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(o,t)}return r},updateView:function(e,t,n){if(!e)return 0;let{FLAG_REMOVE:i,FLAG_INSERT:r,FLAG_INIT:o,model:a}=e;if(e instanceof je){if(t&i)return this.removeView(a),0;if(t&r){let s=!!(t&o);s&&(t^=o),this.insertView(e,s),t^=r}}return t?e.confirmUpdate(t,n||{}):0},requireView:function(e,t){var n=this.findViewByModel(e);return n?(this.dumpView(n,t),n):null},registerUnmountedView:function(e){var t=e.cid,n=this._updates;if(t in n.unmounted)return 0;var i=n.unmounted[t]|=e.FLAG_INSERT;return n.unmountedCids.push(t),delete n.mounted[t],i},registerMountedView:function(e){var t=e.cid,n=this._updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);var i=n.unmounted[t]||0;return delete n.unmounted[t],i},isViewMounted:function(e){if(!e)return!1;var t=e.cid,n=this._updates;return t in n.mounted},dumpViews:function(e){var t=sn({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,n=0,i=0,r=P0;do i++,t=this.updateViewsBatch(e),n+=t.updated,r=Math.min(t.priority,r);while(!t.empty);let o={updated:n,batches:i,priority:r};return this.notifyAfterRender(o,e),o},hasScheduledUpdates:function(){let e=this._updates.priorities,t=Object.keys(e),n=t.length;for(;n>0&&n--;)for(let i in e[t[n]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:P0});let{_updates:n,options:i}=this,r=n.id;if(r){Kc(r),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);let o=this.updateViewsBatch(e),a=sn({},e,{mountBatchSize:j8-o.mounted,unmountBatchSize:j8-o.unmounted}),s=this.checkViewport(a),c=s.unmounted,l=s.mounted,u=t.processed,d=n.count;o.updated>0?(u+=o.updated+o.unmounted,o.processed=u,t.priority=Math.min(o.priority,t.priority),o.empty&&l===0?(o.unmounted+=c,o.mounted+=l,o.priority=t.priority,this.notifyAfterRender(o,e),t.processed=0,t.priority=P0,n.count=0):t.processed=u):n.idle||i.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",e));let h=e.progress;if(d&&typeof h=="function"&&h.call(this,o.empty,u,d,o,this),n.id!==r)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=fu(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let n=t.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||$H,n=this._updates,i=0,r=0,o=0,a=0,s=P0,c=!0,l=this.options,u=n.priorities,d="viewport"in e?e.viewport:l.viewport;typeof d!="function"&&(d=null);var h=l.onViewPostponed;typeof h!="function"&&(h=null);var p=Object.keys(u);e:for(var f=0,g=p.length;f<g;f++){var b=+p[f],x=u[b];for(var M in x){if(i>=t){c=!1;break e}var C=la[M];if(!C){delete x[M];continue}var E=x[M];if((E&C.FLAG_REMOVE)===0){var T=M in n.unmounted;if(C.DETACHABLE&&d&&!d.call(this,C,!T,this)){T||(this.registerUnmountedView(C),this.detachView(C)),n.unmounted[M]|=E,delete x[M],o++;continue}T&&(E|=C.FLAG_INSERT,a++),E|=this.registerMountedView(C)}var F=this.updateView(C,E,e);if(F>0&&(x[M]=F,!h||!h.call(this,C,F,this)||x[M])){r++,c=!1;continue}s>b&&(s=b),i++,delete x[M]}}return{priority:s,updated:i,postponed:r,unmounted:o,mounted:a,empty:c}},getUnmountedViews:function(){let e=this._updates,t=Object.keys(e.unmounted),n=t.length,i=new Array(n);for(var r=0;r<n;r++)i[r]=la[t[r]];return i},getMountedViews:function(){let e=this._updates,t=Object.keys(e.mounted),n=t.length,i=new Array(n);for(var r=0;r<n;r++)i[r]=la[t[r]];return i},checkUnmountedViews:function(e,t){t||(t={});var n=0;typeof e!="function"&&(e=null);for(var i=("mountBatchSize"in t)?t.mountBatchSize:1/0,r=this._updates,o=r.unmountedCids,a=r.unmounted,s=0,c=Math.min(o.length,i);s<c;s++){var l=o[s];if(l in a){var u=la[l];if(u){if(u.DETACHABLE&&e&&!e.call(this,u,!1,this)){o.push(l);continue}n++;var d=this.registerMountedView(u);d&&this.scheduleViewUpdate(u,d,u.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,s),n},checkMountedViews:function(e,t){t||(t={});var n=0;if(typeof e!="function")return n;for(var i=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,r=this._updates,o=r.mountedCids,a=r.mounted,s=0,c=Math.min(o.length,i);s<c;s++){var l=o[s];if(l in a){var u=la[l];if(u){if(!u.DETACHABLE||e.call(this,u,!0,this)){o.push(l);continue}n++;var d=this.registerUnmountedView(u);d&&this.detachView(u)}}}return o.splice(0,s),n},checkViewVisibility:function(e,t={}){let n="viewport"in t?t.viewport:this.options.viewport;typeof n!="function"&&(n=null);let i=this._updates,{mounted:r,unmounted:o}=i,a=!e.DETACHABLE||!n||n.call(this,e,!1,this),s=!1,c=!1;if(e.cid in r&&!a){this.registerUnmountedView(e)&&this.detachView(e);let d=i.mountedCids.indexOf(e.cid);i.mountedCids.splice(d,1),s=!0}if(!s&&e.cid in o&&a){let u=i.unmountedCids.indexOf(e.cid);i.unmountedCids.splice(u,1);var l=this.registerMountedView(e);l&&this.scheduleViewUpdate(e,l,e.UPDATE_PRIORITY,{mounting:!0}),c=!0}return{mounted:c?1:0,unmounted:s?1:0}},checkViewport:function(e){var t=sn({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in t?t.viewport:this.options.viewport,i=this.checkMountedViews(n,t);if(i>0){var r=this._updates.unmountedCids;t.mountBatchSize=Math.min(r.length-i,t.mountBatchSize)}var o=this.checkUnmountedViews(n,t);return{mounted:o,unmounted:i}},freeze:function(e){e||(e={});var t=this._updates,n=e.key,i=this.options.frozen,r=t.freezeKey;if(n&&n!==r){if(i&&r)return;t.freezeKey=n,t.keyFrozen=i}this.options.frozen=!0;var o=t.id;t.id=null,this.isAsync()&&o&&Kc(o)},unfreeze:function(e){e||(e={});var t=this._updates,n=e.key,i=t.freezeKey;n&&i&&n!==i||(t.freezeKey=null,!(n&&n===i&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===cl.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,n=e.height;return an(t)||(t=this.el.clientWidth),an(n)||(n=this.el.clientHeight),{width:t,height:n}},setDimensions:function(e,t,n={}){let{options:i}=this,{width:r,height:o}=i,a=e===void 0?r:e,s=t===void 0?o:t;if(r===a&&o===s)return;i.width=a,i.height=s,this._setDimensions();let c=this.getComputedSize();this.trigger("resize",c.width,c.height,n)},_setDimensions:function(){let{options:e}=this,t=e.width,n=e.height;an(t)&&(t=`${Math.round(t)}px`),an(n)&&(n=`${Math.round(n)}px`),this.$el.css({width:t===null?"":t,height:n===null?"":n})},fitToContent:function(e,t,n,i){Re(e)?i=e:i=ie({gridWidth:e,gridHeight:t,padding:n},i);let{x:r,y:o,width:a,height:s}=this.getFitToContentArea(i),{sx:c,sy:l}=this.scale();return this.translate(-r*c,-o*l,i),this.setDimensions(a*c,s*l,i),new te(r,o,a,s)},getFitToContentArea:function(e={}){let t=e.gridWidth||1,n=e.gridHeight||1,i=Ni(e.padding||0),r=Math.max(e.minWidth||0,t),o=Math.max(e.minHeight||0,n),a=e.maxWidth||Number.MAX_VALUE,s=e.maxHeight||Number.MAX_VALUE,c=e.allowNewOrigin,l="contentArea"in e?new te(e.contentArea):this.getContentArea(e),{sx:u,sy:d}=this.scale();l.x*=u,l.y*=d,l.width*=u,l.height*=d;let h=Math.ceil((l.width+l.x)/t),p=Math.ceil((l.height+l.y)/n);e.allowNegativeBottomRight||(h=Math.max(h,1),p=Math.max(p,1)),h*=t,p*=n;let f=0;(c==="negative"&&l.x<0||c==="positive"&&l.x>=0||c==="any")&&(f=Math.ceil(-l.x/t)*t,f+=i.left,h+=f);let g=0;return(c==="negative"&&l.y<0||c==="positive"&&l.y>=0||c==="any")&&(g=Math.ceil(-l.y/n)*n,g+=i.top,p+=g),h+=i.right,p+=i.bottom,h=Math.max(h,r),p=Math.max(p,o),h=Math.min(h,a),p=Math.min(p,s),new te(-f/u,-g/d,h/u,p/d)},transformToFitContent:function(e){e||(e={});let t,n;if("contentArea"in e){let C=e.contentArea;t=this.localToPaperRect(C),n=new L(C)}else t=this.getContentBBox(e),n=this.paperToLocalPoint(t);if(!t.width||!t.height)return;sn(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});let i=Ni(e.padding),r=e.minScaleX||e.minScale,o=e.maxScaleX||e.maxScale,a=e.minScaleY||e.minScale,s=e.maxScaleY||e.maxScale,c;if(e.fittingBBox)c=e.fittingBBox;else{let C=this.translate(),E=this.getComputedSize();c={x:C.tx,y:C.ty,width:E.width,height:E.height}}c=new te(c).moveAndExpand({x:i.left,y:i.top,width:-i.left-i.right,height:-i.top-i.bottom});let l=this.matrix(),{a:u,d,e:h,f:p}=l,f=c.width/t.width*u,g=c.height/t.height*d;if(e.preserveAspectRatio&&(f=g=Math.min(f,g)),e.scaleGrid){let C=e.scaleGrid;f=C*Math.floor(f/C),g=C*Math.floor(g/C)}f=Math.min(o,Math.max(r,f)),g=Math.min(s,Math.max(a,g));let b={x:f/u,y:g/d},x=c.x-n.x*f-h,M=c.y-n.y*g-p;switch(e.verticalAlign){case"middle":M=M+(c.height-t.height*b.y)/2;break;case"bottom":M=M+(c.height-t.height*b.y);break;case"top":default:break}switch(e.horizontalAlign){case"middle":x=x+(c.width-t.width*b.x)/2;break;case"right":x=x+(c.width-t.width*b.x);break;case"left":default:break}l.a=f,l.d=g,l.e=x,l.f=M,this.matrix(l,e)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new te:Y(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){let{restrictTranslate:t}=this.options,n;return Be(t)?n=t.apply(this,e):t===!0?n=this.getArea():t?n=new te(t):n=null,n},createViewForModel:function(e){let{options:t}=this;var n,i,r=t.cellViewNamespace,o=e.get("type")+"View",a=Hr(r,o,".");e.isLink()?(n=t.linkView,i=ws):(n=t.elementView,i=sl);var s=n.prototype instanceof ko?a||n:n.call(this,e)||a||i;return new s({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?pn.LABELS:t.labelsLayer})},removeView:function(e){let{id:t}=e,{_views:n,_updates:i}=this,r=n[t];if(r){var{cid:o}=r;let{mounted:a,unmounted:s}=i;r.remove(),delete n[t],delete a[o],delete s[o]}return r},renderView:function(e,t){let{id:n}=e,i=this._views,r,o,a=!0;return n in i&&(r=i[n],r.model===e?(o=r.FLAG_INSERT,a=!1):this.removeView(e)),a&&(r=i[n]=this.createViewForModel(e),r.paper=this,o=this.registerUnmountedView(r)|this.FLAG_INIT|r.getFlag(Je(r,"initFlag"))),this.requestViewUpdate(r,o,r.UPDATE_PRIORITY,t),r},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();let n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var i=0,r=e.length;i<r;i++)this.renderView(e[i],t);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){ei(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=Array.from(this.cells.childNodes).filter(n=>n.getAttribute("model-id")),t=this.model.get("cells");fE(e,function(n,i){var r=t.get(n.getAttribute("model-id")),o=t.get(i.getAttribute("model-id")),a=r.attributes.z||0,s=o.attributes.z||0;return a===s?0:a<s?-1:1})},insertView:function(e,t){let n=this.getLayerView(pn.CELLS),{el:i,model:r}=e;switch(this.options.sorting){case cl.APPROX:n.insertSortedNode(i,r.get("z"));break;case cl.EXACT:default:n.insertNode(i);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},findView:function(e){var t=gt(e)?this.cells.querySelector(e):e instanceof ot?e[0]:e,n=this.findAttribute("model-id",t);if(n)return this._views[n]},findViewByModel:function(e){var t=gt(e)||an(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new L(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=sn(t||{},{strict:!1}),e=new te(e);var n=this.model.getElements().map(this.findViewByModel,this),i=t.strict?"containsRect":"intersect";return n.filter(function(r){return r&&e[i](r.vel.getBBox({target:this.cells}))},this)},findElementViewsInArea(e,t){return this._filterViewsInArea(e,(n,i)=>this.model.findElementsInArea(n,i),t)},findLinkViewsInArea:function(e,t){return this._filterViewsInArea(e,(n,i)=>this.model.findLinksInArea(n,i),t)},findCellViewsInArea:function(e,t){return this._filterViewsInArea(e,(n,i)=>this.model.findCellsInArea(n,i),t)},findElementViewsAtPoint:function(e,t){return this._filterViewsAtPoint(e,n=>this.model.findElementsInArea(n),t)},findLinkViewsAtPoint:function(e,t){return this._filterViewsAtPoint(e,n=>this.model.findLinksInArea(n),t)},findCellViewsAtPoint:function(e,t){return this._filterViewsAtPoint(e,n=>this.model.findCellsInArea(n),t)},_findInExtendedArea:function(e,t,n={}){let{buffer:i=this.DEFAULT_FIND_BUFFER}=n,r=new te(e).inflate(i);return t(r,n).map(a=>this.findViewByModel(a))},_filterViewsInArea:function(e,t,n={}){let i=new te(e);return this._findInExtendedArea(i,t,n).filter(a=>a?a.isInArea(i,n):!1)},_filterViewsAtPoint:function(e,t,n={}){let i=new te(e);return this._findInExtendedArea(i,t,n).filter(a=>a?a.isAtPoint(e,n):!1)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var n=new L(e,t),i=Y.transformPoint(n,this.matrix());return i},localToPaperRect:function(e,t,n,i){var r=new te(e,t,n,i),o=Y.transformRect(r,this.matrix());return o},paperToLocalPoint:function(e,t){var n=new L(e,t),i=Y.transformPoint(n,this.matrix().inverse());return i},paperToLocalRect:function(e,t,n,i){var r=new te(e,t,n,i),o=Y.transformRect(r,this.matrix().inverse());return o},localToClientPoint:function(e,t){var n=new L(e,t),i=Y.transformPoint(n,this.clientMatrix());return i},localToClientRect:function(e,t,n,i){var r=new te(e,t,n,i),o=Y.transformRect(r,this.clientMatrix());return o},clientToLocalPoint:function(e,t){var n=new L(e,t),i=Y.transformPoint(n,this.clientMatrix().inverse());return i},clientToLocalRect:function(e,t,n,i){var r=new te(e,t,n,i),o=Y.transformRect(r,this.clientMatrix().inverse());return o},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,n,i){return this.localToPaperRect(e,t,n,i).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var n=new L(e,t),i=n.difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(e,t,n,i){var r=this.pageOffset(),o=new te(e,t,n,i);return o.x-=r.x,o.y-=r.y,this.paperToLocalRect(o)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new L(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof ws))throw new Error("Must provide a linkView.");var t=e.model,n=this.options,i=this.model,r=i.constructor.validations;return!(!n.multiLinks&&!r.multiLinks.call(this,i,t)||!n.linkPinning&&!r.linkPinning.call(this,i,t)||typeof n.allowLink=="function"&&!n.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return Be(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:n}=e,{highlighting:i,highlighterNamespace:r}=this.options;if(t===void 0){if(!i||n&&(t=i[n],t===!1))return!1;t||(t=i.default)}if(!t)return!1;gt(t)&&(t={name:t});let o=t.name,a=r[o];if(!a)throw new Error('Unknown highlighter ("'+o+'")');if(typeof a.highlight!="function")throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if(typeof a.unhighlight!="function")throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:a,options:t.options||{},name:o}},onCellHighlight:function(e,t,n){let i=this.resolveHighlighter(n);if(!i)return;let{highlighter:r,options:o}=i;r.highlight(e,t,o)},onCellUnhighlight:function(e,t,n){let i=this.resolveHighlighter(n);if(!i)return;let{highlighter:r,options:o}=i;r.unhighlight(e,t,o)},pointerdblclick:function(e){e.preventDefault(),e=vn(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,n.x,n.y):this.trigger("blank:pointerdblclick",e,n.x,n.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=vn(e);var n=this.findView(e.target);if(this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n?n.pointerclick(e,i.x,i.y):this.trigger("blank:pointerclick",e,i.x,i.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=vn(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,n.x,n.y):this.trigger("blank:contextmenu",e,n.x,n.y)}},pointerdown:function(e){e=vn(e);let{target:t,button:n}=e,i=this.findView(t),r=n===2;if(i){if(!r&&this.guard(e,i))return;let o=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!o&&e.preventDefault(),o&&i.preventDefaultInteraction(e);let a=this.customEventTrigger(e,i);if(a){if(a.isPropagationStopped())return;e.data=a.data}let s=t.closest("[magnet]");if(s&&i.el!==s&&i.el.contains(s)){let c=vn(new ot.Event(e.originalEvent,{data:e.data,currentTarget:s}));if(this.onmagnet(c),c.isDefaultPrevented()&&e.preventDefault(),c.isPropagationStopped()){if(r)return;this.delegateDragEvents(i,c.data);return}e.data=c.data}}if(r){this.contextMenuFired=!0;let o=new ot.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(o)}else{let o=this.snapToGrid(e.clientX,e.clientY);i?i.pointerdown(e,o.x,o.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,o.x,o.y)),this.delegateDragEvents(i,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var n=++t.mousemoved;if(!(n<=this.options.moveThreshold)){e=vn(e);var i=this.snapToGrid(e.clientX,e.clientY),r=t.sourceView;r?r.pointermove(e,i.x,i.y):this.trigger("blank:pointermove",e,i.x,i.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=vn(e),n=this.snapToGrid(t.clientX,t.clientY),i=this.eventData(e).sourceView;i?i.pointerup(t,n.x,n.y):this.trigger("blank:pointerup",t,n.x,n.y),t.isPropagationStopped()||this.pointerclick(new ot.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=vn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=vn(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=vn(e);let{target:t,relatedTarget:n,currentTarget:i}=e,r=this.findView(t);if(this.guard(e,r))return;let o=this.findView(n);r&&(o===r||(r.mouseenter(e),this.el.contains(n)))||o||i===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=vn(e);let{target:t,relatedTarget:n,currentTarget:i}=e,r=this.findView(t);if(this.guard(e,r))return;let o=this.findView(n);r&&(o===r||(r.mouseleave(e),this.el.contains(n)))||o||i===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:Ik(function(){let{event:e,deltas:t}=this._mw_evt_buffer,n=t.reduce((a,s)=>a+hE(s,qH),0),i=Math.pow(.995,n),{x:r,y:o}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,r,o,i),this._mw_evt_buffer={event:null,deltas:[]}},z8,{maxWait:z8}),mousewheel:function(e){e=vn(e);let t=this.findView(e.target);if(this.guard(e,t))return;let n=e.originalEvent,i=this.snapToGrid(n.clientX,n.clientY),{deltaX:r,deltaY:o}=uE(n),a=this._events["paper:pinch"];if(e.ctrlKey&&a&&a.length>0)n.preventDefault(),this._mw_evt_buffer.event=e,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{let s=Math.max(-1,Math.min(1,n.wheelDelta));t?t.mousewheel(e,i.x,i.y,s):this.trigger("blank:mousewheel",e,i.x,i.y,s),this.trigger("paper:pan",e,r,o)}},onevent:function(e){var t=e.currentTarget,n=t.getAttribute("event");if(n){var i=this.findView(t);if(i){if(e=vn(e),this.guard(e,i))return;var r=this.snapToGrid(e.clientX,e.clientY);i.onevent(e,n,r.x,r.y)}}},magnetEvent:function(e,t){var n=e.currentTarget,i=n.getAttribute("magnet");if(i){var r=this.findView(n);if(r){if(e=vn(e),this.guard(e,r))return;var o=this.snapToGrid(e.clientX,e.clientY);t.call(this,r,e,n,o.x,o.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;let t=new ot.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,n,i,r,o){t.onmagnet(n,r,o)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,n,i,r,o){t.magnetpointerdblclick(n,i,r,o)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,n,i,r,o){t.magnetcontextmenu(n,i,r,o)})},onlabel:function(e){var t=e.currentTarget,n=this.findView(t);if(!n||(e=vn(e),this.guard(e,n)))return;let i=this.customEventTrigger(e,n,t);if(i){if(i.isPropagationStopped())return;e.data=i.data}var r=this.snapToGrid(e.clientX,e.clientY);n.onlabel(e,r.x,r.y)},getPointerArgs(e){let t=vn(e),{x:n,y:i}=this.snapToGrid(t.clientX,t.clientY);return[t,n,i]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;let{target:n}=e;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(t&&t.model&&t.model instanceof zn||this.el===n||this.svg.contains(n))},setGridSize:function(e){let{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.getLayerView(pn.GRID).renderGrid(),this},setGrid:function(e){return this.getLayerView(pn.GRID).setGrid(e),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",n=e.size||"auto auto",i=this.scale(),r=this.translate();if(Re(t)){var o=r.tx+i.sx*(t.x||0),a=r.ty+i.sy*(t.y||0);t=o+"px "+a+"px"}Re(n)&&(n=new te(n).scale(i.sx,i.sy),n=n.width+"px "+n.height+"px");let{background:s}=this.childNodes;s.style.backgroundSize=n,s.style.backgroundPosition=t},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.childNodes.background.style.backgroundImage="";return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var n,i=t.size,r=t.repeat||"no-repeat",o=t.opacity||1,a=Math.abs(t.quality)||1,s=this.constructor.backgroundPatterns[uu(r)];if(Be(s)){e.width*=a,e.height*=a;var c=s(e,t);if(!(c instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=c.toDataURL("image/png"),r="repeat",Re(i)?(i.width*=c.width/e.width,i.height*=c.height/e.height):i===void 0&&(t.size={width:c.width/a,height:c.height/a})}else n=e.src,i===void 0&&(t.size={width:e.width,height:e.height});this.childNodes.background.style.opacity=o,this.childNodes.background.style.backgroundRepeat=r,this.childNodes.background.style.backgroundImage=`url(${n})`,this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=Pn(e),oa(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,ei(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!Re(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,n=e.name;if(t||(t=n+this.svg.id+pu(JSON.stringify(e))),!this.isDefined(t)){var i=gE,r=i[n]&&i[n](e.args||{});if(!r)throw new Error("Non-existing filter "+n);var o=ie({filterUnits:"userSpaceOnUse"},e.attrs,{id:t});Y(r,o).appendTo(this.defs)}return t},defineGradient:function(e){if(!Re(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");let{svg:t,defs:n}=this,{type:i,id:r=i+t.id+pu(JSON.stringify(e)),stops:o,attrs:a={}}=e;if(this.isDefined(r))return r;let s=Oe(o).map(({offset:l,color:u,opacity:d})=>Y("stop").attr({offset:l,"stop-color":u,"stop-opacity":Number.isFinite(d)?d:1})),c=Y(i,a,s);return c.id=r,c.appendTo(n),r},definePattern:function(e){if(!Re(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");let{svg:t,defs:n}=this,{id:i=t.id+pu(JSON.stringify(e)),markup:r,attrs:o={}}=e;if(!r)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(i))return i;let a=Y("pattern",{patternUnits:"userSpaceOnUse"});if(a.id=i,a.attr(o),typeof r=="string")a.append(Y(r));else{let{fragment:s}=ys(r);a.append(s)}return a.appendTo(n),i},defineMarker:function(e){if(!Re(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");let{svg:t,defs:n}=this,{id:i=t.id+pu(JSON.stringify(e)),markup:r,attrs:o={},markerUnits:a="userSpaceOnUse"}=e;if(this.isDefined(i))return i;let s=Y("marker",{orient:"auto",overflow:"visible",markerUnits:a});s.id=i,s.attr(o);let c;if(r){let d;if(typeof r=="string")d=Y(r),d=Array.isArray(d)?d:[d];else{let{fragment:h}=ys(r);d=Y(h).children()}d.length>1?c=Y("g").append(d):c=d[0]}else{let{type:d="path"}=e;c=Y(d)}let l=yr(e,"type","id","markup","attrs","markerUnits");return Object.keys(l).forEach(d=>{let h=l[d],p=c.attr(d);if(p==null)c.attr(d,h);else switch(d){case"transform":c.attr(d,h+" "+p);break}}),c.appendTo(s),s.appendTo(n),i},customEventTrigger:function(e,t,n=t.el){let i=e.target.closest("[event]");if(i&&n!==i&&t.el.contains(i)){let r=vn(new ot.Event(e.originalEvent,{data:e.data,currentTarget:i}));return this.onevent(r),r.isDefaultPrevented()&&e.preventDefault(),r}return null}},{sorting:cl,Layers:pn,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;t.width=2*n,t.height=2*i;var r=t.getContext("2d");return r.drawImage(e,0,0,n,i),r.setTransform(-1,0,0,-1,t.width,t.height),r.drawImage(e,0,0,n,i),r.setTransform(-1,0,0,1,t.width,0),r.drawImage(e,0,0,n,i),r.setTransform(1,0,0,-1,0,t.height),r.drawImage(e,0,0,n,i),t},flipX:function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;t.width=n*2,t.height=i;var r=t.getContext("2d");return r.drawImage(e,0,0,n,i),r.translate(2*n,0),r.scale(-1,1),r.drawImage(e,0,0,n,i),t},flipY:function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;t.width=n,t.height=i*2;var r=t.getContext("2d");return r.drawImage(e,0,0,n,i),r.translate(0,2*i),r.scale(1,-1),r.drawImage(e,0,0,n,i),t},watermark:function(e,t){t=t||{};var n=e.width,i=e.height,r=document.createElement("canvas");r.width=n*3,r.height=i*3;for(var o=r.getContext("2d"),a=an(t.watermarkAngle)?-t.watermarkAngle:-20,s=Wt(a),c=r.width/4,l=r.height/4,u=0;u<4;u++)for(var d=0;d<4;d++)(u+d)%2>0&&(o.setTransform(1,0,0,1,(2*u-1)*c,(2*d-1)*l),o.rotate(s),o.drawImage(e,-n/2,-i/2,n,i));return r}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(e,t){Y(e).attr({width:t.thickness,height:t.thickness,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(e,t){Y(e).attr({fill:t.color})},update:function(e,t,n){let{sx:i,sy:r}=n.scale(),o=i<=1?t.thickness:t.thickness/i,a=r<=1?t.thickness:t.thickness/r;Y(e).attr({width:o,height:a})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(e,t){var n,i=t.width,r=t.height,o=t.thickness;i-o>=0&&r-o>=0?n=["M",i,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",Y(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(e,t){var n,i=t.width,r=t.height,o=t.thickness;i-o>=0&&r-o>=0?n=["M",i,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",Y(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",render:function(e,t){var n,i=t.width,r=t.height,o=t.thickness;i-o>=0&&r-o>=0?n=["M",i,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",Y(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}]}});var hM=ki.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,_visibleExplicit:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},updateVisibility:function(){let e=this.computeVisibility();this.el.style.display=e?"":"none",this._visible=e},computeVisibility(){if(!this.isExplicitlyVisible())return!1;let{visibility:e}=this.options;return typeof e!="function"?!0:!!e.call(this,this.relatedView,this)},show:function(){this._visibleExplicit=!0,this.updateVisibility()},hide:function(){this._visibleExplicit=!1,this.updateVisibility()},isExplicitlyVisible:function(){return!!this._visibleExplicit},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){let{paper:t,relatedView:n}=this;return!t||!n?!0:t.guard(e,n)}});var ZH=ki.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=ie(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var n=e.relatedView;if(!(n instanceof je))return this;for(var i=this.tools=[],r=0,o=t.length;r<o;r++){var a=t[r];a instanceof hM&&(a.configure(n,this),this.vel.append(a.el),i.push(a))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});let t=this.tools;if(!t)return this;let n=t.length,i=this.isRendered;for(let r=0;r<n;r++){let o=t[r];o.updateVisibility(),o.isVisible()&&this.ensureToolRendered(t,r)&&e.tool!==o.cid&&o.update()}return!this.isRendered&&n>0?this:(this.isMounted()||this.mount(),i||this.blurTool(),this)},ensureToolRendered(e,t){return this.isRendered||(this.isRendered=Array(e.length).fill(!1)),this.isRendered[t]?!0:(e[t].render(),this.isRendered[t]=!0,!1)},focusTool:function(e){var t=this.tools;if(!t)return this;for(var n=0,i=t.length;n<i;n++){var r=t[n];e===r?r.show():r.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var n=0,i=t.length;n<i;n++){var r=t[n];r!==e&&!r.isExplicitlyVisible()&&(r.show(),r.isVisible()&&this.ensureToolRendered(t,n)&&r.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null),this.isMounted()||this.mount(),this},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,n=e.length;t<n;t++)e[t].remove();this.tools=null},mount:function(){let{options:e,el:t}=this,{relatedView:n,layer:i=pn.TOOLS,z:r}=e;return n&&(i?n.paper.getLayerView(i).insertSortedNode(t,r):n.el.appendChild(t)),this}});var Eu=class extends at.standard.Rectangle{markup=[{tagName:"rect",selector:"body"},{tagName:"image",selector:"actor"},{tagName:"text",selector:"label"}];defaults(){return ge(ee({},super.defaults),{type:"custom.Actor",attrs:{body:{fill:"transparent",stroke:"none"},actor:{"xlink:href":"assets/uml-svg/actor.svg",width:48,height:86,x:0,y:0},label:{text:"Ator",fontSize:16,fill:"#000",refX:"50%",refY:"100%",textAnchor:"middle",textVerticalAnchor:"top"}}})}constructor(t,n){super(t,n),this.set("type","custom.Actor")}},Du=class extends at.standard.Ellipse{constructor(...t){super(...t),this.set("type","custom.UseCase")}},pM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Extend")}},fM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Include")}},mM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Dependency")}},gM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Association")}},yM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Aggregation")}},vM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Composition")}},kM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Generalization")}},MM=class extends at.standard.Link{constructor(...t){super(...t),this.set("type","custom.Realization")}},Tu=class extends at.standard.Rectangle{markup=[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"rect",selector:"attrsArea"},{tagName:"rect",selector:"opsArea"},{tagName:"text",selector:"stereotype"},{tagName:"text",selector:"title"},{tagName:"text",selector:"attrsText"},{tagName:"text",selector:"opsText"}];defaults(){return ge(ee({},super.defaults),{type:"custom.Class",size:{width:220,height:104},attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#000",strokeWidth:0,fill:"#FFF7D0"},header:{refWidth:"100%",height:40,fill:"#FFF7D0",stroke:"#000",strokeWidth:2},attrsArea:{refWidth:"100%",height:32,refY:40,fill:"transparent",stroke:"#000",strokeWidth:2},opsArea:{ref:"attrsArea",refWidth:"100%",height:32,refY:"100%",fill:"transparent",stroke:"#000",strokeWidth:2},stereotype:{text:"",ref:"header",refX:"50%",refY:"2%",refHeight:.5,textAnchor:"middle",fontSize:11,fill:"#666"},title:{text:"ClassName",ref:"header",refX:"50%",refY:"50%",refHeight:.5,textAnchor:"middle",fontSize:14,fontWeight:700,fill:"#111"},attrsText:{text:"",ref:"attrsArea",refX:8,refY:"5%",textAnchor:"start",fontSize:12,fill:"#111"},opsText:{text:"",ref:"opsArea",refX:8,refY:"5%",textAnchor:"start",fontSize:12,fill:"#111"}}})}constructor(t,n){super(t,n),this.set("type","custom.Class")}};at.custom=at.custom||{};at.custom.Actor=Eu;at.custom.UseCase=Du;at.custom.Extend=pM;at.custom.Include=fM;at.custom.Dependency=mM;at.custom.Association=gM;at.custom.Aggregation=yM;at.custom.Composition=vM;at.custom.Generalization=kM;at.custom.Realization=MM;at.custom.Class=Tu;var bs=class{static createElement(t,n,i,r,o,a,s={}){return new bo.Element({type:o,position:{x:t-i/2,y:n-r/2},size:{width:i,height:r},markup:a,attrs:s})}static createActor(t,n){let o=new Eu;return o.position(t-48/2,n-86/2),o.resize(48,86),o.attr("label/text","Ator"),o}static createUseCase(t,n){let o=new Du;return o.position(t-100/2,n-50/2),o.resize(100,50),o.attr({body:{fill:"#FFF7D0",stroke:"#000",strokeWidth:2},label:{text:"Caso de uso",fill:"#000",fontSize:16,textWrap:{width:200,height:null,ellipsis:!1,breakWord:!0}}}),o}static createLink(t,n,i){let r=new at.standard.Link;switch(r.source(t),r.target(n),i){case"extend":r.labels([{attrs:{text:{text:"<<extend>>",fontSize:14,fill:"#000"},rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5}}]),r.attr("line/strokeDasharray","5,5"),r.set("type","custom.Extend");break;case"include":r.labels([{attrs:{text:{text:"<<include>>",fontSize:14,fill:"#000"},rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5}}]),r.attr("line/strokeDasharray","2.2"),r.set("type","custom.Include");break;case"dependency":r.labels([{position:{distance:.5}}]),r.set("type","custom.Dependency");break;case"association":r.labels([{attrs:{rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5}}]),r.attr("line/strokeDasharray","none"),r.attr("line/targetMarker",{d:""}),r.set("type","custom.Association");break;case"aggregation":r.attr("line/strokeDasharray","none"),r.attr({line:{targetMarker:{type:"image","xlink:href":"/assets/uml-svg/aggregation.png",width:24,height:24,y:-12}}}),r.labels([{attrs:{rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5,offset:12}}]),r.set("type","custom.Aggregation");break;case"composition":r.attr("line/strokeDasharray","none"),r.attr({line:{targetMarker:{type:"image","xlink:href":"/assets/uml-svg/composition.png",width:24,height:24,y:-12}}}),r.labels([{attrs:{rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5,offset:12}}]),r.set("type","custom.Composition");break;case"inheritance":case"generalization":r.attr("line/strokeDasharray","none"),r.labels([{attrs:{rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5,offset:12}}]),r.set("type","custom.Generalization");break;case"realization":r.attr("line/strokeDasharray","5,5"),r.labels([{attrs:{rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5,offset:12}}]),r.set("type","custom.Realization");break;default:r.set("type","custom.Association"),r.labels([{attrs:{rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5,offset:12}}]);break}return r}static createClass(t,n,i,r=220,o=104){let a=i?.name||"ClassName",s=i?.stereotype||"",c=(i?.attributes||[]).join(`
`),l=(i?.operations||[]).join(`
`),u=new Tu;return u.position(t-r/2,n-o/2),u.resize(r,o),u.attr("stereotype/text",s?`<<${s}>>`:""),u.attr("title/text",a),u.attr("attrsText/text",c),u.attr("opsText/text",l),u}};function q8(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function xM(e,t){e===void 0&&(e={}),t===void 0&&(t={});let n=["__proto__","constructor","prototype"];Object.keys(t).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:q8(t[i])&&q8(e[i])&&Object.keys(t[i]).length>0&&xM(e[i],t[i])})}var $8={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Hn(){let e=typeof document<"u"?document:{};return xM(e,$8),e}var YH={document:$8,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function Xt(){let e=typeof window<"u"?window:{};return xM(e,YH),e}function G8(e){return e===void 0&&(e=""),e.trim().split(" ").filter(t=>!!t.trim())}function W8(e){let t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function Cs(e,t){return t===void 0&&(t=0),setTimeout(e,t)}function Ss(){return Date.now()}function XH(e){let t=Xt(),n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function wM(e,t){t===void 0&&(t="x");let n=Xt(),i,r,o,a=XH(e);return n.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(s=>s.replace(",",".")).join(", ")),o=new n.WebKitCSSMatrix(r==="none"?"":r)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?r=o.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),t==="y"&&(n.WebKitCSSMatrix?r=o.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Pu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function JH(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Mi(){let e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){let i=n<0||arguments.length<=n?void 0:arguments[n];if(i!=null&&!JH(i)){let r=Object.keys(Object(i)).filter(o=>t.indexOf(o)<0);for(let o=0,a=r.length;o<a;o+=1){let s=r[o],c=Object.getOwnPropertyDescriptor(i,s);c!==void 0&&c.enumerable&&(Pu(e[s])&&Pu(i[s])?i[s].__swiper__?e[s]=i[s]:Mi(e[s],i[s]):!Pu(e[s])&&Pu(i[s])?(e[s]={},i[s].__swiper__?e[s]=i[s]:Mi(e[s],i[s])):e[s]=i[s])}}}return e}function ll(e,t,n){e.style.setProperty(t,n)}function bM(e){let{swiper:t,targetPosition:n,side:i}=e,r=Xt(),o=-t.translate,a=null,s,c=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);let l=n>o?"next":"prev",u=(h,p)=>l==="next"&&h>=p||l==="prev"&&h<=p,d=()=>{s=new Date().getTime(),a===null&&(a=s);let h=Math.max(Math.min((s-a)/c,1),0),p=.5-Math.cos(h*Math.PI)/2,f=o+p*(n-o);if(u(f,n)&&(f=n),t.wrapperEl.scrollTo({[i]:f}),u(f,n)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:f})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(d)};d()}function qr(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function An(e,t){t===void 0&&(t="");let n=Xt(),i=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&i.push(...e.assignedElements()),t?i.filter(r=>r.matches(t)):i}function KH(e,t){let n=[t];for(;n.length>0;){let i=n.shift();if(e===i)return!0;n.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function Z8(e,t){let n=Xt(),i=t.contains(e);return!i&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(i=[...t.assignedElements()].includes(e),i||(i=KH(e,t))),i}function Au(e){try{console.warn(e);return}catch{}}function Zi(e,t){t===void 0&&(t=[]);let n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:G8(t)),n}function Y8(e,t){let n=[];for(;e.previousElementSibling;){let i=e.previousElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}function X8(e,t){let n=[];for(;e.nextElementSibling;){let i=e.nextElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}function Co(e,t){return Xt().getComputedStyle(e,null).getPropertyValue(t)}function _s(e){let t=e,n;if(t){for(n=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(n+=1);return n}}function dl(e,t){let n=[],i=e.parentElement;for(;i;)t?i.matches(t)&&n.push(i):n.push(i),i=i.parentElement;return n}function Lu(e,t,n){let i=Xt();return n?e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom")):e.offsetWidth}function Jt(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}function Ou(e){return t=>Math.abs(t)>0&&e.browser&&e.browser.need3dFix&&Math.abs(t)%90===0?t+.001:t}function ul(e,t){t===void 0&&(t=""),typeof trustedTypes<"u"?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(t):e.innerHTML=t}var CM;function QH(){let e=Xt(),t=Hn();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function n6(){return CM||(CM=QH()),CM}var SM;function eU(e){let{userAgent:t}=e===void 0?{}:e,n=n6(),i=Xt(),r=i.navigator.platform,o=t||i.navigator.userAgent,a={ios:!1,android:!1},s=i.screen.width,c=i.screen.height,l=o.match(/(Android);?[\s\/]+([\d.]+)?/),u=o.match(/(iPad).*OS\s([\d_]+)/),d=o.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=r==="Win32",f=r==="MacIntel",g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&f&&n.touch&&g.indexOf(`${s}x${c}`)>=0&&(u=o.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),f=!1),l&&!p&&(a.os="android",a.android=!0),(u||h||d)&&(a.os="ios",a.ios=!0),a}function i6(e){return e===void 0&&(e={}),SM||(SM=eU(e)),SM}var _M;function tU(){let e=Xt(),t=i6(),n=!1;function i(){let s=e.navigator.userAgent.toLowerCase();return s.indexOf("safari")>=0&&s.indexOf("chrome")<0&&s.indexOf("android")<0}if(i()){let s=String(e.navigator.userAgent);if(s.includes("Version/")){let[c,l]=s.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));n=c<16||c===16&&l<2}}let r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),o=i(),a=o||r&&t.ios;return{isSafari:n||o,needPerspectiveFix:n,need3dFix:a,isWebView:r}}function r6(){return _M||(_M=tU()),_M}function nU(e){let{swiper:t,on:n,emit:i}=e,r=Xt(),o=null,a=null,s=()=>{!t||t.destroyed||!t.initialized||(i("beforeResize"),i("resize"))},c=()=>{!t||t.destroyed||!t.initialized||(o=new ResizeObserver(d=>{a=r.requestAnimationFrame(()=>{let{width:h,height:p}=t,f=h,g=p;d.forEach(b=>{let{contentBoxSize:x,contentRect:M,target:C}=b;C&&C!==t.el||(f=M?M.width:(x[0]||x).inlineSize,g=M?M.height:(x[0]||x).blockSize)}),(f!==h||g!==p)&&s()})}),o.observe(t.el))},l=()=>{a&&r.cancelAnimationFrame(a),o&&o.unobserve&&t.el&&(o.unobserve(t.el),o=null)},u=()=>{!t||t.destroyed||!t.initialized||i("orientationchange")};n("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){c();return}r.addEventListener("resize",s),r.addEventListener("orientationchange",u)}),n("destroy",()=>{l(),r.removeEventListener("resize",s),r.removeEventListener("orientationchange",u)})}function iU(e){let{swiper:t,extendParams:n,on:i,emit:r}=e,o=[],a=Xt(),s=function(u,d){d===void 0&&(d={});let h=a.MutationObserver||a.WebkitMutationObserver,p=new h(f=>{if(t.__preventObserver__)return;if(f.length===1){r("observerUpdate",f[0]);return}let g=function(){r("observerUpdate",f[0])};a.requestAnimationFrame?a.requestAnimationFrame(g):a.setTimeout(g,0)});p.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:t.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),o.push(p)},c=()=>{if(t.params.observer){if(t.params.observeParents){let u=dl(t.hostEl);for(let d=0;d<u.length;d+=1)s(u[d])}s(t.hostEl,{childList:t.params.observeSlideChildren}),s(t.wrapperEl,{attributes:!1})}},l=()=>{o.forEach(u=>{u.disconnect()}),o.splice(0,o.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",c),i("destroy",l)}var rU={on(e,t,n){let i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;let r=n?"unshift":"push";return e.split(" ").forEach(o=>{i.eventsListeners[o]||(i.eventsListeners[o]=[]),i.eventsListeners[o][r](t)}),i},once(e,t,n){let i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];t.apply(i,a)}return r.__emitterProxy=t,i.on(e,r,n)},onAny(e,t){let n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;let i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny(e){let t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;let n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){let n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(i=>{typeof t>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,o)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[i].splice(o,1)})}),n},emit(){let e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let t,n,i;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return typeof o[0]=="string"||Array.isArray(o[0])?(t=o[0],n=o.slice(1,o.length),i=e):(t=o[0].events,n=o[0].data,i=o[0].context||e),n.unshift(i),(Array.isArray(t)?t:t.split(" ")).forEach(c=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(l=>{l.apply(i,[c,...n])}),e.eventsListeners&&e.eventsListeners[c]&&e.eventsListeners[c].forEach(l=>{l.apply(i,n)})}),e}};function oU(){let e=this,t,n,i=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=i.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=i.clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(Co(i,"padding-left")||0,10)-parseInt(Co(i,"padding-right")||0,10),n=n-parseInt(Co(i,"padding-top")||0,10)-parseInt(Co(i,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function aU(){let e=this;function t(S,D){return parseFloat(S.getPropertyValue(e.getDirectionLabel(D))||0)}let n=e.params,{wrapperEl:i,slidesEl:r,size:o,rtlTranslate:a,wrongRTL:s}=e,c=e.virtual&&n.virtual.enabled,l=c?e.virtual.slides.length:e.slides.length,u=An(r,`.${e.params.slideClass}, swiper-slide`),d=c?e.virtual.slides.length:u.length,h=[],p=[],f=[],g=n.slidesOffsetBefore;typeof g=="function"&&(g=n.slidesOffsetBefore.call(e));let b=n.slidesOffsetAfter;typeof b=="function"&&(b=n.slidesOffsetAfter.call(e));let x=e.snapGrid.length,M=e.slidesGrid.length,C=n.spaceBetween,E=-g,T=0,F=0;if(typeof o>"u")return;typeof C=="string"&&C.indexOf("%")>=0?C=parseFloat(C.replace("%",""))/100*o:typeof C=="string"&&(C=parseFloat(C)),e.virtualSize=-C,u.forEach(S=>{a?S.style.marginLeft="":S.style.marginRight="",S.style.marginBottom="",S.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(ll(i,"--swiper-centered-offset-before",""),ll(i,"--swiper-centered-offset-after",""));let m=n.grid&&n.grid.rows>1&&e.grid;m?e.grid.initSlides(u):e.grid&&e.grid.unsetSlides();let k,w=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(S=>typeof n.breakpoints[S].slidesPerView<"u").length>0;for(let S=0;S<d;S+=1){k=0;let D;if(u[S]&&(D=u[S]),m&&e.grid.updateSlide(S,D,u),!(u[S]&&Co(D,"display")==="none")){if(n.slidesPerView==="auto"){w&&(u[S].style[e.getDirectionLabel("width")]="");let R=getComputedStyle(D),B=D.style.transform,j=D.style.webkitTransform;if(B&&(D.style.transform="none"),j&&(D.style.webkitTransform="none"),n.roundLengths)k=e.isHorizontal()?Lu(D,"width",!0):Lu(D,"height",!0);else{let W=t(R,"width"),P=t(R,"padding-left"),O=t(R,"padding-right"),N=t(R,"margin-left"),z=t(R,"margin-right"),ye=R.getPropertyValue("box-sizing");if(ye&&ye==="border-box")k=W+N+z;else{let{clientWidth:ve,offsetWidth:it}=D;k=W+P+O+N+z+(it-ve)}}B&&(D.style.transform=B),j&&(D.style.webkitTransform=j),n.roundLengths&&(k=Math.floor(k))}else k=(o-(n.slidesPerView-1)*C)/n.slidesPerView,n.roundLengths&&(k=Math.floor(k)),u[S]&&(u[S].style[e.getDirectionLabel("width")]=`${k}px`);u[S]&&(u[S].swiperSlideSize=k),f.push(k),n.centeredSlides?(E=E+k/2+T/2+C,T===0&&S!==0&&(E=E-o/2-C),S===0&&(E=E-o/2-C),Math.abs(E)<1/1e3&&(E=0),n.roundLengths&&(E=Math.floor(E)),F%n.slidesPerGroup===0&&h.push(E),p.push(E)):(n.roundLengths&&(E=Math.floor(E)),(F-Math.min(e.params.slidesPerGroupSkip,F))%e.params.slidesPerGroup===0&&h.push(E),p.push(E),E=E+k+C),e.virtualSize+=k+C,T=k,F+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+b,a&&s&&(n.effect==="slide"||n.effect==="coverflow")&&(i.style.width=`${e.virtualSize+C}px`),n.setWrapperSize&&(i.style[e.getDirectionLabel("width")]=`${e.virtualSize+C}px`),m&&e.grid.updateWrapperSize(k,h),!n.centeredSlides){let S=[];for(let D=0;D<h.length;D+=1){let R=h[D];n.roundLengths&&(R=Math.floor(R)),h[D]<=e.virtualSize-o&&S.push(R)}h=S,Math.floor(e.virtualSize-o)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-o)}if(c&&n.loop){let S=f[0]+C;if(n.slidesPerGroup>1){let D=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),R=S*n.slidesPerGroup;for(let B=0;B<D;B+=1)h.push(h[h.length-1]+R)}for(let D=0;D<e.virtual.slidesBefore+e.virtual.slidesAfter;D+=1)n.slidesPerGroup===1&&h.push(h[h.length-1]+S),p.push(p[p.length-1]+S),e.virtualSize+=S}if(h.length===0&&(h=[0]),C!==0){let S=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");u.filter((D,R)=>!n.cssMode||n.loop?!0:R!==u.length-1).forEach(D=>{D.style[S]=`${C}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let S=0;f.forEach(R=>{S+=R+(C||0)}),S-=C;let D=S>o?S-o:0;h=h.map(R=>R<=0?-g:R>D?D+b:R)}if(n.centerInsufficientSlides){let S=0;f.forEach(R=>{S+=R+(C||0)}),S-=C;let D=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(S+D<o){let R=(o-S-D)/2;h.forEach((B,j)=>{h[j]=B-R}),p.forEach((B,j)=>{p[j]=B+R})}}if(Object.assign(e,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){ll(i,"--swiper-centered-offset-before",`${-h[0]}px`),ll(i,"--swiper-centered-offset-after",`${e.size/2-f[f.length-1]/2}px`);let S=-e.snapGrid[0],D=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(R=>R+S),e.slidesGrid=e.slidesGrid.map(R=>R+D)}if(d!==l&&e.emit("slidesLengthChange"),h.length!==x&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==M&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){let S=`${n.containerModifierClass}backface-hidden`,D=e.el.classList.contains(S);d<=n.maxBackfaceHiddenSlides?D||e.el.classList.add(S):D&&e.el.classList.remove(S)}}function sU(e){let t=this,n=[],i=t.virtual&&t.params.virtual.enabled,r=0,o;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);let a=s=>i?t.slides[t.getSlideIndexByData(s)]:t.slides[s];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(s=>{n.push(s)});else for(o=0;o<Math.ceil(t.params.slidesPerView);o+=1){let s=t.activeIndex+o;if(s>t.slides.length&&!i)break;n.push(a(s))}else n.push(a(t.activeIndex));for(o=0;o<n.length;o+=1)if(typeof n[o]<"u"){let s=n[o].offsetHeight;r=s>r?s:r}(r||r===0)&&(t.wrapperEl.style.height=`${r}px`)}function cU(){let e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=(e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop)-n-e.cssOverflowAdjustment()}var J8=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function lU(e){e===void 0&&(e=this&&this.translate||0);let t=this,n=t.params,{slides:i,rtlTranslate:r,snapGrid:o}=t;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let a=-e;r&&(a=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let s=n.spaceBetween;typeof s=="string"&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*t.size:typeof s=="string"&&(s=parseFloat(s));for(let c=0;c<i.length;c+=1){let l=i[c],u=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(u-=i[0].swiperSlideOffset);let d=(a+(n.centeredSlides?t.minTranslate():0)-u)/(l.swiperSlideSize+s),h=(a-o[0]+(n.centeredSlides?t.minTranslate():0)-u)/(l.swiperSlideSize+s),p=-(a-u),f=p+t.slidesSizesGrid[c],g=p>=0&&p<=t.size-t.slidesSizesGrid[c],b=p>=0&&p<t.size-1||f>1&&f<=t.size||p<=0&&f>=t.size;b&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(c)),J8(l,b,n.slideVisibleClass),J8(l,g,n.slideFullyVisibleClass),l.progress=r?-d:d,l.originalProgress=r?-h:h}}function dU(e){let t=this;if(typeof e>"u"){let u=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*u||0}let n=t.params,i=t.maxTranslate()-t.minTranslate(),{progress:r,isBeginning:o,isEnd:a,progressLoop:s}=t,c=o,l=a;if(i===0)r=0,o=!0,a=!0;else{r=(e-t.minTranslate())/i;let u=Math.abs(e-t.minTranslate())<1,d=Math.abs(e-t.maxTranslate())<1;o=u||r<=0,a=d||r>=1,u&&(r=0),d&&(r=1)}if(n.loop){let u=t.getSlideIndexByData(0),d=t.getSlideIndexByData(t.slides.length-1),h=t.slidesGrid[u],p=t.slidesGrid[d],f=t.slidesGrid[t.slidesGrid.length-1],g=Math.abs(e);g>=h?s=(g-h)/f:s=(g+f-p)/f,s>1&&(s-=1)}Object.assign(t,{progress:r,progressLoop:s,isBeginning:o,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),o&&!c&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(c&&!o||l&&!a)&&t.emit("fromEdge"),t.emit("progress",r)}var IM=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function uU(){let e=this,{slides:t,params:n,slidesEl:i,activeIndex:r}=e,o=e.virtual&&n.virtual.enabled,a=e.grid&&n.grid&&n.grid.rows>1,s=d=>An(i,`.${n.slideClass}${d}, swiper-slide${d}`)[0],c,l,u;if(o)if(n.loop){let d=r-e.virtual.slidesBefore;d<0&&(d=e.virtual.slides.length+d),d>=e.virtual.slides.length&&(d-=e.virtual.slides.length),c=s(`[data-swiper-slide-index="${d}"]`)}else c=s(`[data-swiper-slide-index="${r}"]`);else a?(c=t.find(d=>d.column===r),u=t.find(d=>d.column===r+1),l=t.find(d=>d.column===r-1)):c=t[r];c&&(a||(u=X8(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u&&(u=t[0]),l=Y8(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!l===0&&(l=t[t.length-1]))),t.forEach(d=>{IM(d,d===c,n.slideActiveClass),IM(d,d===u,n.slideNextClass),IM(d,d===l,n.slidePrevClass)}),e.emitSlidesClasses()}var A0=(e,t)=>{if(!e||e.destroyed||!e.params)return;let n=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,i=t.closest(n());if(i){let r=i.querySelector(`.${e.params.lazyPreloaderClass}`);!r&&e.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},EM=(e,t)=>{if(!e.slides[t])return;let n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},PM=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext,n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);let i=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){let a=r,s=[a-t];s.push(...Array.from({length:t}).map((c,l)=>a+i+l)),e.slides.forEach((c,l)=>{s.includes(c.column)&&EM(e,l)});return}let o=r+i-1;if(e.params.rewind||e.params.loop)for(let a=r-t;a<=o+t;a+=1){let s=(a%n+n)%n;(s<r||s>o)&&EM(e,s)}else for(let a=Math.max(r-t,0);a<=Math.min(o+t,n-1);a+=1)a!==r&&(a>o||a<r)&&EM(e,a)};function hU(e){let{slidesGrid:t,params:n}=e,i=e.rtlTranslate?e.translate:-e.translate,r;for(let o=0;o<t.length;o+=1)typeof t[o+1]<"u"?i>=t[o]&&i<t[o+1]-(t[o+1]-t[o])/2?r=o:i>=t[o]&&i<t[o+1]&&(r=o+1):i>=t[o]&&(r=o);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function pU(e){let t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:i,params:r,activeIndex:o,realIndex:a,snapIndex:s}=t,c=e,l,u=p=>{let f=p-t.virtual.slidesBefore;return f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),f};if(typeof c>"u"&&(c=hU(t)),i.indexOf(n)>=0)l=i.indexOf(n);else{let p=Math.min(r.slidesPerGroupSkip,c);l=p+Math.floor((c-p)/r.slidesPerGroup)}if(l>=i.length&&(l=i.length-1),c===o&&!t.params.loop){l!==s&&(t.snapIndex=l,t.emit("snapIndexChange"));return}if(c===o&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=u(c);return}let d=t.grid&&r.grid&&r.grid.rows>1,h;if(t.virtual&&r.virtual.enabled&&r.loop)h=u(c);else if(d){let p=t.slides.find(g=>g.column===c),f=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(f)&&(f=Math.max(t.slides.indexOf(p),0)),h=Math.floor(f/r.grid.rows)}else if(t.slides[c]){let p=t.slides[c].getAttribute("data-swiper-slide-index");p?h=parseInt(p,10):h=c}else h=c;Object.assign(t,{previousSnapIndex:s,snapIndex:l,previousRealIndex:a,realIndex:h,previousIndex:o,activeIndex:c}),t.initialized&&PM(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==h&&t.emit("realIndexChange"),t.emit("slideChange"))}function fU(e,t){let n=this,i=n.params,r=e.closest(`.${i.slideClass}, swiper-slide`);!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(s=>{!r&&s.matches&&s.matches(`.${i.slideClass}, swiper-slide`)&&(r=s)});let o=!1,a;if(r){for(let s=0;s<n.slides.length;s+=1)if(n.slides[s]===r){o=!0,a=s;break}}if(r&&o)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=a;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}i.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var mU={updateSize:oU,updateSlides:aU,updateAutoHeight:sU,updateSlidesOffset:cU,updateSlidesProgress:lU,updateProgress:dU,updateSlidesClasses:uU,updateActiveIndex:pU,updateClickedSlide:fU};function gU(e){e===void 0&&(e=this.isHorizontal()?"x":"y");let t=this,{params:n,rtlTranslate:i,translate:r,wrapperEl:o}=t;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let a=wM(o,e);return a+=t.cssOverflowAdjustment(),i&&(a=-a),a||0}function yU(e,t){let n=this,{rtlTranslate:i,params:r,wrapperEl:o,progress:a}=n,s=0,c=0,l=0;n.isHorizontal()?s=i?-e:e:c=e,r.roundLengths&&(s=Math.floor(s),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?s:c,r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-s:-c:r.virtualTranslate||(n.isHorizontal()?s-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${s}px, ${c}px, ${l}px)`);let u,d=n.maxTranslate()-n.minTranslate();d===0?u=0:u=(e-n.minTranslate())/d,u!==a&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function vU(){return-this.snapGrid[0]}function kU(){return-this.snapGrid[this.snapGrid.length-1]}function MU(e,t,n,i,r){e===void 0&&(e=0),t===void 0&&(t=this.params.speed),n===void 0&&(n=!0),i===void 0&&(i=!0);let o=this,{params:a,wrapperEl:s}=o;if(o.animating&&a.preventInteractionOnTransition)return!1;let c=o.minTranslate(),l=o.maxTranslate(),u;if(i&&e>c?u=c:i&&e<l?u=l:u=e,o.updateProgress(u),a.cssMode){let d=o.isHorizontal();if(t===0)s[d?"scrollLeft":"scrollTop"]=-u;else{if(!o.support.smoothScroll)return bM({swiper:o,targetPosition:-u,side:d?"left":"top"}),!0;s.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return t===0?(o.setTransition(0),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(h){!o||o.destroyed||h.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var xU={getTranslate:gU,setTranslate:yU,minTranslate:vU,maxTranslate:kU,translateTo:MU};function wU(e,t){let n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=e===0?"0ms":""),n.emit("setTransition",e,t)}function o6(e){let{swiper:t,runCallbacks:n,direction:i,step:r}=e,{activeIndex:o,previousIndex:a}=t,s=i;s||(o>a?s="next":o<a?s="prev":s="reset"),t.emit(`transition${r}`),n&&s==="reset"?t.emit(`slideResetTransition${r}`):n&&o!==a&&(t.emit(`slideChangeTransition${r}`),s==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`))}function bU(e,t){e===void 0&&(e=!0);let n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),o6({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function CU(e,t){e===void 0&&(e=!0);let n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),o6({swiper:n,runCallbacks:e,direction:t,step:"End"}))}var SU={setTransition:wU,transitionStart:bU,transitionEnd:CU};function _U(e,t,n,i,r){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));let o=this,a=e;a<0&&(a=0);let{params:s,snapGrid:c,slidesGrid:l,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:p,enabled:f}=o;if(!f&&!i&&!r||o.destroyed||o.animating&&s.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=o.params.speed);let g=Math.min(o.params.slidesPerGroupSkip,a),b=g+Math.floor((a-g)/o.params.slidesPerGroup);b>=c.length&&(b=c.length-1);let x=-c[b];if(s.normalizeSlideIndex)for(let m=0;m<l.length;m+=1){let k=-Math.floor(x*100),w=Math.floor(l[m]*100),S=Math.floor(l[m+1]*100);typeof l[m+1]<"u"?k>=w&&k<S-(S-w)/2?a=m:k>=w&&k<S&&(a=m+1):k>=w&&(a=m)}if(o.initialized&&a!==d&&(!o.allowSlideNext&&(h?x>o.translate&&x>o.minTranslate():x<o.translate&&x<o.minTranslate())||!o.allowSlidePrev&&x>o.translate&&x>o.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(x);let M;a>d?M="next":a<d?M="prev":M="reset";let C=o.virtual&&o.params.virtual.enabled;if(!(C&&r)&&(h&&-x===o.translate||!h&&x===o.translate))return o.updateActiveIndex(a),s.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),s.effect!=="slide"&&o.setTranslate(x),M!=="reset"&&(o.transitionStart(n,M),o.transitionEnd(n,M)),!1;if(s.cssMode){let m=o.isHorizontal(),k=h?x:-x;if(t===0)C&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),C&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[m?"scrollLeft":"scrollTop"]=k})):p[m?"scrollLeft":"scrollTop"]=k,C&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return bM({swiper:o,targetPosition:k,side:m?"left":"top"}),!0;p.scrollTo({[m?"left":"top"]:k,behavior:"smooth"})}return!0}let F=r6().isSafari;return C&&!r&&F&&o.isElement&&o.virtual.update(!1,!1,a),o.setTransition(t),o.setTranslate(x),o.updateActiveIndex(a),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,i),o.transitionStart(n,M),t===0?o.transitionEnd(n,M):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(k){!o||o.destroyed||k.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,M))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function IU(e,t,n,i){e===void 0&&(e=0),n===void 0&&(n=!0),typeof e=="string"&&(e=parseInt(e,10));let r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);let o=r.grid&&r.params.grid&&r.params.grid.rows>1,a=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a=a+r.virtual.slidesBefore;else{let s;if(o){let h=a*r.params.grid.rows;s=r.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===h).column}else s=r.getSlideIndexByData(a);let c=o?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:l}=r.params,u=r.params.slidesPerView;u==="auto"?u=r.slidesPerViewDynamic():(u=Math.ceil(parseFloat(r.params.slidesPerView,10)),l&&u%2===0&&(u=u+1));let d=c-s<u;if(l&&(d=d||s<Math.ceil(u/2)),i&&l&&r.params.slidesPerView!=="auto"&&!o&&(d=!1),d){let h=l?s<r.activeIndex?"prev":"next":s-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?s+1:s-c+1,slideRealIndex:h==="next"?r.realIndex:void 0})}if(o){let h=a*r.params.grid.rows;a=r.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===h).column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,t,n,i)}),r}function EU(e,t,n){t===void 0&&(t=!0);let i=this,{enabled:r,params:o,animating:a}=i;if(!r||i.destroyed)return i;typeof e>"u"&&(e=i.params.speed);let s=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(s=Math.max(i.slidesPerViewDynamic("current",!0),1));let c=i.activeIndex<o.slidesPerGroupSkip?1:s,l=i.virtual&&o.virtual.enabled;if(o.loop){if(a&&!l&&o.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+c,e,t,n)}),!0}return o.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+c,e,t,n)}function DU(e,t,n){t===void 0&&(t=!0);let i=this,{params:r,snapGrid:o,slidesGrid:a,rtlTranslate:s,enabled:c,animating:l}=i;if(!c||i.destroyed)return i;typeof e>"u"&&(e=i.params.speed);let u=i.virtual&&r.virtual.enabled;if(r.loop){if(l&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}let d=s?i.translate:-i.translate;function h(M){return M<0?-Math.floor(Math.abs(M)):Math.floor(M)}let p=h(d),f=o.map(M=>h(M)),g=r.freeMode&&r.freeMode.enabled,b=o[f.indexOf(p)-1];if(typeof b>"u"&&(r.cssMode||g)){let M;o.forEach((C,E)=>{p>=C&&(M=E)}),typeof M<"u"&&(b=g?o[M]:o[M>0?M-1:M])}let x=0;if(typeof b<"u"&&(x=a.indexOf(b),x<0&&(x=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(x=x-i.slidesPerViewDynamic("previous",!0)+1,x=Math.max(x,0))),r.rewind&&i.isBeginning){let M=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(M,e,t,n)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(x,e,t,n)}),!0;return i.slideTo(x,e,t,n)}function TU(e,t,n){t===void 0&&(t=!0);let i=this;if(!i.destroyed)return typeof e>"u"&&(e=i.params.speed),i.slideTo(i.activeIndex,e,t,n)}function PU(e,t,n,i){t===void 0&&(t=!0),i===void 0&&(i=.5);let r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);let o=r.activeIndex,a=Math.min(r.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/r.params.slidesPerGroup),c=r.rtlTranslate?r.translate:-r.translate;if(c>=r.snapGrid[s]){let l=r.snapGrid[s],u=r.snapGrid[s+1];c-l>(u-l)*i&&(o+=r.params.slidesPerGroup)}else{let l=r.snapGrid[s-1],u=r.snapGrid[s];c-l<=(u-l)*i&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,e,t,n)}function AU(){let e=this;if(e.destroyed)return;let{params:t,slidesEl:n}=e,i=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView,r=e.clickedIndex,o,a=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;o=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?r<e.loopedSlides-i/2||r>e.slides.length-e.loopedSlides+i/2?(e.loopFix(),r=e.getSlideIndex(An(n,`${a}[data-swiper-slide-index="${o}"]`)[0]),Cs(()=>{e.slideTo(r)})):e.slideTo(r):r>e.slides.length-i?(e.loopFix(),r=e.getSlideIndex(An(n,`${a}[data-swiper-slide-index="${o}"]`)[0]),Cs(()=>{e.slideTo(r)})):e.slideTo(r)}else e.slideTo(r)}var LU={slideTo:_U,slideToLoop:IU,slideNext:EU,slidePrev:DU,slideReset:TU,slideToClosest:PU,slideToClickedSlide:AU};function OU(e,t){let n=this,{params:i,slidesEl:r}=n;if(!i.loop||n.virtual&&n.params.virtual.enabled)return;let o=()=>{An(r,`.${i.slideClass}, swiper-slide`).forEach((h,p)=>{h.setAttribute("data-swiper-slide-index",p)})},a=n.grid&&i.grid&&i.grid.rows>1,s=i.slidesPerGroup*(a?i.grid.rows:1),c=n.slides.length%s!==0,l=a&&n.slides.length%i.grid.rows!==0,u=d=>{for(let h=0;h<d;h+=1){let p=n.isElement?Zi("swiper-slide",[i.slideBlankClass]):Zi("div",[i.slideClass,i.slideBlankClass]);n.slidesEl.append(p)}};if(c){if(i.loopAddBlankSlides){let d=s-n.slides.length%s;u(d),n.recalcSlides(),n.updateSlides()}else Au("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(l){if(i.loopAddBlankSlides){let d=i.grid.rows-n.slides.length%i.grid.rows;u(d),n.recalcSlides(),n.updateSlides()}else Au("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();n.loopFix({slideRealIndex:e,direction:i.centeredSlides?void 0:"next",initial:t})}function RU(e){let{slideRealIndex:t,slideTo:n=!0,direction:i,setTranslate:r,activeSlideIndex:o,initial:a,byController:s,byMousewheel:c}=e===void 0?{}:e,l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");let{slides:u,allowSlidePrev:d,allowSlideNext:h,slidesEl:p,params:f}=l,{centeredSlides:g,initialSlide:b}=f;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&f.virtual.enabled){n&&(!f.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):f.centeredSlides&&l.snapIndex<f.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let x=f.slidesPerView;x==="auto"?x=l.slidesPerViewDynamic():(x=Math.ceil(parseFloat(f.slidesPerView,10)),g&&x%2===0&&(x=x+1));let M=f.slidesPerGroupAuto?x:f.slidesPerGroup,C=M;C%M!==0&&(C+=M-C%M),C+=f.loopAdditionalSlides,l.loopedSlides=C;let E=l.grid&&f.grid&&f.grid.rows>1;u.length<x+C||l.params.effect==="cards"&&u.length<x+C*2?Au("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):E&&f.grid.fill==="row"&&Au("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");let T=[],F=[],m=E?Math.ceil(u.length/f.grid.rows):u.length,k=a&&m-b<x&&!g,w=k?b:l.activeIndex;typeof o>"u"?o=l.getSlideIndex(u.find(P=>P.classList.contains(f.slideActiveClass))):w=o;let S=i==="next"||!i,D=i==="prev"||!i,R=0,B=0,W=(E?u[o].column:o)+(g&&typeof r>"u"?-x/2+.5:0);if(W<C){R=Math.max(C-W,M);for(let P=0;P<C-W;P+=1){let O=P-Math.floor(P/m)*m;if(E){let N=m-O-1;for(let z=u.length-1;z>=0;z-=1)u[z].column===N&&T.push(z)}else T.push(m-O-1)}}else if(W+x>m-C){B=Math.max(W-(m-C*2),M),k&&(B=Math.max(B,x-m+b+1));for(let P=0;P<B;P+=1){let O=P-Math.floor(P/m)*m;E?u.forEach((N,z)=>{N.column===O&&F.push(z)}):F.push(O)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),l.params.effect==="cards"&&u.length<x+C*2&&(F.includes(o)&&F.splice(F.indexOf(o),1),T.includes(o)&&T.splice(T.indexOf(o),1)),D&&T.forEach(P=>{u[P].swiperLoopMoveDOM=!0,p.prepend(u[P]),u[P].swiperLoopMoveDOM=!1}),S&&F.forEach(P=>{u[P].swiperLoopMoveDOM=!0,p.append(u[P]),u[P].swiperLoopMoveDOM=!1}),l.recalcSlides(),f.slidesPerView==="auto"?l.updateSlides():E&&(T.length>0&&D||F.length>0&&S)&&l.slides.forEach((P,O)=>{l.grid.updateSlide(O,P,l.slides)}),f.watchSlidesProgress&&l.updateSlidesOffset(),n){if(T.length>0&&D){if(typeof t>"u"){let P=l.slidesGrid[w],N=l.slidesGrid[w+R]-P;c?l.setTranslate(l.translate-N):(l.slideTo(w+Math.ceil(R),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-N,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-N))}else if(r){let P=E?T.length/f.grid.rows:T.length;l.slideTo(l.activeIndex+P,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(F.length>0&&S)if(typeof t>"u"){let P=l.slidesGrid[w],N=l.slidesGrid[w-B]-P;c?l.setTranslate(l.translate-N):(l.slideTo(w-B,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-N,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-N))}else{let P=E?F.length/f.grid.rows:F.length;l.slideTo(l.activeIndex-P,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!s){let P={slideRealIndex:t,direction:i,setTranslate:r,activeSlideIndex:o,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(O=>{!O.destroyed&&O.params.loop&&O.loopFix(ge(ee({},P),{slideTo:O.params.slidesPerView===f.slidesPerView?n:!1}))}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix(ge(ee({},P),{slideTo:l.controller.control.params.slidesPerView===f.slidesPerView?n:!1}))}l.emit("loopFix")}function NU(){let e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();let i=[];e.slides.forEach(r=>{let o=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[o]=r}),e.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{n.append(r)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var FU={loopCreate:OU,loopFix:RU,loopDestroy:NU};function VU(e){let t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;let n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function BU(){let e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var zU={setGrabCursor:VU,unsetGrabCursor:BU};function jU(e,t){t===void 0&&(t=this);function n(i){if(!i||i===Hn()||i===Xt())return null;i.assignedSlot&&(i=i.assignedSlot);let r=i.closest(e);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(t)}function K8(e,t,n){let i=Xt(),{params:r}=e,o=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return o&&(n<=a||n>=i.innerWidth-a)?o==="prevent"?(t.preventDefault(),!0):!1:!0}function HU(e){let t=this,n=Hn(),i=e;i.originalEvent&&(i=i.originalEvent);let r=t.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){K8(t,i,i.targetTouches[0].pageX);return}let{params:o,touches:a,enabled:s}=t;if(!s||!o.simulateTouch&&i.pointerType==="mouse"||t.animating&&o.preventInteractionOnTransition)return;!t.animating&&o.cssMode&&o.loop&&t.loopFix();let c=i.target;if(o.touchEventsTarget==="wrapper"&&!Z8(c,t.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;let l=!!o.noSwipingClass&&o.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;l&&i.target&&i.target.shadowRoot&&u&&(c=u[0]);let d=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,h=!!(i.target&&i.target.shadowRoot);if(o.noSwiping&&(h?jU(d,c):c.closest(d))){t.allowClick=!0;return}if(o.swipeHandler&&!c.closest(o.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;let p=a.currentX,f=a.currentY;if(!K8(t,i,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,r.touchStartTime=Ss(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1);let g=!0;c.matches(r.focusableElements)&&(g=!1,c.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==c&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!c.matches(r.focusableElements))&&n.activeElement.blur();let b=g&&t.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||b)&&!c.isContentEditable&&i.preventDefault(),o.freeMode&&o.freeMode.enabled&&t.freeMode&&t.animating&&!o.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",i)}function UU(e){let t=Hn(),n=this,i=n.touchEventsData,{params:r,touches:o,rtlTranslate:a,enabled:s}=n;if(!s||!r.simulateTouch&&e.pointerType==="mouse")return;let c=e;if(c.originalEvent&&(c=c.originalEvent),c.type==="pointermove"&&(i.touchId!==null||c.pointerId!==i.pointerId))return;let l;if(c.type==="touchmove"){if(l=[...c.changedTouches].find(F=>F.identifier===i.touchId),!l||l.identifier!==i.touchId)return}else l=c;if(!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",c);return}let u=l.pageX,d=l.pageY;if(c.preventedByNestedSwiper){o.startX=u,o.startY=d;return}if(!n.allowTouchMove){c.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(o,{startX:u,startY:d,currentX:u,currentY:d}),i.touchStartTime=Ss());return}if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(d<o.startY&&n.translate<=n.maxTranslate()||d>o.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(a&&(u>o.startX&&-n.translate<=n.maxTranslate()||u<o.startX&&-n.translate>=n.minTranslate()))return;if(!a&&(u<o.startX&&n.translate<=n.maxTranslate()||u>o.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==c.target&&c.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}i.allowTouchCallbacks&&n.emit("touchMove",c),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=u,o.currentY=d;let h=o.currentX-o.startX,p=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let F;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?i.isScrolling=!1:h*h+p*p>=25&&(F=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,i.isScrolling=n.isHorizontal()?F>r.touchAngle:90-F>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",c),typeof i.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(i.startMoving=!0),i.isScrolling||c.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let f=n.isHorizontal()?h:p,g=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;r.oneWayMovement&&(f=Math.abs(f)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),o.diff=f,f*=r.touchRatio,a&&(f=-f,g=-g);let b=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=g>0?"prev":"next";let x=n.params.loop&&!r.cssMode,M=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!i.isMoved){if(x&&M&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){let F=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(F)}i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}let C;if(new Date().getTime(),r._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&b!==n.touchesDirection&&x&&M&&Math.abs(f)>=1){Object.assign(o,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}n.emit("sliderMove",c),i.isMoved=!0,i.currentTranslate=f+i.startTranslate;let E=!0,T=r.resistanceRatio;if(r.touchReleaseOnEdges&&(T=0),f>0?(x&&M&&!C&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(E=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+f)**T))):f<0&&(x&&M&&!C&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(E=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-f)**T))),E&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(f)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,i.currentTranslate=i.startTranslate,o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function qU(e){let t=this,n=t.touchEventsData,i=e;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].find(T=>T.identifier===n.touchId),!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return;n.pointerId=null,n.touchId=null;let{params:a,touches:s,rtlTranslate:c,slidesGrid:l,enabled:u}=t;if(!u||!a.simulateTouch&&i.pointerType==="mouse")return;if(n.allowTouchCallbacks&&t.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&a.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}a.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);let d=Ss(),h=d-n.touchStartTime;if(t.allowClick){let T=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(T&&T[0]||i.target,T),t.emit("tap click",i),h<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(n.lastClickTime=Ss(),Cs(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||s.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let p;if(a.followFinger?p=c?t.translate:-t.translate:p=-n.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:p});return}let f=p>=-t.maxTranslate()&&!t.params.loop,g=0,b=t.slidesSizesGrid[0];for(let T=0;T<l.length;T+=T<a.slidesPerGroupSkip?1:a.slidesPerGroup){let F=T<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof l[T+F]<"u"?(f||p>=l[T]&&p<l[T+F])&&(g=T,b=l[T+F]-l[T]):(f||p>=l[T])&&(g=T,b=l[l.length-1]-l[l.length-2])}let x=null,M=null;a.rewind&&(t.isBeginning?M=a.virtual&&a.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(x=0));let C=(p-l[g])/b,E=g<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(h>a.longSwipesMs){if(!a.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(C>=a.longSwipesRatio?t.slideTo(a.rewind&&t.isEnd?x:g+E):t.slideTo(g)),t.swipeDirection==="prev"&&(C>1-a.longSwipesRatio?t.slideTo(g+E):M!==null&&C<0&&Math.abs(C)>a.longSwipesRatio?t.slideTo(M):t.slideTo(g))}else{if(!a.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(g+E):t.slideTo(g):(t.swipeDirection==="next"&&t.slideTo(x!==null?x:g+E),t.swipeDirection==="prev"&&t.slideTo(M!==null?M:g))}}function Q8(){let e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();let{allowSlideNext:i,allowSlidePrev:r,snapGrid:o}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();let s=a&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!s?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}function $U(e){let t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function GU(){let e=this,{wrapperEl:t,rtlTranslate:n,enabled:i}=e;if(!i)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let r,o=e.maxTranslate()-e.minTranslate();o===0?r=0:r=(e.translate-e.minTranslate())/o,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function WU(e){let t=this;A0(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function ZU(){let e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}var a6=(e,t)=>{let n=Hn(),{params:i,el:r,wrapperEl:o,device:a}=e,s=!!i.nested,c=t==="on"?"addEventListener":"removeEventListener",l=t;!r||typeof r=="string"||(n[c]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:s}),r[c]("touchstart",e.onTouchStart,{passive:!1}),r[c]("pointerdown",e.onTouchStart,{passive:!1}),n[c]("touchmove",e.onTouchMove,{passive:!1,capture:s}),n[c]("pointermove",e.onTouchMove,{passive:!1,capture:s}),n[c]("touchend",e.onTouchEnd,{passive:!0}),n[c]("pointerup",e.onTouchEnd,{passive:!0}),n[c]("pointercancel",e.onTouchEnd,{passive:!0}),n[c]("touchcancel",e.onTouchEnd,{passive:!0}),n[c]("pointerout",e.onTouchEnd,{passive:!0}),n[c]("pointerleave",e.onTouchEnd,{passive:!0}),n[c]("contextmenu",e.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[c]("click",e.onClick,!0),i.cssMode&&o[c]("scroll",e.onScroll),i.updateOnWindowResize?e[l](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Q8,!0):e[l]("observerUpdate",Q8,!0),r[c]("load",e.onLoad,{capture:!0}))};function YU(){let e=this,{params:t}=e;e.onTouchStart=HU.bind(e),e.onTouchMove=UU.bind(e),e.onTouchEnd=qU.bind(e),e.onDocumentTouchStart=ZU.bind(e),t.cssMode&&(e.onScroll=GU.bind(e)),e.onClick=$U.bind(e),e.onLoad=WU.bind(e),a6(e,"on")}function XU(){a6(this,"off")}var JU={attachEvents:YU,detachEvents:XU},e6=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function KU(){let e=this,{realIndex:t,initialized:n,params:i,el:r}=e,o=i.breakpoints;if(!o||o&&Object.keys(o).length===0)return;let a=Hn(),s=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",c=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?e.el:a.querySelector(i.breakpointsBase),l=e.getBreakpoint(o,s,c);if(!l||e.currentBreakpoint===l)return;let d=(l in o?o[l]:void 0)||e.originalParams,h=e6(e,i),p=e6(e,d),f=e.params.grabCursor,g=d.grabCursor,b=i.enabled;h&&!p?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!h&&p&&(r.classList.add(`${i.containerModifierClass}grid`),(d.grid.fill&&d.grid.fill==="column"||!d.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),f&&!g?e.unsetGrabCursor():!f&&g&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(F=>{if(typeof d[F]>"u")return;let m=i[F]&&i[F].enabled,k=d[F]&&d[F].enabled;m&&!k&&e[F].disable(),!m&&k&&e[F].enable()});let x=d.direction&&d.direction!==i.direction,M=i.loop&&(d.slidesPerView!==i.slidesPerView||x),C=i.loop;x&&n&&e.changeDirection(),Mi(e.params,d);let E=e.params.enabled,T=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),b&&!E?e.disable():!b&&E&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",d),n&&(M?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!C&&T?(e.loopCreate(t),e.updateSlides()):C&&!T&&e.loopDestroy()),e.emit("breakpoint",d)}function QU(e,t,n){if(t===void 0&&(t="window"),!e||t==="container"&&!n)return;let i=!1,r=Xt(),o=t==="window"?r.innerHeight:n.clientHeight,a=Object.keys(e).map(s=>{if(typeof s=="string"&&s.indexOf("@")===0){let c=parseFloat(s.substr(1));return{value:o*c,point:s}}return{value:s,point:s}});a.sort((s,c)=>parseInt(s.value,10)-parseInt(c.value,10));for(let s=0;s<a.length;s+=1){let{point:c,value:l}=a[s];t==="window"?r.matchMedia(`(min-width: ${l}px)`).matches&&(i=c):l<=n.clientWidth&&(i=c)}return i||"max"}var eq={setBreakpoint:KU,getBreakpoint:QU};function tq(e,t){let n=[];return e.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(t+r)}):typeof i=="string"&&n.push(t+i)}),n}function nq(){let e=this,{classNames:t,params:n,rtl:i,el:r,device:o}=e,a=tq(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...a),r.classList.add(...t),e.emitContainerClasses()}function iq(){let e=this,{el:t,classNames:n}=e;!t||typeof t=="string"||(t.classList.remove(...n),e.emitContainerClasses())}var rq={addClasses:nq,removeClasses:iq};function oq(){let e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:i}=n;if(i){let r=e.slides.length-1,o=e.slidesGrid[r]+e.slidesSizesGrid[r]+i*2;e.isLocked=e.size>o}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var aq={checkOverflow:oq},t6={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function sq(e,t){return function(i){i===void 0&&(i={});let r=Object.keys(i)[0],o=i[r];if(typeof o!="object"||o===null){Mi(t,i);return}if(e[r]===!0&&(e[r]={enabled:!0}),r==="navigation"&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),!(r in e&&"enabled"in o)){Mi(t,i);return}typeof e[r]=="object"&&!("enabled"in e[r])&&(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),Mi(t,i)}}var DM={eventsEmitter:rU,update:mU,translate:xU,transition:SU,slide:LU,loop:FU,grabCursor:zU,events:JU,breakpoints:eq,checkOverflow:aq,classes:rq},TM={},xi=class e{constructor(){let t,n;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?n=r[0]:[t,n]=r,n||(n={}),n=Mi({},n),t&&!n.el&&(n.el=t);let a=Hn();if(n.el&&typeof n.el=="string"&&a.querySelectorAll(n.el).length>1){let u=[];return a.querySelectorAll(n.el).forEach(d=>{let h=Mi({},n,{el:d});u.push(new e(h))}),u}let s=this;s.__swiper__=!0,s.support=n6(),s.device=i6({userAgent:n.userAgent}),s.browser=r6(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],n.modules&&Array.isArray(n.modules)&&s.modules.push(...n.modules);let c={};s.modules.forEach(u=>{u({params:n,swiper:s,extendParams:sq(n,c),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});let l=Mi({},t6,c);return s.params=Mi({},l,TM,n),s.originalParams=Mi({},s.params),s.passedParams=Mi({},n),s.params&&s.params.on&&Object.keys(s.params.on).forEach(u=>{s.on(u,s.params.on[u])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){let{slidesEl:n,params:i}=this,r=An(n,`.${i.slideClass}, swiper-slide`),o=_s(r[0]);return _s(t)-o}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===t))}recalcSlides(){let t=this,{slidesEl:n,params:i}=t;t.slides=An(n,`.${i.slideClass}, swiper-slide`)}enable(){let t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){let t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){let i=this;t=Math.min(Math.max(t,0),1);let r=i.minTranslate(),a=(i.maxTranslate()-r)*t+r;i.translateTo(a,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){let t=this;if(!t.params._emitClasses||!t.el)return;let n=t.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){let n=this;return n.destroyed?"":t.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){let t=this;if(!t.params._emitClasses||!t.el)return;let n=[];t.slides.forEach(i=>{let r=t.getSlideClasses(i);n.push({slideEl:i,classNames:r}),t.emit("_slideClass",i,r)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t,n){t===void 0&&(t="current"),n===void 0&&(n=!1);let i=this,{params:r,slides:o,slidesGrid:a,slidesSizesGrid:s,size:c,activeIndex:l}=i,u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=o[l]?Math.ceil(o[l].swiperSlideSize):0,h;for(let p=l+1;p<o.length;p+=1)o[p]&&!h&&(d+=Math.ceil(o[p].swiperSlideSize),u+=1,d>c&&(h=!0));for(let p=l-1;p>=0;p-=1)o[p]&&!h&&(d+=o[p].swiperSlideSize,u+=1,d>c&&(h=!0))}else if(t==="current")for(let d=l+1;d<o.length;d+=1)(n?a[d]+s[d]-a[l]<c:a[d]-a[l]<c)&&(u+=1);else for(let d=l-1;d>=0;d-=1)a[l]-a[d]<c&&(u+=1);return u}update(){let t=this;if(!t||t.destroyed)return;let{snapGrid:n,params:i}=t;i.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&A0(t,a)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function r(){let a=t.rtlTranslate?t.translate*-1:t.translate,s=Math.min(Math.max(a,t.maxTranslate()),t.minTranslate());t.setTranslate(s),t.updateActiveIndex(),t.updateSlidesClasses()}let o;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&t.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&t.isEnd&&!i.centeredSlides){let a=t.virtual&&i.virtual.enabled?t.virtual.slides:t.slides;o=t.slideTo(a.length-1,0,!1,!0)}else o=t.slideTo(t.activeIndex,0,!1,!0);o||r()}i.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n){n===void 0&&(n=!0);let i=this,r=i.params.direction;return t||(t=r==="horizontal"?"vertical":"horizontal"),t===r||t!=="horizontal"&&t!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${t}`),i.emitContainerClasses(),i.params.direction=t,i.slides.forEach(o=>{t==="vertical"?o.style.width="":o.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(t){let n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){let n=this;if(n.mounted)return!0;let i=t||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);let r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`,a=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):An(i,r())[0];return!a&&n.params.createElements&&(a=Zi("div",n.params.wrapperClass),i.append(a),An(i,`.${n.params.slideClass}`).forEach(s=>{a.append(s)})),Object.assign(n,{el:i,wrapperEl:a,slidesEl:n.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:n.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Co(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Co(i,"direction")==="rtl"),wrongRTL:Co(a,"display")==="-webkit-box"}),!0}init(t){let n=this;if(n.initialized||n.mount(t)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();let r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(o=>{o.complete?A0(n,o):o.addEventListener("load",a=>{A0(n,a.target)})}),PM(n),n.initialized=!0,PM(n),n.emit("init"),n.emit("afterInit"),n}destroy(t,n){t===void 0&&(t=!0),n===void 0&&(n=!0);let i=this,{params:r,el:o,wrapperEl:a,slides:s}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),a&&a.removeAttribute("style"),s&&s.length&&s.forEach(c=>{c.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(c=>{i.off(c)}),t!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),W8(i)),i.destroyed=!0),null}static extendDefaults(t){Mi(TM,t)}static get extendedDefaults(){return TM}static get defaults(){return t6}static installModule(t){e.prototype.__modules__||(e.prototype.__modules__=[]);let n=e.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>e.installModule(n)),e):(e.installModule(t),e)}};Object.keys(DM).forEach(e=>{Object.keys(DM[e]).forEach(t=>{xi.prototype[t]=DM[e][t]})});xi.use([nU,iU]);function Ru(e,t,n,i){return e.params.createElements&&Object.keys(i).forEach(r=>{if(!n[r]&&n.auto===!0){let o=An(e.el,`.${i[r]}`)[0];o||(o=Zi("div",i[r]),o.className=i[r],e.el.append(o)),n[r]=o,t[r]=o}}),n}function Is(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null};function o(f){let g;return f&&typeof f=="string"&&t.isElement&&(g=t.el.querySelector(f)||t.hostEl.querySelector(f),g)?g:(f&&(typeof f=="string"&&(g=[...document.querySelectorAll(f)]),t.params.uniqueNavElements&&typeof f=="string"&&g&&g.length>1&&t.el.querySelectorAll(f).length===1?g=t.el.querySelector(f):g&&g.length===1&&(g=g[0])),f&&!g?f:g)}function a(f,g){let b=t.params.navigation;f=Jt(f),f.forEach(x=>{x&&(x.classList[g?"add":"remove"](...b.disabledClass.split(" ")),x.tagName==="BUTTON"&&(x.disabled=g),t.params.watchOverflow&&t.enabled&&x.classList[t.isLocked?"add":"remove"](b.lockClass))})}function s(){let{nextEl:f,prevEl:g}=t.navigation;if(t.params.loop){a(g,!1),a(f,!1);return}a(g,t.isBeginning&&!t.params.rewind),a(f,t.isEnd&&!t.params.rewind)}function c(f){f.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function l(f){f.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function u(){let f=t.params.navigation;if(t.params.navigation=Ru(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(f.nextEl||f.prevEl))return;let g=o(f.nextEl),b=o(f.prevEl);Object.assign(t.navigation,{nextEl:g,prevEl:b}),g=Jt(g),b=Jt(b);let x=(M,C)=>{M&&M.addEventListener("click",C==="next"?l:c),!t.enabled&&M&&M.classList.add(...f.lockClass.split(" "))};g.forEach(M=>x(M,"next")),b.forEach(M=>x(M,"prev"))}function d(){let{nextEl:f,prevEl:g}=t.navigation;f=Jt(f),g=Jt(g);let b=(x,M)=>{x.removeEventListener("click",M==="next"?l:c),x.classList.remove(...t.params.navigation.disabledClass.split(" "))};f.forEach(x=>b(x,"next")),g.forEach(x=>b(x,"prev"))}i("init",()=>{t.params.navigation.enabled===!1?p():(u(),s())}),i("toEdge fromEdge lock unlock",()=>{s()}),i("destroy",()=>{d()}),i("enable disable",()=>{let{nextEl:f,prevEl:g}=t.navigation;if(f=Jt(f),g=Jt(g),t.enabled){s();return}[...f,...g].filter(b=>!!b).forEach(b=>b.classList.add(t.params.navigation.lockClass))}),i("click",(f,g)=>{let{nextEl:b,prevEl:x}=t.navigation;b=Jt(b),x=Jt(x);let M=g.target,C=x.includes(M)||b.includes(M);if(t.isElement&&!C){let E=g.path||g.composedPath&&g.composedPath();E&&(C=E.find(T=>b.includes(T)||x.includes(T)))}if(t.params.navigation.hideOnClick&&!C){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===M||t.pagination.el.contains(M)))return;let E;b.length?E=b[0].classList.contains(t.params.navigation.hiddenClass):x.length&&(E=x[0].classList.contains(t.params.navigation.hiddenClass)),r(E===!0?"navigationShow":"navigationHide"),[...b,...x].filter(T=>!!T).forEach(T=>T.classList.toggle(t.params.navigation.hiddenClass))}});let h=()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),u(),s()},p=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(t.navigation,{enable:h,disable:p,update:s,init:u,destroy:d})}function ha(e){return e===void 0&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Es(e){let{swiper:t,extendParams:n,on:i,emit:r}=e,o="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:M=>M,formatFractionTotal:M=>M,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),t.pagination={el:null,bullets:[]};let a,s=0;function c(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function l(M,C){let{bulletActiveClass:E}=t.params.pagination;M&&(M=M[`${C==="prev"?"previous":"next"}ElementSibling`],M&&(M.classList.add(`${E}-${C}`),M=M[`${C==="prev"?"previous":"next"}ElementSibling`],M&&M.classList.add(`${E}-${C}-${C}`)))}function u(M,C,E){if(M=M%E,C=C%E,C===M+1)return"next";if(C===M-1)return"previous"}function d(M){let C=M.target.closest(ha(t.params.pagination.bulletClass));if(!C)return;M.preventDefault();let E=_s(C)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===E)return;let T=u(t.realIndex,E,t.slides.length);T==="next"?t.slideNext():T==="previous"?t.slidePrev():t.slideToLoop(E)}else t.slideTo(E)}function h(){let M=t.rtl,C=t.params.pagination;if(c())return;let E=t.pagination.el;E=Jt(E);let T,F,m=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,k=t.params.loop?Math.ceil(m/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(F=t.previousRealIndex||0,T=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(T=t.snapIndex,F=t.previousSnapIndex):(F=t.previousIndex||0,T=t.activeIndex||0),C.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){let w=t.pagination.bullets,S,D,R;if(C.dynamicBullets&&(a=Lu(w[0],t.isHorizontal()?"width":"height",!0),E.forEach(B=>{B.style[t.isHorizontal()?"width":"height"]=`${a*(C.dynamicMainBullets+4)}px`}),C.dynamicMainBullets>1&&F!==void 0&&(s+=T-(F||0),s>C.dynamicMainBullets-1?s=C.dynamicMainBullets-1:s<0&&(s=0)),S=Math.max(T-s,0),D=S+(Math.min(w.length,C.dynamicMainBullets)-1),R=(D+S)/2),w.forEach(B=>{let j=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(W=>`${C.bulletActiveClass}${W}`)].map(W=>typeof W=="string"&&W.includes(" ")?W.split(" "):W).flat();B.classList.remove(...j)}),E.length>1)w.forEach(B=>{let j=_s(B);j===T?B.classList.add(...C.bulletActiveClass.split(" ")):t.isElement&&B.setAttribute("part","bullet"),C.dynamicBullets&&(j>=S&&j<=D&&B.classList.add(...`${C.bulletActiveClass}-main`.split(" ")),j===S&&l(B,"prev"),j===D&&l(B,"next"))});else{let B=w[T];if(B&&B.classList.add(...C.bulletActiveClass.split(" ")),t.isElement&&w.forEach((j,W)=>{j.setAttribute("part",W===T?"bullet-active":"bullet")}),C.dynamicBullets){let j=w[S],W=w[D];for(let P=S;P<=D;P+=1)w[P]&&w[P].classList.add(...`${C.bulletActiveClass}-main`.split(" "));l(j,"prev"),l(W,"next")}}if(C.dynamicBullets){let B=Math.min(w.length,C.dynamicMainBullets+4),j=(a*B-a)/2-R*a,W=M?"right":"left";w.forEach(P=>{P.style[t.isHorizontal()?W:"top"]=`${j}px`})}}E.forEach((w,S)=>{if(C.type==="fraction"&&(w.querySelectorAll(ha(C.currentClass)).forEach(D=>{D.textContent=C.formatFractionCurrent(T+1)}),w.querySelectorAll(ha(C.totalClass)).forEach(D=>{D.textContent=C.formatFractionTotal(k)})),C.type==="progressbar"){let D;C.progressbarOpposite?D=t.isHorizontal()?"vertical":"horizontal":D=t.isHorizontal()?"horizontal":"vertical";let R=(T+1)/k,B=1,j=1;D==="horizontal"?B=R:j=R,w.querySelectorAll(ha(C.progressbarFillClass)).forEach(W=>{W.style.transform=`translate3d(0,0,0) scaleX(${B}) scaleY(${j})`,W.style.transitionDuration=`${t.params.speed}ms`})}C.type==="custom"&&C.renderCustom?(ul(w,C.renderCustom(t,T+1,k)),S===0&&r("paginationRender",w)):(S===0&&r("paginationRender",w),r("paginationUpdate",w)),t.params.watchOverflow&&t.enabled&&w.classList[t.isLocked?"add":"remove"](C.lockClass)})}function p(){let M=t.params.pagination;if(c())return;let C=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length,E=t.pagination.el;E=Jt(E);let T="";if(M.type==="bullets"){let F=t.params.loop?Math.ceil(C/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&F>C&&(F=C);for(let m=0;m<F;m+=1)M.renderBullet?T+=M.renderBullet.call(t,m,M.bulletClass):T+=`<${M.bulletElement} ${t.isElement?'part="bullet"':""} class="${M.bulletClass}"></${M.bulletElement}>`}M.type==="fraction"&&(M.renderFraction?T=M.renderFraction.call(t,M.currentClass,M.totalClass):T=`<span class="${M.currentClass}"></span> / <span class="${M.totalClass}"></span>`),M.type==="progressbar"&&(M.renderProgressbar?T=M.renderProgressbar.call(t,M.progressbarFillClass):T=`<span class="${M.progressbarFillClass}"></span>`),t.pagination.bullets=[],E.forEach(F=>{M.type!=="custom"&&ul(F,T||""),M.type==="bullets"&&t.pagination.bullets.push(...F.querySelectorAll(ha(M.bulletClass)))}),M.type!=="custom"&&r("paginationRender",E[0])}function f(){t.params.pagination=Ru(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});let M=t.params.pagination;if(!M.el)return;let C;typeof M.el=="string"&&t.isElement&&(C=t.el.querySelector(M.el)),!C&&typeof M.el=="string"&&(C=[...document.querySelectorAll(M.el)]),C||(C=M.el),!(!C||C.length===0)&&(t.params.uniqueNavElements&&typeof M.el=="string"&&Array.isArray(C)&&C.length>1&&(C=[...t.el.querySelectorAll(M.el)],C.length>1&&(C=C.find(E=>dl(E,".swiper")[0]===t.el))),Array.isArray(C)&&C.length===1&&(C=C[0]),Object.assign(t.pagination,{el:C}),C=Jt(C),C.forEach(E=>{M.type==="bullets"&&M.clickable&&E.classList.add(...(M.clickableClass||"").split(" ")),E.classList.add(M.modifierClass+M.type),E.classList.add(t.isHorizontal()?M.horizontalClass:M.verticalClass),M.type==="bullets"&&M.dynamicBullets&&(E.classList.add(`${M.modifierClass}${M.type}-dynamic`),s=0,M.dynamicMainBullets<1&&(M.dynamicMainBullets=1)),M.type==="progressbar"&&M.progressbarOpposite&&E.classList.add(M.progressbarOppositeClass),M.clickable&&E.addEventListener("click",d),t.enabled||E.classList.add(M.lockClass)}))}function g(){let M=t.params.pagination;if(c())return;let C=t.pagination.el;C&&(C=Jt(C),C.forEach(E=>{E.classList.remove(M.hiddenClass),E.classList.remove(M.modifierClass+M.type),E.classList.remove(t.isHorizontal()?M.horizontalClass:M.verticalClass),M.clickable&&(E.classList.remove(...(M.clickableClass||"").split(" ")),E.removeEventListener("click",d))})),t.pagination.bullets&&t.pagination.bullets.forEach(E=>E.classList.remove(...M.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;let M=t.params.pagination,{el:C}=t.pagination;C=Jt(C),C.forEach(E=>{E.classList.remove(M.horizontalClass,M.verticalClass),E.classList.add(t.isHorizontal()?M.horizontalClass:M.verticalClass)})}),i("init",()=>{t.params.pagination.enabled===!1?x():(f(),p(),h())}),i("activeIndexChange",()=>{typeof t.snapIndex>"u"&&h()}),i("snapIndexChange",()=>{h()}),i("snapGridLengthChange",()=>{p(),h()}),i("destroy",()=>{g()}),i("enable disable",()=>{let{el:M}=t.pagination;M&&(M=Jt(M),M.forEach(C=>C.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),i("lock unlock",()=>{h()}),i("click",(M,C)=>{let E=C.target,T=Jt(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&T&&T.length>0&&!E.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&E===t.navigation.nextEl||t.navigation.prevEl&&E===t.navigation.prevEl))return;let F=T[0].classList.contains(t.params.pagination.hiddenClass);r(F===!0?"paginationShow":"paginationHide"),T.forEach(m=>m.classList.toggle(t.params.pagination.hiddenClass))}});let b=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:M}=t.pagination;M&&(M=Jt(M),M.forEach(C=>C.classList.remove(t.params.pagination.paginationDisabledClass))),f(),p(),h()},x=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:M}=t.pagination;M&&(M=Jt(M),M.forEach(C=>C.classList.add(t.params.pagination.paginationDisabledClass))),g()};Object.assign(t.pagination,{enable:b,disable:x,render:p,update:h,init:f,destroy:g})}function Ds(e){let{effect:t,swiper:n,on:i,setTranslate:r,setTransition:o,overwriteParams:a,perspective:s,recreateShadows:c,getEffectParams:l}=e;i("beforeInit",()=>{if(n.params.effect!==t)return;n.classNames.push(`${n.params.containerModifierClass}${t}`),s&&s()&&n.classNames.push(`${n.params.containerModifierClass}3d`);let d=a?a():{};Object.assign(n.params,d),Object.assign(n.originalParams,d)}),i("setTranslate _virtualUpdated",()=>{n.params.effect===t&&r()}),i("setTransition",(d,h)=>{n.params.effect===t&&o(h)}),i("transitionEnd",()=>{if(n.params.effect===t&&c){if(!l||!l().slideShadows)return;n.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>h.remove())}),c()}});let u;i("virtualUpdate",()=>{n.params.effect===t&&(n.slides.length||(u=!0),requestAnimationFrame(()=>{u&&n.slides&&n.slides.length&&(r(),u=!1)}))})}function hl(e,t){let n=qr(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function pl(e,t,n){let i=`swiper-slide-shadow${n?`-${n}`:""}${e?` swiper-slide-shadow-${e}`:""}`,r=qr(t),o=r.querySelector(`.${i.split(" ").join(".")}`);return o||(o=Zi("div",i.split(" ")),r.append(o)),o}function LM(e){let{swiper:t,extendParams:n,on:i}=e;n({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Ds({effect:"coverflow",swiper:t,on:i,setTranslate:()=>{let{width:a,height:s,slides:c,slidesSizesGrid:l}=t,u=t.params.coverflowEffect,d=t.isHorizontal(),h=t.translate,p=d?-h+a/2:-h+s/2,f=d?u.rotate:-u.rotate,g=u.depth,b=Ou(t);for(let x=0,M=c.length;x<M;x+=1){let C=c[x],E=l[x],T=C.swiperSlideOffset,F=(p-T-E/2)/E,m=typeof u.modifier=="function"?u.modifier(F):F*u.modifier,k=d?f*m:0,w=d?0:f*m,S=-g*Math.abs(m),D=u.stretch;typeof D=="string"&&D.indexOf("%")!==-1&&(D=parseFloat(u.stretch)/100*E);let R=d?0:D*m,B=d?D*m:0,j=1-(1-u.scale)*Math.abs(m);Math.abs(B)<.001&&(B=0),Math.abs(R)<.001&&(R=0),Math.abs(S)<.001&&(S=0),Math.abs(k)<.001&&(k=0),Math.abs(w)<.001&&(w=0),Math.abs(j)<.001&&(j=0);let W=`translate3d(${B}px,${R}px,${S}px)  rotateX(${b(w)}deg) rotateY(${b(k)}deg) scale(${j})`,P=hl(u,C);if(P.style.transform=W,C.style.zIndex=-Math.abs(Math.round(m))+1,u.slideShadows){let O=d?C.querySelector(".swiper-slide-shadow-left"):C.querySelector(".swiper-slide-shadow-top"),N=d?C.querySelector(".swiper-slide-shadow-right"):C.querySelector(".swiper-slide-shadow-bottom");O||(O=pl("coverflow",C,d?"left":"top")),N||(N=pl("coverflow",C,d?"right":"bottom")),O&&(O.style.opacity=m>0?m:0),N&&(N.style.opacity=-m>0?-m:0)}}},setTransition:a=>{t.slides.map(c=>qr(c)).forEach(c=>{c.style.transitionDuration=`${a}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>{l.style.transitionDuration=`${a}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}var cq=["swiperContainer"];function lq(e,t){if(e&1&&(y(0,"div",7)(1,"p"),I(2),v()()),e&2){let n=t.$implicit;_(2),fe(n)}}var L0=class e{items=[];swiperContainer;swiper;ngAfterViewInit(){this.swiper=new xi(this.swiperContainer.nativeElement,{modules:[Is,Es],slidesPerView:1,autoHeight:!0,navigation:{nextEl:this.swiperContainer.nativeElement.querySelector(".swiper-button-next"),prevEl:this.swiperContainer.nativeElement.querySelector(".swiper-button-prev")},pagination:{el:this.swiperContainer.nativeElement.querySelector(".swiper-pagination"),clickable:!0,dynamicBullets:!1},loop:!0})}ngOnDestroy(){this.swiper&&this.swiper.destroy()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-tips-carousel"]],viewQuery:function(n,i){if(n&1&&ft(cq,5),n&2){let r;dt(r=ut())&&(i.swiperContainer=r.first)}},inputs:{items:"items"},decls:7,vars:1,consts:[["swiperContainer",""],[1,"swiper"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"swiper-button-prev"],[1,"swiper-button-next"],[1,"swiper-slide"]],template:function(n,i){n&1&&(y(0,"div",1,0)(2,"div",2),ne(3,lq,3,1,"div",3),v(),Z(4,"div",4)(5,"div",5)(6,"div",6),v()),n&2&&(_(3),A("ngForOf",i.items))},dependencies:[Ze,qt],styles:[`app-tips-carousel .swiper{width:100%;height:fit-content;padding-bottom:50px;min-height:180px;position:relative;overflow:hidden}app-tips-carousel .swiper-wrapper{display:flex;height:fit-content;min-height:140px;position:relative}app-tips-carousel .swiper-slide{text-align:left;display:flex;justify-content:center;align-items:center;height:fit-content;min-height:140px;padding:20px 0;pointer-events:none}app-tips-carousel .swiper-slide-active{pointer-events:auto}app-tips-carousel p{font-size:16px;font-weight:500;line-height:1.8;padding:0 64px;color:#fffffffa;text-shadow:0 2px 4px rgba(0,0,0,.4);margin:0;pointer-events:none;letter-spacing:.3px}app-tips-carousel .swiper-button-prev,app-tips-carousel .swiper-button-next{display:flex;align-items:center;justify-content:center;pointer-events:all;width:42px;height:42px;background:linear-gradient(145deg,#2d2d2d,#1c1c1c);border:3px solid var(--yellow);border-radius:50%;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 6px 16px #00000080,0 0 12px #ebb23533;z-index:10;cursor:pointer}app-tips-carousel .swiper-button-prev:hover,app-tips-carousel .swiper-button-next:hover{background:var(--yellow);transform:scale(1.15);box-shadow:0 8px 20px #0009,0 0 24px #ebb235cc;border-color:#ffffff4d}app-tips-carousel .swiper-button-prev.swiper-button-disabled,app-tips-carousel .swiper-button-next.swiper-button-disabled{opacity:0;cursor:default;pointer-events:none}app-tips-carousel .swiper-button-prev:after,app-tips-carousel .swiper-button-next:after{color:var(--yellow);font-size:18px;font-weight:900;text-shadow:0 2px 4px rgba(0,0,0,.3)}app-tips-carousel .swiper-button-prev:hover:after,app-tips-carousel .swiper-button-next:hover:after{color:#1a1a1a;text-shadow:none}app-tips-carousel .swiper-horizontal>.swiper-pagination-bullets,app-tips-carousel .swiper-pagination-bullets.swiper-pagination-horizontal,app-tips-carousel .swiper-pagination-custom,app-tips-carousel .swiper-pagination-fraction{bottom:14px!important}app-tips-carousel .swiper-button-next,app-tips-carousel .swiper-rtl .swiper-button-prev{right:8px;left:auto}app-tips-carousel .swiper-button-prev,app-tips-carousel .swiper-rtl .swiper-button-next{left:8px;right:auto}app-tips-carousel .swiper-pagination-bullet{width:11px!important;height:11px!important;background:#fff6!important;opacity:1!important;transition:all .3s cubic-bezier(.4,0,.2,1)!important;margin:0 6px!important;border:2px solid rgba(255,255,255,.2)!important;box-shadow:0 2px 6px #0000004d!important}app-tips-carousel .swiper-pagination-bullet:hover{background:#fff9!important;transform:scale(1.1)!important}app-tips-carousel .swiper-pagination-bullet-active{background:var(--yellow)!important;transform:scale(1.4)!important;box-shadow:0 0 16px #ebb235,0 0 8px #ebb23599,0 2px 8px #0006!important;border-color:var(--yellow)!important}
`],encapsulation:2})};var dq=["paperContainer"],uq=["wrapperBoard"],hq=["clues"],pq=["inspector"],fq=()=>[];function mq(e,t){if(e&1&&(y(0,"div",12)(1,"div",13,2)(3,"span",14),Z(4,"lucide-icon",15),I(5," Dicas R\xE1pidas \u2013 Diagramas UML "),v(),Z(6,"app-tips-carousel",16),v()()),e&2){let n=V();_(6),A("items",n.tips||ud(1,fq))}}function gq(e,t){if(e&1){let n=le();so(0),y(1,"button",17),q("click",function(){H(n);let r=V();return U(r.addLink("association"))}),Z(2,"img",18),v(),y(3,"button",19),q("dragstart",function(r){H(n);let o=V();return U(o.onDragStart(r,"actor"))})("click",function(){H(n);let r=V();return U(r.addElement("actor"))}),Z(4,"img",20),v(),y(5,"button",19),q("dragstart",function(r){H(n);let o=V();return U(o.onDragStart(r,"usecase"))})("click",function(){H(n);let r=V();return U(r.addElement("usecase"))}),Z(6,"img",21),v(),y(7,"button",17),q("click",function(){H(n);let r=V();return U(r.addLink("extend"))}),Z(8,"img",22),v(),y(9,"button",17),q("click",function(){H(n);let r=V();return U(r.addLink("include"))}),Z(10,"img",23),v(),y(11,"button",17),q("click",function(){H(n);let r=V();return U(r.addLink("dependency"))}),Z(12,"img",24),v(),co()}if(e&2){let n=V();_(),Ce("active",n.isButtonActive("link-association")),_(2),Ce("active",n.isButtonActive("actor")),_(2),Ce("active",n.isButtonActive("usecase")),_(2),Ce("active",n.isButtonActive("link-extend")),_(2),Ce("active",n.isButtonActive("link-include")),_(2),Ce("active",n.isButtonActive("link-dependency"))}}function yq(e,t){if(e&1){let n=le();so(0),y(1,"button",25),q("dragstart",function(r){H(n);let o=V();return U(o.onDragStart(r,"class"))})("click",function(){H(n);let r=V();return U(r.addElement("class"))}),Z(2,"img",26),v(),y(3,"button",27),q("click",function(){H(n);let r=V();return U(r.addLink("association"))}),Z(4,"img",28),v(),y(5,"button",29),q("click",function(){H(n);let r=V();return U(r.addLink("aggregation"))}),Z(6,"img",30),v(),y(7,"button",31),q("click",function(){H(n);let r=V();return U(r.addLink("composition"))}),Z(8,"img",32),v(),y(9,"button",33),q("click",function(){H(n);let r=V();return U(r.addLink("inheritance"))}),Z(10,"img",34),v(),y(11,"button",35),q("click",function(){H(n);let r=V();return U(r.addLink("realization"))}),Z(12,"img",36),v(),co()}if(e&2){let n=V();_(),Ce("active",n.isButtonActive("uml-class")),_(2),Ce("active",n.isButtonActive("link-association")),_(2),Ce("active",n.isButtonActive("link-aggregation")),_(2),Ce("active",n.isButtonActive("link-composition")),_(2),Ce("active",n.isButtonActive("link-inheritance")),_(2),Ce("active",n.isButtonActive("link-realization"))}}function vq(e,t){if(e&1&&(y(0,"p"),I(1),v()),e&2){let n=t.$implicit;_(),fe(n)}}function kq(e,t){if(e&1&&(y(0,"div",37),Z(1,"lucide-icon",38),y(2,"div",39),ne(3,vq,2,1,"p",40),v()()),e&2){let n=V();_(3),A("ngForOf",n.inconsistencies)}}function Mq(e,t){if(e&1){let n=le();y(0,"div")(1,"label"),I(2,"Class name"),v(),y(3,"input",48),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.inspectorData.name,r)||(o.inspectorData.name=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(2);return U(r.applyGeneral())}),v(),y(4,"label"),I(5,"Stereotype"),v(),y(6,"input",48),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.inspectorData.stereotype,r)||(o.inspectorData.stereotype=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(2);return U(r.applyGeneral())}),v()()}if(e&2){let n=V(2);_(3),st("ngModel",n.inspectorData.name),_(3),st("ngModel",n.inspectorData.stereotype)}}function xq(e,t){if(e&1){let n=le();y(0,"div",51)(1,"div",52)(2,"label"),I(3,"Visibility"),v(),y(4,"select",48),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.visibility,r)||(o.visibility=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(3);return U(r.applyAttributes())}),y(5,"option",53),I(6,"Public (+)"),v(),y(7,"option",54),I(8,"Private (-)"),v(),y(9,"option",55),I(10,"Protected (#)"),v(),y(11,"option",56),I(12,"Package (~)"),v()()(),y(13,"div",52)(14,"label"),I(15,"Attribute"),v(),y(16,"input",48),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.name,r)||(o.name=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(3);return U(r.applyAttributes())}),v()(),y(17,"div",52)(18,"label"),I(19,"Type"),v(),y(20,"input",48),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.type,r)||(o.type=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(3);return U(r.applyAttributes())}),v()(),y(21,"div",57)(22,"button",46),q("click",function(){let r=H(n).index,o=V(3);return U(o.removeAttribute(r))}),I(23,"Remove"),v()()()}if(e&2){let n=t.$implicit;_(4),st("ngModel",n.visibility),_(12),st("ngModel",n.name),_(4),st("ngModel",n.type)}}function wq(e,t){if(e&1){let n=le();y(0,"div")(1,"div",49)(2,"button",46),q("click",function(){H(n);let r=V(2);return U(r.addAttribute())}),I(3,"Add Attribute"),v()(),ne(4,xq,24,3,"div",50),v()}if(e&2){let n=V(2);_(4),A("ngForOf",n.inspectorData.attributes)}}function bq(e,t){if(e&1){let n=le();y(0,"div",51)(1,"div",52)(2,"label"),I(3,"Visibility"),v(),y(4,"select",48),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.visibility,r)||(o.visibility=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(3);return U(r.applyOperations())}),y(5,"option",53),I(6,"Public (+)"),v(),y(7,"option",54),I(8,"Private (-)"),v(),y(9,"option",55),I(10,"Protected (#)"),v(),y(11,"option",56),I(12,"Package (~)"),v()()(),y(13,"div",52)(14,"label"),I(15,"Signature"),v(),y(16,"input",48),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.signature,r)||(o.signature=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(3);return U(r.applyOperations())}),v()(),y(17,"div",52)(18,"label"),I(19,"Return Type"),v(),y(20,"input",48),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.returnType,r)||(o.returnType=r),U(r)}),q("ngModelChange",function(){H(n);let r=V(3);return U(r.applyOperations())}),v()(),y(21,"div",57)(22,"button",46),q("click",function(){let r=H(n).index,o=V(3);return U(o.removeOperation(r))}),I(23,"Remove"),v()()()}if(e&2){let n=t.$implicit;_(4),st("ngModel",n.visibility),_(12),st("ngModel",n.signature),_(4),st("ngModel",n.returnType)}}function Cq(e,t){if(e&1){let n=le();y(0,"div")(1,"div",49)(2,"button",46),q("click",function(){H(n);let r=V(2);return U(r.addOperation())}),I(3,"Add Operation"),v()(),ne(4,bq,24,3,"div",50),v()}if(e&2){let n=V(2);_(4),A("ngForOf",n.inspectorData.operations)}}function Sq(e,t){if(e&1){let n=le();y(0,"div",41,3)(2,"div",42)(3,"span",43),I(4,"Class Inspector"),v(),y(5,"button",44),q("click",function(){H(n);let r=V();return U(r.closeInspector())}),I(6,"\xD7"),v()(),y(7,"div",45)(8,"button",46),q("click",function(){H(n);let r=V();return U(r.inspectorTab="general")}),I(9,"General"),v(),y(10,"button",46),q("click",function(){H(n);let r=V();return U(r.inspectorTab="attributes")}),I(11,"Attributes"),v(),y(12,"button",46),q("click",function(){H(n);let r=V();return U(r.inspectorTab="operations")}),I(13,"Operations"),v()(),y(14,"div",47),ne(15,Mq,7,2,"div",7)(16,wq,5,1,"div",7)(17,Cq,5,1,"div",7),v()()}if(e&2){let n=V();_(8),Ce("active",n.inspectorTab==="general"),_(2),Ce("active",n.inspectorTab==="attributes"),_(2),Ce("active",n.inspectorTab==="operations"),_(3),A("ngIf",n.inspectorTab==="general"),_(),A("ngIf",n.inspectorTab==="attributes"),_(),A("ngIf",n.inspectorTab==="operations")}}var Ts=class e{constructor(t,n){this.platformId=t;this.dataService=n}accuracyCalculated=new Ve;phaseUser;tips;diagramType;tipsVisible=!1;paper=null;graph=null;zoomLevel=1;zoomMin=.2;zoomMax=3;zoomStep=.03;initialJSON;correctsJSON=[];removeBtn=null;currentCellView=null;multiplicityBtns=[];currentMultiplicityPopup=null;multiplicityOptions=["1","0..1","0..*","*","1..*","Unspecified"];currentMultiplicityPopupAnchor=null;currentInlineEditor=null;currentEditingCellView=null;linkBtn=null;linkingSource=null;linkingType=null;currentMultiplicityLink=null;activeButton=null;isWaitingForClick=!1;paperContainer;wrapperBoard;clues;inspectorRef;boundUpdateInspectorPosition=()=>this.updateInspectorPosition();boundUpdateCluesPosition=()=>this.updateCluesPosition();inconsistencies=[];isDraggingInspector=!1;inspectorDragOffset={x:0,y:0};inspectorPosition={x:0,y:0};inspectorManuallyMoved=!1;activeClickHandler=null;inspectorVisible=!1;inspectorTab="general";selectedClassElement=null;inspectorData={name:"",stereotype:"",attributes:[],operations:[]};ngOnInit(){}ngAfterViewInit(){try{this.wrapperBoard&&this.wrapperBoard.nativeElement&&(this.wrapperBoard.nativeElement.addEventListener("scroll",this.boundUpdateInspectorPosition,{passive:!0}),this.wrapperBoard.nativeElement.addEventListener("scroll",this.boundUpdateCluesPosition,{passive:!0}))}catch{}window.addEventListener("resize",this.boundUpdateInspectorPosition),window.addEventListener("resize",this.boundUpdateCluesPosition)}initializeJointJS(t,n){t?(console.log("\u{1F527} Inicializando JointJS com Phase fornecido:",t),this.setupDiagramData(t)):n?(console.log("\u{1F527} Inicializando JointJS com PhaseUser fornecido:",n),this.setupDiagramData(void 0,n)):(console.log("Iniciando JointJS sem Phase, usando dados padr\xE3o ou vazios"),this.setupDiagramData());let i=ge(ee({},at),{custom:at.custom});this.graph=new bo.Graph({},{cellNamespace:i}),this.initialJSON&&(console.log("\u{1F4CA} Carregando diagrama inicial:",this.initialJSON),this.graph.fromJSON(this.initialJSON));let r=this.paperContainer.nativeElement,o=2e3,a=2e3;this.paper=new bo.Paper({el:this.paperContainer.nativeElement,model:this.graph,width:o,height:a,gridSize:10,drawGrid:!0,defaultLink:new at.standard.Link}),this.paper.initialize(),this.wrapperBoard.nativeElement.addEventListener("wheel",this.onMouseWheel.bind(this),{passive:!1}),this.wrapperBoard.nativeElement.addEventListener("scroll",()=>{console.log("Scroll detected, updating floating elements position"),this.updateFloatingElementsPosition()}),this.paper.on("element:pointerdblclick",(s,c)=>{c.stopPropagation(),this.showInlineEditor(s,c)}),this.paper.on("link:pointerdblclick",(s,c)=>{c.stopPropagation(),this.showInlineEditor(s,c)}),this.paper.on("element:pointerclick",s=>{this.showRemoveButton(s),this.showLinkButton(s)}),this.paper.on("link:pointerclick",s=>{this.showRemoveButton(s)}),this.paper.on("blank:pointerdown",()=>{this.hideRemoveButton(),this.hideLinkButton(),this.showInlineEditor(this.currentCellView)}),this.paper.on("element:pointermove",s=>{this.updateFloatingElementsPosition()}),this.paper.on("element:pointermove",s=>{this.currentEditingCellView===s&&this.updateFloatingElementsPosition()}),this.paper.on("element:pointerclick",s=>{let c=s.model;c&&c.get("type")==="custom.Class"?this.openInspector(c):this.closeInspector()}),this.paper.on("blank:pointerdown",()=>{this.closeInspector()})}onMouseWheel(t){if(this.paper){if(t.ctrlKey||t.metaKey){t.preventDefault();let n=document.querySelector(".wrapper-board"),i=n.querySelector(".board"),r=t.deltaY<0,o=this.zoomLevel+(r?this.zoomStep:-this.zoomStep);o=Math.max(this.zoomMin,Math.min(this.zoomMax,o));let a=n.getBoundingClientRect(),s=t.clientX-a.left+n.scrollLeft,c=t.clientY-a.top+n.scrollTop,l=o/this.zoomLevel;n.scrollLeft=s*l-(t.clientX-a.left),n.scrollTop=c*l-(t.clientY-a.top),i&&(i.style.transformOrigin="0 0",i.style.transform=`scale(${o})`),this.zoomLevel=o}this.updateFloatingElementsPosition()}}setCursor(t){this.paperContainer&&this.paperContainer.nativeElement&&(this.paperContainer.nativeElement.style.cursor=t)}onDragStart(t,n){t.dataTransfer?.setData("uml-type",n)}onDragOver(t){t.preventDefault()}onDrop(t){t.preventDefault();let n=t.dataTransfer?.getData("uml-type");if(this.graph&&this.paper){if(!n||n!=="actor"&&n!=="usecase"&&n!=="class"){console.error("Invalid UML element type:",n);return}this.addElement(n,t)}}addElement(t,n){if(this.isWaitingForClick&&this.cancelActiveOperation(),this.graph&&this.paper){let i=this.paperContainer.nativeElement;if(n){if(n&&t){let r=i.getBoundingClientRect(),o=n.clientX-r.left+i.scrollLeft,a=n.clientY-r.top+i.scrollTop,s=o/this.zoomLevel,c=a/this.zoomLevel;switch(t){case"actor":{bs.createActor(s,c).addTo(this.graph);break}case"usecase":{bs.createUseCase(s,c).addTo(this.graph);break}case"class":{bs.createClass(s,c,{name:"NewClass",attributes:["+ attr1: type"],operations:["+ operation(): void"]}).addTo(this.graph);break}default:console.error("Unknown element type:",t);break}this.setCursor("default")}}else{this.setActiveButton(t||""),this.isWaitingForClick=!0,this.activeClickHandler&&i.removeEventListener("click",this.activeClickHandler),this.activeClickHandler=r=>{i.removeEventListener("click",this.activeClickHandler),this.activeClickHandler=null,this.clearActiveButton(),this.isWaitingForClick=!1,this.addElement(t,r)},i.addEventListener("click",this.activeClickHandler),this.setCursor("crosshair");return}}else{console.error("Graph or paper not initialized");return}}addLink(t){this.isWaitingForClick&&this.cancelActiveOperation(),this.setActiveButton(`link-${t}`),this.isWaitingForClick=!0,this.linkingType=t,this.linkingSource=null;let n=i=>{this.linkingSource=i.model;let r=o=>{this.linkingSource&&o.model.id!==this.linkingSource.id&&bs.createLink(this.linkingSource,o.model,this.linkingType).addTo(this.graph),this.clearActiveButton(),this.isWaitingForClick=!1,this.paper.off("element:pointerclick",r),this.linkingSource=null,this.linkingType=null};this.paper.once("element:pointerclick",r),this.paper.off("element:pointerclick",n)};this.paper.on("element:pointerclick",n)}setActiveButton(t){this.activeButton=t}clearActiveButton(){this.activeButton=null}isButtonActive(t){return this.activeButton===t}cancelActiveOperation(){this.isWaitingForClick&&(this.clearActiveButton(),this.isWaitingForClick=!1,this.setCursor("default"),this.activeClickHandler&&(this.paperContainer.nativeElement.removeEventListener("click",this.activeClickHandler),this.activeClickHandler=null),this.linkingType&&(this.paper?.off("element:pointerclick"),this.linkingSource=null,this.linkingType=null))}showInlineEditor(t,n){if(!t||!this.paper){let d=document.querySelector(".inline-editor");d&&d.remove();return}this.currentCellView=t;let i=t.model,r=t.paper,o=t.el.querySelector("text");if(!o)return;let a=o.getBoundingClientRect();if(console.log("Element clicked:",i),!i||!r)return;let s=document.querySelector(".inline-editor");s&&s.remove();let c=document.createElement("div");c.className="inline-editor",c.contentEditable="true",c.style.position="absolute",c.style.minWidth=`${a.width}px`,c.style.left=`${a.left+window.scrollX}px`,c.style.top=`${a.top+window.scrollY}px`,c.style.zIndex="1000";let l=i.isLink()?i.label(0)?.attrs?.text?.text||"":i.attr(["label","text"])||"";c.innerText=l,document.body.appendChild(c),this.currentInlineEditor=c,this.currentEditingCellView=t,this.updateFloatingElementsPosition(),c.focus();let u=()=>{let d=c.innerText.trim();if(i.isLink())i.label(0,{attrs:{text:{text:d,fontSize:14,fill:"#000"},rect:{fill:"#fff",stroke:"#000",strokeWidth:0}},position:{distance:.5}});else{i.attr(["label","text"],d);let h=c.getBoundingClientRect();i.get("type")==="custom.UseCase"&&(i.resize(h.width+32,h.height+16),this.updateFloatingElementsPosition())}c.remove()};c.addEventListener("keydown",d=>{d.key==="Enter"&&(d.preventDefault(),u(),this.currentCellView=null)})}showRemoveButton(t){this.hideRemoveButton(),this.currentCellView=t;let n=document.createElement("button");n.className="remove-btn",n.style.position="absolute",n.style.zIndex="7";let i=document.createElement("img");if(i.setAttribute("src","assets/icons/trash-2.svg"),i.classList.add("lucide-icon"),n.appendChild(i),n.onclick=()=>{t.model.remove(),this.hideRemoveButton(),this.hideLinkButton(),this.currentCellView=null,this.currentEditingCellView=null},document.body.appendChild(n),this.removeBtn=n,t.model.isLink()){let r=t.model,o=r.getSourceElement(),a=r.getTargetElement();o&&a&&o.get("type")==="custom.Class"&&a.get("type")==="custom.Class"&&this.showMultiplicityButtons(r)}this.updateFloatingElementsPosition()}showLinkButton(t){this.hideLinkButton();let n=t.getBBox(),i=this.paper.localToClientPoint({x:n.x+n.width,y:n.y+32}),r=document.createElement("button");r.className="link-btn",r.innerHTML="-",r.style.position="absolute",r.style.left=`${i.x+window.scrollX}px`,r.style.top=`${i.y+window.scrollY}px`,r.onclick=()=>{this.linkingSource=t.model,r.classList.add("active"),this.paper.once("element:pointerclick",o=>{if(o.model.id!==this.linkingSource.id){let a=new at.standard.Link;a.source(this.linkingSource),a.target(o.model),a.attr("line/targetMarker",{d:""}),a.addTo(this.graph)}this.linkingSource=null,this.hideLinkButton()})},document.body.appendChild(r),this.linkBtn=r}hideRemoveButton(){if(this.removeBtn&&this.removeBtn.parentNode&&(this.removeBtn.parentNode.removeChild(this.removeBtn),this.removeBtn=null,this.currentCellView=null),this.multiplicityBtns&&this.multiplicityBtns.length){for(let t of this.multiplicityBtns)t.parentNode&&t.parentNode.removeChild(t);this.multiplicityBtns=[]}this.currentMultiplicityLink=null,this.currentMultiplicityPopup&&this.currentMultiplicityPopup.parentNode&&(this.currentMultiplicityPopup.parentNode.removeChild(this.currentMultiplicityPopup),this.currentMultiplicityPopup=null,this.currentMultiplicityPopupAnchor=null)}showMultiplicityButtons(t){if(this.paper){this.multiplicityBtns.forEach(n=>{n.parentNode&&n.parentNode.removeChild(n)}),this.multiplicityBtns=[];try{let n=t.getSourceElement(),i=t.getTargetElement();if(!n||!i)return;this.currentMultiplicityLink=t;let r=document.createElement("button");r.className="multiplicity-btn",r.type="button",r.innerText="*",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.zIndex="40",document.body.appendChild(r),this.multiplicityBtns.push(r);let o=document.createElement("button");o.className="multiplicity-btn",o.type="button",o.innerText="*",o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.zIndex="40",document.body.appendChild(o),this.multiplicityBtns.push(o),r.addEventListener("click",a=>{a.stopPropagation(),this.createMultiplicityPopup(t,"source",r)}),o.addEventListener("click",a=>{a.stopPropagation(),this.createMultiplicityPopup(t,"target",o)}),this.updateFloatingElementsPosition()}catch(n){console.warn("showMultiplicityButtons failed",n)}}}createMultiplicityPopup(t,n,i){this.currentMultiplicityPopup&&this.currentMultiplicityPopup.parentNode&&(this.currentMultiplicityPopup.parentNode.removeChild(this.currentMultiplicityPopup),this.currentMultiplicityPopup=null);let r=document.createElement("div");r.className="multiplicity-popup",r.style.position="absolute",r.style.zIndex="10",r.style.background="#fff",r.style.border="1px solid rgba(0,0,0,0.12)",r.style.boxShadow="0 6px 18px rgba(0,0,0,0.08)",r.style.padding="8px",r.style.borderRadius="6px",r.style.minWidth="120px",r.style.marginLeft="12px";for(let s of this.multiplicityOptions){let c=document.createElement("div");c.className="multiplicity-option",c.innerText=s,c.style.padding="6px 8px",c.style.cursor="pointer",c.addEventListener("click",l=>{l.stopPropagation(),this.setLinkMultiplicity(t,n,s==="Unspecified"?"":s),r.parentNode&&r.parentNode.removeChild(r),this.currentMultiplicityPopup=null,this.currentMultiplicityPopupAnchor=null}),r.appendChild(c)}let o=i.getBoundingClientRect();r.style.left=`${o.left+window.scrollX+20}px`,r.style.top=`${o.top+window.scrollY-8}px`,document.body.appendChild(r),this.currentMultiplicityPopup=r,this.currentMultiplicityPopupAnchor=i;let a=s=>{this.currentMultiplicityPopup&&!this.currentMultiplicityPopup.contains(s.target)&&(this.currentMultiplicityPopup.parentNode&&this.currentMultiplicityPopup.parentNode.removeChild(this.currentMultiplicityPopup),this.currentMultiplicityPopup=null,document.removeEventListener("click",a))};setTimeout(()=>document.addEventListener("click",a),0)}setLinkMultiplicity(t,n,i){let r=t.get("uml")||{};n==="source"?r.sourceMultiplicity=i||"":r.targetMultiplicity=i||"",t.set("uml",r);try{let o=r.sourceMultiplicity||"",a=r.targetMultiplicity||"",s=[{attrs:{text:{text:o,fontSize:12,fill:"#333"},rect:{fill:"transparent",stroke:"none"}},position:{distance:.1,offset:-10}},{attrs:{text:{text:a,fontSize:12,fill:"#333"},rect:{fill:"transparent",stroke:"none"}},position:{distance:.9,offset:-10}}];t.labels(s)}catch(o){console.warn("setLinkMultiplicity error",o)}}getLinkMultiplicity(t,n){let i=t.get("uml")||{};return n==="source"?i.sourceMultiplicity||"":i.targetMultiplicity||""}hideLinkButton(){this.linkBtn&&this.linkBtn.parentNode&&(this.linkBtn.parentNode.removeChild(this.linkBtn),this.linkBtn=null)}updateFloatingElementsPosition(){if(this.removeBtn&&this.currentCellView)if(this.currentCellView.model.isLink()){let t=this.currentCellView.getBBox(),n=this.paper.localToClientPoint({x:t.x+t.width/2,y:t.y+8+t.height/2});this.removeBtn.style.left=`${n.x+window.scrollX}px`,this.removeBtn.style.top=`${n.y+window.scrollY}px`}else{let t=this.currentCellView.getBBox(),n=this.paper.localToClientPoint({x:t.x-28,y:t.y});this.removeBtn.style.left=`${n.x+window.scrollX}px`,this.removeBtn.style.top=`${n.y+window.scrollY}px`}if(this.currentInlineEditor&&this.currentEditingCellView){let t=this.currentEditingCellView.el.querySelector("text");if(t){let n=t.getBoundingClientRect();this.currentInlineEditor.style.left=`${n.left+window.scrollX}px`,this.currentInlineEditor.style.top=`${n.top+window.scrollY}px`}}if(this.linkBtn&&this.currentCellView){let t=this.currentCellView.getBBox(),n=this.paper.localToClientPoint({x:t.x+t.width,y:t.y+32});this.linkBtn.style.left=`${n.x+window.scrollX}px`,this.linkBtn.style.top=`${n.y+window.scrollY}px`}if(this.multiplicityBtns&&this.multiplicityBtns.length&&this.currentMultiplicityLink&&this.paper)try{let t=this.currentMultiplicityLink,n=null,i=null;if(typeof t.getSourcePoint=="function"&&typeof t.getTargetPoint=="function")try{n=t.getSourcePoint(),i=t.getTargetPoint()}catch{n=null,i=null}if(n&&i){let r=t.getSourceElement?t.getSourceElement():null,o=t.getTargetElement?t.getTargetElement():null,a=r&&this.paper?this.paper.findViewByModel(r):null,s=o&&this.paper?this.paper.findViewByModel(o):null,c=ee({},n),l=ee({},i);if(a&&typeof a.getBBox=="function")try{let f=a.getBBox();c.y=c.y+f.height/2}catch{}if(s&&typeof s.getBBox=="function")try{let f=s.getBBox();l.y=l.y+f.height/2}catch{}let u=this.paper.localToClientPoint(c),d=this.paper.localToClientPoint(l),h=this.multiplicityBtns[0],p=this.multiplicityBtns[1];if(h){let f=(h.offsetWidth||24)/2,g=(h.offsetHeight||24)/2;h.style.left=`${u.x+window.scrollX-f}px`,h.style.top=`${u.y+window.scrollY-g+24}px`}if(p){let f=(p.offsetWidth||24)/2,g=(p.offsetHeight||24)/2;p.style.left=`${d.x+window.scrollX-f}px`,p.style.top=`${d.y+window.scrollY-g+24}px`}if(this.removeBtn&&this.currentCellView&&this.currentCellView.model.isLink()){let f=this.currentCellView.getBBox(),g=this.paper.localToClientPoint({x:f.x+f.width/2,y:f.y+8+f.height/2});this.removeBtn.style.left=`${g.x+window.scrollX}px`,this.removeBtn.style.top=`${g.y+window.scrollY}px`}}}catch(t){console.warn("Failed to reposition multiplicity buttons",t)}if(this.currentMultiplicityPopup)try{let t=this.currentMultiplicityPopup,n=this.currentMultiplicityPopupAnchor||this.multiplicityBtns&&this.multiplicityBtns[0]||null;if(n&&typeof n.getBoundingClientRect=="function"){let i=n.getBoundingClientRect();t.style.left=`${i.left+window.scrollX+20}px`,t.style.top=`${i.top+window.scrollY-8}px`}}catch(t){console.warn("Failed to reposition multiplicity popup",t)}}updateInspectorPosition(){try{if(!this.inspectorRef||!this.inspectorRef.nativeElement||!this.wrapperBoard||!this.wrapperBoard.nativeElement||!this.inspectorVisible||this.inspectorManuallyMoved)return;let t=this.wrapperBoard.nativeElement.getBoundingClientRect(),n=this.inspectorRef.nativeElement;n.style.position="fixed",n.style.zIndex="8";let i=12,r=n.offsetWidth||320,o=Math.max(8,t.top+i),a=t.left+t.width-r-i;n.style.top=`${o}px`,n.style.left=`${Math.max(8,a)}px`}catch{}}updateCluesPosition(){try{if(!this.clues||!this.clues.nativeElement||!this.wrapperBoard||!this.wrapperBoard.nativeElement)return;console.warn("Updating clues position");let t=this.wrapperBoard.nativeElement.getBoundingClientRect(),n=this.clues.nativeElement;n.style.position="fixed",n.style.zIndex="8";let i=12,r=n.offsetWidth,o=Math.max(8,t.top+i),a=t.left+t.width-r-i;n.style.top=`${o}px`,n.style.left=`${a}px`}catch{}}calculateGraphAccuracy(){if(!this.graph||!this.correctsJSON.length)return this.accuracyCalculated.emit(0),0;let t=0;for(let n of this.correctsJSON){let i=JSON.parse(n),r=new bo.Graph({},{cellNamespace:at});r.fromJSON(i);let o=this.graph.getElements(),a=this.graph.getLinks(),s=r.getElements(),c=r.getLinks(),l=0,u=0,d=1,h=x=>{try{return x==null?"":String(x).normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(`
`).map(M=>M.trim().replace(/^[^A-Za-z0-9]+|[^A-Za-z0-9]+$/g,"")).filter(M=>M.length>0).join(`
`).replace(/\s+/g," ").trim().toLowerCase()}catch{return""}},p=x=>{let M=String(x||"").trim(),C=(M.match(/^([+#\-~])\s*/)||[])[1]||"",T=(C?M.replace(/^([+#\-~])\s*/,"").trim():M).split(":");return{visibility:C,name:(T[0]||"").trim(),type:(T.slice(1).join(":")||"").trim()}},f=x=>{let M=String(x||"").trim(),C=(M.match(/^([+#\-~])\s*/)||[])[1]||"",T=(C?M.replace(/^([+#\-~])\s*/,"").trim():M).split(":");return{visibility:C,signature:(T[0]||"").trim(),returnType:(T.slice(1).join(":")||"").trim()}};l+=s.length;for(let x of s){let M=typeof x?.get=="function"?x.get("type"):void 0,C="";try{C=x.attr(["label","text"])||x.attr("label/text")||x.attr("title/text")||x.attr(["title","text"])||""}catch{}let E=h(C),T=o.find(F=>{try{if((typeof F?.get=="function"?F.get("type"):void 0)!==M)return!1;if(E){let k=F.attr&&(F.attr(["label","text"])||F.attr("label/text")||F.attr("title/text")||F.attr(["title","text"]))||"";return h(k)===E}return!0}catch{return!1}});if(T||(T=o.find(F=>{try{return(typeof F?.get=="function"?F.get("type"):void 0)===M}catch{return!1}})),T){let F="";try{F=T.attr(["label","text"])||T.attr("label/text")||T.attr("title/text")||T.attr(["title","text"])||""}catch{}let m=h(F);!E||E===m?u+=1:d*=.8}if(M==="custom.Class"){let F="",m="";try{F=x.attr("attrsText/text")||""}catch{}try{m=x.attr("opsText/text")||""}catch{}let k=String(F).split(`
`).map(j=>j.trim()).filter(j=>j.length>0),w=String(m).split(`
`).map(j=>j.trim()).filter(j=>j.length>0);if(l+=k.length+w.length,E){let j="";if(T){try{j=T.attr(["label","text"])||T.attr("label/text")||T.attr("title/text")||T.attr(["title","text"])||""}catch{}j=h(j)}if(!T||j!==E)continue}let S="",D="";try{S=T&&T.attr("attrsText/text")||""}catch{}try{D=T&&T.attr("opsText/text")||""}catch{}let R=String(S).split(`
`).map(j=>j.trim()).filter(j=>j.length>0),B=String(D).split(`
`).map(j=>j.trim()).filter(j=>j.length>0);for(let j of k){let W=p(j),P=(W.name||"").toLowerCase();if(!P)continue;let O=R.find(it=>(p(it).name||"").toLowerCase()===P);if(!O)continue;let N=1,z=p(O);W.visibility&&z.visibility&&W.visibility!==z.visibility&&(N-=.1);let ye=(W.type||"").toLowerCase(),ve=(z.type||"").toLowerCase();ye&&(!ve||ye!==ve)&&(N-=.25),N=Math.max(0,Math.min(1,N)),u+=N}for(let j of w){let W=f(j),P=(W.signature||"").toLowerCase();if(!P)continue;let O=B.find(it=>(f(it).signature||"").toLowerCase()===P);if(!O)continue;let N=1,z=f(O);W.visibility&&z.visibility&&W.visibility!==z.visibility&&(N-=.1);let ye=(W.returnType||"").toLowerCase(),ve=(z.returnType||"").toLowerCase();ye&&(!ve||ye!==ve)&&(N-=.25),N=Math.max(0,Math.min(1,N)),u+=N}if(E&&T){let j="",W="";try{j=x.attr("stereotype/text")||""}catch{}try{W=T.attr("stereotype/text")||""}catch{}j=h(j),W=h(W),j&&j!==W&&(u=Math.max(0,u-.2))}}}o.length>s.length&&(l+=o.length-s.length,u-=o.length-s.length),s.length>o.length&&(l+=s.length-o.length),l+=c.length;for(let x of c){let M=typeof x.getSourceElement=="function"?x.getSourceElement():null,C=typeof x.getTargetElement=="function"?x.getTargetElement():null,E=h(M&&(M.attr(["label","text"])||M.attr("title/text"))||""),T=h(C&&(C.attr(["label","text"])||C.attr("title/text"))||""),F=h(typeof x.label=="function"&&x.label(0)?.attrs?.text?.text||""),m=typeof x.get=="function"?String(x.get("type")||""):"",k=h(m),w=typeof x.get=="function"?x.get("uml")||{}:{},S=String(w?.sourceMultiplicity||"").trim(),D=String(w?.targetMultiplicity||"").trim(),R=k.includes("association")||k==="association";a.find(j=>{try{let W=typeof j.getSourceElement=="function"?j.getSourceElement():null,P=typeof j.getTargetElement=="function"?j.getTargetElement():null;if(!W||!P)return!1;let O=h(W.attr(["label","text"])||W.attr("title/text")||""),N=h(P.attr(["label","text"])||P.attr("title/text")||""),z=h(typeof j.label=="function"&&j.label(0)?.attrs?.text?.text||""),ye=typeof j.get=="function"?String(j.get("type")||""):"",ve=h(ye),it=typeof j.get=="function"?j.get("uml")||{}:{},wt=String(it?.sourceMultiplicity||"").trim(),pe=String(it?.targetMultiplicity||"").trim(),me=!1,be=!1;if(R){if((E===""||O===E)&&(T===""||N===T)&&(me=!0,be=!1),!me&&(E===""||N===E)&&(T===""||O===T)){me=!0,be=!0;let ke=wt;wt=pe,pe=ke}}else if((E===""||O===E)&&(T===""||N===T))me=!0,be=!1;else return!1;return!(!me||F&&z!==F||k&&ve!==k||S&&wt!==S||D&&pe!==D)}catch{return!1}})&&u++}a.length>c.length&&(l+=a.length-c.length,u-=a.length-c.length),c.length>a.length&&(l+=c.length-a.length),u=Math.max(0,u);let g=l>0?u/l*100:0,b=Math.round(g*d);b>t&&(t=b)}return this.accuracyCalculated.emit(t),t}checkUMLInconsistencies(){if(!this.graph)return!1;this.inconsistencies=[];let t=this.graph.getElements(),n=this.graph.getLinks(),i=s=>(s?String(s):"").split(`
`).map(c=>c.trim()).filter(c=>c.length>0),r=s=>s?.attr&&(s.attr(["label","text"])||s.attr("label/text")||s.attr("title/text")||s.attr(["title","text"]))||"";t.forEach(s=>{s.get("type")==="custom.Actor"?(s.attr("body/stroke","none"),s.attr("body/strokeWidth",0)):(s.attr("body/stroke","#000"),s.attr("body/strokeWidth",2))}),n.forEach(s=>{try{s.attr("line/stroke","#000"),s.attr("line/strokeWidth",1)}catch{}});let o={},a=[];for(let s of t)if(s.get("type")==="custom.Class"){a.push(s);let u=String(s.attr("title/text")||"").trim()||`__ANON__:${s.id||s.cid}`;o[u]=(o[u]||0)+1}t.forEach(s=>{let c=!1,l=s.get("type"),u=String(r(s)||"").trim(),d=u||String(l||"");if((!u||u==="")&&(c=!0,this.inconsistencies.push(`O elemento "${l}" est\xE1 sem t\xEDtulo.`)),n.some(p=>p.getSourceElement&&p.getTargetElement&&(p.getSourceElement()===s||p.getTargetElement()===s))||(c=!0,this.inconsistencies.push(`O elemento "${d}" n\xE3o est\xE1 conectado a nenhum outro elemento.`)),c)try{s.attr("body/stroke","#FF0000"),s.attr("body/strokeWidth",3)}catch{}});try{let s=new Set(["+","-","#","~"]);for(let c of a){let l=c.id||c.cid||"(sem-id)",u=String(c.attr("title/text")||"").trim(),d=!1;u||(d=!0,this.inconsistencies.push("Classe sem nome encontrada. Informe um nome para a classe."));let h=String(c.attr("attrsText/text")||""),p=i(h),f={};p.forEach((M,C)=>{let E=C+1,T=M.match(/^([+#\-~])\s*/);T&&!s.has(T[1])&&(d=!0,this.inconsistencies.push(`Visibilidade inv\xE1lida no atributo (linha ${E}) da classe "${u||l}": "${T[1]}"`));let F=M.replace(/^([+#\-~])\s*/,"").trim(),m=F.split(":"),k=(m[0]||"").trim(),w=(m.slice(1).join(":")||"").trim();if(k||(d=!0,this.inconsistencies.push(`Atributo sem nome na classe "${u||l}" (linha ${E}).`)),!w){d=!0;let S=k||F||"(linha vazia)";this.inconsistencies.push(`Atributo sem tipo na classe "${u||l}" - "${S}" (linha ${E}).`)}k&&(f[k]=(f[k]||0)+1,f[k]>1&&(d=!0,this.inconsistencies.push(`Atributo duplicado "${k}" na classe "${u||l}".`)))});let g=String(c.attr("opsText/text")||""),b=i(g),x={};if(b.forEach((M,C)=>{let E=C+1;if(!M||M.trim()===""){d=!0,this.inconsistencies.push(`Opera\xE7\xE3o vazia na classe "${u||l}" (linha ${E}).`);return}let T=M.match(/^([+#\-~])\s*/);T&&!s.has(T[1])&&(d=!0,this.inconsistencies.push(`Visibilidade inv\xE1lida na opera\xE7\xE3o (linha ${E}) da classe "${u||l}": "${T[1]}"`));let F=M.replace(/^([+#\-~])\s*/,"").trim(),m=F.split(":"),k=(m[0]||"").trim(),w=(m.slice(1).join(":")||"").trim();if(k||(d=!0,this.inconsistencies.push(`Opera\xE7\xE3o sem assinatura na classe "${u||l}" (linha ${E}).`)),!w){d=!0;let S=k||F||"(linha sem assinatura)";this.inconsistencies.push(`Opera\xE7\xE3o sem tipo de retorno na classe "${u||l}" - "${S}" (linha ${E}).`)}k&&(x[k]=(x[k]||0)+1,x[k]>1&&(d=!0,this.inconsistencies.push(`Opera\xE7\xE3o duplicada "${k}" na classe "${u||l}".`)))}),d)try{c.attr("body/stroke","#FF0000"),c.attr("body/strokeWidth",3)}catch{}}for(let c of Object.keys(o))!c.startsWith("__ANON__")&&o[c]>1&&this.inconsistencies.push(`Nome de classe duplicado: "${c}" aparece ${o[c]} vezes.`)}catch(s){console.error("Erro ao verificar inconsist\xEAncias (classes):",s),this.inconsistencies.push("Erro ao verificar inconsist\xEAncias do diagrama de classes (veja console para detalhes).")}try{for(let s of n){let c=!1,l="link";try{let f=typeof s.label=="function"?s.label(0)?.attrs?.text?.text??"":"",g=typeof s.get=="function"?String(s.get("type")??""):"";l=f||g||"link"}catch{l="link"}if(!s.getTargetElement||!s.getSourceElement)continue;s.getTargetElement()||(c=!0,this.inconsistencies.push(`O link "${l}" n\xE3o tem um destino definido.`)),s.getSourceElement()||(c=!0,this.inconsistencies.push(`O link "${l}" n\xE3o tem uma origem definida.`));let u=s.get("uml")||{},d=u.sourceMultiplicity,h=u.targetMultiplicity,p=Array.isArray(this.multiplicityOptions)?this.multiplicityOptions:["1","0..1","0..*","*","1..*","Unspecified"];if(d&&!p.includes(d)&&(c=!0,this.inconsistencies.push(`Link "${l}": multiplicidade de origem inv\xE1lida: "${d}".`)),h&&!p.includes(h)&&(c=!0,this.inconsistencies.push(`Link "${l}": multiplicidade de destino inv\xE1lida: "${h}".`)),c)try{s.attr("line/stroke","#FF0000"),s.attr("line/strokeWidth",3)}catch{}}}catch(s){console.error("Erro ao verificar inconsist\xEAncias (links):",s),this.inconsistencies.push("Erro ao verificar inconsist\xEAncias dos links (veja console para detalhes).")}return this.inconsistencies.length>0}toggleTips(){this.tipsVisible=!this.tipsVisible,this.tipsVisible&&setTimeout(()=>this.updateCluesPosition(),0)}onDocumentClick(t){if(!this.tipsVisible)return;let n=t.target,i=this.clues?.nativeElement;i&&!i.contains(n)&&(this.tipsVisible=!1)}toggleDiagramType(){this.diagramType=this.diagramType==="USE_CASE"?"CLASS":"USE_CASE",this.clearActiveButton(),this.isWaitingForClick=!1}ngOnDestroy(){try{this.wrapperBoard?.nativeElement?.removeEventListener("scroll",this.boundUpdateInspectorPosition),this.wrapperBoard?.nativeElement?.removeEventListener("scroll",this.boundUpdateCluesPosition)}catch{}try{window.removeEventListener("resize",this.boundUpdateInspectorPosition),window.removeEventListener("resize",this.boundUpdateCluesPosition)}catch{}this.cleanupInspectorDrag(),this.cancelActiveOperation(),this.paper&&(this.paper.remove(),this.paper=null),this.graph&&(this.graph.clear(),this.graph=null)}clearDiagram(){this.isInitialized()&&this.graph&&(this.graph.clear(),this.reinitialize())}getCurrentDiagramJSON(){if(!this.graph)return null;try{return this.graph.toJSON()}catch(t){return console.error("Erro ao obter JSON do diagrama:",t),null}}setupDiagramData(t,n){if(t?.diagramInitial)console.log("\u{1F50D} Configurando dados do diagrama com Phase:",t),this.initialJSON=JSON.parse(t.diagramInitial);else if(n)if(console.log("\u{1F50D} Configurando dados do diagrama com PhaseUser:",n.phase),n.userDiagram)try{this.initialJSON=JSON.parse(n.userDiagram)}catch(i){console.error("\u274C Erro ao fazer parse do userDiagram:",i),this.initialJSON=n.phase?.diagramInitial}else!n?.userDiagram&&n?.phase?.diagramInitial&&(console.warn("\u26A0\uFE0F Nenhum diagrama do usu\xE1rio encontrado, usando diagrama inicial da fase."),this.initialJSON=JSON.parse(n.phase?.diagramInitial));else this.initialJSON=null,this.correctsJSON=[];n?this.correctsJSON=n.phase?.correctDiagrams||[]:this.correctsJSON=[]}isInitialized(){return!!(this.graph&&this.paper)}reinitialize(t){t?this.initializeJointJS(t):this.initializeJointJS()}openInspector(t){this.selectedClassElement=t,this.inspectorVisible=!0,this.inspectorTab="general";let n=t.attr("title/text")||"",i=t.attr("stereotype/text")||"",r=t.attr("attrsText/text")||"",o=t.attr("opsText/text")||"",a=r.split(`
`).filter(c=>c.trim().length).map(c=>{let l=c.trim(),u=["+","-","#","~"].includes(l[0])?l[0]:"",h=(u?l.substring(1).trim():l).split(":"),p=(h[0]||"").trim(),f=(h.slice(1).join(":")||"").trim();return{name:p,type:f,visibility:this.visibilityFromSymbol(u)}}),s=o.split(`
`).filter(c=>c.trim().length).map(c=>{let l=c.trim(),u=["+","-","#","~"].includes(l[0])?l[0]:"",h=(u?l.substring(1).trim():l).split(":"),p=(h[0]||"").trim(),f=(h.slice(1).join(":")||"").trim();return{signature:p,returnType:f,visibility:this.visibilityFromSymbol(u)}});this.inspectorData={name:n.toString(),stereotype:i.toString().replace(/^<<|>>$/g,""),attributes:a,operations:s},setTimeout(()=>{this.updateInspectorPosition(),this.setupInspectorDrag()},0)}closeInspector(){this.inspectorVisible=!1,this.selectedClassElement=null,this.cleanupInspectorDrag(),this.inspectorManuallyMoved=!1}visibilityFromSymbol(t){switch(t){case"+":return"public";case"-":return"private";case"#":return"protected";case"~":return"package";default:return"private"}}symbolFromVisibility(t){switch(t){case"public":return"+";case"private":return"-";case"protected":return"#";case"package":return"~";default:return"-"}}applyGeneral(){this.selectedClassElement&&(this.selectedClassElement.attr("title/text",this.inspectorData.name||""),this.selectedClassElement.attr("stereotype/text",this.inspectorData.stereotype?`<<${this.inspectorData.stereotype}>>`:""))}applyAttributes(){if(!this.selectedClassElement)return;let t=this.inspectorData.attributes.map(n=>{let i=this.symbolFromVisibility(n.visibility),r=n.type?`: ${n.type}`:"";return`${i} ${n.name}${r}`.trim()});if(this.selectedClassElement.attr("attrsText/text",t.join(`
`)),this.adjustClassAreasToContent)try{this.adjustClassAreasToContent(this.selectedClassElement)}catch{}}applyOperations(){if(!this.selectedClassElement)return;let t=this.inspectorData.operations.map(n=>{let i=this.symbolFromVisibility(n.visibility),r=n.returnType?`: ${n.returnType}`:"";return`${i} ${n.signature}${r}`.trim()});if(this.selectedClassElement.attr("opsText/text",t.join(`
`)),this.adjustClassAreasToContent)try{this.adjustClassAreasToContent(this.selectedClassElement)}catch{}}adjustClassAreaHeight(t,n,i){if(!t)return;let r=i==="attrs"?"attrsArea":"opsArea",o=i==="attrs"?"opsArea":"attrsArea",a=32,s=40,c=220,l=104,u=Number(t.attr(`${r}/height`)),d=isNaN(u)||u===0?a:u,h=Math.max(a,d+n);t.attr(`${r}/height`,h);let p=Number(t.attr(`${o}/height`)),f=isNaN(p)||p===0?a:p,g=t.size?t.size():t.get("size"),x=(g&&g.height?g.height:l)+n,M=s+(i==="attrs"?h:f)+(i==="ops"?h:f),C=Math.max(M,x,l),E=g&&g.width?g.width:c;try{t.resize(E,C)}catch{try{t.set("size",{width:E,height:C})}catch(F){console.warn("adjustClassAreaHeight: resize failed",F)}}}addAttribute(){this.inspectorData.attributes.push({name:"attribute",visibility:"public",type:"string"}),this.applyAttributes();let t=16,n=this.selectedClassElement;if(n)try{this.adjustClassAreaHeight(n,t,"attrs")}catch(i){console.warn("Failed to adjust class height on addAttribute",i)}}removeAttribute(t){if(t<0||t>=this.inspectorData.attributes.length)return;this.inspectorData.attributes.splice(t,1),this.applyAttributes();let n=-16,i=this.selectedClassElement;if(i)try{this.adjustClassAreaHeight(i,n,"attrs")}catch(r){console.warn("Failed to adjust class height on removeAttribute",r)}}addOperation(){this.inspectorData.operations.push({signature:"operation()",visibility:"public",returnType:"void"}),this.applyOperations();let t=16,n=this.selectedClassElement;if(n)try{this.adjustClassAreaHeight(n,t,"ops")}catch(i){console.warn("Failed to adjust class height on addOperation",i)}}removeOperation(t){if(t<0||t>=this.inspectorData.operations.length)return;this.inspectorData.operations.splice(t,1),this.applyOperations();let n=-16,i=this.selectedClassElement;if(i)try{this.adjustClassAreaHeight(i,n,"ops")}catch(r){console.warn("Failed to adjust class height on removeOperation",r)}}setupInspectorDrag(){if(!this.inspectorRef||!this.inspectorRef.nativeElement)return;let t=this.inspectorRef.nativeElement,n=t.querySelector(".inspector-header");if(!n)return;n.style.cursor="move";let i=a=>{if(a.target.classList.contains("inspector-close"))return;this.isDraggingInspector=!0;let c=t.getBoundingClientRect();this.inspectorDragOffset={x:a.clientX-c.left,y:a.clientY-c.top},a.preventDefault()},r=a=>{this.isDraggingInspector&&(this.inspectorManuallyMoved=!0,this.inspectorPosition={x:a.clientX-this.inspectorDragOffset.x,y:a.clientY-this.inspectorDragOffset.y},t.style.left=`${this.inspectorPosition.x}px`,t.style.top=`${this.inspectorPosition.y}px`,t.style.right="auto")},o=()=>{this.isDraggingInspector=!1};n.addEventListener("mousedown",i),document.addEventListener("mousemove",r),document.addEventListener("mouseup",o),t._dragCleanup=()=>{n.removeEventListener("mousedown",i),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",o)}}cleanupInspectorDrag(){if(!this.inspectorRef||!this.inspectorRef.nativeElement)return;let t=this.inspectorRef.nativeElement;t._dragCleanup&&(t._dragCleanup(),delete t._dragCleanup),this.isDraggingInspector=!1}static \u0275fac=function(n){return new(n||e)(G(xt),G(yn))};static \u0275cmp=Se({type:e,selectors:[["diagram-editor"]],viewQuery:function(n,i){if(n&1&&(ft(dq,7),ft(uq,7),ft(hq,5),ft(pq,5)),n&2){let r;dt(r=ut())&&(i.paperContainer=r.first),dt(r=ut())&&(i.wrapperBoard=r.first),dt(r=ut())&&(i.clues=r.first),dt(r=ut())&&(i.inspectorRef=r.first)}},hostBindings:function(n,i){n&1&&q("click",function(o){return i.onDocumentClick(o)},ro)},inputs:{phaseUser:"phaseUser",tips:"tips",diagramType:"diagramType"},outputs:{accuracyCalculated:"accuracyCalculated"},decls:11,vars:5,consts:[["wrapperBoard",""],["paperContainer",""],["clues",""],["inspector",""],[1,"content"],["class","clues-overlay",4,"ngIf"],[1,"drag-and-drop-buttons"],[4,"ngIf"],[1,"wrapper-board"],["class","inconsistency_indicator",4,"ngIf"],["class","inspector",4,"ngIf"],[1,"board",3,"dragover","drop"],[1,"clues-overlay"],[1,"clues-content"],[1,"clues-title"],["name","lightbulb",1,"lucide-icon"],[3,"items"],["type","button",1,"btn-icon","filled",3,"click"],["src","assets/icons/association.svg","alt",""],["draggable","true","type","button",1,"btn-icon","filled",3,"dragstart","click"],["src","assets/icons/actor.svg","alt",""],["src","assets/icons/use_case.svg","alt",""],["src","assets/icons/extend.svg","alt",""],["src","assets/icons/include.svg","alt",""],["src","assets/icons/dependency.svg","alt",""],["draggable","true","type","button","title","Inserir Classe",1,"btn-icon","filled",3,"dragstart","click"],["src","assets/icons/class.svg","alt","Classe"],["type","button","title","Inserir Associa\xE7\xE3o",1,"btn-icon","filled",3,"click"],["src","assets/icons/association.svg","alt","Associa\xE7\xE3o"],["type","button","title","Agrega\xE7\xE3o (losango aberto)",1,"btn-icon","filled",3,"click"],["src","assets/icons/aggregation.svg","alt","Agrega\xE7\xE3o"],["type","button","title","Composi\xE7\xE3o (losango preenchido)",1,"btn-icon","filled",3,"click"],["src","assets/icons/composition.svg","alt","Composi\xE7\xE3o"],["type","button","title","Heran\xE7a (generaliza\xE7\xE3o)",1,"btn-icon","filled",3,"click"],["src","assets/icons/generalization.svg","alt","Heran\xE7a"],["type","button","title","Realiza\xE7\xE3o (interface)",1,"btn-icon","filled",3,"click"],["src","assets/icons/realization.svg","alt","Realiza\xE7\xE3o"],[1,"inconsistency_indicator"],["name","triangle-alert",1,"lucide-icon"],[1,"inconsistencies"],[4,"ngFor","ngForOf"],[1,"inspector"],["title","Arraste para mover",1,"inspector-header"],[1,"inspector-title"],["type","button",1,"inspector-close",3,"click"],[1,"inspector-tabs"],["type","button",3,"click"],[1,"inspector-body"],[3,"ngModelChange","ngModel"],[1,"inspector-actions"],["class","inspector-card",4,"ngFor","ngForOf"],[1,"inspector-card"],[1,"card-row"],["value","public"],["value","private"],["value","protected"],["value","package"],[1,"card-row","card-actions"]],template:function(n,i){if(n&1){let r=le();y(0,"div",4),ne(1,mq,7,2,"div",5),y(2,"div",6),ne(3,gq,13,12,"ng-container",7)(4,yq,13,12,"ng-container",7),v(),y(5,"div",8,0),ne(7,kq,4,1,"div",9)(8,Sq,18,9,"div",10),y(9,"div",11,1),q("dragover",function(a){return H(r),U(i.onDragOver(a))})("drop",function(a){return H(r),U(i.onDrop(a))}),v()()()}n&2&&(_(),A("ngIf",i.tipsVisible),_(2),A("ngIf",i.diagramType==="USE_CASE"),_(),A("ngIf",i.diagramType==="CLASS"),_(3),A("ngIf",i.inconsistencies.length>0),_(),A("ngIf",i.inspectorVisible))},dependencies:[Ze,qt,_t,Gt,Nt,L0,Bc,x1,w1,Nr,Vc,Ko,os],styles:[".content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:flex-start;gap:32px;position:relative}.drag-and-drop-buttons[_ngcontent-%COMP%]{width:fit-content;display:flex;flex-direction:column;gap:12px;margin-top:6rem;z-index:1}.drag-and-drop-buttons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;cursor:pointer}.wrapper-board[_ngcontent-%COMP%]{background:#fafafa;width:100%;height:100%;border:2px solid #A6A6A6;border-radius:24px 24px 0 0;overflow:auto;position:relative}.board[_ngcontent-%COMP%]{background:#fafafa;position:relative}.clues-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;z-index:1000;padding:16px}.clues-content[_ngcontent-%COMP%]{width:100%;max-width:520px;height:fit-content;margin-left:auto;margin-right:72px;margin-top:16px;border-radius:16px;border:3px solid var(--yellow);padding:24px 20px 28px;background:linear-gradient(145deg,#1c1c1c,#2d2d2d,#1a1a1a);display:flex;flex-direction:column;gap:20px;box-shadow:0 16px 48px #0009,0 8px 24px #0006,0 0 32px #ebb23540,inset 0 1px #ffffff1a;pointer-events:all;position:relative;z-index:1001;animation:_ngcontent-%COMP%_slideInFromRight .5s cubic-bezier(.34,1.56,.64,1)}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(40px) scale(.95)}to{opacity:1;transform:translate(0) scale(1)}}.clues-title[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;font-size:20px;font-weight:800;color:#fff;padding-bottom:8px;border-bottom:2px solid rgba(235,178,53,.4);text-shadow:0 2px 8px rgba(0,0,0,.6);letter-spacing:.5px}.clues-title[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:28px;height:28px;font-size:28px;color:var(--yellow);filter:drop-shadow(0 0 10px rgba(235,178,53,.9)) drop-shadow(0 0 16px rgba(235,178,53,.7)) drop-shadow(0 2px 4px rgba(0,0,0,.4));animation:_ngcontent-%COMP%_glow 2.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_glow{0%,to{filter:drop-shadow(0 0 10px rgba(235,178,53,.9)) drop-shadow(0 0 16px rgba(235,178,53,.7)) drop-shadow(0 2px 4px rgba(0,0,0,.4));transform:scale(1)}50%{filter:drop-shadow(0 0 16px rgba(235,178,53,1)) drop-shadow(0 0 24px rgba(235,178,53,.9)) drop-shadow(0 0 32px rgba(235,178,53,.6)) drop-shadow(0 2px 6px rgba(0,0,0,.5));transform:scale(1.05)}}.inconsistency_indicator[_ngcontent-%COMP%]{width:fit-content;position:sticky;top:0;left:0;padding:16px;display:flex;align-items:flex-start;gap:8px;z-index:10;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.inconsistency_indicator[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:32px;color:var(--red)}.inconsistency_indicator[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.inconsistency_indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:var(--red)}.btn-icon.active[_ngcontent-%COMP%]{background:var(--yellow);color:#fff;border-color:var(--yellow);box-shadow:0 0 0 3px #8697e64d;transform:scale(1.05)}.btn-icon.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.btn-icon.active[_ngcontent-%COMP%]:hover{background:var(--yellow)}.btn-icon[_ngcontent-%COMP%]{transition:all .2s ease}.diagram-toggle[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;padding:6px 10px;border-radius:8px;cursor:pointer;font-weight:700}.inspector[_ngcontent-%COMP%]{position:fixed;top:12px;right:12px;width:320px;max-height:408px;overflow:auto;background:#fff;border:1px solid rgba(0,0,0,.12);border-radius:8px;box-shadow:0 8px 24px #0000001f;z-index:1000;padding:8px;font-size:13px;-webkit-user-select:none;user-select:none;transition:box-shadow .2s ease}.inspector[_ngcontent-%COMP%]:active{box-shadow:0 12px 32px #0000002e}.inspector-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,0,0,.06);cursor:move;-webkit-user-select:none;user-select:none;padding:4px 8px 8px}.inspector-header[_ngcontent-%COMP%]:hover{background:#00000005;border-radius:4px 4px 0 0}.inspector-header[_ngcontent-%COMP%]:active{background:#0000000a}.inspector-title[_ngcontent-%COMP%]{font-weight:700}.inspector-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:18px;cursor:pointer}.inspector-tabs[_ngcontent-%COMP%]{display:flex;gap:6px;margin-top:8px}.inspector-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;padding:6px 8px;cursor:pointer;border-bottom:2px solid transparent}.inspector-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-bottom-color:#333;font-weight:700}.inspector-body[_ngcontent-%COMP%]{padding-top:8px}.inspector-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:4px;font-size:12px;color:#333}.inspector-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .inspector-body[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:6px 8px;margin-bottom:8px;box-sizing:border-box}.inspector-actions[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;justify-content:flex-start}.inspector-card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.06);padding:8px;border-radius:6px;margin-bottom:8px;background:#fafafa}.card-row[_ngcontent-%COMP%]{margin-bottom:8px}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px}"]})};var O0=class e{imageUrl;title;description;price;buy=new Ve;use=new Ve;onBuy(){this.buy.emit()}onUse(){this.use.emit()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-store-item"]],inputs:{imageUrl:"imageUrl",title:"title",description:"description",price:"price"},outputs:{buy:"buy",use:"use"},decls:16,vars:5,consts:[[1,"store-item-card"],[1,"main-item-info"],[1,"store-banner",3,"src","alt"],[1,"description"],[1,"price",3,"click"],["src","/assets/store/price.png","alt","Pre\xE7o"]],template:function(n,i){n&1&&(y(0,"div",0)(1,"div",1),Z(2,"img",2),y(3,"h3"),I(4),v()(),y(5,"div",3)(6,"h3"),I(7,"Descri\xE7\xE3o"),v(),y(8,"p"),I(9),v()(),y(10,"button",4),q("click",function(){return i.onBuy()}),y(11,"label"),I(12,"COMPRAR"),v(),Z(13,"img",5),y(14,"label"),I(15),v()()()),n&2&&(_(2),A("src",i.imageUrl,Ot)("alt",i.title),_(2),fe(i.title),_(5),fe(i.description),_(6),fe(i.price))},styles:[".store-item-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;color:var(--white);align-items:center;border-radius:8px;padding:16px;border:3px solid var(--bg-card);height:20rem;justify-content:space-between}.main-item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;align-items:center}.store-item-card[_ngcontent-%COMP%]:hover{border-color:var(--yellow);transition:border-color .2s;background-color:var(--bg-card)}.store-banner[_ngcontent-%COMP%]{border-radius:8px;width:auto;height:5rem;transition:filter .3s ease-in-out}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:13px}.price[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;border-radius:4px;padding:6px 8px;width:100%;background-color:var(--yellow);align-items:center;justify-content:center;color:var(--white);cursor:pointer}.price[_ngcontent-%COMP%]:hover{filter:brightness(90%)}.price[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{cursor:pointer}.store-item-card[_ngcontent-%COMP%]:has(.price:hover)   .store-banner[_ngcontent-%COMP%]{filter:brightness(1.5)}"]})};var fl=class e{constructor(t){this.ngZone=t;typeof window<"u"&&window.addEventListener("storage",n=>{n.key==="inventory"&&this.ngZone.run(()=>{this.loadInitialInventory()})})}inventorySubject=new Dt(null);loadInitialInventory(){if(typeof localStorage<"u"){let t=localStorage.getItem("inventory");if(t){let n=JSON.parse(t);this.inventorySubject.next(n)}}}getInventoryUpdates(){return this.inventorySubject.asObservable()}updateInventory(t){typeof localStorage<"u"&&localStorage.setItem("inventory",JSON.stringify(t)),this.inventorySubject.next(t)}static \u0275fac=function(n){return new(n||e)(se(Ct))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var xn=class e{constructor(t){this.http=t}apiUrl=on.BASE_URL;getCurrentUser(){let t=localStorage.getItem("currentUser");return t?JSON.parse(t):null}getAllUsers(){return this.http.get(`${this.apiUrl}/users`)}getUserById(t){return this.http.get(`${this.apiUrl}/users/${t}`)}createUser(t){let n=new $t().set("name",t.name).set("email",t.email).set("password",t.password).set("idAvatar",t.idAvatar.toString());return this.http.post(`${this.apiUrl}/users`,null,{params:n})}updateUser(t,n){return this.http.put(`${this.apiUrl}/users/${t}`,n)}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`)}login(t,n){let i=new $t().set("email",t).set("password",n);return this.http.post(`${this.apiUrl}/users/login`,null,{params:i})}updateUserCoins(t,n){return this.updateUser(t,{coins:n})}updateUserReputation(t,n){return this.updateUser(t,{reputation:n})}updateUserAvatar(t,n){return this.updateUser(t,{idAvatar:n})}getUserByEmail(t){return this.getAllUsers()}checkEmailExists(t){return new qe(n=>{this.getUserByEmail(t).subscribe({next:i=>{let r=i.some(o=>o.email===t);n.next(r),n.complete()},error:i=>{n.error(i)}})})}getAllAvatars(){return this.http.get(`${this.apiUrl}/avatars`)}resetGameData(t){return this.http.post(`${this.apiUrl}/users/${t}/reset-game`,null)}resetCurrentUserGameData(){let t=this.getCurrentUser();return t?this.resetGameData(t.id):new qe(n=>{n.error(new Error("Nenhum usu\xE1rio logado encontrado no localStorage"))})}addItemToInventory(t,n){let i=new $t().set("itemName",n);return this.http.post(`${this.apiUrl}/inventories/user/${t}/items`,null,{params:i})}useItemFromInventory(t,n){let i=encodeURIComponent(n);return this.http.post(`${this.apiUrl}/inventories/user/${t}/items/${i}/use`,null)}getInventoryByUser(t){return this.http.get(`${this.apiUrl}/inventories/user/${t}/items`)}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};function _q(e,t){if(e&1){let n=le();y(0,"app-store-item",13),q("buy",function(){let r=H(n).$implicit,o=V();return U(o.onBuy(r))})("use",function(){let r=H(n).$implicit,o=V();return U(o.onUse(r))}),v()}if(e&2){let n=t.$implicit;A("imageUrl",n.imageUrl)("title",n.title)("description",n.description)("price",n.price)}}var $r=class e{constructor(t,n,i,r,o){this.dataService=t;this.storageService=n;this.userService=i;this.notificationService=r;this.platformId=o}visible=!1;userMoney=0;userData;userInventory={};userDataSubscription;storeStateChanged=new Ve;ngOnInit(){if(pt(this.platformId)){let t=localStorage.getItem("userId");t&&(this.loadUserData(t),this.subscribeToUserData())}}ngOnDestroy(){this.userDataSubscription&&this.userDataSubscription.unsubscribe()}subscribeToUserData(){this.userDataSubscription=this.dataService.userData$.subscribe(t=>{t&&(this.userData=t,this.userMoney=t.coins)})}loadUserData(t){this.userService.getUserById(Number(t)).subscribe({next:n=>{this.userData=n,this.userMoney=n.coins,this.dataService.updateUserData(n),this.loadInventory()},error:n=>{console.error("Erro ao carregar dados do usu\xE1rio:",n),this.loadUserDataFromStorage()}})}loadUserDataFromStorage(){let t=localStorage.getItem("currentUser"),n=localStorage.getItem("inventory");if(t&&n){let i=JSON.parse(t);this.userData=i,this.userMoney=i.coins||i.money||0,this.userInventory=JSON.parse(n)}}loadInventory(){if(pt(this.platformId)){let t=localStorage.getItem("inventory");t&&(this.userInventory=JSON.parse(t))}}storeItems=[{imageUrl:"/assets/store/watch.png",title:"TEMPO EXTRA",description:"Adicione +60 segundos \xE0 sua fase atual. Ideal para quando o tempo est\xE1 apertado!",price:21,key:"watch"},{imageUrl:"/assets/store/ice.png",title:"CONGELAMENTO",description:"Congele o tempo da fase atual e resolva os desafios sem press\xE3o!",price:200,key:"ice"},{imageUrl:"/assets/store/2xtime.png",title:"TEMPO DUPLICADO",description:"Duplique todo o tempo dispon\xEDvel na fase atual para uma experi\xEAncia mais tranquila!",price:100,key:"2xtime"},{imageUrl:"/assets/store/2xrepu.png",title:"REPUTA\xC7\xC3O EM DOBRO",description:"Ganhe o dobro de reputa\xE7\xE3o ao completar a fase. Suba de n\xEDvel mais r\xE1pido!",price:300,key:"2xrepu"}];show(){if(pt(this.platformId)){let t=localStorage.getItem("userId");t&&this.userService.getUserById(Number(t)).subscribe({next:n=>{this.userData=n,this.userMoney=n.coins,this.dataService.updateUserData(n)},error:n=>{console.error("Erro ao carregar dados do usu\xE1rio:",n)}})}this.visible=!0}hide(){this.visible=!1}toggle(){if(this.visible=!this.visible,this.storeStateChanged.emit(this.visible),this.visible&&pt(this.platformId)){let t=localStorage.getItem("userId");t&&this.userService.getUserById(Number(t)).subscribe({next:n=>{this.userData=n,this.userMoney=n.coins,this.dataService.updateUserData(n)},error:n=>{console.error("Erro ao carregar dados do usu\xE1rio:",n)}})}}onBuy(t){if(!this.userData||this.userMoney<t.price){this.notificationService.showError("Moedas insuficientes para comprar este item!");return}let n=this.userMoney-t.price;console.log("\u{1F6D2} Comprando item:",t.title),console.log("\u{1F4B0} Moedas ANTES da compra:",this.userMoney),console.log("\u{1F4B0} Pre\xE7o do item:",t.price),console.log("\u{1F4B0} Moedas DEPOIS da compra:",n);let i={name:this.userData.name,email:this.userData.email,password:this.userData.password,reputation:this.userData.reputation,coins:n,avatar:this.userData.avatar};this.userService.updateUser(this.userData.id,i).subscribe({next:r=>{console.log("\u2705 Usu\xE1rio atualizado no backend:",r),console.log("\u{1F4B0} Moedas salvas no backend:",r.coins),this.userData=r,this.userMoney=r.coins,localStorage.setItem("currentUser",JSON.stringify(r)),this.dataService.updateUserData(r),this.userService.addItemToInventory(this.userData.id,t.key).subscribe({next:o=>{let a={};if(o&&Array.isArray(o.items))for(let s of o.items)s&&s.itemName&&(a[s.itemName]=Number(s.quantity||0));else o&&o.itemsMap?Object.assign(a,o.itemsMap):a[t.key]=(this.userInventory[t.key]||0)+1;this.userInventory=a,localStorage.setItem("inventory",JSON.stringify(a)),this.storageService.updateInventory(a),this.notificationService.showSuccess(`${t.title} comprado com sucesso!`),console.log(`\u2705 Item ${t.title} comprado e adicionado ao invent\xE1rio!`)},error:o=>{console.error("\u274C Erro ao adicionar item no invent\xE1rio (backend):",o),this.updateInventory(t.key),this.notificationService.showError("Compra feita, mas falha ao atualizar invent\xE1rio no servidor.")}})},error:r=>{console.error("\u274C Erro ao atualizar moedas no backend:",r),this.notificationService.showError("Erro ao processar a compra. Tente novamente."),this.updateLocalUserData(t)}})}updateInventory(t){if(pt(this.platformId)){let n=localStorage.getItem("inventory"),i=n?JSON.parse(n):{};i[t]=(i[t]||0)+1,this.userInventory=i,localStorage.setItem("inventory",JSON.stringify(i)),this.storageService.updateInventory(i)}}updateLocalUserData(t){this.userData&&pt(this.platformId)&&(this.userData.coins-=t.price,this.userMoney=this.userData.coins,localStorage.setItem("currentUser",JSON.stringify(this.userData)),this.updateInventory(t.key),this.dataService.updateUserData(this.userData))}onUse(t){if(this.userInventory[t.key]>0){let n=localStorage.getItem("inventory");if(n){let i=JSON.parse(n);switch(i[t.key]--,this.userInventory=i,localStorage.setItem("inventory",JSON.stringify(i)),t.key){case"watch":break;case"bomb":break;case"eraser":break;case"lamp":break;case"ice":break;case"2xtime":break;case"2xrepu":break}}}}static \u0275fac=function(n){return new(n||e)(G(yn),G(fl),G(xn),G(Vn),G(xt))};static \u0275cmp=Se({type:e,selectors:[["app-store"]],outputs:{storeStateChanged:"storeStateChanged"},decls:18,vars:4,consts:[[1,"store-overlay",3,"click"],[1,"store-dialog",3,"click"],[1,"store-header"],[1,"header-left"],[1,"btn-icon","close-button",3,"click"],["name","x",1,"lucide-icon"],[1,"money-label"],[1,"money-container"],["name","circle-dollar-sign","color","#EBB235",1,"lucide-icon","money-icon"],[1,"title"],["src","/assets/store/store.png","alt","Loja de Itens"],[1,"store-content"],[3,"imageUrl","title","description","price","buy","use",4,"ngFor","ngForOf"],[3,"buy","use","imageUrl","title","description","price"]],template:function(n,i){n&1&&(y(0,"div",0),q("click",function(){return i.hide()}),y(1,"div",1),q("click",function(o){return o.stopPropagation()}),y(2,"div",2)(3,"div",3)(4,"button",4),q("click",function(){return i.hide()}),Z(5,"lucide-icon",5),v(),y(6,"label",6)(7,"div",7),Z(8,"lucide-icon",8),I(9,": "),v(),y(10,"span"),I(11),v()()(),y(12,"div",9),Z(13,"img",10),y(14,"h2"),I(15,"LOJA DE ITENS"),v()()(),y(16,"div",11),ne(17,_q,1,4,"app-store-item",12),v()()()),n&2&&(Ce("visible",i.visible),_(11),fe(i.userMoney),_(6),A("ngForOf",i.storeItems))},dependencies:[Ze,qt,ss,Nt,O0],styles:[".store-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:transparent;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px);opacity:0;pointer-events:none;display:flex;justify-content:center;align-items:center;z-index:1000;transition:all .2s ease-out}.store-overlay.visible[_ngcontent-%COMP%]{background-color:var(--overlay);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:1;pointer-events:all}.store-dialog[_ngcontent-%COMP%]{background:var(--bg);border-radius:20px;padding:16px;min-width:50vw;max-width:max-content;max-height:90vh;overflow-y:auto;gap:16px}.store-dialog[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.store-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:16px}.store-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--white);font-weight:800;font-size:22px;line-height:100%;letter-spacing:0%}.store-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}.title[_ngcontent-%COMP%]{display:flex;gap:16px;flex-direction:row;align-content:center;align-items:center;padding:.2rem 1rem}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;border:none;cursor:pointer;transition:background-color .2s}.close-button[_ngcontent-%COMP%]{background:var(--red)}.close-button[_ngcontent-%COMP%]:hover{background:none}  .close-button:hover .lucide-icon{color:var(--white)}.store-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;width:80vw;padding:1rem}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:2rem}.money-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:var(--bg);border-radius:8px;color:var(--white);font-weight:600;font-size:1.5rem;gap:1rem}.money-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;height:100%;gap:.3rem}"]})};function Iq(e,t){if(e&1){let n=le();y(0,"div",1),q("click",function(){H(n);let r=V();return U(r.hide())}),y(1,"div",2),q("click",function(r){return H(n),U(r.stopPropagation())}),y(2,"div",3)(3,"button",4),q("click",function(){H(n);let r=V();return U(r.hide())}),Z(4,"lucide-icon",5),v()(),y(5,"div",6),Z(6,"lucide-icon",7),y(7,"div",8)(8,"h2"),I(9),v(),y(10,"p"),I(11),v()()(),y(12,"div",9)(13,"button",10),q("click",function(){H(n);let r=V();return U(r.hide())}),I(14,"Cancelar"),v(),y(15,"button",11),q("click",function(){H(n);let r=V();return U(r.confirmAction())}),I(16,"Confirmar"),v()()()()}if(e&2){let n=V();Ce("visible",n.visible),_(9),fe(n.title),_(2),fe(n.message)}}var ml=class e{visible=!1;title="";message="";confirm=new Ve;cancel=new Ve;ngOnInit(){}hide(){this.cancel.emit()}confirmAction(){this.confirm.emit()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-confirm-dialog"]],inputs:{visible:"visible",title:"title",message:"message"},outputs:{confirm:"confirm",cancel:"cancel"},decls:1,vars:1,consts:[["class","overlay",3,"visible","click",4,"ngIf"],[1,"overlay",3,"click"],[1,"dialog",3,"click"],[1,"header"],[1,"btn-icon","close-button",3,"click"],["name","x",1,"lucide-icon"],[1,"content"],["name","triangle-alert","size","64",1,"lucide-icon","left"],[1,"right"],[1,"actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(n,i){n&1&&ne(0,Iq,17,4,"div",0),n&2&&A("ngIf",i.visible)},dependencies:[Ze,_t,ss,Nt],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:transparent;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px);opacity:0;pointer-events:none;display:flex;justify-content:center;align-items:center;z-index:9999;transition:all .2s ease-out}.overlay.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all;background-color:var(--overlay);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:all .2s ease-out}.dialog[_ngcontent-%COMP%]{background:var(--white);border-radius:20px;padding:32px;min-width:35vw;max-width:40vw;max-height:70vh;overflow-y:auto;box-shadow:0 8px 24px #00000026;display:flex;flex-direction:column;gap:24px}.header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-end;margin-top:-8px;margin-right:-8px}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px;border-radius:4px;transition:background .2s}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--gray)}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .lucide-icon[_ngcontent-%COMP%]{color:var(--black)}.header[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:28px;height:28px;cursor:pointer;color:#666}.content[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;gap:20px}.content[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:72px;height:72px;flex-shrink:0;color:var(--yellow)}.content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:800;color:var(--black);margin:0}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#333;line-height:1.5;margin:0}.actions[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-end;gap:12px;margin-top:8px}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;cursor:pointer;transition:all .2s ease;outline:none;min-width:120px}.btn-secondary[_ngcontent-%COMP%]{background:var(--white);color:#666;border:2px solid var(--gray);transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--gray);color:var(--black);border-color:#999}.btn-primary[_ngcontent-%COMP%]{background:var(--green);color:var(--white);border:2px solid var(--green);transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#00b814;border-color:#00b814;transform:translateY(-1px);box-shadow:0 4px 8px #00d81933}"]})};var fa=class e{constructor(t){this.http=t}apiUrl=on.BASE_URL;getByPhaseAndUserId(t,n){return this.http.get(`${this.apiUrl}/phase-users/by-phase-and-user?phaseId=${t}&userId=${n}`)}updateUserDiagram(t,n){return this.http.patch(`${this.apiUrl}/phase-users/${t}/user-diagram`,n,{headers:{"Content-Type":"application/json"}})}updatePhaseUser(t,n){return this.http.put(`${this.apiUrl}/phase-users/${t}`,n,{headers:{"Content-Type":"application/json"}})}unlockNextPhaseForUser(t,n){return this.http.post(`${this.apiUrl}/phase-users/unlock-next`,{phaseId:t,userId:n})}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var Eq=(e,t,n)=>({"accuracy-green":e,"accuracy-yellow":t,"accuracy-red":n});function Dq(e,t){e&1&&(y(0,"p"),I(1,"Fase conclu\xEDda com sucesso"),v())}function Tq(e,t){e&1&&(y(0,"p"),I(1,"\u{1F389} Voc\xEA finalizou o jogo! \u{1F389}"),v())}function Pq(e,t){e&1&&(y(0,"span"),I(1,"+ "),v())}function Aq(e,t){e&1&&Z(0,"lucide-icon",18),e&2&&A("size",16)}function Lq(e,t){e&1&&Z(0,"lucide-icon",19),e&2&&A("size",16)}function Oq(e,t){e&1&&(y(0,"span"),I(1,"VOLTAR PARA O MAPA"),v())}function Rq(e,t){e&1&&(y(0,"span"),I(1,"VER CR\xC9DITOS"),v())}var R0=class e{constructor(t,n,i,r,o){this.platformId=t;this.dataService=n;this.phaseUserService=i;this.userService=r;this.router=o}visible=!1;accuracy=0;doubleReputationActive=!1;phaseUser=null;reputationSum=0;coinsSum=0;FINAL_PHASE_IDS=[26,22,19,16];backToMenuEvent=new Ve;ngOnInit(){this.visible=!0,this.updateSums()}ngOnChanges(t){t.accuracy&&this.updateSums()}updateSums(){this.reputationSum=this.calculateReputationSum(this.accuracy),this.coinsSum=this.calculateCoinsSum(this.accuracy),this.doubleReputationActive&&(this.reputationSum*=2,this.coinsSum*=2),this.updateBackendData()}updateBackendData(){if(!pt(this.platformId))return;let t=this.userService.getCurrentUser();if(!t||!this.phaseUser){console.warn("\u26A0\uFE0F Dados do usu\xE1rio ou phaseUser n\xE3o dispon\xEDveis");return}console.log("\u{1F4B0} Moedas ANTES de finalizar fase:",t.coins),console.log("\u{1F4B0} Moedas que v\xE3o ser ADICIONADAS:",this.coinsSum);try{let n=ge(ee({},this.phaseUser),{isCompleted:!0,accuracy:this.accuracy,coins:this.coinsSum,reputation:this.reputationSum,current:!1,status:"COMPLETED",userDiagram:JSON.stringify(this.phaseUser.userDiagram)}),i=ge(ee({},t),{coins:(t.coins||0)+this.coinsSum,reputation:(t.reputation||0)+this.reputationSum,progressing:this.reputationSum>=0});console.log("\u{1F4B0} Moedas DEPOIS do c\xE1lculo:",i.coins),this.phaseUserService.updatePhaseUser(this.phaseUser.id,n).subscribe({next:r=>{n.accuracy&&n.accuracy>=70&&this.phaseUserService.unlockNextPhaseForUser(r.phase.id,r.user.id).subscribe({next:()=>{console.log("\u2705 Pr\xF3xima fase desbloqueada com sucesso!")},error:o=>{console.error("\u274C Erro ao desbloquear pr\xF3xima fase:",o)}}),this.userService.updateUser(t.id,i).subscribe({next:o=>{console.log("\u2705 Usu\xE1rio atualizado no backend:",o),console.log("\u{1F4B0} Moedas salvas no backend:",o.coins),localStorage.setItem("currentUser",JSON.stringify(o)),this.dataService.updateUserData(o)},error:o=>{console.error("\u274C Erro ao atualizar usu\xE1rio:",o),this.updateLocalData(i)}})},error:r=>{console.error("\u274C Erro ao atualizar PhaseUser:",r),this.updateLocalData(i)}})}catch(n){console.error("\u274C Erro ao processar dados:",n)}}updateLocalData(t){localStorage.setItem("currentUser",JSON.stringify(t)),this.dataService.updateUserData(t)}calculateReputationSum(t){return t>=80?Math.floor(40+(t-80)*.5):t>=60?Math.floor(10+(t-60)*1.45):t>=40?Math.floor(-10+(t-40)*.95):Math.floor(-25+t*.35)}calculateCoinsSum(t){return Math.max(0,Math.floor(t))}isFinalPhase(){return this.phaseUser?.phase?.id?this.FINAL_PHASE_IDS.includes(this.phaseUser.phase.id):!1}backToMenu(){this.isFinalPhase()?(console.log("\u{1F3AC} Fase final conclu\xEDda! Redirecionando para cr\xE9ditos..."),this.router.navigate(["/credits"])):this.backToMenuEvent.emit()}static \u0275fac=function(n){return new(n||e)(G(xt),G(yn),G(fa),G(xn),G(mt))};static \u0275cmp=Se({type:e,selectors:[["app-dialog-finished-gamephase"]],inputs:{accuracy:"accuracy",doubleReputationActive:"doubleReputationActive",phaseUser:"phaseUser"},outputs:{backToMenuEvent:"backToMenuEvent"},features:[In],decls:30,vars:18,consts:[[1,"overlay"],[1,"dialog"],[1,"header"],[4,"ngIf"],[1,"content"],[1,"accuracy"],[3,"ngClass"],["name","circle-check-big","size","48",1,"lucide-icon"],[1,"reputation"],[1,"reputation-sum"],["name","sparkles",1,"lucide-icon","sparkles"],["name","move-up-right","class","lucide-icon","color","#00D819",3,"size",4,"ngIf"],["name","move-down-right","class","lucide-icon","color","#FF0000",3,"size",4,"ngIf"],[1,"coins"],[1,"coins-sum"],["name","circle-dollar-sign",1,"lucide-icon"],[1,"back-to-map",3,"click"],[1,"lucide-icon",3,"name"],["name","move-up-right","color","#00D819",1,"lucide-icon",3,"size"],["name","move-down-right","color","#FF0000",1,"lucide-icon",3,"size"]],template:function(n,i){n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),I(4,"Parab\xE9ns!"),v(),ne(5,Dq,2,0,"p",3)(6,Tq,2,0,"p",3),v(),y(7,"div",4)(8,"div",5)(9,"h1",6),I(10),v(),Z(11,"lucide-icon",7),v(),y(12,"div",8)(13,"p"),ne(14,Pq,2,0,"span",3),y(15,"span",9),I(16),v()(),Z(17,"lucide-icon",10),ne(18,Aq,1,1,"lucide-icon",11)(19,Lq,1,1,"lucide-icon",12),v(),y(20,"div",13)(21,"p"),I(22,"+ "),y(23,"span",14),I(24),v()(),Z(25,"lucide-icon",15),v()(),y(26,"button",16),q("click",function(){return i.backToMenu()}),ne(27,Oq,2,0,"span",3)(28,Rq,2,0,"span",3),Z(29,"lucide-icon",17),v()()()),n&2&&(Ce("visible",i.visible),_(5),A("ngIf",!i.isFinalPhase()),_(),A("ngIf",i.isFinalPhase()),_(3),A("ngClass",sy(14,Eq,i.accuracy>=80,i.accuracy>=70&&i.accuracy<80,i.accuracy<70)),_(),Ie(" ",i.accuracy,"% "),_(4),A("ngIf",i.reputationSum>0),_(2),fe(i.reputationSum),_(2),A("ngIf",i.reputationSum>0),_(),A("ngIf",i.reputationSum<=0),_(5),fe(i.coinsSum),_(3),A("ngIf",!i.isFinalPhase()),_(),A("ngIf",i.isFinalPhase()),_(),A("name",i.isFinalPhase()?"film":"rotate-ccw"))},dependencies:[Gt,Nt,Ze,ur,_t],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:transparent;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px);opacity:0;pointer-events:none;display:flex;justify-content:center;align-items:center;z-index:1000;transition:all .2s ease-out}.overlay.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all;background-color:var(--overlay);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.dialog[_ngcontent-%COMP%]{background:var(--bg);border-radius:20px;padding:48px 16px;min-width:50vw;max-width:max-content;max-height:90vh;display:flex;flex-direction:column;gap:32px}.dialog[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--white)}.dialog[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px;font-weight:800}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px}.accuracy[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:4px}.accuracy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:72px;font-weight:800}.accuracy[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:64px;height:64px}.reputation[_ngcontent-%COMP%], .coins[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;font-size:24px;font-weight:800}.reputation[_ngcontent-%COMP%]   .lucide-icon.sparkles[_ngcontent-%COMP%], .coins[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--yellow)}.dialog[_ngcontent-%COMP%]   .back-to-map[_ngcontent-%COMP%]{cursor:pointer;align-self:center;width:fit-content;background:var(--green);border-radius:6px;display:flex;align-items:center;gap:8px;outline:0;border:0;padding:8px 24px;font-size:16px;font-weight:700}.dialog[_ngcontent-%COMP%]   .back-to-map[_ngcontent-%COMP%]:hover   .lucide-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.dialog[_ngcontent-%COMP%]   .accuracy-green[_ngcontent-%COMP%]{color:var(--green)}.dialog[_ngcontent-%COMP%]   .accuracy-yellow[_ngcontent-%COMP%]{color:var(--yellow)}.dialog[_ngcontent-%COMP%]   .accuracy-red[_ngcontent-%COMP%]{color:var(--red)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}"]})};var Nq=["swiperContainer"];function Fq(e,t){if(e&1&&(y(0,"div",7)(1,"p"),I(2),v()()),e&2){let n=t.$implicit;_(2),fe(n)}}var N0=class e{items=[];swiperContainer;swiper;ngAfterViewInit(){this.swiper=new xi(this.swiperContainer.nativeElement,{modules:[Is,Es],slidesPerView:1,autoHeight:!0,navigation:{nextEl:this.swiperContainer.nativeElement.querySelector(".swiper-button-next"),prevEl:this.swiperContainer.nativeElement.querySelector(".swiper-button-prev")},pagination:{el:this.swiperContainer.nativeElement.querySelector(".swiper-pagination"),clickable:!0},loop:!1,allowTouchMove:!1,simulateTouch:!1,noSwiping:!0,noSwipingClass:"swiper-slide"})}ngOnDestroy(){this.swiper&&this.swiper.destroy()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-carousel"]],viewQuery:function(n,i){if(n&1&&ft(Nq,5),n&2){let r;dt(r=ut())&&(i.swiperContainer=r.first)}},inputs:{items:"items"},decls:7,vars:1,consts:[["swiperContainer",""],[1,"swiper"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"swiper-button-prev"],[1,"swiper-button-next"],[1,"swiper-slide"]],template:function(n,i){n&1&&(y(0,"div",1,0)(2,"div",2),ne(3,Fq,3,1,"div",3),v(),Z(4,"div",4)(5,"div",5)(6,"div",6),v()),n&2&&(_(3),A("ngForOf",i.items))},dependencies:[Ze,qt],styles:[".swiper[_ngcontent-%COMP%]{width:100%;height:fit-content}.swiper-wrapper[_ngcontent-%COMP%]{display:flex;height:fit-content}.swiper-slide[_ngcontent-%COMP%]{text-align:left;display:flex;justify-content:center;align-items:center;height:fit-content;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;cursor:text}p[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--black);margin:0;padding:0 40px;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;cursor:text}.swiper-button-prev[_ngcontent-%COMP%], .swiper-button-next[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;pointer-events:all;width:24px;height:24px;z-index:10}.swiper-button-prev[_ngcontent-%COMP%]:after, .swiper-button-next[_ngcontent-%COMP%]:after{color:var(--black);font-size:20px}.swiper-horizontal[_ngcontent-%COMP%] > .swiper-pagination-bullets[_ngcontent-%COMP%], .swiper-pagination-bullets.swiper-pagination-horizontal[_ngcontent-%COMP%], .swiper-pagination-custom[_ngcontent-%COMP%], .swiper-pagination-fraction[_ngcontent-%COMP%]{bottom:var(--swiper-pagination-bottom, -2px)}.swiper-button-next[_ngcontent-%COMP%], .swiper-rtl[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]{right:var(--swiper-navigation-sides-offset, 0px);left:auto}"]})};var F0=class e{constructor(t){this.http=t}apiUrl=on.BASE_URL;storeItemTemplates={watch:{imageUrl:"/assets/store/watch.png",title:"TEMPO EXTRA",description:"Adicione +60 segundos \xE0 sua fase atual. Ideal para quando o tempo est\xE1 apertado!",type:"consumable",eventName:"item.use.watch"},bomb:{imageUrl:"/assets/store/bomb.png",title:"EXPLOS\xC3O DE ERROS",description:"Revele rapidamente todos os pontos cr\xEDticos do diagrama. Use com sabedoria!",type:"consumable",eventName:"item.use.bomb"},eraser:{imageUrl:"/assets/store/eraser.png",title:"BORRACHETA",description:"Remova elementos incorretos do diagrama automaticamente.",type:"tool",eventName:"item.use.eraser"},lamp:{imageUrl:"/assets/store/lamp.png",title:"L\xC2MPADA",description:"Mostra uma dica \xFAtil para a fase atual.",type:"tool",eventName:"item.use.lamp"},ice:{imageUrl:"/assets/store/ice.png",title:"CONGELAMENTO",description:"Congele o tempo da fase atual e resolva os desafios sem press\xE3o!",type:"consumable",eventName:"item.use.ice"},"2xtime":{imageUrl:"/assets/store/2xtime.png",title:"TEMPO DUPLICADO",description:"Duplique todo o tempo dispon\xEDvel na fase atual.",type:"consumable",eventName:"item.use.2xtime"},"2xrepu":{imageUrl:"/assets/store/2xrepu.png",title:"REPUTA\xC7\xC3O EM DOBRO",description:"Ganhe o dobro de reputa\xE7\xE3o ao completar a fase.",type:"consumable",eventName:"item.use.2xrepu"}};getBackpackData(t){let n=t;if(!n){let i=typeof window<"u"?localStorage.getItem("userId"):null;n=i?Number(i):void 0}return n?this.http.get(`${this.apiUrl}/inventories/user/${n}/items`).pipe(Ae((i=[])=>{let r={};for(let a of i){let s=a.itemName||"";if(!s)continue;let c=Number(a.quantity||0);r[s]=(r[s]||0)+(isNaN(c)?0:c)}return{items:Object.keys(r).map(a=>{let s=this.storeItemTemplates[a];return{id:`${a}`,key:a,name:s?s.title:a,description:s?s.description:"",imageUrl:s?s.imageUrl:"/assets/store/default.png",quantity:r[a],type:s?s.type:"consumable",eventName:s?s.eventName:void 0}}),maxSlots:12}})):we({items:[],maxSlots:12})}useItem(t,n){let i=encodeURIComponent(n),r=this.storeItemTemplates[n];return this.http.post(`${this.apiUrl}/inventories/user/${t}/items/${i}/use`,null).pipe(Pt(o=>{try{let a=r?r.eventName:`item.use.${n}`,s={userId:t,itemName:n,response:o};window.dispatchEvent(new CustomEvent(a,{detail:s}))}catch(a){console.warn("BackpackService: dispatch event failed",a)}}))}addItem(t,n){let i=new $t().set("itemName",n);return this.http.post(`${this.apiUrl}/inventories/user/${t}/items`,null,{params:i})}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};function Bq(e,t){if(e&1&&(y(0,"span",20),I(1),v()),e&2){let n=V().$implicit;_(),fe(n.quantity)}}function zq(e,t){if(e&1){let n=le();so(0),y(1,"div",17,0),q("mouseenter",function(r){let o=H(n).$implicit,a=V();return U(a.onItemHover(o,r))})("mouseleave",function(){H(n);let r=V();return U(r.onItemLeave())})("click",function(){let r=H(n).$implicit,o=V();return U(o.onItemClick(r))}),Z(3,"img",18),ne(4,Bq,2,1,"span",19),v(),co()}if(e&2){let n=t.$implicit,i=V();_(),Ce("selected",i.selectedItem===n),_(2),A("src",n.imageUrl,Ot)("alt",n.name),_(),A("ngIf",n.quantity>1)}}function jq(e,t){e&1&&Z(0,"div",21)}function Hq(e,t){if(e&1&&(y(0,"div",22)(1,"h4"),I(2),v(),y(3,"p"),I(4),v()()),e&2){let n=V();_(2),fe(n.hoveredItem.name),_(2),fe(n.hoveredItem.description)}}var Nu=class e{constructor(t,n,i){this.backpackService=t;this.notificationService=n;this.appContextService=i}isOpen=!1;backpackData=null;emptySlots=[];hoveredItem=null;selectedItem=null;canUseItems=!1;tooltipTop=0;tooltipLeft=0;contextSubscription;ngOnInit(){this.loadBackpackData(),this.contextSubscription=this.appContextService.contextState$.subscribe(t=>{this.canUseItems=t.canUseItems})}ngOnDestroy(){this.contextSubscription&&this.contextSubscription.unsubscribe()}show(){this.isOpen=!0,this.loadBackpackData()}hide(){this.isOpen=!1}close(){this.isOpen=!1,this.selectedItem=null}toggle(){this.isOpen=!this.isOpen,this.isOpen?this.loadBackpackData():this.selectedItem=null}loadBackpackData(){let t=typeof window<"u"?localStorage.getItem("userId"):null,n=t?Number(t):void 0;if(!n){this.backpackData={items:[],maxSlots:12},this.calculateEmptySlots();return}this.backpackService.getBackpackData(n).subscribe({next:i=>{this.backpackData=i,this.calculateEmptySlots()},error:i=>{this.notificationService.showNotification("error","N\xE3o foi poss\xEDvel carregar os dados da mochila."),this.backpackData={items:[],maxSlots:12},this.calculateEmptySlots()}})}calculateEmptySlots(){if(this.backpackData){let t=this.backpackData.items.length,n=this.backpackData.maxSlots-t;this.emptySlots=Array(n).fill(0).map((i,r)=>r)}}onItemHover(t,n){this.hoveredItem=t;let r=n.target.closest(".inventory-slot")?.getBoundingClientRect();if(r){this.tooltipLeft=r.right+8,this.tooltipTop=r.top;let o=350;this.tooltipLeft+o>window.innerWidth&&(this.tooltipLeft=r.left-o-8)}}onItemLeave(){this.hoveredItem=null}onItemClick(t){this.selectedItem=t}onUseItem(){if(!this.selectedItem){this.notificationService.showNotification("error","Selecione um item primeiro.");return}if(!this.canUseItems){this.notificationService.showNotification("error","Itens s\xF3 podem ser usados durante uma fase.");return}let t=typeof window<"u"?localStorage.getItem("userId"):null,n=t?Number(t):void 0;if(!n){this.notificationService.showNotification("error","Usu\xE1rio n\xE3o encontrado.");return}let i=this.selectedItem;this.backpackService.useItem(n,i.key).subscribe({next:r=>{this.selectedItem=null,this.close(),this.loadBackpackData()},error:r=>{console.error("Erro ao usar item:",r),this.notificationService.showNotification("error","Falha ao usar o item. Tente novamente.")}})}static \u0275fac=function(n){return new(n||e)(G(F0),G(Vn),G(mi))};static \u0275cmp=Se({type:e,selectors:[["app-backpack"]],decls:20,vars:15,consts:[["itemSlot",""],[1,"backpack-overlay",3,"click"],[1,"backpack-dialog",3,"click"],[1,"backpack-header"],[1,"header-left"],[1,"btn-icon","close-button",3,"click"],["name","x",1,"lucide-icon"],[1,"title"],["name","backpack","color","#FFFFFF",1,"lucide-icon",3,"size"],[1,"backpack-content"],[4,"ngFor","ngForOf"],["class","inventory-slot empty",4,"ngFor","ngForOf"],[1,"backpack-footer"],[1,"use-item-button",3,"click","disabled"],["name","zap",3,"size"],[1,"description-slot"],["class","description-content",4,"ngIf"],[1,"inventory-slot","filled",3,"mouseenter","mouseleave","click"],[3,"src","alt"],["class","quantity-badge",4,"ngIf"],[1,"quantity-badge"],[1,"inventory-slot","empty"],[1,"description-content"]],template:function(n,i){n&1&&(y(0,"div",1),q("click",function(){return i.close()}),y(1,"div",2),q("click",function(o){return o.stopPropagation()}),y(2,"div",3)(3,"div",4)(4,"button",5),q("click",function(){return i.close()}),Z(5,"lucide-icon",6),v()(),y(6,"div",7),Z(7,"lucide-icon",8),y(8,"h2"),I(9,"MOCHILA"),v()()(),y(10,"div",9),ne(11,zq,5,5,"ng-container",10)(12,jq,1,0,"div",11),v(),y(13,"div",12)(14,"button",13),q("click",function(){return i.onUseItem()}),Z(15,"lucide-icon",14),y(16,"span"),I(17),v()()()(),y(18,"div",15),ne(19,Hq,5,2,"div",16),v()()),n&2&&(Ce("visible",i.isOpen),_(7),A("size",32),_(4),A("ngForOf",i.backpackData==null?null:i.backpackData.items),_(),A("ngForOf",i.emptySlots),_(2),A("disabled",!i.canUseItems||!i.selectedItem),_(),A("size",18),_(2),fe(i.selectedItem?"USAR "+i.selectedItem.name.toUpperCase():"SELECIONE UM ITEM"),_(),Tr("top",i.tooltipTop,"px")("left",i.tooltipLeft,"px"),Ce("expanded",i.hoveredItem!==null),_(),A("ngIf",i.hoveredItem))},dependencies:[Ze,qt,_t,Gt,Nt],styles:[".backpack-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:transparent;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px);opacity:0;pointer-events:none;display:flex;justify-content:center;align-items:center;z-index:1000;transition:all .2s ease-out;gap:8px}.backpack-overlay.visible[_ngcontent-%COMP%]{background-color:var(--overlay);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:1;pointer-events:all}.backpack-dialog[_ngcontent-%COMP%]{background:var(--bg);border-radius:20px;padding:16px;min-width:40vw;max-width:50vw;max-height:70vh;display:flex;flex-direction:column;gap:16px;overflow:visible}.backpack-dialog[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none}.backpack-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:16px}.backpack-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--white);font-weight:800;font-size:22px;line-height:100%;letter-spacing:0%}.backpack-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}.title[_ngcontent-%COMP%]{display:flex;gap:12px;flex-direction:row;align-content:center;align-items:center;padding:.2rem .5rem}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;border:none;cursor:pointer;transition:background-color .2s}.close-button[_ngcontent-%COMP%]{background:var(--red)}.close-button[_ngcontent-%COMP%]:hover{background:none}  .close-button:hover .lucide-icon{color:var(--white)}.backpack-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);gap:8px;width:100%;padding:1rem;grid-auto-flow:row;overflow-y:auto;overflow-x:clip;max-height:50vh}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:2rem}.inventory-slot[_ngcontent-%COMP%]{aspect-ratio:1;border:2px solid var(--white);border-radius:8px;background-color:transparent;display:flex;align-items:center;justify-content:center;height:110px;transition:all .3s ease;position:relative}.inventory-slot.empty[_ngcontent-%COMP%]{border-style:dashed;opacity:.5}.inventory-slot.filled[_ngcontent-%COMP%]{border-style:solid;background-color:var(--bg-card);opacity:1;position:relative;cursor:pointer;display:flex;flex-direction:column;padding:8px;transition:all .3s ease;z-index:1;overflow:visible}.inventory-slot.filled.selected[_ngcontent-%COMP%]{border-color:var(--yellow);background-color:#ffd6001a;box-shadow:0 0 15px #ffd6004d;z-index:100}.inventory-slot.filled[_ngcontent-%COMP%]:hover{border-color:var(--yellow);transform:translateY(-2px);z-index:1001;overflow:visible}.inventory-slot[_ngcontent-%COMP%]:hover{background-color:var(--bg-card);border-color:var(--yellow);border-style:solid}.inventory-slot[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:60%;max-height:60%;object-fit:contain}.quantity-badge[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;background-color:var(--yellow);color:var(--bg);border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700}.description-slot[_ngcontent-%COMP%]{position:fixed;background-color:var(--gray);border-radius:8px;margin:0;width:0;min-height:110px;max-height:200px;overflow:hidden;transition:all .4s cubic-bezier(.4,0,.2,1);opacity:0;display:flex;align-items:center;z-index:10000;pointer-events:none;box-shadow:0 4px 12px #0000004d}.description-slot.expanded[_ngcontent-%COMP%]{width:350px;opacity:1;padding:12px;pointer-events:auto;overflow-y:auto}.description-content[_ngcontent-%COMP%]{color:var(--bg)}.description-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:700}.description-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;line-height:1.4}.hidden[_ngcontent-%COMP%]{display:none}.backpack-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1rem 1rem .5rem;border-top:2px solid var(--yellow)}.use-item-button[_ngcontent-%COMP%]{background-color:var(--green);color:var(--bg);border:none;border-radius:8px;padding:12px 24px;font-size:14px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all .3s ease;min-width:250px;justify-content:center;height:45px}.use-item-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--yellow);transform:scale(1.05);box-shadow:0 4px 12px #ffd60066}.use-item-button[_ngcontent-%COMP%]:disabled{background-color:var(--gray);cursor:not-allowed;opacity:.6}.use-item-button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}"]})};var Gr=class e{constructor(t){this.http=t}apiUrl=on.BASE_URL;getAllPhasesByUser(t,n){let i=new $t().set("userId",n.toString()),r=`${this.apiUrl}/gamemaps/${t}/phases`;return this.http.get(r,{params:i})}setGameMapToUser(t,n){let i=`${this.apiUrl}/gamemaps/${t}/set-to-user/${n}`;return this.http.post(i,{})}getAllPhasesByGameMap(t){return this.http.get(`${this.apiUrl}/gamemaps/${t}`)}getAllGameMaps(){return this.http.get(`${this.apiUrl}/gamemaps`)}getGameMapById(t){return this.http.get(`${this.apiUrl}/gamemaps/${t}`)}createGameMap(t){return this.http.post(`${this.apiUrl}/gamemaps`,t)}updateGameMap(t,n){return this.http.put(`${this.apiUrl}/gamemaps/${t}`,n)}deleteGameMap(t){return this.http.delete(`${this.apiUrl}/gamemaps/${t}`)}getPhaseTransitionsByGameMapId(t){return this.http.get(`${this.apiUrl}/gamemaps/${t}/phase-transitions`)}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};function Uq(e,t){if(e&1&&(y(0,"div",12),Z(1,"img",13),v()),e&2){let n=V(2);_(),A("src",n.getMapSvgUrl(),Ot)}}function qq(e,t){e&1&&(y(0,"div",14),Z(1,"lucide-icon",15),y(2,"p"),I(3,"Nenhum mapa dispon\xEDvel para esta fase"),v()()),e&2&&(_(),A("size",64))}function $q(e,t){if(e&1){let n=le();y(0,"div",1),q("click",function(){H(n);let r=V();return U(r.close())}),y(1,"div",2),q("click",function(r){return H(n),U(r.stopPropagation())}),y(2,"div",3)(3,"div",4)(4,"button",5),q("click",function(){H(n);let r=V();return U(r.close())}),Z(5,"lucide-icon",6),v()(),y(6,"div",7),Z(7,"lucide-icon",8),y(8,"h2"),I(9,"MAPA DE PROGRESSO"),v()()(),y(10,"div",9),ne(11,Uq,2,1,"div",10)(12,qq,4,1,"div",11),v()()()}if(e&2){let n=V();_(7),A("size",32),_(4),A("ngIf",n.hasMap()),_(),A("ngIf",!n.hasMap())}}var Fu=class e{constructor(t,n,i){this.gameMapService=t;this.userService=n;this.platformId=i}currentPhaseId;gameMapId;isOpen=!1;phaseUsers=[];phaseMapSvg={2:"0.svg",5:"01.svg",6:"02.svg",7:"D1.svg",8:"R1_1.svg",9:"R1_2.svg",12:"D2.svg",14:"R1A_1.svg",15:"R1A_2.svg",16:"F1.svg",17:"R1B_1.svg",18:"R1B_2.svg",19:"F2.svg",10:"R2_1.svg",11:"R2_2.svg",13:"D3.svg",20:"R2A_1.svg",21:"R2A_2.svg",22:"F3.svg",23:"R2B_1.svg",24:"R2B_2.svg",26:"F4.svg"};show(){this.isOpen=!0}hide(){this.isOpen=!1}close(){this.isOpen=!1}onEscapeKey(t){this.isOpen&&this.close()}toggle(){this.isOpen=!this.isOpen,this.isOpen&&!this.currentPhaseId&&this.gameMapId&&pt(this.platformId)&&this.loadLastPhase()}loadLastPhase(){let t=this.userService.getCurrentUser();!t||!t.id||!this.gameMapId||this.gameMapService.getAllPhasesByUser(this.gameMapId,t.id).subscribe({next:n=>{this.phaseUsers=n;let i=this.findLastAvailablePhase(n);i&&i.phase.id&&(this.currentPhaseId=i.phase.id)},error:n=>{console.error("\u274C Erro ao carregar fases do usu\xE1rio:",n)}})}findLastAvailablePhase(t){let n=t.filter(o=>o.status==="AVAILABLE"||o.status==="COMPLETED");if(n.length===0)return null;let i=n.find(o=>o.status==="AVAILABLE");if(i)return i;let r=n.filter(o=>o.status==="COMPLETED");return r.length>0?(r.sort((o,a)=>{let s=o.phase.id||0;return(a.phase.id||0)-s}),r[0]):null}getMapSvgUrl(){return!this.currentPhaseId||!this.phaseMapSvg[this.currentPhaseId]?null:`assets/map/${this.phaseMapSvg[this.currentPhaseId]}`}hasMap(){return!!(this.currentPhaseId&&this.phaseMapSvg[this.currentPhaseId])}static \u0275fac=function(n){return new(n||e)(G(Gr),G(xn),G(xt))};static \u0275cmp=Se({type:e,selectors:[["app-map"]],hostBindings:function(n,i){n&1&&q("keydown.escape",function(o){return i.onEscapeKey(o)},ro)},inputs:{currentPhaseId:"currentPhaseId",gameMapId:"gameMapId"},decls:1,vars:1,consts:[["class","map-overlay",3,"click",4,"ngIf"],[1,"map-overlay",3,"click"],[1,"map-dialog",3,"click"],[1,"map-header"],[1,"header-left"],[1,"btn-icon","close-button",3,"click"],["name","x",1,"lucide-icon"],[1,"title"],["name","map-pinned","color","#FFFFFF",1,"lucide-icon",3,"size"],[1,"map-content"],["class","map-container",4,"ngIf"],["class","no-map-message",4,"ngIf"],[1,"map-container"],["alt","Mapa de progresso",1,"map-svg",3,"src"],[1,"no-map-message"],["name","map-pin-off","color","#848484",3,"size"]],template:function(n,i){n&1&&ne(0,$q,13,3,"div",0),n&2&&A("ngIf",i.isOpen)},dependencies:[Ze,_t,Gt,Nt],styles:[".map-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:var(--overlay);display:flex;justify-content:center;align-items:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.map-dialog[_ngcontent-%COMP%]{background:var(--bg);border-radius:20px;padding:16px;min-width:60vw;max-width:80vw;max-height:85vh;display:flex;flex-direction:column;gap:16px}.map-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:8px}.map-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--white);font-weight:800;font-size:22px;line-height:100%;letter-spacing:0%}.title[_ngcontent-%COMP%]{display:flex;gap:12px;flex-direction:row;align-content:center;align-items:center;padding:.2rem .5rem}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;border:none;cursor:pointer;transition:background-color .2s}.close-button[_ngcontent-%COMP%]{background:var(--red)}.close-button[_ngcontent-%COMP%]:hover{background:none}  .close-button:hover .lucide-icon{color:var(--white)}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:2rem}.map-content[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;padding:1rem;background:var(--bg-card);border-radius:12px;min-height:400px;overflow:auto}.map-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.map-svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;display:block;border-radius:8px;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;pointer-events:auto}.no-map-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;color:var(--gray);text-align:center;padding:2rem}.no-map-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0;color:var(--white)}.map-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.map-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg);border-radius:4px}.map-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--gray);border-radius:4px}.map-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--yellow)}"]})};var ma={BASE_URL:window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`${on.BASE_URL}/uploads/`:"assets/",PATHS:{AVATARS:"avatars/",CHARACTERS:"characters/",ITEMS:"items/"}},Yi={avatar:e=>`${ma.BASE_URL}${ma.PATHS.AVATARS}${e}`,character:e=>`${ma.BASE_URL}${ma.PATHS.CHARACTERS}${e}`,item:e=>`${ma.BASE_URL}${ma.PATHS.ITEMS}${e}`};function Gq(e,t){if(e&1){let n=le();y(0,"button",25),q("click",function(){H(n);let r=V();return U(r.exitGame())}),Z(1,"lucide-icon",26),v()}}function Wq(e,t){if(e&1){let n=le();y(0,"div",31)(1,"button",32),q("click",function(){H(n);let r=V(2);return U(r.returnToMapSelection())}),Z(2,"lucide-icon",33),y(3,"span"),I(4,"Sele\xE7\xE3o de Mapas"),v()(),y(5,"button",34),q("click",function(){H(n);let r=V(2);return U(r.logout())}),Z(6,"lucide-icon",35),y(7,"span"),I(8,"Logout"),v()()()}e&2&&(_(2),A("size",20),_(4),A("size",20))}function Zq(e,t){if(e&1){let n=le();y(0,"div",27)(1,"button",28),q("click",function(){H(n);let r=V();return U(r.isInMapRoute?r.toggleAccordion():r.logout())}),Z(2,"lucide-icon",29),v(),ne(3,Wq,9,2,"div",30),v()}if(e&2){let n=V();_(),Ce("active",n.isAccordionOpen),_(2),A("ngIf",n.isInMapRoute&&n.isAccordionOpen)}}function Yq(e,t){if(e&1&&(y(0,"span",41),I(1),v()),e&2){let n=V(2);A("ngClass",n.timeBadge.class),_(),Ie(" ",n.timeBadge.label," ")}}function Xq(e,t){e&1&&(y(0,"span",42)(1,"span",43),I(2,"x2"),v(),Z(3,"lucide-icon",44),v()),e&2&&(_(3),A("size",14))}function Jq(e,t){if(e&1&&(y(0,"div",36)(1,"span",37),I(2),v(),ne(3,Yq,2,2,"span",38)(4,Xq,4,1,"span",39),y(5,"span",40),I(6),v()()),e&2){let n=V();_(),Ce("time-warning",n.remainingTimeInSeconds<=60&&n.remainingTimeInSeconds>10)("time-critical",n.remainingTimeInSeconds<=10)("time-frozen",n.iceActive),_(),Ie(" ",n.currentTime," "),_(),A("ngIf",n.timeBadge),_(),A("ngIf",n.doubleReputationActive),_(),Tr("color","#00D819"),Ce("active",n.watchTime),_(),fe(n.watchTime)}}function Kq(e,t){e&1&&Z(0,"lucide-icon",17),e&2&&A("size",16)}function Qq(e,t){e&1&&Z(0,"lucide-icon",18),e&2&&A("size",16)}var So=class e{constructor(t,n,i,r,o){this.dataService=t;this.userService=n;this.authService=i;this.router=r;this.platformId=o}exitEvent=new Ve;storeToggleEvent=new Ve;timeExpiredEvent=new Ve;parentType;currentPhaseId;gameMapId;maxTime;userData;store;backpack;map;confirmDialogVisible=!1;confirmDialogTitle="";confirmDialogMessage="";isAccordionOpen=!1;isInMapRoute=!1;currentTime="00:00:00";watchTime="";timerInterval;watchTimerInterval;timerPaused=!1;pausedTime=0;watchStartTime=0;watchDuration=59*1e3;startTime=0;userDataSubscription;remainingTimeInSeconds=0;iceActive=!1;timeBadge=null;_timeBadgeTimeout=null;doubleReputationActive=!1;ngOnInit(){this.loadUserData(),this.subscribeToUserData(),this.checkIfInMapRoute(),this.router.events.pipe(fn(t=>t instanceof hi)).subscribe(()=>{this.checkIfInMapRoute()})}ngOnChanges(t){t.maxTime&&t.maxTime.currentValue&&this.parentType==="game-phase"&&(this.remainingTimeInSeconds=t.maxTime.currentValue,this.timerInterval||this.startTimer())}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval),this.watchTimerInterval&&clearInterval(this.watchTimerInterval),this.userDataSubscription&&this.userDataSubscription.unsubscribe()}logout(){this.openConfirmDialog("Tem certeza que deseja fazer logout?","Voc\xEA precisar\xE1 fazer o login novamente caso deseje entrar")}toggleAccordion(){this.isAccordionOpen=!this.isAccordionOpen}checkIfInMapRoute(){let t=this.router.url;this.isInMapRoute=/^\/map\/\d+$/.test(t)}returnToMapSelection(){this.isAccordionOpen=!1,this.router.navigate(["/select-map"])}onDocumentClick(t){let n=t.target,i=n.closest(".accordion-button"),r=n.closest(".accordion-menu");!i&&!r&&this.isAccordionOpen&&(this.isAccordionOpen=!1)}confirmLogout(){pt(this.platformId)&&localStorage.removeItem("currentUser"),this.authService.logout(),this.router.navigate(["/login"]),this.confirmDialogVisible=!1}onCancel(){this.confirmDialogVisible=!1}openConfirmDialog(t,n){this.confirmDialogTitle=t,this.confirmDialogMessage=n,this.confirmDialogVisible=!0}exitGame(){this.exitEvent.emit()}toggleStore(){this.store&&this.store.toggle()}toggleBackpack(){this.backpack&&this.backpack.toggle()}toggleMap(){this.map&&(this.currentPhaseId&&(this.map.currentPhaseId=this.currentPhaseId),this.gameMapId&&(this.map.gameMapId=this.gameMapId),this.map.toggle())}onStoreStateChanged(t){this.storeToggleEvent.emit(t)}loadUserData(){let t=this.userService.getCurrentUser();t?this.userData=t:(console.error("\u274C Usu\xE1rio n\xE3o encontrado no localStorage"),this.router.navigate(["/login"]))}subscribeToUserData(){this.userDataSubscription=this.dataService.userData$.subscribe(t=>{t&&(this.userData=t,this.checkReputation())})}checkReputation(){this.userData&&this.userData.reputation<0&&this.router.navigate(["/game-over"])}refreshUserData(){this.loadUserData(),this.checkReputation()}startTimer(){this.timerInterval=setInterval(()=>{if(!this.timerPaused&&this.remainingTimeInSeconds>0){this.remainingTimeInSeconds--;let t=Math.floor(this.remainingTimeInSeconds/3600),n=Math.floor(this.remainingTimeInSeconds%3600/60),i=this.remainingTimeInSeconds%60;this.currentTime=`${this.padNumber(t)}:${this.padNumber(n)}:${this.padNumber(i)}`,this.remainingTimeInSeconds===0&&this.handleTimeExpired()}},1e3)}activateWatch(){if(!this.watchTimerInterval){this.timerPaused=!0,this.watchStartTime=Date.now();let t=59;this.watchTimerInterval=setInterval(()=>{if(t--,t<=0)clearInterval(this.watchTimerInterval),this.watchTimerInterval=null,this.watchTime="",this.timerPaused=!1;else{let n=Math.floor(t/60),i=t%60;this.watchTime=`+${this.padNumber(n)}:${this.padNumber(i)}`}},1e3)}}handleTimeExpired(){this.timerInterval&&clearInterval(this.timerInterval),this.watchTimerInterval&&clearInterval(this.watchTimerInterval),this.timeExpiredEvent.emit()}padNumber(t){return t.toString().padStart(2,"0")}getUserAvatarUrl(){return this.userData?.avatar?.filePath?Yi.avatar(this.userData.avatar.filePath):"assets/images/characters/default-avatar.png"}onAvatarImageError(t){}showTimeBadge(t,n="badge-green",i=6e5){this._timeBadgeTimeout&&(clearTimeout(this._timeBadgeTimeout),this._timeBadgeTimeout=null),this.timeBadge={label:t,class:n},i>0&&(this._timeBadgeTimeout=setTimeout(()=>{this.timeBadge=null,this._timeBadgeTimeout=null},i))}setIceActive(t){this.iceActive=!!t}setDoubleReputationActive(t){this.doubleReputationActive=!!t}static \u0275fac=function(n){return new(n||e)(G(yn),G(xn),G(fi),G(mt),G(xt))};static \u0275cmp=Se({type:e,selectors:[["app-header"]],viewQuery:function(n,i){if(n&1&&(ft($r,5),ft(Nu,5),ft(Fu,5)),n&2){let r;dt(r=ut())&&(i.store=r.first),dt(r=ut())&&(i.backpack=r.first),dt(r=ut())&&(i.map=r.first)}},hostBindings:function(n,i){n&1&&q("click",function(o){return i.onDocumentClick(o)},ro)},inputs:{parentType:"parentType",currentPhaseId:"currentPhaseId",gameMapId:"gameMapId",maxTime:"maxTime"},outputs:{exitEvent:"exitEvent",storeToggleEvent:"storeToggleEvent",timeExpiredEvent:"timeExpiredEvent"},features:[In],decls:34,vars:14,consts:[["store",""],["backpack",""],["map",""],[1,"left"],["class","btn-icon filled","id","exit",3,"click",4,"ngIf"],["class","logout-container",4,"ngIf"],[1,"btn-icon",3,"click"],["name","store",1,"lucide-icon"],["name","backpack",1,"lucide-icon"],["name","map-pinned",1,"lucide-icon"],["class","game-timers",4,"ngIf"],[1,"right"],[1,"money"],["name","circle-dollar-sign",1,"lucide-icon",3,"size"],[1,"amount"],[1,"reputation"],["name","sparkles",1,"lucide-icon",3,"size"],["name","move-up-right","color","#00D819",1,"lucide-icon",3,"size"],["name","move-down-right","color","#FF0000",1,"lucide-icon",3,"size"],[1,"user-info"],[1,"user-icon-wrapper"],[1,"user-avatar",3,"error","src","alt"],[1,"user-name"],[3,"storeStateChanged"],[3,"confirm","cancel","visible","title","message"],["id","exit",1,"btn-icon","filled",3,"click"],["name","X",1,"lucide-icon"],[1,"logout-container"],[1,"btn-icon","log-out","accordion-button",3,"click"],["name","log-out",1,"lucide-icon"],["class","accordion-menu",4,"ngIf"],[1,"accordion-menu"],[1,"accordion-option",3,"click"],["name","map",1,"lucide-icon",3,"size"],[1,"accordion-option","logout-option",3,"click"],["name","log-out",1,"lucide-icon",3,"size"],[1,"game-timers"],[1,"game-time"],["class","time-badge",3,"ngClass",4,"ngIf"],["class","time-double-repu","title","Reputa\xE7\xE3o em dobro ativa para esta fase",4,"ngIf"],[1,"watch-time"],[1,"time-badge",3,"ngClass"],["title","Reputa\xE7\xE3o em dobro ativa para esta fase",1,"time-double-repu"],[1,"time-badge","badge-yellow"],["name","sparkles","color","#FFD600",1,"time-repu-icon",3,"size"]],template:function(n,i){if(n&1){let r=le();y(0,"header")(1,"div",3),ne(2,Gq,2,0,"button",4)(3,Zq,4,3,"div",5),y(4,"button",6),q("click",function(){return H(r),U(i.toggleStore())}),Z(5,"lucide-icon",7),v(),y(6,"button",6),q("click",function(){return H(r),U(i.toggleBackpack())}),Z(7,"lucide-icon",8),v(),y(8,"button",6),q("click",function(){return H(r),U(i.toggleMap())}),Z(9,"lucide-icon",9),v()(),ne(10,Jq,7,14,"div",10),y(11,"div",11)(12,"div",12),Z(13,"lucide-icon",13),y(14,"span",14),I(15),v()(),y(16,"div",15),Z(17,"lucide-icon",16),y(18,"span",14),I(19),v(),cd(20,Kq,1,1,"lucide-icon",17)(21,Qq,1,1,"lucide-icon",18),v(),y(22,"div",19)(23,"div",20)(24,"img",21),q("error",function(a){return H(r),U(i.onAvatarImageError(a))}),v()(),y(25,"span",22),I(26),v()()()(),y(27,"app-store",23,0),q("storeStateChanged",function(a){return H(r),U(i.onStoreStateChanged(a))}),v(),Z(29,"app-backpack",null,1)(31,"app-map",null,2),y(33,"app-confirm-dialog",24),q("confirm",function(){return H(r),U(i.confirmLogout())})("cancel",function(){return H(r),U(i.onCancel())}),v()}n&2&&(_(2),A("ngIf",i.parentType==="game-phase"),_(),A("ngIf",i.parentType==="game-map"),_(7),A("ngIf",i.parentType==="game-phase"),_(3),A("size",32),_(2),fe(i.userData==null?null:i.userData.coins),_(2),A("size",32),_(2),fe(i.userData==null?null:i.userData.reputation),_(),ld(i.userData?20:21),_(4),A("src",i.getUserAvatarUrl(),Ot)("alt",(i.userData==null?null:i.userData.name)||"Avatar do usu\xE1rio"),_(2),fe(i.userData==null?null:i.userData.name),_(7),A("visible",i.confirmDialogVisible)("title",i.confirmDialogTitle)("message",i.confirmDialogMessage))},dependencies:[Gt,Nt,$r,Nu,Fu,Ze,ur,_t,ml],styles:["header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:var(--white)}header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:32px}header[_ngcontent-%COMP%]   .log-out[_ngcontent-%COMP%]{transform:rotate(-180deg)}.logout-container[_ngcontent-%COMP%]{position:relative}.logout-container[_ngcontent-%COMP%]   .accordion-button.active[_ngcontent-%COMP%]{background-color:var(--yellow);border-color:var(--yellow)}.logout-container[_ngcontent-%COMP%]   .accordion-button.active[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--black)}.accordion-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 8px);left:0;background:var(--white);border:3px solid var(--black);border-radius:6px;box-shadow:0 4px 12px #00000026;min-width:200px;display:flex;flex-direction:column;z-index:1000;animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.accordion-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:transparent;border:none;border-bottom:2px solid var(--gray);font-size:14px;font-weight:600;color:var(--black);cursor:pointer;transition:all .3s}.accordion-option[_ngcontent-%COMP%]:last-child{border-bottom:none}.accordion-option[_ngcontent-%COMP%]:hover{background-color:var(--yellow);color:var(--black)}.accordion-option[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--black);transition:all .3s}.accordion-option.logout-option[_ngcontent-%COMP%]:hover{background-color:var(--red);color:var(--white)}.accordion-option.logout-option[_ngcontent-%COMP%]:hover   .lucide-icon[_ngcontent-%COMP%]{color:var(--white)}.accordion-option.logout-option[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{transform:rotate(-180deg)}header[_ngcontent-%COMP%]   .game-time[_ngcontent-%COMP%]{font-size:18px;font-weight:600;transition:all .3s ease}header[_ngcontent-%COMP%]   .game-time.time-warning[_ngcontent-%COMP%]{color:var(--yellow);animation:_ngcontent-%COMP%_pulse-warning 2s ease-in-out infinite}header[_ngcontent-%COMP%]   .game-time.time-critical[_ngcontent-%COMP%]{color:var(--red);animation:_ngcontent-%COMP%_pulse-critical .5s ease-in-out infinite;font-weight:700}@keyframes _ngcontent-%COMP%_pulse-warning{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}}@keyframes _ngcontent-%COMP%_pulse-critical{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}header[_ngcontent-%COMP%]   .game-timers[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}header[_ngcontent-%COMP%]   #exit[_ngcontent-%COMP%]{background:var(--red)}header[_ngcontent-%COMP%]   #exit[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--white)}header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.money[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.money[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--yellow);transition:transform .5s ease-in-out}.amount[_ngcontent-%COMP%]{font-size:18px;font-weight:600;transition:.3s}.reputation[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;transition:.3s}.reputation[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{transition:.3s}.user-icon-wrapper[_ngcontent-%COMP%]{width:64px;height:64px;border:3px solid var(--black);border-radius:50%;display:flex;justify-content:center;align-items:center;position:relative;overflow:hidden}.user-icon-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-icon-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;transition:.5s}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.user-info[_ngcontent-%COMP%]:hover   .user-icon-wrapper[_ngcontent-%COMP%]{box-shadow:0 0 8px 4px #84848433;border-color:var(--yellow);transition:.5s}.user-name[_ngcontent-%COMP%]{color:var(--black);text-align:center;font-weight:700}.money[_ngcontent-%COMP%]:hover   .amount[_ngcontent-%COMP%]{text-shadow:0 0 6px var(--yellow);color:var(--yellow);transition:.3s}.money[_ngcontent-%COMP%]:hover   .lucide-icon[_ngcontent-%COMP%]{transform:rotate(360deg);transition:transform .5s ease-in-out}.reputation[_ngcontent-%COMP%]:hover   .lucide-icon[_ngcontent-%COMP%]{text-shadow:0 0 6px var(--yellow);color:var(--yellow);transition:.3s}.left[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{border-radius:6px;border:3px solid transparent;transition:.3s}.left[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{stroke:currentColor;transition:.3s}.left[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{box-shadow:0 0 8px 4px #84848433;border-color:var(--yellow);transform:scale(1.05);transition:.5s}.left[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover   .lucide-icon[_ngcontent-%COMP%]{text-shadow:0 0 6px var(--yellow);color:var(--yellow);stroke:var(--yellow);transition:.3s}.game-time.time-frozen[_ngcontent-%COMP%]{color:#0ea5e9;text-shadow:0 0 6px rgba(14,165,233,.3),0 0 12px rgba(14,165,233,.15);transition:color .3s ease,text-shadow .3s ease}.time-badge[_ngcontent-%COMP%]{margin-left:8px;padding:2px 8px;border-radius:12px;font-weight:700;font-size:.9rem;display:inline-flex;align-items:center;justify-content:center;min-width:36px;height:22px;box-shadow:0 2px 6px #0000001f}.time-badge.badge-green[_ngcontent-%COMP%]{background:#16a34a;color:#fff}.time-badge.badge-yellow[_ngcontent-%COMP%]{background:#f59e0b;color:#000}.time-double-repu[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-left:6px;margin-right:4px;vertical-align:middle}.time-repu-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 2px rgba(0,0,0,.12))}.time-badge.badge-frozen[_ngcontent-%COMP%]{background:linear-gradient(90deg,#0ea5e91f,#0ea5e90f);color:#0ea5e9;border:1px solid rgba(14,165,233,.18)}.double-repu-icon[_ngcontent-%COMP%]{margin-left:6px;filter:drop-shadow(0 1px 2px rgba(0,0,0,.12))}"]})};var d6={BUILD:{key:"BUILD",title:"Construa do zero",description:"Nesta fase, voc\xEA come\xE7ar\xE1 com um espa\xE7o em branco. Seu objetivo \xE9 construir o diagrama completo do zero, adicionando todos os elementos e rela\xE7\xF5es necess\xE1rios. Use sua criatividade e conhecimento para montar a solu\xE7\xE3o correta. Ao finalizar, compare com a resposta esperada"},FIX:{key:"FIX",title:"Corrija o diagrama",description:"Nesta fase, voc\xEA encontrar\xE1 um diagrama parcialmente constru\xEDdo com alguns erros. Sua miss\xE3o \xE9 identificar e corrigir os problemas existentes, ajustando elementos mal posicionados ou rela\xE7\xF5es incorretas. Analise cuidadosamente cada parte do diagrama"},COMPLETE:{key:"COMPLETE",title:"Complete o diagrama",description:"Nesta fase, voc\xEA deve completar o diagrama existente adicionando os elementos e rela\xE7\xF5es que est\xE3o faltando. O diagrama j\xE1 possui uma base, mas precisa ser finalizado para estar completo e correto"}},gl=class e{constructor(t){this.http=t}apiUrl=on.BASE_URL;getAllPhases(){return this.http.get(`${this.apiUrl}/phases`)}getPhaseById(t){return this.http.get(`${this.apiUrl}/phases/${t}`)}createPhase(t){let n=new $t().set("title",t.title).set("type",t.type).set("mode",t.mode).set("maxTime",t.maxTime.toString()).set("status",t.status).set("characterId",t.character.id.toString()).set("gameMapId",t.gameMap.id.toString()).set("diagramInitial",t.diagramInitial).set("correctDiagrams",JSON.stringify(t.correctDiagrams)).set("characterDialogues",JSON.stringify(t.characterDialogues)).set("diagramType",t.diagramType||"USE_CASE");return this.http.post(`${this.apiUrl}/phases`,null,{params:n})}updatePhase(t,n){return this.http.put(`${this.apiUrl}/phases/${t}`,n)}deletePhase(t){return this.http.delete(`${this.apiUrl}/phases/${t}`)}getTransitionsByFromPhase(t){return this.http.get(`${this.apiUrl}/phases/${t}/outgoing-transitions`)}getTransitionsByToPhase(t){return this.http.get(`${this.apiUrl}/phases/${t}/incoming-transitions`)}createTransition(t){return this.http.post(`${this.apiUrl}/phase-transitions`,t)}updateTransition(t,n){return this.http.put(`${this.apiUrl}/phase-transitions/${t}`,n)}deleteTransition(t){return this.http.delete(`${this.apiUrl}/phase-transitions/${t}`)}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};function e$(e,t){if(e&1&&Z(0,"video",8),e&2){let n=V(2);A("src",n.videoSrc,Ot)}}function t$(e,t){if(e&1){let n=le();y(0,"div",1),q("click",function(r){return H(n),U(r.stopPropagation())}),y(1,"div",2),q("click",function(r){return H(n),U(r.stopPropagation())}),y(2,"div",3),ne(3,e$,1,1,"video",4),y(4,"h2"),I(5),v(),y(6,"p",5),I(7),v()(),y(8,"div",6)(9,"button",7),q("click",function(){H(n);let r=V();return U(r.hide())}),I(10,"Ok"),v()()()()}if(e&2){let n=V();Ce("visible",n.visible),_(3),A("ngIf",n.videoSrc),_(2),fe(n.title),_(2),fe(n.description)}}var B0=class e{visible=!1;title="";description="";videoSrc="";visibleChange=new Ve;hide(){this.visible=!1,this.visibleChange.emit(!1)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-advise-modal"]],inputs:{visible:"visible",title:"title",description:"description",videoSrc:"videoSrc"},outputs:{visibleChange:"visibleChange"},decls:1,vars:1,consts:[["class","overlay",3,"visible","click",4,"ngIf"],[1,"overlay",3,"click"],[1,"dialog",3,"click"],[1,"content"],["autoplay","","loop","","muted","",3,"src",4,"ngIf"],[1,"description"],[1,"actions"],[1,"btn","btn-primary",3,"click"],["autoplay","","loop","","muted","",3,"src"]],template:function(n,i){n&1&&ne(0,t$,11,5,"div",0),n&2&&A("ngIf",i.visible)},dependencies:[Ze,_t],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:transparent;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px);opacity:0;pointer-events:none;display:flex;justify-content:center;align-items:center;z-index:9998;transition:all .2s ease-out}.overlay.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:all;background-color:var(--overlay);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);transition:all .2s ease-out}.dialog[_ngcontent-%COMP%]{background:var(--white);border-radius:16px;padding:16px 24px;min-width:30vw;max-width:40vw;max-height:80vh;overflow-y:auto;display:flex;flex-direction:column;gap:16px}.content[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start;justify-content:center;flex-direction:column;text-align:left;gap:8px}.content[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:88px;height:88px;font-size:64px}.content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:800;color:var(--yellow)}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.actions[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:16px}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;cursor:pointer;outline:none;min-width:100px}.btn-secondary[_ngcontent-%COMP%]{background:var(--gray);color:var(--black);border:2px solid var(--gray);font-weight:400;transition:all .3s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--white);border:2px solid #999;color:var(--black);transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]{background:var(--green);color:var(--white);border:2px solid var(--green);font-weight:800;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:#00b814;border:2px solid #00b814;color:var(--white);transform:translateY(-2px);box-shadow:0 6px 12px #00d8194d}video[_ngcontent-%COMP%]{width:100%;min-height:min-content;border-radius:20px;box-shadow:0 4px 6px #0000001a;border:2px solid var(--gray)}"]})};var yl=class e{constructor(t){this.http=t}apiUrl=`${on.BASE_URL}/tips`;getAllTips(){return this.http.get(this.apiUrl)}getTipById(t){return this.http.get(`${this.apiUrl}/${t}`)}createTip(t){return this.http.post(this.apiUrl,t)}updateTip(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deleteTip(t){return this.http.delete(`${this.apiUrl}/${t}`)}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var n$=["speechBubble"],i$=["dialogContainer"],r$=["diagramEditor"],o$=e=>({"btn-disabled":e}),a$=()=>[];function s$(e,t){e&1&&Z(0,"lucide-icon",30)}function c$(e,t){if(e&1&&(y(0,"span"),I(1),v()),e&2){let n=V();_(),fe(n.checkDiagramLeft)}}function l$(e,t){if(e&1&&(y(0,"div",14,2),Z(2,"app-carousel",31),v()),e&2){let n=V();_(2),A("items",(n.phase==null?null:n.phase.characterDialogues)||ud(1,a$))}}function d$(e,t){if(e&1){let n=le();y(0,"app-dialog-finished-gamephase",32),q("backToMenuEvent",function(){H(n);let r=V();return U(r.onBackToMenu())}),v()}if(e&2){let n=V();A("accuracy",n.accuracy)("phaseUser",n.phaseUser)("doubleReputationActive",n.doubleReputationActive)}}var z0=class e{constructor(t,n,i,r,o,a,s,c,l,u,d){this.router=t;this.platformId=n;this.dataService=i;this.storageService=r;this.phaseService=o;this.route=a;this.tipService=s;this.userService=c;this.phaseUserService=l;this.notificationService=u;this.appContextService=d}isOpen=!1;currentTime="00:00:00";watchTime="";watchCount=0;timerInterval;watchTimerInterval;autoSaveInterval;timerPaused=!1;pausedTime=0;watchStartTime=0;watchDuration=59*1e3;storeSubscription;inventorySubscription;startTime=0;visibleAdviseTypePhase=!0;phaseId;phaseUser;phase;isSaving=!1;lastSaveTime=null;autoSaveEnabled=!0;phaseTypes=d6;tips=[];headerComponent;store;userDataSubscription;speechBubble;dialogContainer;diagramEditorComponentRef;accuracy=0;confirmDialogVisible=!1;confirmDialogTitle="";confirmDialogMessage="";confirmCallback=null;finishedGamePhaseVisible=!1;userData;userLoadError="";saveDisabled=!1;activeSlideIndex=0;swiper;isSpeaking=!1;activeSpeechIndex=0;characterState="hidden";checkDiagramLeft=0;swiperCharacter;doubleReputationActive=!1;iceTimeout=null;ICE_FREEZE_SECONDS=30;_onUseWatch=t=>this.handleItemUseWatch(t.detail);_onUseIce=t=>this.handleItemUseIce(t.detail);_onUse2xTime=t=>this.handleItemUse2xTime(t.detail);_onUse2xRepu=t=>this.handleItemUse2xRepu(t.detail);getCharacterImageUrl(){return this.phase?.character?.filePath?Yi.character(this.phase.character.filePath):"assets/characters/character_teacher_01.png"}ngOnInit(){if(pt(this.platformId)){let n=localStorage.getItem("userId");n&&(this.startTimer(),this.loadWatchCount(),this.inventorySubscription=this.storageService.getInventoryUpdates().subscribe(i=>{i&&(this.watchCount=i.watch||0,console.log("Watch count updated from storage service:",this.watchCount))}),this.userDataSubscription=this.dataService.userData$.subscribe(i=>{i&&(this.userData=i)}),this.registerBackpackEventListeners(),this.loadUserData(n),this.tipService.getAllTips().subscribe(i=>{let r=Array.isArray(i)?i.map(o=>o.tip||""):[];this.tips=this.pickRandomTips(r,10)}))}this.phaseId=Number(this.route.snapshot.paramMap.get("id")),this.appContextService.setContext("game-phase",this.phaseId),this.phaseService.getPhaseById(this.phaseId).subscribe(n=>{n?(this.phase=n,this.phase?.mode==="BASIC"?this.checkDiagramLeft=1/0:this.phase?.mode==="INTERMEDIATE"?this.checkDiagramLeft=3:this.phase?.mode==="ADVANCED"&&(this.checkDiagramLeft=0),this.startAutoSave(),setTimeout(()=>{this.toggleSpeech()},100)):this.router.navigate(["/map"])});let t=localStorage.getItem("userId");this.phaseUserService.getByPhaseAndUserId(this.phaseId,Number(t)).subscribe(n=>{n?(this.phaseUser=n,setTimeout(()=>{this.diagramEditorComponentRef&&this.diagramEditorComponentRef.initializeJointJS(void 0,n)})):console.warn("PhaseUser n\xE3o encontrado para fase e usu\xE1rio:",this.phaseId,this.userData?.id)})}ngAfterViewInit(){this.storeSubscription=this.store.storeStateChanged.subscribe(t=>{t||this.loadWatchCount()})}ngOnDestroy(){this.appContextService.setContext("other"),this.timerInterval&&clearInterval(this.timerInterval),this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.userDataSubscription&&this.userDataSubscription.unsubscribe(),this.storeSubscription&&this.storeSubscription.unsubscribe(),this.inventorySubscription&&this.inventorySubscription.unsubscribe(),this.unregisterBackpackEventListeners()}registerBackpackEventListeners(){try{window.addEventListener("item.use.watch",this._onUseWatch),window.addEventListener("item.use.ice",this._onUseIce),window.addEventListener("item.use.2xtime",this._onUse2xTime),window.addEventListener("item.use.2xrepu",this._onUse2xRepu),console.log("Backpack item listeners registered")}catch(t){console.warn("N\xE3o foi poss\xEDvel registrar listeners dos itens:",t)}}unregisterBackpackEventListeners(){try{window.removeEventListener("item.use.watch",this._onUseWatch),window.removeEventListener("item.use.ice",this._onUseIce),window.removeEventListener("item.use.2xtime",this._onUse2xTime),window.removeEventListener("item.use.2xrepu",this._onUse2xRepu),console.log("Backpack item listeners removed")}catch(t){console.warn("Erro ao remover listeners dos itens:",t)}}pickRandomTips(t,n=10){if(!Array.isArray(t)||t.length===0)return[];let i=t.slice();for(let r=i.length-1;r>0;r--){let o=Math.floor(Math.random()*(r+1)),a=i[r];i[r]=i[o],i[o]=a}return i.slice(0,Math.max(0,Math.min(n,i.length)))}startAutoSave(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.autoSaveInterval=setInterval(()=>{this.autoSaveEnabled&&!this.isSaving&&this.autoSaveDiagram()},3e4),console.log("\u{1F504} Salvamento autom\xE1tico iniciado (30s)")}autoSaveDiagram(){if(!this.diagramEditorComponentRef||!this.phaseId){console.warn("\u26A0\uFE0F Editor ou fase n\xE3o dispon\xEDvel para salvamento");return}try{let t=this.diagramEditorComponentRef.getCurrentDiagramJSON();if(!t){console.warn("\u26A0\uFE0F Diagrama vazio, pulando salvamento");return}this.isSaving=!0;let n=JSON.stringify(t);console.log("\u{1F4BE} Iniciando salvamento autom\xE1tico...",{phaseUserId:this.phaseId,diagramSize:n.length});let i=this.phaseUser?.id||-1;this.phaseUserService.updateUserDiagram(i,n).subscribe({next:()=>{this.isSaving=!1,this.lastSaveTime=new Date,console.log("\u2705 Diagrama salvo automaticamente:",this.lastSaveTime.toLocaleTimeString())},error:r=>{this.isSaving=!1,console.error("\u274C Erro no salvamento autom\xE1tico:",r)}})}catch(t){this.isSaving=!1,console.error("\u274C Erro ao processar diagrama para salvamento:",t)}}manualSaveDiagram(){try{this.accuracy=this.diagramEditorComponentRef.calculateGraphAccuracy(),console.log("Acur\xE1cia calculada para salvamento manual:",this.accuracy)}catch(t){console.error("\u274C Erro ao calcular acur\xE1cia:",t)}}getLastSaveText(){if(this.isSaving)return"Salvando...";if(this.lastSaveTime){let n=Math.floor((new Date().getTime()-this.lastSaveTime.getTime())/1e3);return n<60?`Salvo h\xE1 ${n}s`:`Salvo h\xE1 ${Math.floor(n/60)}min`}return"N\xE3o salvo"}toggleAutoSave(){this.autoSaveEnabled=!this.autoSaveEnabled,this.autoSaveEnabled?(this.startAutoSave(),console.log("\u2705 Salvamento autom\xE1tico ativado")):(this.autoSaveInterval&&clearInterval(this.autoSaveInterval),console.log("\u274C Salvamento autom\xE1tico desativado"))}toggleTips(){this.diagramEditorComponentRef&&this.diagramEditorComponentRef.toggleTips()}toggleStore(){this.store.toggle()}onStoreStateChanged(t){t||this.loadWatchCount()}toggleSpeech(){this.isSpeaking=!this.isSpeaking,this.characterState=this.isSpeaking?"visible":"hidden",this.isSpeaking&&(this.activeSlideIndex=0)}onDocumentClick(t){if(!this.isSpeaking)return;let n=t.target,i=this.speechBubble?.nativeElement,r=document.querySelector(".character");i&&!i.contains(n)&&!r?.contains(n)&&(this.isSpeaking=!1,this.characterState="hidden")}loadUserData(t){this.userService.getUserById(Number(t)).subscribe({next:n=>{this.userData=n},error:n=>{console.error("Erro ao carregar dados do usu\xE1rio:",n),this.userLoadError="Erro ao carregar dados do usu\xE1rio"}})}initializeCharacter(){this.swiperCharacter=new xi(".swiper-character",{direction:"horizontal",pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},allowTouchMove:!1,simulateTouch:!1,noSwiping:!0,noSwipingClass:"swiper-slide"})}exitGame(){this.openConfirmDialog("Tem certeza que sair da fase?","Voc\xEA voltar\xE1 para o menu principal se fizer isto.",()=>{this.router.navigate(["/map",this.phase?.gameMap.id])})}get userMoney(){return this.userData?.coins||0}get userReputation(){return this.userData?.reputation||0}get userName(){return this.userData?.name||""}get isProgressing(){return this.userData?.progressing||!1}openConfirmDialog(t,n,i){this.confirmDialogTitle=t,this.confirmDialogMessage=n,this.confirmCallback=i,this.confirmDialogVisible=!0}onConfirm(){this.confirmCallback&&this.confirmCallback(),this.accuracy=this.diagramEditorComponentRef.calculateGraphAccuracy(),this.phaseUser&&(this.phaseUser.userDiagram=this.diagramEditorComponentRef.getCurrentDiagramJSON()),this.confirmDialogVisible=!1,this.finishedGamePhaseVisible=!0}onCancel(){this.confirmDialogVisible=!1}onTimeExpired(){console.log("Tempo da fase expirado! Enviando fase automaticamente..."),this.notificationService.showNotification("error","O tempo acabou! A fase ser\xE1 enviada automaticamente."),this.diagramEditorComponentRef&&(this.accuracy=this.diagramEditorComponentRef.calculateGraphAccuracy(),this.phaseUser&&(this.phaseUser.userDiagram=this.diagramEditorComponentRef.getCurrentDiagramJSON())),this.finishedGamePhaseVisible=!0}onSaveClick(){this.openConfirmDialog("Tem certeza que deseja salvar?","Essa a\xE7\xE3o ir\xE1 salvar seu progresso.",()=>{this.manualSaveDiagram()})}onAccuracyCalculated(t){this.accuracy=t}startTimer(){this.startTime=Date.now(),this.timerInterval=setInterval(()=>{if(!this.timerPaused){let t=Date.now()-this.startTime,n=Math.floor(t/(1e3*60*60)),i=Math.floor(t%(1e3*60*60)/(1e3*60)),r=Math.floor(t%(1e3*60)/1e3);this.currentTime=`${this.padNumber(n)}:${this.padNumber(i)}:${this.padNumber(r)}`}},1e3)}activateWatch(){if(this.watchCount>0&&!this.watchTimerInterval){this.timerPaused=!0,this.pausedTime=Date.now(),this.watchCount--;let t=JSON.parse(localStorage.getItem("inventory")||"{}");t.watch=this.watchCount,localStorage.setItem("inventory",JSON.stringify(t)),this.watchStartTime=Date.now(),this.watchTimerInterval=setInterval(()=>{let n=this.watchDuration-(Date.now()-this.watchStartTime);if(n<=0){clearInterval(this.watchTimerInterval),this.watchTimerInterval=null,this.watchTime="",this.timerPaused=!1;let i=Date.now()-this.pausedTime;this.startTime+=i}else{let i=Math.floor(n/6e4),r=Math.floor(n%(1e3*60)/1e3);this.watchTime=`+${this.padNumber(i)}:${this.padNumber(r)}`}},1e3)}}padNumber(t){return t.toString().padStart(2,"0")}loadWatchCount(){let t=localStorage.getItem("inventory");if(t){let n=JSON.parse(t);this.watchCount=n.watch||0}else this.watchCount=0}setWatchCount(t){localStorage.setItem("watch",t.toString()),this.loadWatchCount()}onBackToMenu(){this.finishedGamePhaseVisible=!1,this.saveDisabled=!0,this.headerComponent.refreshUserData();let t=this.phase?.gameMap?.id??this.phaseUser?.phase?.gameMap?.id;t?this.router.navigate(["/map",t]):this.router.navigate(["/map"])}checkDiagram(){this.checkDiagramLeft>0?(this.diagramEditorComponentRef.checkUMLInconsistencies()?this.notificationService.showNotification("error","Foram encontradas inconsist\xEAncias no seu diagrama. Por favor, corrija-as antes de prosseguir."):this.notificationService.showNotification("success","Nenhuma inconsist\xEAncia encontrada no diagrama!"),this.checkDiagramLeft--):this.notificationService.showNotification("error","Voc\xEA n\xE3o tem mais verifica\xE7\xF5es dispon\xEDveis nesta fase.")}getCurrentPhaseType(){if(!this.phase?.type)return null;let t=this.phase.type;return this.phaseTypes[t]||null}getPhaseTitle(){return this.getCurrentPhaseType()?.title||"T\xEDtulo n\xE3o dispon\xEDvel"}getPhaseDescription(){return this.getCurrentPhaseType()?.description||"Descri\xE7\xE3o n\xE3o dispon\xEDvel"}getPhaseVideoSrc(){return`/assets/videos/${this.phase?.type||"default"}.mp4`}handleItemUseWatch(t){try{if(this.headerComponent){let n=this.headerComponent;n.remainingTimeInSeconds=(Number(n.remainingTimeInSeconds)||0)+60,typeof n.showTimeBadge=="function"&&n.showTimeBadge("+60","badge-green",3e3),this.notificationService.showNotification("success","+60s adicionados \xE0 fase!"),console.debug("item.use.watch aplicado:",t)}}catch(n){console.warn("Erro ao aplicar item.watch:",n)}}handleItemUseIce(t){try{if(this.headerComponent){let n=this.headerComponent;n.timerPaused=!0,typeof n.setIceActive=="function"?n.setIceActive(!0):n.iceActive=!0,typeof n.showTimeBadge=="function"?n.showTimeBadge("\u2744","badge-frozen",0):n.timeBadge={label:"\u2744",class:"badge-frozen"},this.notificationService.showNotification("success","Tempo congelado pelo resto da fase!"),console.debug("item.use.ice aplicado (congelado at\xE9 o fim da fase):",t),this.iceActive=!0}}catch(n){console.warn("Erro ao aplicar item.ice:",n)}}handleItemUse2xTime(t){try{if(this.headerComponent){let n=this.headerComponent,i=Number(n.remainingTimeInSeconds)||0,r=i*2;n.remainingTimeInSeconds=r,typeof n.showTimeBadge=="function"?n.showTimeBadge("x2","badge-yellow",3e3):(n.timeBadge={label:"x2",class:"badge-yellow"},setTimeout(()=>n.timeBadge=null,3e3)),this.notificationService.showNotification("success","Tempo duplicado para esta fase!"),console.debug("item.use.2xtime aplicado:",t,{before:i,after:r})}}catch(n){console.warn("Erro ao aplicar item.2xtime:",n)}}handleItemUse2xRepu(t){try{if(this.doubleReputationActive=!0,this.phaseUser&&(this.phaseUser.doubleReputationActive=!0),this.headerComponent){let n=this.headerComponent;typeof n.setDoubleReputationActive=="function"?n.setDoubleReputationActive(!0):n.doubleReputationActive=!0}this.notificationService.showNotification("success","Reputa\xE7\xE3o em dobro ativa para esta fase!"),console.debug("item.use.2xrepu aplicado:",t)}catch(n){console.warn("Erro ao aplicar item.2xrepu:",n)}}static \u0275fac=function(n){return new(n||e)(G(mt),G(xt),G(yn),G(fl),G(gl),G(pi),G(yl),G(xn),G(fa),G(Vn),G(mi))};static \u0275cmp=Se({type:e,selectors:[["game-phase"]],viewQuery:function(n,i){if(n&1&&(ft(So,5),ft($r,5),ft(n$,5,ln),ft(i$,7,sr),ft(r$,5)),n&2){let r;dt(r=ut())&&(i.headerComponent=r.first),dt(r=ut())&&(i.store=r.first),dt(r=ut())&&(i.speechBubble=r.first),dt(r=ut())&&(i.dialogContainer=r.first),dt(r=ut())&&(i.diagramEditorComponentRef=r.first)}},hostBindings:function(n,i){n&1&&q("click",function(o){return i.onDocumentClick(o)},ro)},inputs:{phaseId:"phaseId"},decls:33,vars:40,consts:[["diagramEditor",""],["store",""],["speechBubble",""],["id","container"],[3,"storeToggleEvent","exitEvent","timeExpiredEvent","parentType","currentPhaseId","maxTime"],[1,"title-phase"],[1,"action-buttons"],[1,"btn-icon","filled",3,"click"],["name","lightbulb",1,"lucide-icon"],["name","book-check",1,"lucide-icon"],[1,"count"],["name","infinity","class","lucide-icon","color","white",4,"ngIf"],[4,"ngIf"],[1,"character-container"],[1,"speech-bubble"],[1,"character",3,"click","src","alt"],["name","message-circle-question",1,"lucide-icon"],[1,"btn-icon","filled",3,"click","ngClass","disabled"],["name","save",1,"lucide-icon"],[1,"auto-save-indicator"],[1,"save-status"],[1,"save-icon",3,"name","size"],[1,"save-text"],[1,"toggle-autosave",3,"click","title"],[3,"name","size"],[3,"phaseUser","tips","diagramType"],[3,"storeStateChanged"],[3,"confirm","cancel","visible","title","message"],[3,"accuracy","phaseUser","doubleReputationActive","backToMenuEvent",4,"ngIf"],[3,"visibleChange","visible","title","description","videoSrc"],["name","infinity","color","white",1,"lucide-icon"],[3,"items"],[3,"backToMenuEvent","accuracy","phaseUser","doubleReputationActive"]],template:function(n,i){if(n&1){let r=le();y(0,"div",3)(1,"app-header",4),q("storeToggleEvent",function(a){return H(r),U(i.onStoreStateChanged(a))})("exitEvent",function(){return H(r),U(i.exitGame())})("timeExpiredEvent",function(){return H(r),U(i.onTimeExpired())}),v(),y(2,"h3",5),I(3),v(),y(4,"div",6)(5,"button",7),q("click",function(){return H(r),U(i.toggleTips())}),Z(6,"lucide-icon",8),v(),y(7,"button",7),q("click",function(){return H(r),U(i.checkDiagram())}),Z(8,"lucide-icon",9),y(9,"div",10),ne(10,s$,1,0,"lucide-icon",11)(11,c$,2,1,"span",12),v()(),y(12,"div",13),cd(13,l$,3,2,"div",14),y(14,"img",15),q("click",function(){return H(r),U(i.toggleSpeech())}),v()(),y(15,"button",7),q("click",function(){return H(r),U(i.toggleSpeech())}),Z(16,"lucide-icon",16),v(),y(17,"button",17),q("click",function(){return H(r),U(i.onSaveClick())}),Z(18,"lucide-icon",18),v(),y(19,"div",19)(20,"div",20),Z(21,"lucide-icon",21),y(22,"span",22),I(23),v()(),y(24,"button",23),q("click",function(){return H(r),U(i.toggleAutoSave())}),Z(25,"lucide-icon",24),v()()(),Z(26,"diagram-editor",25,0),y(28,"app-store",26,1),q("storeStateChanged",function(a){return H(r),U(i.onStoreStateChanged(a))}),v(),y(30,"app-confirm-dialog",27),q("confirm",function(){return H(r),U(i.onConfirm())})("cancel",function(){return H(r),U(i.onCancel())}),v(),ne(31,d$,1,3,"app-dialog-finished-gamephase",28),y(32,"app-advise-modal",29),ct("visibleChange",function(a){return H(r),ht(i.visibleAdviseTypePhase,a)||(i.visibleAdviseTypePhase=a),U(a)}),v()()}n&2&&(_(),A("parentType","game-phase")("currentPhaseId",i.phaseId)("maxTime",i.phase==null?null:i.phase.maxTime),_(2),Ie("T\xEDtulo: ",i.phase==null?null:i.phase.title),_(2),Ce("open-clues",i.isOpen),_(5),A("ngIf",(i.phase==null?null:i.phase.mode)=="BASIC"),_(),A("ngIf",(i.phase==null?null:i.phase.mode)!="BASIC"),_(2),ld(i.isSpeaking?13:-1),_(),Ce("speaking",i.isSpeaking),A("src",i.getCharacterImageUrl(),Ot)("alt",i.phase==null||i.phase.character==null?null:i.phase.character.name),_(3),A("ngClass",pc(38,o$,i.saveDisabled))("disabled",i.saveDisabled),_(2),Ce("saving",i.isSaving)("enabled",i.autoSaveEnabled),_(2),Ce("spinning",i.isSaving),A("name",i.isSaving?"loader-2":"cloud-upload")("size",16),_(2),fe(i.getLastSaveText()),_(),A("title",i.autoSaveEnabled?"Desativar salvamento autom\xE1tico":"Ativar salvamento autom\xE1tico"),_(),A("name",i.autoSaveEnabled?"toggle-right":"toggle-left")("size",14),_(),A("phaseUser",i.phaseUser)("tips",i.tips)("diagramType",(i.phase==null?null:i.phase.diagramType)||"USE_CASE"),_(4),A("visible",i.confirmDialogVisible)("title",i.confirmDialogTitle)("message",i.confirmDialogMessage),_(),A("ngIf",i.finishedGamePhaseVisible),_(),st("visible",i.visibleAdviseTypePhase),A("title",i.getPhaseTitle())("description",i.getPhaseDescription())("videoSrc",i.getPhaseVideoSrc()))},dependencies:[Gt,Nt,Ts,Ze,ur,_t,$r,Jy,fr,ml,R0,N0,So,B0],styles:['#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.action-buttons[_ngcontent-%COMP%]{width:80%;margin:-20px auto 0;padding-bottom:.3rem;display:flex;align-items:center;justify-content:flex-end;gap:24px}.btn-disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}diagram-editor[_ngcontent-%COMP%]{width:95%;margin:0 auto}.clues-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.clues-content[_ngcontent-%COMP%]{width:500px;height:173px;position:fixed;top:160px;left:719px;gap:6px;border-radius:32px;padding:16px 16px 24px;background:#f5f5f5;box-sizing:border-box;display:flex;flex-direction:column;justify-content:center;z-index:1000;box-shadow:0 4px 24px #00000014}.clue-text[_ngcontent-%COMP%]{min-height:60px;display:flex;align-items:left;justify-content:left;text-align:left;padding:8px;font-family:Roboto,Arial,Helvetica,sans-serif;font-weight:600;font-style:normal;font-size:1.05em;letter-spacing:.01em}.clues-swiper[_ngcontent-%COMP%]{width:100%;height:auto;margin-bottom:12px}.swiper-slide[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;cursor:text}.clues-navegation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:8px}.counter[_ngcontent-%COMP%]{font-size:.9em;color:#646464;flex-grow:1;text-align:left;align-items:center;display:inline-flex}.btn-navegation[_ngcontent-%COMP%]{background:transparent;color:#646464;border:none;cursor:pointer;padding:4px 8px;border-radius:4px;display:flex;align-items:center;transition:background .2s}.btn-navegation[_ngcontent-%COMP%]:hover{background:#f0f0f0}.swiper-button-next[_ngcontent-%COMP%], .swiper-button-prev[_ngcontent-%COMP%]{position:relative;top:auto;right:auto;left:auto;width:auto;height:auto;margin:0}.swiper-button-next[_ngcontent-%COMP%]:after, .swiper-button-prev[_ngcontent-%COMP%]:after{display:none}.btn-icon.filled.open-clues[_ngcontent-%COMP%]{background:var(--yellow);color:var(--white)}.btn-icon.filled.open-clues[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--white)}.character-container[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;z-index:10;cursor:pointer}.character[_ngcontent-%COMP%]{width:240px;transition:transform .3s ease-in-out}.character.speaking[_ngcontent-%COMP%]{transform:translate(-20px)}.speech-text[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.4}.speech-bubble[_ngcontent-%COMP%]{position:absolute;bottom:260px;right:260px;width:420px;height:200px;background:#fff;border:3px solid #2c3e50;border-radius:24px;padding:20px 24px;box-shadow:0 8px 24px #00000026,0 2px 8px #0000001a;z-index:2;animation:_ngcontent-%COMP%_fadeInBounce .4s cubic-bezier(.68,-.55,.265,1.55);overflow:visible;cursor:default}.speech-bubble[_ngcontent-%COMP%]   app-carousel[_ngcontent-%COMP%]{width:100%;height:100%;cursor:default;position:relative}.speech-bubble[_ngcontent-%COMP%]   .swiper[_ngcontent-%COMP%]{cursor:default;height:100%;position:relative}.speech-bubble[_ngcontent-%COMP%]   .swiper-wrapper[_ngcontent-%COMP%]{height:100%}.speech-bubble[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]{cursor:text;display:flex;align-items:center;justify-content:center;height:calc(100% - 30px);padding:0;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text}.speech-bubble[_ngcontent-%COMP%]   app-carousel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;font-weight:500;line-height:1.5;color:#2c3e50;padding:0 36px;margin:0;text-align:center;cursor:text;overflow-y:auto;max-height:100%;width:100%;user-select:text;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text}.speech-bubble[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%], .speech-bubble[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]{width:32px;height:32px;background:#f8f9fa;border-radius:50%;transition:all .3s ease;cursor:pointer}.speech-bubble[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]:hover, .speech-bubble[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:scale(1.1);cursor:pointer}.speech-bubble[_ngcontent-%COMP%]   .swiper-button-prev[_ngcontent-%COMP%]:after, .speech-bubble[_ngcontent-%COMP%]   .swiper-button-next[_ngcontent-%COMP%]:after{font-size:16px;font-weight:700;color:#2c3e50}.speech-bubble[_ngcontent-%COMP%]   .swiper-pagination-bullet[_ngcontent-%COMP%]{width:20px;height:3px;border-radius:2px;background:#cbd5e0;opacity:.5;margin:0 4px}.speech-bubble[_ngcontent-%COMP%]   .swiper-pagination-bullet-active[_ngcontent-%COMP%]{background:#2c3e50;opacity:1;width:28px}.speech-bubble[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:0;right:0;margin:0;padding:0;flex-shrink:0;height:auto}.speech-bubble[_ngcontent-%COMP%]   app-carousel[_ngcontent-%COMP%]     .swiper{height:100%;padding-bottom:28px}.speech-bubble[_ngcontent-%COMP%]   app-carousel[_ngcontent-%COMP%]     .swiper-wrapper{min-height:100%;align-items:center}.speech-bubble[_ngcontent-%COMP%]   app-carousel[_ngcontent-%COMP%]     .swiper-slide{height:calc(100% - 28px);padding:0;display:flex;align-items:center;justify-content:center}.speech-bubble[_ngcontent-%COMP%]   app-carousel[_ngcontent-%COMP%]     .swiper-pagination{bottom:8px}.speech-bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;right:-18px;transform:translateY(-50%);width:0;height:0;border-top:15px solid transparent;border-bottom:15px solid transparent;border-left:18px solid #2c3e50;z-index:-1}.speech-bubble[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:-13px;transform:translateY(-50%);width:0;height:0;border-top:12px solid transparent;border-bottom:12px solid transparent;border-left:13px solid #ffffff;z-index:0}@keyframes _ngcontent-%COMP%_fadeInBounce{0%{opacity:0;transform:translateY(20px) scale(.9)}60%{opacity:1;transform:translateY(-5px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.btn-icon[_ngcontent-%COMP%]   .filled[_ngcontent-%COMP%]   .watch-icon[_ngcontent-%COMP%], #watch[_ngcontent-%COMP%]{background-color:var(--white)!important}.watch-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--black)}#watch[_ngcontent-%COMP%]:hover{background-color:var(--yellow)!important}#watch[_ngcontent-%COMP%]{position:relative!important;overflow:visible!important}.watch-counter[_ngcontent-%COMP%]{position:absolute!important;top:-8px!important;right:-8px!important;background-color:#f44!important;color:#fff!important;border-radius:50%!important;min-width:20px!important;height:20px!important;font-size:12px!important;padding:2px!important;display:flex!important;align-items:center!important;justify-content:center!important;font-weight:700!important}header[_ngcontent-%COMP%]   .watch-time[_ngcontent-%COMP%]{font-size:18px;font-weight:600;opacity:0;transition:opacity .3s ease}header[_ngcontent-%COMP%]   .watch-time.active[_ngcontent-%COMP%]{opacity:1}.btn-icon[_ngcontent-%COMP%]{position:relative}.btn-icon[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;bottom:-8px;left:-8px;background-color:var(--red);color:var(--white);border-radius:50%;min-width:18px;height:18px;font-size:10px;display:flex;align-items:center;justify-content:center;font-weight:700}.btn-icon[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{width:12px;height:12px;color:var(--white);stroke-width:2px}.btn-icon[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;font-weight:700;color:var(--white)}.auto-save-indicator[_ngcontent-%COMP%]{background:#fffffff2;border:1px solid #e1e5e9;border-radius:8px;padding:6px 10px;display:flex;align-items:center;gap:6px;font-size:11px;color:#666;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.auto-save-indicator.saving[_ngcontent-%COMP%]{background:#fff8dcf2;border-color:#ffc107;color:#856404}.auto-save-indicator.enabled[_ngcontent-%COMP%]{border-color:#28a745}.save-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.save-icon[_ngcontent-%COMP%]{color:#28a745;transition:color .3s ease}.save-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;color:#ffc107}.save-text[_ngcontent-%COMP%]{font-weight:500;white-space:nowrap}.toggle-autosave[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:2px;border-radius:4px;color:#666;transition:all .2s ease}.toggle-autosave[_ngcontent-%COMP%]:hover{background:#0000001a;color:#333}.title-phase[_ngcontent-%COMP%]{width:80%;font-size:16px;font-weight:600;color:var(--black);text-align:center;margin:-30px auto 20px;padding:4px 16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.auto-save-indicator[_ngcontent-%COMP%]{padding:6px 8px;font-size:11px}.save-text[_ngcontent-%COMP%]{display:none}}']})};var Ps=class e{constructor(t,n){this.auth=t;this.router=n}canActivate(){return this.auth.isLoggedIn()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(n){return new(n||e)(se(fi),se(mt))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};var j0=class e{constructor(t){this.http=t}api=on.BASE_URL;getAvatars(){return this.http.get(`${this.api}/avatars`)}createAvatar(t,n){let i=new FormData;return i.append("avatar",new Blob([JSON.stringify(t)],{type:"application/json"})),i.append("image",n),this.http.post(`${this.api}/avatars`,i)}updateAvatar(t,n,i){let r=new FormData;return r.append("avatar",new Blob([JSON.stringify(n)],{type:"application/json"})),i&&r.append("image",i),this.http.put(`${this.api}/avatars/${t}`,r)}deleteAvatar(t){return this.http.delete(`${this.api}/avatars/${t}`)}getCharacters(){return this.http.get(`${this.api}/characters`)}createCharacter(t,n){let i=new FormData;return i.append("character",new Blob([JSON.stringify(t)],{type:"application/json"})),i.append("image",n),this.http.post(`${this.api}/characters`,i)}updateCharacter(t,n,i){let r=new FormData;return r.append("character",new Blob([JSON.stringify(n)],{type:"application/json"})),i&&r.append("image",i),this.http.put(`${this.api}/characters/${t}`,r)}deleteCharacter(t){return this.http.delete(`${this.api}/characters/${t}`)}getPhases(){return this.http.get(`${this.api}/phases`)}createPhase(t){return this.http.post(`${this.api}/phases`,t)}updatePhase(t,n){return this.http.put(`${this.api}/phases/${t}`,n)}deletePhase(t){return this.http.delete(`${this.api}/phases/${t}`)}getAllGameMaps(){return this.http.get(`${this.api}/gamemaps`)}getItems(){return this.http.get(`${this.api}/items`)}createItem(t,n){let i=new FormData;return i.append("item",new Blob([JSON.stringify(t)],{type:"application/json"})),i.append("image",n),this.http.post(`${this.api}/items`,i)}updateItem(t,n,i){let r=new FormData;return r.append("item",new Blob([JSON.stringify(n)],{type:"application/json"})),i&&r.append("image",i),this.http.put(`${this.api}/items/${t}`,r)}deleteItem(t){return this.http.delete(`${this.api}/items/${t}`)}static \u0275fac=function(n){return new(n||e)(se(rn))};static \u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"})};function h$(e,t){if(e&1){let n=le();y(0,"button",11),q("click",function(){let r=H(n).$implicit,o=V();return U(o.setActiveTab(r.id))}),I(1),v()}if(e&2){let n=t.$implicit,i=V();Ce("active",i.activeTab===n.id),_(),ef(" ",n.icon," ",n.name," ")}}function p$(e,t){if(e&1&&(y(0,"div",25),Z(1,"img",26),v()),e&2){let n=V(2);_(),A("src",n.avatarPreview,Ot)}}function f$(e,t){if(e&1){let n=le();y(0,"div",27)(1,"div",28),Z(2,"img",29),v(),y(3,"div",30)(4,"button",31),q("click",function(){let r=H(n).index,o=V(2);return U(o.editAvatar(r))}),I(5,"\u270F\uFE0F"),v(),y(6,"button",32),q("click",function(){let r=H(n).index,o=V(2);return U(o.deleteAvatar(r))}),I(7,"\u{1F5D1}\uFE0F"),v()()()}if(e&2){let n=t.$implicit,i=V(2);_(2),A("src",i.getAvatarImageUrl(n.filePath||""),Ot)}}function m$(e,t){if(e&1){let n=le();y(0,"div",12)(1,"div",13)(2,"h2"),I(3,"\u{1F464} Cadastro de Avatar"),v()(),y(4,"div",14)(5,"form",15,0),q("ngSubmit",function(){H(n);let r=V();return U(r.onSubmitAvatar())}),y(7,"div",16)(8,"label",17)(9,"input",18),q("change",function(r){H(n);let o=V();return U(o.onAvatarImageChange(r))}),v(),y(10,"span",19),I(11,"\u{1F4F7} Escolher Imagem"),v()(),ne(12,p$,2,1,"div",20),v(),y(13,"button",21),I(14),v(),y(15,"button",22),q("click",function(){H(n);let r=V();return U(r.resetAvatarForm())}),I(16,"\u{1F504} Limpar"),v()(),y(17,"div",23),ne(18,f$,8,1,"div",24),v()()()}if(e&2){let n=V();_(12),A("ngIf",n.avatarPreview),_(),A("disabled",!n.avatarImageFile&&!n.editAvatarId),_(),Ie(" ",n.editAvatarId?"\u270F\uFE0F Atualizar Avatar":"\u{1F4BE} Salvar Avatar"," "),_(4),A("ngForOf",n.avatars)}}function g$(e,t){if(e&1&&(y(0,"div",25),Z(1,"img",26),v()),e&2){let n=V(2);_(),A("src",n.characterPreview,Ot)}}function y$(e,t){if(e&1){let n=le();y(0,"div",27)(1,"div",28),Z(2,"img",36),v(),y(3,"div",37)(4,"h4"),I(5),v()(),y(6,"div",30)(7,"button",31),q("click",function(){let r=H(n).index,o=V(2);return U(o.editCharacter(r))}),I(8,"\u270F\uFE0F"),v(),y(9,"button",32),q("click",function(){let r=H(n).index,o=V(2);return U(o.deleteCharacter(r))}),I(10,"\u{1F5D1}\uFE0F"),v()()()}if(e&2){let n=t.$implicit,i=V(2);_(2),A("src",i.getCharacterImageUrl(n.filePath),Ot)("alt",n.name),_(3),fe(n.name)}}function v$(e,t){if(e&1){let n=le();y(0,"div",12)(1,"div",13)(2,"h2"),I(3,"\u{1F3AD} Cadastro de Personagem"),v()(),y(4,"div",14)(5,"form",15,1),q("ngSubmit",function(){H(n);let r=V();return U(r.onSubmitCharacter())}),y(7,"div",33)(8,"label"),I(9,"Nome do Personagem:"),v(),y(10,"input",34),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.character.name,r)||(o.character.name=r),U(r)}),v()(),y(11,"div",16)(12,"label",17)(13,"input",35),q("change",function(r){H(n);let o=V();return U(o.onCharacterImageChange(r))}),v(),y(14,"span",19),I(15,"\u{1F4F7} Escolher Imagem"),v()(),ne(16,g$,2,1,"div",20),v(),y(17,"button",21),I(18),v(),y(19,"button",22),q("click",function(){H(n);let r=V();return U(r.resetCharacterForm())}),I(20,"\u{1F504} Limpar"),v()(),y(21,"div",23),ne(22,y$,11,3,"div",24),v()()()}if(e&2){let n=V();_(10),st("ngModel",n.character.name),_(6),A("ngIf",n.characterPreview),_(),A("disabled",!n.character.name||!n.characterImageFile&&!n.editCharacterId),_(),Ie(" ",n.editCharacterId?"\u270F\uFE0F Atualizar Personagem":"\u{1F4BE} Salvar Personagem"," "),_(4),A("ngForOf",n.characters)}}function k$(e,t){if(e&1){let n=le();y(0,"div",33)(1,"label"),I(2,"Tipo de Diagrama:"),v(),y(3,"select",51),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.phase.diagramType,r)||(o.phase.diagramType=r),U(r)}),y(4,"option",52),I(5,"Class"),v(),y(6,"option",52),I(7,"Use Case"),v()()()}if(e&2){let n=V(2);_(3),st("ngModel",n.phase.diagramType),_(),A("ngValue","CLASS"),_(2),A("ngValue","USE_CASE")}}function M$(e,t){if(e&1){let n=le();y(0,"div",53)(1,"div",33)(2,"label"),I(3,"Tipo da Fase:"),v(),y(4,"select",54),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.phase.type,r)||(o.phase.type=r),U(r)}),y(5,"option",55),I(6,"\u{1F528} BUILD"),v(),y(7,"option",56),I(8,"\u{1F527} FIX"),v(),y(9,"option",57),I(10,"\u2705 COMPLETE"),v()()(),y(11,"div",33)(12,"label"),I(13,"Modo:"),v(),y(14,"select",58),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.phase.mode,r)||(o.phase.mode=r),U(r)}),y(15,"option",59),I(16,"\u{1F7E2} B\xC1SICO"),v(),y(17,"option",60),I(18,"\u{1F7E1} INTERMEDI\xC1RIO"),v(),y(19,"option",61),I(20,"\u{1F534} AVAN\xC7ADO"),v()()()()}if(e&2){let n=V(2);_(4),st("ngModel",n.phase.type),_(10),st("ngModel",n.phase.mode)}}function x$(e,t){if(e&1){let n=le();y(0,"div",33)(1,"label"),I(2,"Tempo M\xE1ximo (segundos):"),v(),y(3,"input",62),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.phase.maxTime,r)||(o.phase.maxTime=r),U(r)}),v()()}if(e&2){let n=V(2);_(3),st("ngModel",n.phase.maxTime)}}function w$(e,t){if(e&1&&(y(0,"option",63),I(1),v()),e&2){let n=t.$implicit;A("value",n.id),_(),Ie(" \u{1F3AD} ",n.name," ")}}function b$(e,t){if(e&1&&(y(0,"option",63),I(1),v()),e&2){let n=t.$implicit;A("value",n.id),_(),Ie(" \u{1F5FA}\uFE0F ",n.title," ")}}function C$(e,t){if(e&1){let n=le();y(0,"button",72),q("click",function(){H(n);let r=V(3);return U(r.cancelEditDialogue())}),I(1," \u274C "),v()}}function S$(e,t){if(e&1){let n=le();y(0,"div",75)(1,"div",76),I(2),v(),y(3,"div",77)(4,"p"),I(5),v()(),y(6,"div",78)(7,"button",79),q("click",function(){let r=H(n).index,o=V(4);return U(o.moveDialogueUp(r))}),I(8," \u2B06\uFE0F "),v(),y(9,"button",80),q("click",function(){let r=H(n).index,o=V(4);return U(o.moveDialogueDown(r))}),I(10," \u2B07\uFE0F "),v(),y(11,"button",81),q("click",function(){let r=H(n).index,o=V(4);return U(o.editDialogue(r))}),I(12," \u270F\uFE0F "),v(),y(13,"button",82),q("click",function(){let r=H(n).index,o=V(4);return U(o.removeDialogue(r))}),I(14," \u{1F5D1}\uFE0F "),v()()()}if(e&2){let n=t.$implicit,i=t.index,r=V(4);Ce("editing",r.editingDialogueIndex===i),_(2),fe(i+1),_(3),fe(n),_(2),A("disabled",i===0),_(2),A("disabled",i===r.phase.characterDialogues.length-1)}}function _$(e,t){if(e&1&&(y(0,"div",73),ne(1,S$,15,6,"div",74),v()),e&2){let n=V(3);_(),A("ngForOf",n.phase.characterDialogues)}}function I$(e,t){if(e&1&&(y(0,"div",83)(1,"small"),I(2),v()()),e&2){let n=V(3);_(2),Ie("",n.phase.characterDialogues.length," fala(s) adicionada(s)")}}function E$(e,t){if(e&1){let n=le();y(0,"div",33)(1,"label"),I(2,"\u{1F4AC} Falas do Personagem:"),v(),y(3,"div",64)(4,"div",65)(5,"textarea",66),ct("ngModelChange",function(r){H(n);let o=V(2);return ht(o.newDialogue,r)||(o.newDialogue=r),U(r)}),v(),y(6,"div",67)(7,"button",68),q("click",function(){H(n);let r=V(2);return U(r.addDialogue())}),I(8),v(),ne(9,C$,2,0,"button",69),v()()(),ne(10,_$,2,1,"div",70)(11,I$,3,1,"div",71),v()}if(e&2){let n=V(2);_(5),st("ngModel",n.newDialogue),_(2),A("disabled",!n.newDialogue.trim()),_(),Ie(" ",n.editingDialogueIndex>=0?"\u270F\uFE0F":"\u2795"," "),_(),A("ngIf",n.editingDialogueIndex>=0),_(),A("ngIf",n.phase.characterDialogues.length>0&&(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(),A("ngIf",n.phase.characterDialogues.length>0&&(n.phase==null?null:n.phase.nodeType)!=="DECISION")}}function D$(e,t){if(e&1){let n=le();y(0,"div",33)(1,"label"),I(2,"Diagrama Inicial:"),v(),y(3,"div",84)(4,"div",85)(5,"button",86),q("click",function(){H(n);let r=V(2);return U(r.saveDiagramToPhase())}),I(6," \u{1F4BE} Salvar Diagrama Inicial "),v(),y(7,"button",87),q("click",function(){H(n);let r=V(2);return U(r.clearDiagram())}),I(8," \u{1F5D1}\uFE0F Limpar Diagrama Inicial "),v()(),Z(9,"diagram-editor",88,3),v()()}if(e&2){let n=V(2);_(9),A("diagramType",n.phase.diagramType||"USE_CASE")}}function T$(e,t){if(e&1){let n=le();y(0,"button",93),q("click",function(){H(n);let r=V(3);return U(r.cancelEditCorrectDiagram())}),I(1," \u274C Cancelar Edi\xE7\xE3o "),v()}}function P$(e,t){if(e&1&&(y(0,"div",94)(1,"span",95),I(2),v()()),e&2){let n=V(3);_(2),Ie(" \u270F\uFE0F Editando diagrama correto #",n.editingCorrectDiagramIndex+1," ")}}function A$(e,t){if(e&1){let n=le();y(0,"div",98)(1,"div",99),I(2),v(),y(3,"div",100)(4,"div",101),I(5),v()(),y(6,"div",102)(7,"button",103),q("click",function(){let r=H(n).index,o=V(4);return U(o.moveCorrectDiagramUp(r))}),I(8," \u2B06\uFE0F "),v(),y(9,"button",104),q("click",function(){let r=H(n).index,o=V(4);return U(o.moveCorrectDiagramDown(r))}),I(10," \u2B07\uFE0F "),v(),y(11,"button",105),q("click",function(){let r=H(n).index,o=V(4);return U(o.editCorrectDiagram(r))}),I(12," \u270F\uFE0F "),v(),y(13,"button",106),q("click",function(){let r=H(n).index,o=V(4);return U(o.removeCorrectDiagram(r))}),I(14," \u{1F5D1}\uFE0F "),v()()()}if(e&2){let n=t.$implicit,i=t.index,r=V(4);Ce("editing",r.editingCorrectDiagramIndex===i),_(2),fe(i+1),_(3),Ie(" ",r.getCorrectDiagramPreview(n)," "),_(2),A("disabled",i===0),_(2),A("disabled",i===r.phase.correctDiagrams.length-1)}}function L$(e,t){if(e&1&&(y(0,"div",96)(1,"h4"),I(2,"\u{1F4CB} Diagramas Corretos Cadastrados:"),v(),ne(3,A$,15,6,"div",97),v()),e&2){let n=V(3);_(3),A("ngForOf",n.phase.correctDiagrams)}}function O$(e,t){if(e&1&&(y(0,"div",107)(1,"small"),I(2),v()()),e&2){let n=V(3);_(2),Ie("",n.phase.correctDiagrams.length," diagrama(s) correto(s) cadastrado(s)")}}function R$(e,t){if(e&1){let n=le();y(0,"div",33)(1,"label"),I(2,"\u{1F4CA} Diagramas Corretos:"),v(),y(3,"div",84)(4,"div",85)(5,"button",86),q("click",function(){H(n);let r=V(2);return U(r.saveCorrectDiagram())}),I(6),v(),ne(7,T$,2,0,"button",89),y(8,"button",87),q("click",function(){H(n);let r=V(2);return U(r.clearCorrectDiagram())}),I(9," \u{1F5D1}\uFE0F Limpar Editor "),v()(),ne(10,P$,3,1,"div",90),Z(11,"diagram-editor",88,4),v(),ne(13,L$,4,1,"div",91)(14,O$,3,1,"div",92),v()}if(e&2){let n=V(2);_(6),Ie(" ",n.editingCorrectDiagramIndex>=0?"\u270F\uFE0F Atualizar Diagrama":"\u2795 Adicionar como Correto"," "),_(),A("ngIf",n.editingCorrectDiagramIndex>=0),_(3),A("ngIf",n.editingCorrectDiagramIndex>=0),_(),A("diagramType",n.phase.diagramType||"USE_CASE"),_(2),A("ngIf",n.phase.correctDiagrams.length>0),_(),A("ngIf",n.phase.correctDiagrams.length>0)}}function N$(e,t){if(e&1&&(y(0,"div",117)(1,"p"),I(2),v()()),e&2){let n=V().$implicit;_(2),fe(n.description)}}function F$(e,t){if(e&1){let n=le();y(0,"div",108)(1,"div",109)(2,"div",110)(3,"span"),I(4),v(),y(5,"span"),I(6),v()(),y(7,"h3"),I(8),v()(),y(9,"div",111)(10,"div",112)(11,"div",113)(12,"span",114),I(13,"\u23F1\uFE0F Tempo:"),v(),y(14,"span",115),I(15),v()(),y(16,"div",113)(17,"span",114),I(18,"\u{1F3AD} Personagem:"),v(),y(19,"span",115),I(20),v()(),y(21,"div",113)(22,"span",114),I(23,"\u{1F5FA}\uFE0F GameMap:"),v(),y(24,"span",115),I(25),v()(),y(26,"div",113)(27,"span",114),I(28,"\u{1F4CA} Diagrama:"),v(),y(29,"span",115),I(30),v()(),y(31,"div",113)(32,"span",114),I(33,"\u2705 Corretos:"),v(),y(34,"span",115),I(35),v()(),y(36,"div",113)(37,"span",114),I(38,"\u{1F4AC} Di\xE1logos:"),v(),y(39,"span",115),I(40),v()(),y(41,"div",113)(42,"span",114),I(43,"\u{1F517} Tipo do N\xF3:"),v(),y(44,"span",115),I(45),v()(),y(46,"div",113)(47,"span",114),I(48,"\u2B05\uFE0F Fase Anterior:"),v(),y(49,"span",115),I(50),v()(),y(51,"div",113)(52,"span",114),I(53,"\u27A1\uFE0F Pr\xF3xima Fase:"),v(),y(54,"span",115),I(55),v()()(),ne(56,N$,3,1,"div",116),v(),y(57,"div",30)(58,"button",31),q("click",function(){let r=H(n).index,o=V(2);return U(o.editPhase(r))}),I(59,"\u270F\uFE0F"),v(),y(60,"button",32),q("click",function(){let r=H(n).index,o=V(2);return U(o.deletePhase(r))}),I(61,"\u{1F5D1}\uFE0F"),v()()()}if(e&2){let n=t.$implicit,i=V(2);_(3),Qp(Ya("badge type-",n.type.toLowerCase())),_(),fe(n.type),_(),Qp(Ya("badge mode-",(n.mode||"basic").toLowerCase())),_(),fe(n.mode||"BASIC"),_(2),fe(n.title),_(7),fe(i.formatTime(n.maxTime)),_(5),fe((n==null||n.character==null?null:n.character.name)||"N/A"),_(5),fe((n==null||n.gameMap==null?null:n.gameMap.title)||"N/A"),_(5),fe(n!=null&&n.diagramInitial?"\u2705 Definido":"\u274C Vazio"),_(5),fe((n==null||n.correctDiagrams==null?null:n.correctDiagrams.length)||0),_(5),fe((n==null||n.characterDialogues==null?null:n.characterDialogues.length)||0),_(5),fe(n.nodeType==="ACTIVITY"?"Atividade":"Decis\xE3o"),_(5),Ie(" ",i.getPreviousPhaseTitle(n.id||0)||"In\xEDcio do diagrama de atividades"," "),_(5),Ie(" ",i.getNextPhaseTitle(n.id||0)||"Fim do diagrama de atividades"," "),_(),A("ngIf",n.description)}}function V$(e,t){if(e&1){let n=le();y(0,"div",12)(1,"div",13)(2,"h2"),I(3,"\u{1F3AE} Cadastro de Fase"),v()(),y(4,"div",14)(5,"form",15,2),q("ngSubmit",function(){H(n);let r=V();return U(r.onSubmitPhase())}),y(7,"div",33)(8,"label"),I(9,"N\xF3 do Fluxo:"),v(),y(10,"select",38),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.phase.nodeType,r)||(o.phase.nodeType=r),U(r)}),y(11,"option",39),I(12,"\u{1F3C3} Atividade"),v(),y(13,"option",40),I(14,"\u2696\uFE0F Decis\xE3o"),v()()(),y(15,"div",33)(16,"label"),I(17,"T\xEDtulo da Fase:"),v(),y(18,"input",41),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.phase.title,r)||(o.phase.title=r),U(r)}),v()(),y(19,"div",33)(20,"label"),I(21,"Descri\xE7\xE3o:"),v(),y(22,"textarea",42),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.phase.description,r)||(o.phase.description=r),U(r)}),v()(),ne(23,k$,8,3,"div",43)(24,M$,21,2,"div",44)(25,x$,4,1,"div",43),y(26,"div",33)(27,"label"),I(28,"Personagem:"),v(),y(29,"select",45),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.selectedCharacterId,r)||(o.selectedCharacterId=r),U(r)}),y(30,"option",46),I(31,"Selecione um personagem"),v(),ne(32,w$,2,2,"option",47),v()(),y(33,"div",33)(34,"label"),I(35,"GameMap:"),v(),y(36,"select",48),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.selectedGameMapId,r)||(o.selectedGameMapId=r),U(r)}),y(37,"option",46),I(38,"Selecione um GameMap"),v(),ne(39,b$,2,2,"option",47),v()(),ne(40,E$,12,6,"div",43)(41,D$,11,1,"div",43)(42,R$,15,6,"div",43),y(43,"button",21),I(44),v(),y(45,"button",22),q("click",function(){H(n);let r=V();return U(r.resetPhaseForm())}),I(46,"\u{1F504} Limpar"),v()(),y(47,"div",49),ne(48,F$,62,19,"div",50),v()()()}if(e&2){let n=V();_(10),st("ngModel",n.phase.nodeType),_(8),st("ngModel",n.phase.title),_(4),st("ngModel",n.phase.description),_(),A("ngIf",(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(),A("ngIf",(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(),A("ngIf",(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(4),st("ngModel",n.selectedCharacterId),_(3),A("ngForOf",n.characters),_(4),st("ngModel",n.selectedGameMapId),_(3),A("ngForOf",n.gameMaps),_(),A("ngIf",(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(),A("ngIf",(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(),A("ngIf",(n.phase==null?null:n.phase.nodeType)!=="DECISION"),_(),A("disabled",!n.phase.title||!n.selectedCharacterId||!n.selectedGameMapId),_(),Ie(" ",n.editPhaseId?"\u270F\uFE0F Atualizar Fase":"\u{1F4BE} Salvar Fase"," "),_(4),A("ngForOf",n.phases)}}function B$(e,t){if(e&1&&(y(0,"option",63),I(1),v()),e&2){let n=t.$implicit;A("value",n.id),_(),Ie(" \u{1F5FA}\uFE0F ",n.title," ")}}function z$(e,t){if(e&1){let n=le();y(0,"div",122)(1,"button",123),q("click",function(){H(n);let r=V(2);return U(r.addTransitionRow())}),I(2,"\u2795 Adicionar Transi\xE7\xE3o"),v()()}}function j$(e,t){if(e&1&&(y(0,"option",132),I(1),v()),e&2){let n=t.$implicit,i=V().$implicit;A("ngValue",n.id)("disabled",n.id===i.toPhaseId),_(),Ie(" \u{1F3AE} ",n.title," ")}}function H$(e,t){if(e&1&&(y(0,"option",132),I(1),v()),e&2){let n=t.$implicit,i=V().$implicit;A("ngValue",n.id)("disabled",n.id===i.fromPhaseId),_(),Ie(" \u{1F3AE} ",n.title," ")}}function U$(e,t){if(e&1){let n=le();y(0,"div",33)(1,"label"),I(2,"Texto da op\xE7\xE3o:"),v(),y(3,"input",133),ct("ngModelChange",function(r){H(n);let o=V().$implicit;return ht(o.optionText,r)||(o.optionText=r),U(r)}),v()()}if(e&2){let n=V(),i=n.$implicit,r=n.index;_(3),A("name",Ya("optText_",r)),st("ngModel",i.optionText)}}function q$(e,t){if(e&1){let n=le();y(0,"div",126)(1,"div",127)(2,"div",33)(3,"label"),I(4,"Origem:"),v(),y(5,"select",128),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.fromPhaseId,r)||(o.fromPhaseId=r),U(r)}),y(6,"option",52),I(7,"Selecione uma fase"),v(),ne(8,j$,2,3,"option",129),v()(),y(9,"div",33)(10,"label"),I(11,"Destino:"),v(),y(12,"select",128),ct("ngModelChange",function(r){let o=H(n).$implicit;return ht(o.toPhaseId,r)||(o.toPhaseId=r),U(r)}),y(13,"option",52),I(14,"Selecione uma fase"),v(),ne(15,H$,2,3,"option",129),v()(),ne(16,U$,4,3,"div",43),v(),y(17,"div",130)(18,"button",131),q("click",function(){let r=H(n).index,o=V(3);return U(o.removeTransitionRow(r))}),I(19,"\u{1F5D1}\uFE0F"),v()()()}if(e&2){let n=t.$implicit,i=t.index,r=V(3);_(5),A("name",Ya("fromPhase_",i)),st("ngModel",n.fromPhaseId),_(),A("ngValue",0),_(2),A("ngForOf",r.availablePhases),_(4),A("name",Ya("toPhase_",i)),st("ngModel",n.toPhaseId),_(),A("ngValue",0),_(2),A("ngForOf",r.availablePhases),_(),A("ngIf",r.isDecisionPhase(n.fromPhaseId))}}function $$(e,t){if(e&1&&(y(0,"div",124),ne(1,q$,20,11,"div",125),v()),e&2){let n=V(2);_(),A("ngForOf",n.phaseTransitions)}}function G$(e,t){if(e&1){let n=le();y(0,"div",134)(1,"button",123),q("click",function(){H(n);let r=V(2);return U(r.savePhaseTransitions())}),I(2,"\u{1F4BE} Salvar Transi\xE7\xF5es"),v()()}}function W$(e,t){if(e&1){let n=le();y(0,"div",12)(1,"div",13)(2,"h2"),I(3,"\u{1F517} Cadastro e Edi\xE7\xE3o de Transi\xE7\xF5es"),v()(),y(4,"div",14)(5,"div",33)(6,"label"),I(7,"Selecione o GameMap:"),v(),y(8,"select",118),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.selectedGameMapId,r)||(o.selectedGameMapId=r),U(r)}),q("change",function(){H(n);let r=V();return U(r.loadPhaseTransitions())}),y(9,"option",46),I(10,"Selecione um GameMap"),v(),ne(11,B$,2,2,"option",47),v()(),ne(12,z$,3,0,"div",119)(13,$$,2,1,"div",120)(14,G$,3,0,"div",121),v()()}if(e&2){let n=V();_(8),st("ngModel",n.selectedGameMapId),_(3),A("ngForOf",n.gameMaps),_(),A("ngIf",n.selectedGameMapId>0),_(),A("ngIf",n.phaseTransitions.length>0),_(),A("ngIf",n.phaseTransitions.length>0)}}function Z$(e,t){if(e&1){let n=le();y(0,"div",138)(1,"div",139),I(2,"\u{1F4A1}"),v(),y(3,"div",140)(4,"p"),I(5),v(),y(6,"small",141),I(7),v()(),y(8,"div",30)(9,"button",31),q("click",function(){let r=H(n).index,o=V(2);return U(o.editTip(r))}),I(10,"\u270F\uFE0F"),v(),y(11,"button",32),q("click",function(){let r=H(n).index,o=V(2);return U(o.deleteTip(r))}),I(12,"\u{1F5D1}\uFE0F"),v()()()}if(e&2){let n=t.$implicit;_(5),fe(n.tip),_(2),Ie("ID: ",n.id)}}function Y$(e,t){if(e&1){let n=le();y(0,"div",12)(1,"div",13)(2,"h2"),I(3,"\u{1F4A1} Cadastro de Dicas"),v()(),y(4,"div",14)(5,"form",15,5),q("ngSubmit",function(){H(n);let r=V();return U(r.onSubmitTip())}),y(7,"div",33)(8,"label"),I(9,"Dica:"),v(),y(10,"textarea",135),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.tip.tip,r)||(o.tip.tip=r),U(r)}),v()(),y(11,"button",21),I(12),v(),y(13,"button",22),q("click",function(){H(n);let r=V();return U(r.resetTipForm())}),I(14,"\u{1F504} Limpar"),v()(),y(15,"div",136),ne(16,Z$,13,2,"div",137),v()()()}if(e&2){let n=V();_(10),st("ngModel",n.tip.tip),_(),A("disabled",!n.tip.tip||!n.tip.tip.trim()),_(),Ie(" ",n.editTipId?"\u270F\uFE0F Atualizar Dica":"\u{1F4BE} Salvar Dica"," "),_(4),A("ngForOf",n.tips)}}function X$(e,t){if(e&1&&(y(0,"div",147)(1,"strong"),I(2,"\u{1F4C5} Criado em:"),v(),I(3),v()),e&2){let n=V(3);_(3),Ie(" ",n.formatDate(n.gameMap.createdAt)," ")}}function J$(e,t){if(e&1&&(y(0,"div",147)(1,"strong"),I(2,"\u{1F464} Criado por:"),v(),I(3),v()),e&2){let n=V(3);_(3),Ie(" ",n.gameMap.createdByUser.name," ")}}function K$(e,t){if(e&1&&(y(0,"div",33)(1,"label"),I(2,"\u{1F4CA} Informa\xE7\xF5es:"),v(),y(3,"div",146)(4,"div",147)(5,"strong"),I(6,"\u{1F465} Usu\xE1rios:"),v(),I(7),v(),y(8,"div",147)(9,"strong"),I(10,"\u{1F3AE} Fases:"),v(),I(11),v(),ne(12,X$,4,1,"div",148)(13,J$,4,1,"div",148),v()()),e&2){let n=V(2);_(7),Ie(" ",(n.gameMap.users==null?null:n.gameMap.users.length)||0," "),_(4),Ie(" ",(n.gameMap.phases==null?null:n.gameMap.phases.length)||0," "),_(),A("ngIf",n.gameMap.createdAt),_(),A("ngIf",n.gameMap.createdByUser)}}function Q$(e,t){if(e&1&&(y(0,"div",113)(1,"span",114),I(2,"\u{1F4C5} Criado:"),v(),y(3,"span",115),I(4),v()()),e&2){let n=V().$implicit,i=V(2);_(4),fe(i.formatDate(n.createdAt))}}function eG(e,t){if(e&1&&(y(0,"div",113)(1,"span",114),I(2,"\u{1F464} Por:"),v(),y(3,"span",115),I(4),v()()),e&2){let n=V().$implicit;_(4),fe(n.createdByUser.name)}}function tG(e,t){if(e&1){let n=le();y(0,"div",149)(1,"div",150)(2,"div",151)(3,"h4"),I(4),v(),y(5,"span",152),I(6),v()(),y(7,"div",153)(8,"span",154),I(9),v(),y(10,"span",155),I(11),v()()(),y(12,"div",156)(13,"div",157),ne(14,Q$,5,1,"div",158)(15,eG,5,1,"div",158),v()(),y(16,"div",30)(17,"button",159),q("click",function(){let r=H(n).index,o=V(2);return U(o.editGameMap(r))}),I(18," \u270F\uFE0F "),v(),y(19,"button",160),q("click",function(){let r=H(n).index,o=V(2);return U(o.deleteGameMap(r))}),I(20," \u{1F5D1}\uFE0F "),v()()()}if(e&2){let n=t.$implicit;_(4),Ie("\u{1F5FA}\uFE0F ",n.title),_(2),Ie("ID: ",n.id),_(3),Ie("\u{1F465} ",(n.users==null?null:n.users.length)||0),_(2),Ie("\u{1F3AE} ",(n.phases==null?null:n.phases.length)||0),_(3),A("ngIf",n.createdAt),_(),A("ngIf",n.createdByUser)}}function nG(e,t){e&1&&(y(0,"div",161)(1,"div",162),I(2,"\u{1F5FA}\uFE0F"),v(),y(3,"h3"),I(4,"Nenhum GameMap cadastrado"),v(),y(5,"p"),I(6,"Crie seu primeiro GameMap para come\xE7ar a organizar as fases do jogo."),v()())}function iG(e,t){if(e&1){let n=le();y(0,"div",12)(1,"div",13)(2,"h2"),I(3,"\u{1F5FA}\uFE0F Cadastro de GameMap"),v()(),y(4,"div",14)(5,"form",15,6),q("ngSubmit",function(){H(n);let r=V();return U(r.onSubmitGameMap())}),y(7,"div",33)(8,"label"),I(9,"T\xEDtulo do GameMap:"),v(),y(10,"input",142),ct("ngModelChange",function(r){H(n);let o=V();return ht(o.gameMap.title,r)||(o.gameMap.title=r),U(r)}),v()(),ne(11,K$,14,4,"div",43),y(12,"button",21),I(13),v(),y(14,"button",22),q("click",function(){H(n);let r=V();return U(r.resetGameMapForm())}),I(15," \u{1F504} Limpar "),v()(),y(16,"div",143),ne(17,tG,21,6,"div",144)(18,nG,7,0,"div",145),v()()()}if(e&2){let n=V();_(10),st("ngModel",n.gameMap.title),_(),A("ngIf",n.editGameMapId),_(),A("disabled",!n.gameMap.title||!n.gameMap.title.trim()),_(),Ie(" ",n.editGameMapId?"\u270F\uFE0F Atualizar GameMap":"\u{1F4BE} Salvar GameMap"," "),_(4),A("ngForOf",n.gameMaps),_(),A("ngIf",n.gameMaps.length===0)}}var H0=class e{constructor(t,n,i,r,o,a){this.adminService=t;this.authService=n;this.tipService=i;this.gameMapService=r;this.phaseService=o;this.notificationService=a}avatar={};character={id:void 0,name:"",filePath:""};phase={id:void 0,title:"",description:"",type:"BUILD",mode:"BASIC",maxTime:3600,character:{id:void 0,name:"",filePath:""},gameMap:{id:void 0,title:"",users:[],phases:[]},diagramInitial:void 0,correctDiagrams:[],characterDialogues:[],nodeType:"ACTIVITY"};tip={tip:""};newDialogue="";editingDialogueIndex=-1;avatars=[];characters=[];phases=[];tips=[];gameMaps=[];editAvatarId;editCharacterId;editPhaseId;editTipId;avatarImageFile;characterImageFile;avatarPreview;characterPreview;user;filesPath=ma.BASE_URL;diagramEditors;selectedGameMapId=0;selectedCharacterId=0;activeTab="avatars";tabs=[{id:"avatars",name:"Avatars",icon:"\u{1F464}"},{id:"characters",name:"Personagens",icon:"\u{1F3AD}"},{id:"gamemaps",name:"GameMaps",icon:"\u{1F5FA}\uFE0F"},{id:"phases",name:"Fases",icon:"\u{1F3AE}"},{id:"phase-transitions",name:"Transi\xE7\xF5es",icon:"\u27A1\uFE0F"},{id:"tips",name:"Dicas",icon:"\u{1F4A1}"}];editingCorrectDiagramIndex=-1;correctDiagramPreview="";gameMap={title:"",users:[],phases:[]};editGameMapId;outgoingTransitions=[];activityNextPhaseId=0;activityPreviousPhaseId=0;incomingTransitions=[];phaseTransitions=[];availablePhases=[];setActiveTab(t){this.activeTab=t,this.activeTab==="phases"?setTimeout(()=>{console.log("\u{1F527} Inicializando editores de diagrama..."),this.diagramEditors&&this.diagramEditors.length>0?(this.diagramEditors.forEach((n,i)=>{console.log(`\u{1F527} Inicializando editor ${i+1}/${this.diagramEditors.length}`),n.initializeJointJS()}),console.log(`\u2705 ${this.diagramEditors.length} editores inicializados`)):console.warn("\u26A0\uFE0F Nenhum DiagramEditor encontrado")},0):this.diagramEditors&&this.diagramEditors.length>0&&(console.log("\u{1F9F9} Limpando diagramas ao sair da tab de fases"),this.diagramEditors.forEach((n,i)=>{n.isInitialized()&&n.reinitialize()}))}getInitialDiagramEditor(){return this.diagramEditors?.toArray()[0]}getCorrectDiagramEditor(){return this.diagramEditors?.toArray()[1]}getAvatarImageUrl(t){return Yi.avatar(t)}getCharacterImageUrl(t){return Yi.character(t)}ngOnInit(){this.loadAll(),this.user=this.authService.getCurrentUser()}ngAfterViewInit(){}loadAll(){this.loadAvatars(),this.loadCharacters(),this.loadPhases(),this.loadTips(),this.loadGameMaps()}loadAvatars(){this.adminService.getAvatars().subscribe({next:t=>this.avatars=t,error:t=>console.error("Erro ao carregar avatars:",t)})}loadCharacters(){this.adminService.getCharacters().subscribe({next:t=>this.characters=t,error:t=>console.error("Erro ao carregar characters:",t)})}loadPhases(){this.adminService.getPhases().subscribe({next:t=>{this.phases=t},error:t=>console.error("Erro ao carregar phases:",t)})}getPhaseId(t){return t&&typeof t=="object"?t.id??0:typeof t=="number"?t:0}loadTips(){this.tipService.getAllTips().subscribe({next:t=>this.tips=t,error:t=>console.error("Erro ao carregar tips:",t)})}loadGameMaps(){this.adminService.getAllGameMaps().subscribe({next:t=>this.gameMaps=t,error:t=>console.error("Erro ao carregar gameMaps:",t)})}onSubmitAvatar(){if(!this.avatarImageFile&&!this.editAvatarId){alert("Por favor, selecione uma imagem para o avatar.");return}this.editAvatarId!=null?this.adminService.updateAvatar(this.editAvatarId,this.avatar,this.avatarImageFile).subscribe({next:()=>{this.loadAvatars(),this.resetAvatarForm()},error:t=>console.error("Erro ao atualizar avatar:",t)}):this.adminService.createAvatar(this.avatar,this.avatarImageFile).subscribe({next:()=>{this.loadAvatars(),this.resetAvatarForm()},error:t=>console.error("Erro ao criar avatar:",t)})}resetAvatarForm(){this.avatar={},this.avatarImageFile=void 0,this.avatarPreview=void 0,this.editAvatarId=void 0;let t=document.querySelector('input[name="avatarImage"]');t&&(t.value="")}onAvatarImageChange(t){let n=t.target?.files?.[0];if(n&&n.type.startsWith("image/")){this.avatarImageFile=n;let i=new FileReader;i.onload=r=>this.avatarPreview=r.target?.result,i.readAsDataURL(n)}}editAvatar(t){let n=this.avatars[t];this.avatar=ee({},n),this.editAvatarId=n.id,this.avatarPreview=n.filePath?this.getAvatarImageUrl(n.filePath):void 0}deleteAvatar(t){let n=this.avatars[t];n.id!=null&&this.adminService.deleteAvatar(n.id).subscribe({next:()=>this.loadAvatars(),error:i=>console.error("Erro ao deletar avatar:",i)})}onSubmitCharacter(){if(!this.characterImageFile&&!this.editCharacterId){alert("Por favor, selecione uma imagem para o personagem.");return}this.editCharacterId!=null?this.adminService.updateCharacter(this.editCharacterId,this.character,this.characterImageFile).subscribe({next:()=>{this.loadCharacters(),this.resetCharacterForm()},error:t=>console.error("Erro ao atualizar character:",t)}):this.adminService.createCharacter(this.character,this.characterImageFile).subscribe({next:()=>{this.loadCharacters(),this.resetCharacterForm()},error:t=>console.error("Erro ao criar character:",t)})}resetCharacterForm(){this.character={id:void 0,name:"",filePath:""},this.characterImageFile=void 0,this.characterPreview=void 0,this.editCharacterId=void 0;let t=document.querySelector('input[name="characterImage"]');t&&(t.value="")}onCharacterImageChange(t){let n=t.target?.files?.[0];if(n&&n.type.startsWith("image/")){this.characterImageFile=n;let i=new FileReader;i.onload=r=>this.characterPreview=r.target?.result,i.readAsDataURL(n)}}editCharacter(t){let n=this.characters[t];this.character=ee({},n),this.editCharacterId=n.id,this.characterPreview=n.filePath?this.getCharacterImageUrl(n.filePath):void 0}deleteCharacter(t){let n=this.characters[t];n.id!=null&&this.adminService.deleteCharacter(n.id).subscribe({next:()=>this.loadCharacters(),error:i=>console.error("Erro ao deletar character:",i)})}onSubmitPhase(){if(!this.selectedCharacterId||this.selectedCharacterId===0){alert("Por favor, selecione um personagem para a fase.");return}if(!this.selectedGameMapId||this.selectedGameMapId===0){alert("Por favor, selecione um GameMap para a fase.");return}let t=this.characters.find(r=>r.id===Number(this.selectedCharacterId)),n=this.gameMaps.find(r=>r.id===Number(this.selectedGameMapId));if(!t){this.notificationService.showError("Personagem selecionado n\xE3o encontrado.");return}if(!n){this.notificationService.showError("GameMap selecionado n\xE3o encontrado.");return}let i=ge(ee({},this.phase),{character:t,gameMap:n});console.log("Submitting phase",i),this.editPhaseId!=null?this.adminService.updatePhase(this.editPhaseId,i).subscribe({next:r=>{this.loadPhases(),r?.id&&(this.editPhaseId=r.id,this.selectedGameMapId=r.gameMap?.id||this.selectedGameMapId,this.loadOutgoingTransitions(r.id)),this.resetPhaseForm()},error:r=>console.error("Erro ao atualizar phase:",r)}):this.adminService.createPhase(i).subscribe({next:r=>{this.loadPhases(),r?.id&&(this.editPhaseId=r.id,this.selectedGameMapId=r.gameMap?.id||this.selectedGameMapId,this.loadIncomingTransitions(r.id),this.notificationService.showNotification("success","Fase criada. Configure as transi\xE7\xF5es (entradas) desta fase."),this.resetPhaseForm())},error:r=>console.error("Erro ao criar phase:",r)})}resetPhaseForm(){this.phase={id:void 0,title:"",description:"",type:"BUILD",mode:"BASIC",maxTime:3600,character:{id:void 0,name:"",filePath:""},gameMap:{id:void 0,title:"",users:[],phases:[]},diagramInitial:void 0,correctDiagrams:[],characterDialogues:[],nodeType:"ACTIVITY",diagramType:"USE_CASE"},this.selectedCharacterId=0,this.selectedGameMapId=0,this.editPhaseId=void 0,this.newDialogue="",this.editingDialogueIndex=-1,this.editingCorrectDiagramIndex=-1,this.diagramEditors&&this.diagramEditors.length>0&&(console.log("\u{1F504} Reinicializando ambos os editores (reset form)"),this.diagramEditors.forEach((t,n)=>{t.isInitialized()&&(console.log(`\u{1F504} Reinicializando editor ${n+1}`),t.reinitialize())})),this.outgoingTransitions=[],this.activityNextPhaseId=0}editPhase(t,n){let i;if(n)i=n;else if(t!=null)i=this.phases[t];else{console.error("editPhase requires either an index or a phase object");return}this.phase={id:i.id,title:i.title,description:i.description||"",type:i.type,mode:i.mode,maxTime:i.maxTime,character:{id:i.character?.id||0,name:i.character?.name||"",filePath:i.character?.filePath||""},gameMap:i.gameMap||{id:0,title:"",users:[],phases:[]},diagramInitial:i.diagramInitial||void 0,correctDiagrams:i.correctDiagrams||[],characterDialogues:i.characterDialogues||[],nodeType:i.nodeType||"ACTIVITY",diagramType:i.diagramType||"USE_CASE"},this.selectedCharacterId=i.character?.id||0,this.selectedGameMapId=i.gameMap?.id||0,this.editPhaseId=i.id,i.id&&this.loadOutgoingTransitions(i.id);let r=this.getInitialDiagramEditor();if(r?.isInitialized()&&i.diagramInitial)try{let o=JSON.parse(i.diagramInitial);o.cells&&(r.reinitialize(),setTimeout(()=>{r.graph&&r.graph.fromJSON(o)},100))}catch(o){console.warn("\u26A0\uFE0F Erro no JSON, reinicializando vazio:",o),r.reinitialize()}}deletePhase(t){let n=this.phases[t];n.id!=null&&this.adminService.deletePhase(n.id).subscribe({next:()=>this.loadPhases(),error:i=>console.error("Erro ao deletar phase:",i)})}onSubmitTip(){if(!this.tip.tip.trim()){this.notificationService.showError("Por favor, digite uma dica.");return}this.editTipId!=null?this.tipService.updateTip(this.editTipId,this.tip).subscribe({next:()=>{this.loadTips(),this.resetTipForm()},error:t=>console.error("Erro ao atualizar tip:",t)}):this.tipService.createTip(this.tip).subscribe({next:()=>{this.loadTips(),this.resetTipForm()},error:t=>console.error("Erro ao criar tip:",t)})}resetTipForm(){this.tip={tip:""},this.editTipId=void 0}editTip(t){let n=this.tips[t];this.tip={tip:n.tip},this.editTipId=n.id}deleteTip(t){let n=this.tips[t];n.id!=null&&this.tipService.deleteTip(n.id).subscribe({next:()=>this.loadTips(),error:i=>console.error("Erro ao deletar tip:",i)})}addDialogue(){this.newDialogue.trim()&&(this.editingDialogueIndex>=0?(this.phase.characterDialogues[this.editingDialogueIndex]=this.newDialogue.trim(),this.editingDialogueIndex=-1):this.phase.characterDialogues.push(this.newDialogue.trim()),this.newDialogue="")}editDialogue(t){this.newDialogue=this.phase.characterDialogues[t],this.editingDialogueIndex=t}removeDialogue(t){this.phase.characterDialogues.splice(t,1),this.editingDialogueIndex===t?this.cancelEditDialogue():this.editingDialogueIndex>t&&this.editingDialogueIndex--}cancelEditDialogue(){this.newDialogue="",this.editingDialogueIndex=-1}moveDialogueUp(t){if(t>0){let n=this.phase.characterDialogues[t];this.phase.characterDialogues[t]=this.phase.characterDialogues[t-1],this.phase.characterDialogues[t-1]=n,this.editingDialogueIndex===t?this.editingDialogueIndex=t-1:this.editingDialogueIndex===t-1&&(this.editingDialogueIndex=t)}}moveDialogueDown(t){if(t<this.phase.characterDialogues.length-1){let n=this.phase.characterDialogues[t];this.phase.characterDialogues[t]=this.phase.characterDialogues[t+1],this.phase.characterDialogues[t+1]=n,this.editingDialogueIndex===t?this.editingDialogueIndex=t+1:this.editingDialogueIndex===t+1&&(this.editingDialogueIndex=t)}}saveDiagramToPhase(){let t=this.getInitialDiagramEditor();if(!t?.isInitialized()){this.notificationService.showError("\u26A0\uFE0F Editor de diagrama inicial n\xE3o est\xE1 inicializado");return}let n=t.getCurrentDiagramJSON();n&&n.cells&&n.cells.length>0?(this.phase.diagramInitial=JSON.stringify(n),this.notificationService.showNotification("success","\u2705 Diagrama inicial salvo!")):this.notificationService.showError("\u26A0\uFE0F Adicione elementos ao diagrama antes de salvar")}clearDiagram(){let t=this.getInitialDiagramEditor();if(!t?.isInitialized()){this.notificationService.showError("\u26A0\uFE0F Editor de diagrama inicial n\xE3o est\xE1 dispon\xEDvel");return}confirm("\u{1F5D1}\uFE0F Limpar o diagrama inicial?")&&(t.reinitialize(),this.phase.diagramInitial=void 0,this.notificationService.showNotification("success","\u{1F5D1}\uFE0F Diagrama inicial limpo!"))}formatTime(t){if(!t)return"N/A";let n=Math.floor(t/3600),i=Math.floor(t%3600/60),r=t%60;return n>0?`${n}h ${i}m ${r}s`:i>0?`${i}m ${r}s`:`${r}s`}saveCorrectDiagram(){let t=this.getCorrectDiagramEditor();if(!t?.isInitialized()){alert("\u26A0\uFE0F Editor de diagramas corretos n\xE3o est\xE1 inicializado");return}let n=t.getCurrentDiagramJSON();if(!n||!n.cells||n.cells.length===0){alert("\u26A0\uFE0F Crie um diagrama antes de salv\xE1-lo como correto");return}try{let i=JSON.stringify(n);this.editingCorrectDiagramIndex>=0?(this.phase.correctDiagrams[this.editingCorrectDiagramIndex]=i,this.editingCorrectDiagramIndex=-1,alert("\u2705 Diagrama correto atualizado!")):(this.phase.correctDiagrams=this.phase.correctDiagrams||[],this.phase.correctDiagrams.push(i),alert("\u2705 Diagrama correto adicionado!")),t.reinitialize()}catch(i){console.error("\u274C Erro ao salvar diagrama correto:",i),alert("\u274C Erro ao salvar diagrama correto")}}editCorrectDiagram(t){try{let n=JSON.parse(this.phase.correctDiagrams[t]),i=this.getCorrectDiagramEditor();if(!i?.isInitialized()){alert("\u26A0\uFE0F Editor de diagramas corretos n\xE3o est\xE1 inicializado");return}i.reinitialize(),setTimeout(()=>{i.graph&&(i.graph.fromJSON(n),this.editingCorrectDiagramIndex=t)},100)}catch(n){console.error("\u274C Erro ao carregar diagrama para edi\xE7\xE3o:",n),alert("\u274C Erro ao carregar diagrama para edi\xE7\xE3o")}}cancelEditCorrectDiagram(){this.editingCorrectDiagramIndex=-1;let t=this.getCorrectDiagramEditor();t?.isInitialized()&&t.reinitialize()}clearCorrectDiagram(){let t=this.getCorrectDiagramEditor();if(!t?.isInitialized()){alert("\u26A0\uFE0F Editor de diagramas corretos n\xE3o est\xE1 dispon\xEDvel");return}confirm("\u{1F5D1}\uFE0F Limpar o editor de diagramas corretos?")&&(t.reinitialize(),this.editingCorrectDiagramIndex=-1,alert("\u{1F5D1}\uFE0F Editor de diagramas corretos limpo!"))}getCorrectDiagramPreview(t){try{let n=JSON.parse(t),i=n.cells?n.cells.length:0,r=n.cells?.filter(s=>s.type==="custom.Actor").length||0,o=n.cells?.filter(s=>s.type==="custom.UseCase").length||0,a=n.cells?.filter(s=>s.type?.includes("Link")||s.type?.includes("custom.")).length||0;return`\u{1F4CA} ${i} elementos (\u{1F464} ${r} atores, \u{1F3AF} ${o} casos de uso)`}catch{return"\u274C JSON inv\xE1lido"}}removeCorrectDiagram(t){confirm("\u{1F5D1}\uFE0F Remover este diagrama correto?")&&(this.phase.correctDiagrams.splice(t,1),this.editingCorrectDiagramIndex===t?this.cancelEditCorrectDiagram():this.editingCorrectDiagramIndex>t&&this.editingCorrectDiagramIndex--,alert("\u{1F5D1}\uFE0F Diagrama correto removido!"))}moveCorrectDiagramUp(t){if(t>0){let n=this.phase.correctDiagrams[t];this.phase.correctDiagrams[t]=this.phase.correctDiagrams[t-1],this.phase.correctDiagrams[t-1]=n,this.editingCorrectDiagramIndex===t?this.editingCorrectDiagramIndex=t-1:this.editingCorrectDiagramIndex===t-1&&(this.editingCorrectDiagramIndex=t)}}moveCorrectDiagramDown(t){if(t<this.phase.correctDiagrams.length-1){let n=this.phase.correctDiagrams[t];this.phase.correctDiagrams[t]=this.phase.correctDiagrams[t+1],this.phase.correctDiagrams[t+1]=n,this.editingCorrectDiagramIndex===t?this.editingCorrectDiagramIndex=t+1:this.editingCorrectDiagramIndex===t+1&&(this.editingCorrectDiagramIndex=t)}}onSubmitGameMap(){if(!this.gameMap.title.trim()){alert("Por favor, digite um t\xEDtulo para o GameMap.");return}if(this.editGameMapId!=null)this.gameMapService.updateGameMap(this.editGameMapId,this.gameMap).subscribe({next:()=>{this.loadGameMaps(),this.resetGameMapForm(),alert("\u2705 GameMap atualizado com sucesso!")},error:t=>{console.error("Erro ao atualizar gameMap:",t),alert("\u274C Erro ao atualizar GameMap")}});else{let t={title:this.gameMap.title.trim(),users:[],phases:[],createdAt:new Date().toISOString(),createdByUser:this.user?this.user:void 0};this.gameMapService.createGameMap(t).subscribe({next:()=>{this.loadGameMaps(),this.resetGameMapForm(),alert("\u2705 GameMap criado com sucesso!")},error:n=>{console.error("Erro ao criar gameMap:",n),alert("\u274C Erro ao criar GameMap")}})}}resetGameMapForm(){this.gameMap={title:"",users:[],phases:[]},this.editGameMapId=void 0}editGameMap(t){let n=this.gameMaps[t];this.gameMap={id:n.id,title:n.title,users:n.users||[],phases:n.phases||[],createdAt:n.createdAt,createdByUser:n.createdByUser},this.editGameMapId=n.id}deleteGameMap(t){let n=this.gameMaps[t];n.id!=null&&confirm(`\u{1F5D1}\uFE0F Remover o GameMap "${n.title}"?

Aten\xE7\xE3o: Isso pode afetar as fases vinculadas.`)&&this.gameMapService.deleteGameMap(n.id).subscribe({next:()=>{this.loadGameMaps(),alert("\u{1F5D1}\uFE0F GameMap removido com sucesso!")},error:i=>{console.error("Erro ao deletar gameMap:",i),alert("\u274C Erro ao remover GameMap")}})}formatDate(t){if(!t)return"N/A";try{let n=new Date(t);return n.toLocaleDateString("pt-BR")+" \xE0s "+n.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch{return"Data inv\xE1lida"}}loadOutgoingTransitions(t){this.outgoingTransitions=[],this.activityNextPhaseId=0,this.phaseService.getTransitionsByFromPhase(t).subscribe({next:n=>{this.outgoingTransitions=(n||[]).map(i=>({id:i.id,toPhaseId:this.getPhaseId(i.toPhase),optionText:i.optionText??null})),(this.phase.nodeType||"ACTIVITY")==="ACTIVITY"&&(this.activityNextPhaseId=this.outgoingTransitions[0]?.toPhaseId||0)},error:n=>{console.error("Erro ao carregar transi\xE7\xF5es de sa\xEDda:",n),this.outgoingTransitions=[],this.activityNextPhaseId=0}})}loadIncomingTransitions(t){this.incomingTransitions=[],this.activityPreviousPhaseId=0,this.phaseService.getTransitionsByToPhase(t).subscribe({next:n=>{this.incomingTransitions=(n||[]).map(i=>({id:i.id,fromPhaseId:this.getPhaseId(i.fromPhase),optionText:i.optionText??null})),(this.phase.nodeType||"ACTIVITY")==="ACTIVITY"&&(this.activityPreviousPhaseId=this.incomingTransitions[0]?.fromPhaseId||0)},error:n=>{console.error("Erro ao carregar transi\xE7\xF5es de entrada:",n),this.incomingTransitions=[],this.activityPreviousPhaseId=0}})}saveDecisionTransitions(){if(!this.editPhaseId)return;let t=[];this.outgoingTransitions.forEach(n=>{let i=n.toPhaseId||0,r=(n.optionText||"").trim()||null;n.id?t.push(this.phaseService.updateTransition(n.id,{fromPhase:this.editPhaseId,toPhase:i>0?i:null,optionText:r}).toPromise()):(i>0||r)&&t.push(this.phaseService.createTransition({fromPhase:this.editPhaseId,toPhase:i>0?i:null,optionText:r}).toPromise())}),Promise.allSettled(t).then(()=>this.loadIncomingTransitions(this.editPhaseId))}getPreviousPhaseTitle(t){let n=this.phases.find(o=>o.id===t);if(!n||!n.incomingTransitions)return null;let i=n.incomingTransitions[0],r=this.phases.find(o=>o.id===i);return console.log("Previou Phase",r),r?.title||null}getNextPhaseTitle(t){let n=this.phases.find(o=>o.id===t);if(!n||!n.outgoingTransitions)return null;let i=n.outgoingTransitions[0];return this.phases.find(o=>o.id===i)?.title||null}loadPhaseTransitions(){if(!this.selectedGameMapId||this.selectedGameMapId===0){this.phaseTransitions=[],this.availablePhases=[];return}this.availablePhases=this.phases.filter(t=>t.gameMap?.id===Number(this.selectedGameMapId)),this.gameMapService.getPhaseTransitionsByGameMapId(this.selectedGameMapId).subscribe({next:t=>{this.phaseTransitions=t.map(n=>({id:n.id,fromPhaseId:n.fromPhase?.id||0,toPhaseId:n.toPhase?.id||0,optionText:n.optionText||null}))},error:t=>console.error("Erro ao carregar transi\xE7\xF5es:",t)})}addTransitionRow(){this.phaseTransitions.push({fromPhaseId:0,toPhaseId:0,optionText:""})}removeTransitionRow(t){let n=this.phaseTransitions[t];n?.id?this.phaseService.deleteTransition(n.id).subscribe({next:()=>this.loadPhaseTransitions(),error:i=>console.error("Erro ao deletar transi\xE7\xE3o:",i)}):this.phaseTransitions.splice(t,1)}savePhaseTransitions(){let t=[];this.phaseTransitions.forEach(n=>{let i={fromPhase:n.fromPhaseId>0?n.fromPhaseId:null,toPhase:n.toPhaseId>0?n.toPhaseId:null,optionText:n.optionText?.trim()||null};n.id?t.push(this.phaseService.updateTransition(n.id,i).toPromise()):n.fromPhaseId>0&&n.toPhaseId>0&&t.push(this.phaseService.createTransition(i).toPromise())}),Promise.allSettled(t).then(()=>this.loadPhaseTransitions())}updateAvailablePhases(t){let n=this.phaseTransitions[t];n&&(this.phaseTransitions=this.phaseTransitions.map((i,r)=>r===t?ge(ee({},i),{fromPhaseId:n.fromPhaseId,toPhaseId:n.toPhaseId}):i))}isDecisionPhase(t){return this.phases.find(i=>i.id===t)?.nodeType==="DECISION"}static \u0275fac=function(n){return new(n||e)(G(j0),G(fi),G(yl),G(Gr),G(gl),G(Vn))};static \u0275cmp=Se({type:e,selectors:[["app-admin-panel"]],viewQuery:function(n,i){if(n&1&&ft(Ts,5),n&2){let r;dt(r=ut())&&(i.diagramEditors=r)}},decls:11,vars:7,consts:[["avatarForm","ngForm"],["characterForm","ngForm"],["phaseForm","ngForm"],["diagramEditorInitial",""],["diagramEditorCorrect",""],["tipForm","ngForm"],["gameMapForm","ngForm"],[1,"admin-panel"],[1,"tabs-navigation"],["class","tab-button",3,"active","click",4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"tab-button",3,"click"],[1,"card"],[1,"card-header"],[1,"card-content"],[1,"form",3,"ngSubmit"],[1,"file-input-container"],[1,"file-label"],["type","file","name","avatarImage","accept","image/*",3,"change"],[1,"file-button"],["class","image-preview",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-secondary",3,"click"],[1,"items-grid"],["class","item-card",4,"ngFor","ngForOf"],[1,"image-preview"],["alt","Preview",3,"src"],[1,"item-card"],[1,"item-image"],["alt","Avatar",3,"src"],[1,"item-actions"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"form-group"],["type","text","name","name","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","file","name","characterImage","accept","image/*",3,"change"],[3,"src","alt"],[1,"item-info"],["name","nodeType","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","ACTIVITY"],["value","DECISION"],["type","text","name","title","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","description","rows","3",1,"form-textarea",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["class","form-row",4,"ngIf"],["name","characterId","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["name","gameMapId","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"phases-list"],["class","phase-card expanded",4,"ngFor","ngForOf"],["name","diagramType",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"form-row"],["name","type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","BUILD"],["value","FIX"],["value","COMPLETE"],["name","mode","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","BASIC"],["value","INTERMEDIATE"],["value","ADVANCED"],["type","number","name","maxTime","required","","min","60",1,"form-input",3,"ngModelChange","ngModel"],[3,"value"],[1,"dialogue-input-container"],[1,"dialogue-input-row"],["name","newDialogue","placeholder","Digite uma fala do personagem...","rows","2",1,"form-textarea","dialogue-input",3,"ngModelChange","ngModel"],[1,"dialogue-buttons"],["type","button",1,"btn-dialogue","add",3,"click","disabled"],["type","button","class","btn-dialogue cancel",3,"click",4,"ngIf"],["class","dialogues-list",4,"ngIf"],["class","dialogues-counter",4,"ngIf"],["type","button",1,"btn-dialogue","cancel",3,"click"],[1,"dialogues-list"],["class","dialogue-item",3,"editing",4,"ngFor","ngForOf"],[1,"dialogue-item"],[1,"dialogue-number"],[1,"dialogue-content"],[1,"dialogue-actions"],["type","button","title","Mover para cima",1,"btn-dialogue","move",3,"click","disabled"],["type","button","title","Mover para baixo",1,"btn-dialogue","move",3,"click","disabled"],["type","button","title","Editar fala",1,"btn-dialogue","edit",3,"click"],["type","button","title","Remover fala",1,"btn-dialogue","remove",3,"click"],[1,"dialogues-counter"],[1,"diagram-editor-section"],[1,"diagram-controls"],["type","button",1,"btn-diagram","save",3,"click"],["type","button",1,"btn-diagram","clear",3,"click"],[3,"diagramType"],["type","button","class","btn-diagram cancel",3,"click",4,"ngIf"],["class","editing-indicator",4,"ngIf"],["class","correct-diagrams-list",4,"ngIf"],["class","correct-diagrams-counter",4,"ngIf"],["type","button",1,"btn-diagram","cancel",3,"click"],[1,"editing-indicator"],[1,"indicator-text"],[1,"correct-diagrams-list"],["class","correct-diagram-item",3,"editing",4,"ngFor","ngForOf"],[1,"correct-diagram-item"],[1,"diagram-number"],[1,"diagram-info"],[1,"diagram-preview"],[1,"diagram-actions"],["type","button","title","Mover para cima",1,"btn-diagram-action","move",3,"click","disabled"],["type","button","title","Mover para baixo",1,"btn-diagram-action","move",3,"click","disabled"],["type","button","title","Editar diagrama",1,"btn-diagram-action","edit",3,"click"],["type","button","title","Remover diagrama",1,"btn-diagram-action","remove",3,"click"],[1,"correct-diagrams-counter"],[1,"phase-card","expanded"],[1,"phase-header"],[1,"phase-badges"],[1,"phase-details"],[1,"detail-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],["class","phase-description",4,"ngIf"],[1,"phase-description"],[1,"form-select",3,"ngModelChange","change","ngModel"],["class","form-group","style","margin-top: 20px;",4,"ngIf"],["class","items-grid transitions-list",4,"ngIf"],["class","transition-actions",4,"ngIf"],[1,"form-group",2,"margin-top","20px"],["type","button",1,"btn-primary",3,"click"],[1,"items-grid","transitions-list"],["class","item-card transition-card",4,"ngFor","ngForOf"],[1,"item-card","transition-card"],[1,"transition-row"],[1,"form-select",3,"ngModelChange","ngModel","name"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"item-actions","transition-card-actions"],["type","button","title","Remover",1,"btn-delete",3,"click"],[3,"ngValue","disabled"],["type","text","placeholder","Ex.: Escolher caminho A",1,"form-input",3,"ngModelChange","ngModel","name"],[1,"transition-actions"],["name","tip","required","","placeholder","Digite aqui a dica para os jogadores...",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"tips-list"],["class","tip-card",4,"ngFor","ngForOf"],[1,"tip-card"],[1,"tip-icon"],[1,"tip-content"],[1,"tip-id"],["type","text","name","title","required","","placeholder","Digite o nome do GameMap...",1,"form-input",3,"ngModelChange","ngModel"],[1,"gamemaps-list"],["class","gamemap-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"gamemap-info"],[1,"info-item"],["class","info-item",4,"ngIf"],[1,"gamemap-card"],[1,"gamemap-header"],[1,"gamemap-title"],[1,"gamemap-id"],[1,"gamemap-stats"],[1,"stat-badge","users"],[1,"stat-badge","phases"],[1,"gamemap-details"],[1,"detail-row"],["class","detail-item",4,"ngIf"],["title","Editar GameMap",1,"btn-edit",3,"click"],["title","Remover GameMap",1,"btn-delete",3,"click"],[1,"empty-state"],[1,"empty-icon"]],template:function(n,i){n&1&&(y(0,"div",7)(1,"h1"),I(2,"\u{1F6E0}\uFE0F Painel do Administrador"),v(),y(3,"div",8),ne(4,h$,2,4,"button",9),v(),ne(5,m$,19,4,"div",10)(6,v$,23,5,"div",10)(7,V$,49,16,"div",10)(8,W$,15,5,"div",10)(9,Y$,17,4,"div",10)(10,iG,19,6,"div",10),v()),n&2&&(_(4),A("ngForOf",i.tabs),_(),A("ngIf",i.activeTab==="avatars"),_(),A("ngIf",i.activeTab==="characters"),_(),A("ngIf",i.activeTab==="phases"),_(),A("ngIf",i.activeTab==="phase-transitions"),_(),A("ngIf",i.activeTab==="tips"),_(),A("ngIf",i.activeTab==="gamemaps"))},dependencies:[Ze,qt,_t,Bc,Fc,x1,w1,Nr,Vv,Vc,Ko,Nc,Xd,jv,os,Yd,Ts],styles:['.admin-panel[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:2rem;background:linear-gradient(135deg,#667eea,#764ba2);height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow-y:auto}.admin-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:2.5rem;margin-bottom:2rem;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;margin-bottom:2rem;box-shadow:0 8px 32px #0000001a;overflow:hidden;transition:transform .3s ease}.card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4facfe,#00f2fe);padding:1.5rem;color:#fff}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.card-content[_ngcontent-%COMP%]{padding:2rem}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:2rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:.9rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e1e5e9;border-radius:8px;font-size:1rem;transition:border-color .3s ease}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4facfe;box-shadow:0 0 0 3px #4facfe1a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.file-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.file-label[_ngcontent-%COMP%]{cursor:pointer}.file-label[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-button[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;background:linear-gradient(45deg,#ff6b6b,#feca57);color:#fff;border-radius:25px;font-weight:600;transition:transform .3s ease}.file-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.image-preview[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #00000026}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#667eea,#764ba2);color:#fff;border:none;padding:1rem 2rem;border-radius:25px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;align-self:flex-start}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem;margin-top:1.5rem}.item-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:1rem;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease}.item-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.item-image[_ngcontent-%COMP%]{width:100%;height:120px;border-radius:8px;overflow:hidden;margin-bottom:1rem}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333;font-size:1.1rem}.item-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#666;font-size:.9rem;line-height:1.4}.price[_ngcontent-%COMP%]{font-weight:700;color:#28a745;font-size:1.1rem}.item-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;justify-content:center}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:.5rem;border:none;border-radius:8px;cursor:pointer;font-size:1.2rem;transition:all .3s ease;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-edit[_ngcontent-%COMP%]:hover{background:#138496;transform:scale(1.1)}.btn-delete[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background:#c82333;transform:scale(1.1)}.phases-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem}.phase-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:#f8f9fa;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease}.phase-card[_ngcontent-%COMP%]:hover{transform:translate(4px)}.phase-type[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:20px;color:#fff;font-weight:600;margin-right:1rem;min-width:100px;text-align:center}.type-build[_ngcontent-%COMP%]{background:#28a745}.type-fix[_ngcontent-%COMP%]{background:#ffc107;color:#333}.type-complete[_ngcontent-%COMP%]{background:#17a2b8}.phase-info[_ngcontent-%COMP%]{flex:1}.phase-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333;font-size:1.2rem}.phase-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.4}.tips-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem}.tip-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;background:#fff3cd;border:1px solid #ffeaa7;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #ffc1071a;transition:all .3s ease}.tip-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ffc10733}.tip-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:1rem;flex-shrink:0}.tip-content[_ngcontent-%COMP%]{flex:1}.tip-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#856404;line-height:1.5;font-size:1rem}.tip-id[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem;font-style:italic}.phase-card.expanded[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.phase-header[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;flex-wrap:wrap}.phase-mode[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:15px;font-size:.8rem;font-weight:600;text-align:center;min-width:80px}.mode-basic[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.mode-intermediate[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.mode-advanced[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.phase-status[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:15px;font-size:.8rem;font-weight:600;text-align:center;min-width:100px}.status-locked[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.status-available[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.status-completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.phase-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.8rem;margin-top:1rem;padding:1rem;background:#ffffff80;border-radius:8px}.detail-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#495057;font-size:.9rem}.badge[_ngcontent-%COMP%]{padding:.2rem .6rem;border-radius:12px;font-size:.8rem;font-weight:600}.badge.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.dialogue-input-container[_ngcontent-%COMP%]{margin-top:.5rem}.dialogue-input-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.dialogue-input[_ngcontent-%COMP%]{flex:1;resize:vertical}.dialogue-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.btn-dialogue[_ngcontent-%COMP%]{padding:.5rem;border:none;border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .2s ease;min-width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-dialogue.add[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-dialogue.add[_ngcontent-%COMP%]:hover:not(:disabled){background:#218838}.btn-dialogue.cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-dialogue.cancel[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-dialogue[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.dialogues-list[_ngcontent-%COMP%]{margin-top:1rem;border:2px solid #e1e5e9;border-radius:8px;overflow:hidden}.dialogue-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:1rem;border-bottom:1px solid #e1e5e9;background:#fff;transition:all .3s ease}.dialogue-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dialogue-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.dialogue-item.editing[_ngcontent-%COMP%]{background:#e3f2fd;border-left:4px solid #2196f3}.dialogue-number[_ngcontent-%COMP%]{width:30px;height:30px;background:#667eea;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.9rem;flex-shrink:0;margin-right:1rem}.dialogue-content[_ngcontent-%COMP%]{flex:1;margin-right:1rem}.dialogue-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.4;color:#333;word-wrap:break-word}.dialogue-actions[_ngcontent-%COMP%]{display:flex;gap:.25rem;flex-shrink:0}.btn-dialogue.move[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;width:32px;height:32px;font-size:.8rem}.btn-dialogue.move[_ngcontent-%COMP%]:hover:not(:disabled){background:#138496}.btn-dialogue.edit[_ngcontent-%COMP%]{background:#ffc107;color:#333;width:32px;height:32px}.btn-dialogue.edit[_ngcontent-%COMP%]:hover{background:#e0a800}.btn-dialogue.remove[_ngcontent-%COMP%]{background:#dc3545;color:#fff;width:32px;height:32px}.btn-dialogue.remove[_ngcontent-%COMP%]:hover{background:#c82333}.dialogues-counter[_ngcontent-%COMP%]{margin-top:.5rem;text-align:center;color:#6c757d;font-style:italic}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none;padding:1rem 2rem;border-radius:25px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-left:1rem}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px)}.diagram-editor-section[_ngcontent-%COMP%]{border:2px solid #e1e5e9;border-radius:8px;padding:1rem;background:#f8f9fa;margin-top:.5rem;height:500px;display:flex;flex-direction:column;gap:1rem;overflow:hidden}.diagram-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-diagram[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s}.btn-diagram.save[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-diagram.save[_ngcontent-%COMP%]:hover{background:#218838}.btn-diagram.clear[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-diagram.clear[_ngcontent-%COMP%]:hover{background:#c82333}diagram-editor[_ngcontent-%COMP%]{width:100%;height:100%}.tabs-navigation[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:.5rem;margin-bottom:2rem;box-shadow:0 8px 32px #0000001a;display:flex;gap:.5rem;overflow-x:auto}.tab-button[_ngcontent-%COMP%]{flex:1;padding:1rem 1.5rem;border:none;border-radius:12px;background:transparent;color:#6c757d;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;white-space:nowrap;min-width:120px}.tab-button[_ngcontent-%COMP%]:hover{background:#f8f9fa;color:#495057;transform:translateY(-2px)}.tab-button.active[_ngcontent-%COMP%]{background:linear-gradient(45deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea66}.tab-button.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-.5rem;left:50%;transform:translate(-50%);width:40px;height:3px;background:linear-gradient(45deg,#667eea,#764ba2);border-radius:2px}.btn-diagram.cancel[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-diagram.cancel[_ngcontent-%COMP%]:hover{background:#5a6268}.editing-indicator[_ngcontent-%COMP%]{background:#e3f2fd;border:1px solid #2196f3;border-radius:6px;padding:.75rem;margin-bottom:1rem;text-align:center}.indicator-text[_ngcontent-%COMP%]{color:#1976d2;font-weight:600;font-size:.9rem}.correct-diagrams-list[_ngcontent-%COMP%]{margin-top:1.5rem;border:2px solid #e1e5e9;border-radius:8px;overflow:hidden}.correct-diagrams-list[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{background:#f8f9fa;margin:0;padding:1rem;color:#333;border-bottom:1px solid #e1e5e9}.correct-diagram-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-bottom:1px solid #e1e5e9;background:#fff;transition:all .3s ease}.correct-diagram-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.correct-diagram-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.correct-diagram-item.editing[_ngcontent-%COMP%]{background:#e3f2fd;border-left:4px solid #2196f3}.diagram-number[_ngcontent-%COMP%]{width:35px;height:35px;background:#667eea;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;flex-shrink:0;margin-right:1rem}.diagram-info[_ngcontent-%COMP%]{flex:1;margin-right:1rem}.diagram-preview[_ngcontent-%COMP%]{color:#555;font-size:.95rem;line-height:1.4}.diagram-actions[_ngcontent-%COMP%]{display:flex;gap:.25rem;flex-shrink:0}.btn-diagram-action[_ngcontent-%COMP%]{padding:.5rem;border:none;border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .2s ease;width:36px;height:36px;display:flex;align-items:center;justify-content:center}.btn-diagram-action.move[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-diagram-action.move[_ngcontent-%COMP%]:hover:not(:disabled){background:#138496;transform:scale(1.1)}.btn-diagram-action.edit[_ngcontent-%COMP%]{background:#ffc107;color:#333}.btn-diagram-action.edit[_ngcontent-%COMP%]:hover{background:#e0a800;transform:scale(1.1)}.btn-diagram-action.remove[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.btn-diagram-action.remove[_ngcontent-%COMP%]:hover{background:#c82333;transform:scale(1.1)}.btn-diagram-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}.correct-diagrams-counter[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;color:#6c757d;font-style:italic}.form-help[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;font-style:italic;margin-top:.25rem;display:block}.badge.parent-phase[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem}@media (max-width: 768px){.detail-grid[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.admin-panel[_ngcontent-%COMP%]{padding:1rem;margin:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.items-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.phase-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.phase-type[_ngcontent-%COMP%]{margin-right:0;margin-bottom:1rem}.phase-header[_ngcontent-%COMP%]{justify-content:center}.phase-details[_ngcontent-%COMP%]{grid-template-columns:1fr}.tip-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.tip-icon[_ngcontent-%COMP%]{margin-right:0;margin-bottom:.5rem}.dialogue-input-row[_ngcontent-%COMP%]{flex-direction:column}.dialogue-buttons[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-start}.dialogue-item[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.dialogue-actions[_ngcontent-%COMP%]{justify-content:center}.tabs-navigation[_ngcontent-%COMP%]{padding:.25rem;gap:.25rem}.tab-button[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.9rem;min-width:100px}}.gamemap-info[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#495057;font-size:.9rem}.gamemaps-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:2rem}.gamemap-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #0000001a;transition:all .3s ease;border:1px solid #e9ecef}.gamemap-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.gamemap-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem;flex-wrap:wrap;gap:1rem}.gamemap-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#333;font-size:1.3rem;font-weight:600}.gamemap-id[_ngcontent-%COMP%]{background:#e9ecef;color:#6c757d;padding:.25rem .5rem;border-radius:12px;font-size:.8rem;font-weight:500}.gamemap-stats[_ngcontent-%COMP%]{display:flex;gap:.5rem}.stat-badge[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:15px;font-size:.85rem;font-weight:600;text-align:center;min-width:60px}.stat-badge.users[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.stat-badge.phases[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.gamemap-details[_ngcontent-%COMP%]{margin:1rem 0}.detail-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;font-size:.9rem}.detail-value[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;color:#6c757d}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#495057}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;line-height:1.5}@media (max-width: 768px){.gamemap-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.gamemap-stats[_ngcontent-%COMP%]{justify-content:center}.detail-row[_ngcontent-%COMP%], .gamemap-info[_ngcontent-%COMP%]{grid-template-columns:1fr}}.transitions-section[_ngcontent-%COMP%]{border:2px dashed #e1e5e9;border-radius:12px;padding:1rem;background:#fbfcfe}.transitions-section[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:block;font-weight:700;color:#39424e;margin-bottom:.5rem}.activity-transition[_ngcontent-%COMP%], .decision-transitions[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:10px;padding:1rem}.transition-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.transitions-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.transition-card[_ngcontent-%COMP%]{position:relative;border:1px solid #e9ecef;background:#fff;box-shadow:0 6px 16px #0000000f;transition:transform .2s ease,box-shadow .2s ease;padding-bottom:.5rem}.transition-card[_ngcontent-%COMP%]:before{content:"\\27a1\\fe0f";position:absolute;left:10px;top:10px;opacity:.7}.transition-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 22px #00000014}.transition-card-actions[_ngcontent-%COMP%]{justify-content:flex-end;margin-top:.25rem}.transition-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1.5fr;gap:.75rem;padding-left:2rem}.transition-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#495057}.activity-transition[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{max-width:420px}.decision-transitions[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%], .decision-transitions[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{background:#fcfcff}.decision-transitions[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus, .decision-transitions[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1f}.transitions-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border-radius:10px;padding-inline:1.25rem}@media (max-width: 768px){.transition-row[_ngcontent-%COMP%]{grid-template-columns:1fr;padding-left:1.75rem}.activity-transition[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{max-width:100%}}.transition-card[_ngcontent-%COMP%]{border:1px solid #e9ecef;background:#fff;box-shadow:0 6px 16px #0000000f;padding:1rem;margin-bottom:1rem;border-radius:8px}.transition-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.transition-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:flex-end;gap:1rem}']})};var rG=["swiperContainer"],p6=e=>({disabled:e});function oG(e,t){e&1&&(y(0,"h1"),I(1,"Complete o desafio"),v())}function aG(e,t){e&1&&(y(0,"h1"),I(1,"Tome sua decis\xE3o"),v())}function sG(e,t){e&1&&(y(0,"div",27),I(1," COMPLETO "),v())}function cG(e,t){e&1&&(y(0,"div",28),I(1," FASE ATUAL "),v())}function lG(e,t){if(e&1&&(y(0,"div",29)(1,"div",30),Z(2,"lucide-icon",31),y(3,"span"),I(4),v()(),y(5,"div",32)(6,"span"),I(7),v(),Z(8,"lucide-icon",33),v()()),e&2){let n=V().$implicit;_(2),A("size",24),_(2),Ie("",n.accuracy,"%"),_(3),fe(n.reputation),_(),A("size",20)}}function dG(e,t){if(e&1){let n=le();so(0),y(1,"button",35),q("click",function(){let r=H(n).$implicit,o=V(2).$implicit,a=V(2);return U(a.onDecisionChoice(o,r))}),I(2),v(),co()}if(e&2){let n=t.$implicit,i=V(2).$implicit,r=V(2);_(),A("disabled",r.isDecisionOptionDisabled(i,n))("ngClass",pc(3,p6,r.isDecisionOptionDisabled(i,n))),_(),Ie(" ",n.optionText||"Escolher"," ")}}function uG(e,t){if(e&1&&(y(0,"div"),ne(1,dG,3,5,"ng-container",34),v()),e&2){let n=V().$implicit,i=V(2);_(),A("ngForOf",i.outgoingMapForPhase(n.phase.id))}}function hG(e,t){if(e&1){let n=le();y(0,"button",35),q("click",function(){H(n);let r=V().$implicit,o=V(2);return U(o.openGamePhase(r))}),I(1),v()}if(e&2){let n=V().$implicit;A("disabled",n.status!=="AVAILABLE"&&n.status!=="COMPLETED")("ngClass",pc(3,p6,n.status!=="AVAILABLE"&&n.status!=="COMPLETED")),_(),Ie(" ",n.status==="COMPLETED"?"Jogar novamente":"Jogar"," ")}}function pG(e,t){if(e&1&&(y(0,"div",16),ne(1,oG,2,0,"h1",17)(2,aG,2,0,"h1",17),y(3,"div",18),ne(4,sG,2,0,"div",19)(5,cG,2,0,"div",20),y(6,"div",21)(7,"div",22)(8,"h3"),I(9),v(),y(10,"p"),I(11),v(),ne(12,lG,9,4,"div",23),v(),y(13,"div",24),ne(14,uG,2,1,"div",17)(15,hG,2,5,"button",25),v()(),Z(16,"img",26),v()()),e&2){let n=t.$implicit,i=V(2);_(),A("ngIf",n.phase.nodeType=="ACTIVITY"),_(),A("ngIf",n.phase.nodeType=="DECISION"),_(2),A("ngIf",n.status==="COMPLETED"&&n.current===!1),_(),A("ngIf",n.current===!0),_(4),fe(n.phase.title),_(2),fe(n.phase.description),_(),A("ngIf",n.phase.nodeType!=="DECISION"),_(2),A("ngIf",n.phase.nodeType==="DECISION"),_(),A("ngIf",n.phase.nodeType!=="DECISION"),_(),A("src",i.getCharacterImageUrl(n),Ot)("alt",n.phase.character.name)}}function fG(e,t){if(e&1&&(y(0,"div",14),ne(1,pG,17,11,"div",15),v()),e&2){let n=V();_(),A("ngForOf",n.phaseUsersAvailable)}}var U0=class e{constructor(t,n,i,r,o,a,s,c,l,u,d,h){this.authService=t;this.platformId=n;this.dataService=i;this.userService=r;this.router=o;this.route=a;this.gameMapService=s;this.phaseUserService=c;this.notificationService=l;this.ngZone=u;this.cd=d;this.appContextService=h}userData;userLoadError="";store;userDataSubscription;phaseUsers=[];phaseTransitions=[];gameMapId=0;userId=0;isLoadingPhases=!1;phasesError="";isAssociatingUser=!1;associationError="";phaseUsersAvailable=[];idToPhaseUser=new Map;outgoingMap=new Map;incomingCount=new Map;swiperContainer;swiper;onMouseMove(t){if(pt(this.platformId)){let n=document.getElementById("container");if(n){let i=(t.clientX/window.innerWidth-.5)*20,r=(t.clientY/window.innerHeight-.5)*20;n.style.backgroundPosition=`calc(50% + ${i}px) calc(50% + ${r}px)`}}}ngOnInit(){if(pt(this.platformId)){if(this.gameMapId=Number(this.route.snapshot.paramMap.get("id")),!this.gameMapId||this.gameMapId<=0){console.error("\u274C GameMapId inv\xE1lido:",this.gameMapId),this.router.navigate(["/select-map"]);return}this.appContextService.setContext("game-map",void 0,this.gameMapId);let t=this.userService.getCurrentUser();t&&t.id?(this.userId=t.id,this.userData=t,this.userDataSubscription=this.dataService.userData$.subscribe(n=>{n&&(this.userData=n)}),this.associateUserToGameMap()):(console.warn("\u26A0\uFE0F Usu\xE1rio n\xE3o encontrado no localStorage"),this.router.navigate(["/login"]))}}associateUserToGameMap(){if(!this.gameMapId||!this.userId){console.error("\u274C GameMapId ou UserId n\xE3o dispon\xEDvel para associa\xE7\xE3o");return}this.isAssociatingUser=!0,this.associationError="",this.gameMapService.setGameMapToUser(this.gameMapId,this.userId).subscribe({next:t=>{this.isAssociatingUser=!1,this.loadUserData(this.userId),this.loadPhaseUsers()},error:t=>{console.error("\u274C Erro ao associar usu\xE1rio ao GameMap:",t),this.isAssociatingUser=!1,t.status===204?(console.error("\u{1F4DD} GameMap ou usu\xE1rio n\xE3o encontrado"),this.associationError="GameMap ou usu\xE1rio n\xE3o encontrado",this.loadUserData(this.userId),this.loadPhaseUsers()):t.status===400?(console.error("\u26A0\uFE0F Dados inv\xE1lidos - usu\xE1rio pode j\xE1 estar associado"),this.associationError="Usu\xE1rio pode j\xE1 estar associado ao GameMap",this.loadUserData(this.userId),this.loadPhaseUsers()):(console.error("\u{1F525} Erro interno do servidor na associa\xE7\xE3o"),this.associationError="Erro interno do servidor",this.loadUserData(this.userId),this.loadPhaseUsers())}})}loadPhaseUsers(){if(!this.gameMapId||!this.userId){console.error("\u274C GameMapId ou UserId n\xE3o dispon\xEDvel:",{gameMapId:this.gameMapId,userId:this.userId});return}this.isLoadingPhases=!0,this.phasesError="",this.gameMapService.getAllPhasesByUser(this.gameMapId,this.userId).subscribe({next:t=>qn(this,null,function*(){this.phaseUsers=t,this.isLoadingPhases=!1,yield this.fetchPhaseTransitions(),yield this.buildPhaseUsersAvailable(),this.initSwiper()}),error:t=>{console.error("\u274C Erro ao carregar fases:",t),this.isLoadingPhases=!1,t.status===404?this.phasesError="GameMap n\xE3o encontrado ou usu\xE1rio sem fases":this.phasesError="Erro ao carregar fases do mapa"}})}loadPhaseTransitions(){this.gameMapService.getPhaseTransitionsByGameMapId(this.gameMapId).subscribe({next:t=>{this.phaseTransitions=t,console.log("Transi\xE7\xF5es carregadas:",this.phaseTransitions)},error:t=>console.error("Erro ao carregar transi\xE7\xF5es:",t)})}isPhaseUnlocked(t){return t.status==="AVAILABLE"||t.status==="COMPLETED"}isPhaseFinished(t){return t.status==="COMPLETED"}isCurrentPhase(t){return t.status==="AVAILABLE"}calculateAccuracy(t){return t.status==="COMPLETED"?Math.min(Math.round(t.reputation/200*100),100):0}getCharacterImagePath(t){return`http://localhost:9090/uploads/characters/${t.phase.character.filePath}`}setGameMapId(t){this.gameMapId=t,this.associateUserToGameMap()}setUserId(t){this.userId=t,this.associateUserToGameMap()}refreshPhaseUsers(){this.associateUserToGameMap()}toggleStore(){this.store.toggle()}fetchPhaseTransitions(){return new Promise(t=>{this.gameMapService.getPhaseTransitionsByGameMapId(this.gameMapId).subscribe({next:n=>{this.phaseTransitions=n||[],console.log("Transi\xE7\xF5es carregadas (fetchPhaseTransitions):",this.phaseTransitions),t()},error:n=>{console.error("Erro ao carregar transi\xE7\xF5es (fetchPhaseTransitions):",n),this.phaseTransitions=[],t()}})})}loadUserData(t){this.userService.getUserById(t).subscribe({next:n=>{this.userData=n},error:n=>{console.error("\u26A0\uFE0F Erro ao carregar dados atualizados do usu\xE1rio:",n)}})}get userName(){return this.userData?.name||""}get isLoading(){return this.isAssociatingUser||this.isLoadingPhases}get errorMessage(){return this.associationError||this.phasesError}prepareGraph(){this.idToPhaseUser.clear(),this.outgoingMap.clear(),this.incomingCount.clear();for(let t of this.phaseUsers)t?.phase?.id&&this.idToPhaseUser.set(t.phase.id,t);for(let t of this.phaseTransitions){let n=t.fromPhase?.id,i=t.toPhase?.id;!n||!i||(this.outgoingMap.has(n)||this.outgoingMap.set(n,[]),this.outgoingMap.get(n).push(t),this.incomingCount.set(i,(this.incomingCount.get(i)||0)+1))}}buildPhaseUsersAvailable(){this.prepareGraph(),this.phaseUsersAvailable=[];let t=null;if(t=this.phaseUsers.find(o=>!this.incomingCount.has(o.phase.id))||this.phaseUsers[0]||null,!t)return;this.phaseUsersAvailable.push(t);let i=t.phase.id,r=new Set;for(;!r.has(i);){r.add(i);let o=this.outgoingMap.get(i)||[];if(o.length===0)break;let c=(o.find(h=>{let p=h.toPhase?.id,f=p?this.idToPhaseUser.get(p):void 0;return f&&(f.status==="AVAILABLE"||f.status==="COMPLETED")})||o[0]).toPhase?.id;if(!c)break;let l=this.idToPhaseUser.get(c);if(!l||this.idToPhaseUser.get(i)?.phase?.nodeType==="DECISION"&&l.status==="LOCKED")break;this.phaseUsersAvailable.push(l),i=c}}outgoingMapForPhase(t){return t?this.outgoingMap.get(t)||[]:[]}onDecisionChoice(t,n){return qn(this,null,function*(){if(t.current!==!0){this.notificationService.showNotification("error","Para selecionar uma op\xE7\xE3o, voc\xEA deve estar na fase atual do jogo.");return}let i=n.toPhase?.id;if(!i)return;let r=[],o=[i],a=new Set;for(;o.length;){let s=o.shift();if(a.has(s))break;a.add(s);let c=this.idToPhaseUser.get(s);if(!c||c.phase.nodeType==="DECISION")break;r.push(c.id);let l=this.outgoingMap.get(s)||[];if(l.length===0)break;let u=l[0].toPhase?.id;if(!u)break;o.push(u)}if(r.length!==0)try{for(let s of r){let c=this.phaseUsers.find(u=>u.id===s);if(!c)continue;let l=ge(ee({},c),{status:"AVAILABLE"});yield this.phaseUserService.updatePhaseUser(s,l).toPromise(),c.status="AVAILABLE"}this.buildPhaseUsersAvailable()}catch(s){console.error("Erro ao liberar path da decis\xE3o:",s)}})}openGamePhase(t){(t.status==="AVAILABLE"||t.status==="COMPLETED")&&this.router.navigate(["/game",t.phase.id])}getCharacterImageUrl(t){return Yi.character(t.phase.character.filePath)}initSwiper(){if(!this.swiperContainer||!this.swiperContainer.nativeElement)return;let t=this.swiperContainer.nativeElement,n=this.phaseUsersAvailable?this.phaseUsersAvailable.findIndex(r=>!!r.phase&&!!r.current):-1,i=n>=0?n:0;Promise.resolve().then(()=>{requestAnimationFrame(()=>{let r=t.querySelectorAll(".swiper-slide");if(!(!r||r.length===0)){if(this.swiper){try{this.swiper.destroy(!0,!0)}catch{}this.swiper=void 0}this.swiper=new xi(t,{modules:[Is,Es,LM],effect:"coverflow",slidesPerView:"auto",grabCursor:!0,centeredSlides:!0,initialSlide:i,coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},autoHeight:!0,navigation:{nextEl:document.querySelector(".wrapper .swiper-button-next"),prevEl:document.querySelector(".wrapper .swiper-button-prev")},loop:!1,spaceBetween:64,speed:1e3});try{i>0&&this.swiper&&typeof this.swiper.slideTo=="function"&&this.swiper.slideTo(i,0)}catch(o){console.debug("Swiper slideTo failed",o)}}})})}calculateProgress(){try{let t=Array.isArray(this.phaseUsers)?this.phaseUsers:[],n=t.filter(s=>s&&s.phase&&s.phase.nodeType!=="DECISION"),i=n.length>0?n:t,r=i.length;if(r===0)return 0;let o=i.filter(s=>s&&s.status==="COMPLETED").length,a=Math.round(o/r*100);return Math.max(0,Math.min(100,a))}catch(t){return console.error("calculateProgress error",t),0}}getUserAvatarUrl(){return this.userData?.avatar?.filePath?Yi.avatar(this.userData.avatar.filePath):""}isDecisionOptionDisabled(t,n){try{if(!t||!t.phase||!t.phase.id)return!1;let i=this.outgoingMap.get(t.phase.id)||[],r=null;for(let a of i){let s=a?.toPhase?.id;if(!s)continue;let c=this.idToPhaseUser.get(s);if(c&&(c.status==="AVAILABLE"||c.status==="COMPLETED")){r=s;break}}return r===null?!1:n?.toPhase?.id!==r}catch(i){return console.error("isDecisionOptionDisabled error",i),!1}}trackByPhaseUser(t,n){return n?.id??t}ngOnDestroy(){if(this.appContextService.setContext("other"),this.userDataSubscription&&this.userDataSubscription.unsubscribe(),this.swiper)try{this.swiper.destroy(!0,!0)}catch{}}static \u0275fac=function(n){return new(n||e)(G(fi),G(xt),G(yn),G(xn),G(mt),G(pi),G(Gr),G(fa),G(Vn),G(Ct),G(cr),G(mi))};static \u0275cmp=Se({type:e,selectors:[["game-map"]],viewQuery:function(n,i){if(n&1&&(ft($r,5),ft(rG,5)),n&2){let r;dt(r=ut())&&(i.store=r.first),dt(r=ut())&&(i.swiperContainer=r.first)}},hostBindings:function(n,i){n&1&&q("mousemove",function(o){return i.onMouseMove(o)})},decls:15,vars:8,consts:[["swiperContainer",""],["id","container"],[3,"parentType","gameMapId"],[1,"wrapper"],[1,"swiper-button-prev"],[1,"swiper"],["class","swiper-wrapper",4,"ngIf"],[1,"swiper-pagination"],[1,"swiper-button-next"],[1,"progress-bar"],[1,"progress"],[1,"user-avatar"],[3,"src","alt"],[1,"percentage"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-slide"],[4,"ngIf"],[1,"phase-card"],["class","stamp-complete","aria-hidden","true",4,"ngIf"],["class","stamp-current","aria-hidden","true",4,"ngIf"],[1,"left"],[1,"left-top"],["class","phase-data",4,"ngIf"],[1,"left-bottom"],["class","active",3,"disabled","ngClass","click",4,"ngIf"],[1,"character",3,"src","alt"],["aria-hidden","true",1,"stamp-complete"],["aria-hidden","true",1,"stamp-current"],[1,"phase-data"],[1,"accuracy"],["name","square-check","color","#00D819",1,"lucide-icon",3,"size"],[1,"reputation"],["name","sparkles","color","#000000",1,"lucide-icon",3,"size"],[4,"ngFor","ngForOf"],[1,"active",3,"click","disabled","ngClass"]],template:function(n,i){n&1&&(y(0,"div",1),Z(1,"app-header",2),y(2,"div",3),Z(3,"div",4),y(4,"div",5,0),ne(6,fG,2,1,"div",6),Z(7,"div",7),v(),Z(8,"div",8),v(),y(9,"div",9)(10,"div",10)(11,"div",11),Z(12,"img",12),y(13,"span",13),I(14),v()()()()()),n&2&&(_(),A("parentType","game-map")("gameMapId",i.gameMapId),_(5),A("ngIf",i.phaseUsersAvailable.length>0),_(4),Tr("width",i.calculateProgress(),"%"),_(2),A("src",i.getUserAvatarUrl(),Ot)("alt",(i.userData==null?null:i.userData.name)||"Avatar do usu\xE1rio"),_(2),Ie("",i.calculateProgress(),"%"))},dependencies:[So,Gt,Nt,fr,Ze,ur,qt,_t],styles:["#container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;min-height:100vh;position:relative;background-image:url(/assets/images/fundo.png);background-size:cover;background-position:center;background-attachment:fixed;transition:background-position .1s ease-out}#activity-diagram[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:auto}.uml-start-circle[_ngcontent-%COMP%]{width:60px;height:60px;border:8px solid var(--black);border-radius:50%;position:relative}.uml-start-circle[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:88px;position:absolute;left:0;top:50%;transform:translate(50%,-50%)}.phase-card[_ngcontent-%COMP%]{width:100%;height:60vh;border:4px solid var(--yellow);border-radius:20px;display:flex;gap:24px;align-items:flex-start;justify-content:space-between;padding:24px;background:var(--white)}.phase-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:70%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.phase-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .left-top[_ngcontent-%COMP%]{width:100%;margin-bottom:auto;display:flex;flex-direction:column;gap:16px}.phase-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .left-top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px;font-weight:800;color:var(--black)}.phase-card[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .left-top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:var(--black)}.phase-card[_ngcontent-%COMP%]   .character[_ngcontent-%COMP%]{height:100%}.phase-card[_ngcontent-%COMP%]   .left-bottom[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:16px}.phase-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;background:transparent;margin-top:16px;width:100%;padding:12px 24px;font-size:20px;font-weight:700;color:var(--green);border:2px solid var(--green);border-radius:6px;box-shadow:#0000001a 0 4px 12px;display:flex;justify-content:center;align-items:center;gap:12px;transition:.3s}.phase-card[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--green);color:var(--white)}.phase-card[_ngcontent-%COMP%]   button.disabled[_ngcontent-%COMP%]{background:var(--light-gray);color:var(--gray);border-color:var(--gray);cursor:not-allowed}.phase-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.disabled){background:var(--green);color:var(--white);filter:brightness(1.1);transform:scale(1.02);transition:.3s}.wrapper[_ngcontent-%COMP%]{width:fit-content;display:flex;align-items:center;justify-content:center;align-self:center;gap:24px}.swiper[_ngcontent-%COMP%]{width:100%;max-width:780px}.swiper-slide[_ngcontent-%COMP%]{padding:16px 0}.swiper-slide[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:8px;font-size:32px;color:var(--white);transition:.5s}.swiper-slide[_ngcontent-%COMP%]:hover > h1[_ngcontent-%COMP%]{font-size:40px;color:var(--white);filter:brightness(1.3);text-shadow:0 0 8px rgba(255,255,255,.8)}.swiper-button-prev[_ngcontent-%COMP%], .swiper-button-next[_ngcontent-%COMP%]{color:var(--white)}.swiper-button-prev[_ngcontent-%COMP%], .swiper-button-next[_ngcontent-%COMP%]{position:initial}.phase-data[_ngcontent-%COMP%]{display:flex;gap:16px}.phase-data[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-weight:700}.phase-data[_ngcontent-%COMP%]   .reputation[_ngcontent-%COMP%], .phase-data[_ngcontent-%COMP%]   .accuracy[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.phase-card[_ngcontent-%COMP%]{position:relative}.stamp-complete[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;background:none;color:var(--green);font-weight:900;font-size:20px;padding:8px 14px;border-radius:6px;transform:rotate(20deg);box-shadow:0 6px 12px #0000002e;border:4px solid var(--green);text-transform:uppercase;display:inline-block;pointer-events:none;z-index:40;opacity:.98;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.stamp-current[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;background:none;color:var(--yellow);font-weight:900;font-size:20px;padding:8px 14px;border-radius:6px;transform:rotate(20deg);box-shadow:0 6px 12px #0000002e;border:4px solid var(--yellow);text-transform:uppercase;display:inline-block;pointer-events:none;z-index:40;opacity:.98;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}@media (max-width: 640px){.stamp-complete[_ngcontent-%COMP%]{font-size:11px;padding:6px 10px;top:8px;right:8px;transform:rotate(12deg)}}.progress-bar[_ngcontent-%COMP%]{width:780px;height:10px;background-color:var(--gray);border-radius:9999px;position:relative;align-self:center}.progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:100%;background-color:var(--yellow);border-radius:9999px;transition:width .3s ease-in-out;position:absolute;top:0;left:0}.progress[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:-16px;width:32px;height:32px;border:3px solid var(--black);border-radius:50%;background-color:var(--white);display:flex;justify-content:center;align-items:center}.progress[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.progress[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{position:absolute;top:100%;left:50%;transform:translate(-50%);padding:2px 6px;border-radius:4px;font-size:12px;font-weight:700;margin-top:4px}"]})};var mG=["matrixCanvas"];function gG(e,t){e&1&&(y(0,"div",24),I(1," Nome \xE9 obrigat\xF3rio. "),v())}function yG(e,t){e&1&&(y(0,"div",24),I(1," Email \xE9 obrigat\xF3rio e deve ser v\xE1lido. "),v())}function vG(e,t){e&1&&(y(0,"div",24),I(1," Senha \xE9 obrigat\xF3ria e deve ter pelo menos 6 caracteres. "),v())}function kG(e,t){e&1&&(y(0,"div",24),I(1," Confirma\xE7\xE3o de senha \xE9 obrigat\xF3ria. "),v())}function MG(e,t){e&1&&(y(0,"div",24),I(1," Senhas n\xE3o conferem. "),v())}function xG(e,t){e&1&&(y(0,"div",25)(1,"p"),I(2,"Carregando avatares"),y(3,"span",26)(4,"span"),I(5,"."),v(),y(6,"span"),I(7,"."),v(),y(8,"span"),I(9,"."),v()()()())}function wG(e,t){if(e&1){let n=le();y(0,"div",27)(1,"div",28),I(2,"\u26A0\uFE0F"),v(),y(3,"p",29),I(4,"Erro de Conex\xE3o"),v(),y(5,"p",30),I(6,"N\xE3o foi poss\xEDvel carregar os avatares do servidor."),v(),y(7,"button",31),q("click",function(){H(n);let r=V();return U(r.retryLoadAvatars())}),I(8," Tentar Novamente "),v()()}}function bG(e,t){if(e&1){let n=le();y(0,"div",34),q("click",function(){let r=H(n).$implicit,o=V(2);return U(o.selectAvatar(r))}),y(1,"img",35),q("error",function(r){H(n);let o=V(2);return U(o.onImageError(r))}),v()()}if(e&2){let n=t.$implicit,i=V(2);Ce("selected",(i.selectedAvatar==null?null:i.selectedAvatar.id)===n.id||(i.selectedAvatar==null?null:i.selectedAvatar.filePath)===n.filePath),_(),A("src",i.getAvatarImageUrl(n),Ot)("alt","Avatar "+(n.id||n.filePath))}}function CG(e,t){if(e&1&&(y(0,"div",32),ne(1,bG,2,4,"div",33),v()),e&2){let n=V();_(),A("ngForOf",n.avatars)}}function SG(e,t){e&1&&(y(0,"div",24),I(1," Por favor, selecione um avatar. "),v())}function _G(e,t){if(e&1&&(y(0,"div",36),I(1),v()),e&2){let n=V();_(),Ie(" ",n.errorMessage," ")}}var q0=class e{constructor(t,n,i,r,o,a,s){this.fb=t;this.dataService=n;this.authService=i;this.router=r;this.userService=o;this.platformId=a;this.appContextService=s;this.registerForm=this.fb.group({nome:["",Rr.required],email:["",[Rr.required,Rr.email]],senha:["",[Rr.required,Rr.minLength(6)]],confirmSenha:["",Rr.required],avatar:["",Rr.required]},{validator:this.passwordMatchValidator}),this.isBrowser=pt(this.platformId)}canvasRef;ctx;animationInterval;letters=[];drops=[];fontSize=10;columns=0;isBrowser;registerForm;avatars=[];selectedAvatar=null;isLoading=!1;errorMessage="";isLoadingAvatars=!1;avatarsLoadError=!1;ngOnInit(){this.appContextService.setContext("register"),this.loadAvatars();let t="ABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZ";this.letters=t.split("")}ngAfterViewInit(){this.isBrowser&&setTimeout(()=>{let t=this.canvasRef.nativeElement,n=t.getContext("2d");if(n){this.ctx=n,t.width=window.innerWidth,t.height=window.innerHeight,this.columns=t.width/this.fontSize;for(let i=0;i<this.columns;i++)Math.random()>.85&&(this.drops[i]=Math.floor(Math.random()*-100));this.animationInterval=setInterval(()=>this.draw(),100),window.addEventListener("resize",()=>this.handleResize())}},100)}draw(){this.ctx.fillStyle="rgba(0, 0, 0, .08)",this.ctx.fillRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height);for(let t=0;t<this.drops.length;t++)if(this.drops[t]!==void 0){let n=this.letters[Math.floor(Math.random()*this.letters.length)];this.ctx.fillStyle="#fff",this.ctx.fillText(n,t*this.fontSize,this.drops[t]*this.fontSize),this.drops[t]++,this.drops[t]*this.fontSize>this.canvasRef.nativeElement.height&&(Math.random()>.95?this.drops[t]=Math.floor(Math.random()*-200):delete this.drops[t])}else Math.random()>.99&&(this.drops[t]=Math.floor(Math.random()*-100))}handleResize(){if(!this.isBrowser)return;let t=this.canvasRef.nativeElement;t.width=window.innerWidth,t.height=window.innerHeight,this.columns=t.width/this.fontSize,this.drops=[];for(let n=0;n<this.columns;n++)Math.random()>.85&&(this.drops[n]=Math.floor(Math.random()*-100))}ngOnDestroy(){this.appContextService.setContext("other"),this.isBrowser&&(this.animationInterval&&clearInterval(this.animationInterval),window.removeEventListener("resize",()=>this.handleResize()))}loadAvatars(){this.isLoadingAvatars=!0,this.errorMessage="",this.avatarsLoadError=!1,this.userService.getAllAvatars().subscribe({next:t=>{this.avatars=t,this.avatars.length>0&&this.selectAvatar(this.avatars[0]),this.isLoadingAvatars=!1,this.avatarsLoadError=!1},error:t=>{console.error("Erro ao carregar avatares:",t),this.isLoadingAvatars=!1,this.avatarsLoadError=!0}})}retryLoadAvatars(){this.loadAvatars()}getAvatarImageUrl(t){return t.filePath?.startsWith("assets/")?`assets/images/characters/${t.filePath.split("/").pop()}`:t.filePath?Yi.avatar(t.filePath):"assets/images/characters/default-avatar.png"}selectAvatar(t){this.selectedAvatar=t,this.registerForm.get("avatar")?.setValue(t.id||t.filePath)}passwordMatchValidator(t){return t.get("senha")?.value===t.get("confirmSenha")?.value?null:{mismatch:!0}}onSubmit(){if(this.registerForm.valid&&this.selectedAvatar){this.isLoading=!0,this.errorMessage="";let{nome:t,email:n,senha:i}=this.registerForm.value,r={name:t,email:n,password:i,idAvatar:this.selectedAvatar.id?.toString()||this.selectedAvatar.filePath||"1"};this.authService.register(r).subscribe({next:o=>{this.router.navigate(["/login"],{queryParams:{message:"Registro realizado com sucesso! Fa\xE7a login para continuar."}})},error:o=>{this.errorMessage=o.error?.message||"Erro ao criar conta. Tente novamente.",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}else this.errorMessage="Por favor, preencha todos os campos corretamente e selecione um avatar."}onImageError(t){let n=t.target;n&&(n.src="assets/images/characters/default.png")}goToHome(){this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||e)(G(zS),G(yn),G(fi),G(mt),G(xn),G(xt),G(mi))};static \u0275cmp=Se({type:e,selectors:[["app-register"]],viewQuery:function(n,i){if(n&1&&ft(mG,5),n&2){let r;dt(r=ut())&&(i.canvasRef=r.first)}},decls:43,vars:13,consts:[["matrixCanvas",""],[1,"register-background"],[1,"matrix-canvas"],[1,"register-container"],[1,"register-card"],[1,"card-header"],["type","button",1,"back-button",3,"click"],["id","registerForm",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nome"],["type","text","id","nome","formControlName","nome","placeholder","Seu nome"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Seu email"],["for","senha"],["type","password","id","senha","formControlName","senha","placeholder","Sua senha"],["for","confirmSenha"],["type","password","id","confirmSenha","formControlName","confirmSenha","placeholder","Confirme sua senha"],[1,"character-selection"],["class","loading-avatars",4,"ngIf"],["class","error-avatars",4,"ngIf"],["class","character-list",4,"ngIf"],["type","submit","form","registerForm",3,"disabled"],["class","error-message response-error",4,"ngIf"],[1,"error-message"],[1,"loading-avatars"],[1,"dots"],[1,"error-avatars"],[1,"error-icon"],[1,"error-title"],[1,"error-description"],["type","button",1,"retry-button",3,"click"],[1,"character-list"],["class","character-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"character-item",3,"click"],[3,"error","src","alt"],[1,"error-message","response-error"]],template:function(n,i){if(n&1){let r=le();y(0,"div",1),Z(1,"canvas",2,0),v(),y(3,"div",3)(4,"div",4)(5,"div",5)(6,"button",6),q("click",function(){return H(r),U(i.goToHome())}),I(7," \u2190 J\xE1 tem uma conta? Fa\xE7a login "),v(),y(8,"h2"),I(9,"Cadastro"),v()(),y(10,"form",7),q("ngSubmit",function(){return H(r),U(i.onSubmit())}),y(11,"div",8)(12,"label",9),I(13,"Nome:"),v(),Z(14,"input",10),ne(15,gG,2,0,"div",11),v(),y(16,"div",8)(17,"label",12),I(18,"Email:"),v(),Z(19,"input",13),ne(20,yG,2,0,"div",11),v(),y(21,"div",8)(22,"label",14),I(23,"Senha:"),v(),Z(24,"input",15),ne(25,vG,2,0,"div",11),v(),y(26,"div",8)(27,"label",16),I(28,"Confirmar Senha:"),v(),Z(29,"input",17),ne(30,kG,2,0,"div",11)(31,MG,2,0,"div",11),v()(),y(32,"div",18)(33,"label"),I(34,"Escolha seu Avatar:"),v(),ne(35,xG,10,0,"div",19)(36,wG,9,0,"div",20)(37,CG,2,1,"div",21)(38,SG,2,0,"div",11),v(),I(39," = "),y(40,"button",22),I(41),v(),ne(42,_G,2,1,"div",23),v()()}if(n&2){let r,o,a,s,c,l;_(10),A("formGroup",i.registerForm),_(5),A("ngIf",((r=i.registerForm.get("nome"))==null?null:r.invalid)&&((r=i.registerForm.get("nome"))==null?null:r.touched)),_(5),A("ngIf",((o=i.registerForm.get("email"))==null?null:o.invalid)&&((o=i.registerForm.get("email"))==null?null:o.touched)),_(5),A("ngIf",((a=i.registerForm.get("senha"))==null?null:a.invalid)&&((a=i.registerForm.get("senha"))==null?null:a.touched)),_(5),A("ngIf",((s=i.registerForm.get("confirmSenha"))==null?null:s.invalid)&&((s=i.registerForm.get("confirmSenha"))==null?null:s.touched)),_(),A("ngIf",i.registerForm.hasError("mismatch")&&((c=i.registerForm.get("confirmSenha"))==null?null:c.touched)),_(4),A("ngIf",i.isLoadingAvatars),_(),A("ngIf",i.avatarsLoadError&&!i.isLoadingAvatars),_(),A("ngIf",!i.isLoadingAvatars&&!i.avatarsLoadError),_(),A("ngIf",((l=i.registerForm.get("avatar"))==null?null:l.invalid)&&((l=i.registerForm.get("avatar"))==null?null:l.touched)),_(2),A("disabled",!i.registerForm.valid||i.isLoading||!i.selectedAvatar),_(),Ie(" ",i.isLoading?"Cadastrando...":"Cadastrar"," "),_(),A("ngIf",i.errorMessage)}},dependencies:[jS,Fc,Nr,Ko,Nc,Bv,zv,Ze,qt,_t,fr],styles:['img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}[_ngcontent-%COMP%]:root{--bg: #1a1a1a;--black: #121212;--white: #ffffff;--yellow: #fdd835;--gray: #424242;--red: #ef5350}  body{padding:0!important}.register-background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;background-color:var(--bg)}.matrix-canvas[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;opacity:.15;pointer-events:none}.register-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:transparent;position:relative;z-index:3;padding:20px;box-sizing:border-box;align-items:center;justify-content:center}.register-card[_ngcontent-%COMP%]{background-color:var(--black);padding:30px;border-radius:8px;border:2px solid var(--yellow);box-shadow:0 4px 12px #00000080;width:100%;gap:20px;display:flex;flex-wrap:wrap;align-items:center;justify-content:center}.card-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;position:relative}.back-button[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:none;border:none;color:var(--white);font-size:1em;cursor:pointer;padding:8px 12px;border-radius:4px;transition:all .3s ease;text-decoration:none;display:flex;align-items:center;gap:5px;border:2px solid var(--yellow)}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--yellow);color:var(--black);transform:translate(-3px)}.register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:25px;color:var(--white);font-size:2.5em;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex:1;min-width:300px}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:left;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:var(--white)}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid var(--gray);border-radius:4px;background-color:var(--bg);color:var(--white);font-size:1em;box-sizing:border-box;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{border-color:var(--yellow);outline:none}.error-message[_ngcontent-%COMP%]{color:var(--red);font-size:.85em;position:absolute;bottom:-1.2em;left:0;width:100%;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.character-selection[_ngcontent-%COMP%]{flex:1;min-width:300px;margin-top:0;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;border:1px dashed var(--gray);border-radius:8px;background-color:var(--black)}.character-selection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:15px;font-weight:700;font-size:1.5em;color:var(--yellow)}.character-list[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;flex-wrap:wrap;max-width:450px}.character-item[_ngcontent-%COMP%]{cursor:pointer;padding:10px;border:2px solid transparent;border-radius:8px;transition:all .3s ease;background-color:var(--bg)}.character-item[_ngcontent-%COMP%]:hover{border-color:var(--yellow);box-shadow:0 0 10px #fdd83580}.character-item.selected[_ngcontent-%COMP%]{border-color:var(--white);box-shadow:0 0 15px #ffffffb3;background-color:var(--gray)}.character-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px;height:90px;object-fit:contain;border-radius:4px;transition:opacity .3s ease}.character-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}.character-item[_ngcontent-%COMP%]   img[src*="default.png"][_ngcontent-%COMP%]{opacity:.5;filter:grayscale(100%)}.register-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:14px;background-color:var(--yellow);color:var(--black);border:none;border-radius:4px;cursor:pointer;font-size:1.1em;font-weight:700;transition:background-color .3s ease;margin-top:25px}.register-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:var(--gray);cursor:not-allowed}.register-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--white)}.response-error[_ngcontent-%COMP%]{margin-top:15px;text-align:center;font-weight:600;color:var(--red);position:initial}.login-link[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:20px;font-size:1em;color:var(--white)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--yellow);text-decoration:none}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.loading-avatars[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px 20px;color:var(--yellow);font-weight:600}.loading-avatars[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1em}.loading-avatars[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1.4s infinite;animation-fill-mode:both}.loading-avatars[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.loading-avatars[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.loading-avatars[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_blink{0%,80%,to{opacity:0}40%{opacity:1}}.error-avatars[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px 20px;color:var(--white);text-align:center}.error-icon[_ngcontent-%COMP%]{font-size:3em;margin-bottom:15px;filter:drop-shadow(0 0 10px rgba(239,83,80,.5))}.error-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.3em;font-weight:700;color:var(--red)}.error-description[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1em;color:var(--white);opacity:.8}.retry-button[_ngcontent-%COMP%]{padding:12px 24px;background-color:var(--yellow);color:var(--black);border:none;border-radius:4px;cursor:pointer;font-size:1em;font-weight:700;transition:all .3s ease;display:flex;align-items:center;gap:8px}.retry-button[_ngcontent-%COMP%]:hover{background-color:var(--white);transform:translateY(-2px);box-shadow:0 4px 8px #fdd8354d}.retry-button[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.register-card[_ngcontent-%COMP%]{flex-direction:column;max-width:500px}.register-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em}.back-button[_ngcontent-%COMP%]{position:static;align-self:flex-start;margin-bottom:10px}.character-selection[_ngcontent-%COMP%]{margin-top:30px;padding:15px}.character-list[_ngcontent-%COMP%]{max-width:100%}.character-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}.register-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .character-selection[_ngcontent-%COMP%]{min-width:unset}}']})};function IG(e,t){e&1&&(y(0,"div",8)(1,"div",9),Z(2,"lucide-icon",10),v(),y(3,"p"),I(4,"Carregando mapas..."),v()()),e&2&&(_(2),A("size",48))}function EG(e,t){e&1&&(y(0,"div",34),Z(1,"img",35),y(2,"div",36),Z(3,"lucide-icon",37),y(4,"span"),I(5,"HIST\xD3RIA PRINCIPAL"),v()()()),e&2&&(_(3),A("size",16))}function DG(e,t){if(e&1&&(y(0,"div",38),Z(1,"lucide-icon",39),y(2,"span",40),I(3),v()()),e&2){let n=V().$implicit,i=V(3);_(),A("size",14),_(2),fe(i.formatDate(n.createdAt))}}function TG(e,t){if(e&1&&(y(0,"div",38),Z(1,"lucide-icon",41),y(2,"span",40),I(3),v()()),e&2){let n=V().$implicit;_(),A("size",14),_(),Ce("main-story-author",n.id===2),_(),fe(n.createdByUser.name)}}function PG(e,t){if(e&1){let n=le();y(0,"div",16),q("click",function(){let r=H(n).$implicit,o=V(3);return U(o.selectMap(r))}),ne(1,EG,6,1,"div",17),y(2,"div",18)(3,"div",19),Z(4,"lucide-icon",20),v(),y(5,"div",21)(6,"h3"),I(7),v(),y(8,"span",22),I(9),v()()(),y(10,"div",23)(11,"div",24),Z(12,"lucide-icon",25),y(13,"span",26),I(14),v(),y(15,"span",27),I(16,"Fases"),v()(),y(17,"div",28),Z(18,"lucide-icon",29),y(19,"span",26),I(20),v(),y(21,"span",27),I(22,"Usu\xE1rios"),v()()(),y(23,"div",30),ne(24,DG,4,2,"div",31)(25,TG,4,4,"div",31),v(),y(26,"div",32),Z(27,"lucide-icon",33),y(28,"span"),I(29,"Clique para selecionar"),v()()()}if(e&2){let n=t.$implicit,i=V(3);Ce("main-story-card",n.id===2),_(),A("ngIf",n.id===2),_(3),A("size",24),_(3),fe(n.title),_(2),Ie("ID: ",n.id),_(3),A("size",16),_(2),fe(i.getMapStats(n).phases),_(4),A("size",16),_(2),fe(i.getMapStats(n).users),_(4),A("ngIf",n.createdAt&&n.id!==2),_(),A("ngIf",n.createdByUser),_(2),A("size",20)}}function AG(e,t){if(e&1&&(y(0,"div",14),ne(1,PG,30,13,"div",15),v()),e&2){let n=V(2);_(),A("ngForOf",n.gameMaps)}}function LG(e,t){e&1&&(y(0,"div",42)(1,"div",43),Z(2,"lucide-icon",44),v(),y(3,"h3"),I(4,"Nenhum mapa dispon\xEDvel"),v(),y(5,"p"),I(6,"N\xE3o h\xE1 GameMaps cadastrados no sistema."),v(),y(7,"p"),I(8,"Entre em contato com o administrador para criar novos mapas."),v()()),e&2&&(_(2),A("size",64))}function OG(e,t){if(e&1&&(y(0,"div",11),ne(1,AG,2,1,"div",12)(2,LG,9,1,"div",13),v()),e&2){let n=V();_(),A("ngIf",n.gameMaps.length>0),_(),A("ngIf",n.gameMaps.length===0)}}var $0=class e{constructor(t,n,i){this.gameMapService=t;this.router=n;this.appContextService=i}isOpen=!0;gameMaps=[];loading=!1;mapSelected=new Ve;closeEvent=new Ve;ngOnInit(){this.appContextService.setContext("select-map"),this.loadGameMaps()}ngOnDestroy(){this.appContextService.setContext("other")}show(){this.isOpen=!0,this.loadGameMaps()}hide(){this.isOpen=!1}close(){this.isOpen=!1,this.closeEvent.emit()}toggle(){this.isOpen=!this.isOpen,this.isOpen&&this.loadGameMaps()}loadGameMaps(){this.loading=!0,this.gameMapService.getAllGameMaps().subscribe({next:t=>{this.gameMaps=t,this.loading=!1,console.log("\u{1F5FA}\uFE0F GameMaps carregados:",this.gameMaps)},error:t=>{console.error("\u274C Erro ao carregar GameMaps:",t),this.loading=!1}})}selectMap(t,n){n&&n.stopPropagation(),console.log("\u{1F3AF} GameMap selecionado:",t),t.id?(this.router.navigate(["/map",t.id]),this.close()):console.error("\u274C GameMap sem ID v\xE1lido:",t)}formatDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Data inv\xE1lida"}}getMapStats(t){return{phases:t.phases?.length||0,users:t.users?.length||0,createdBy:t.createdByUser?.name||"Desconhecido"}}static \u0275fac=function(n){return new(n||e)(G(Gr),G(mt),G(mi))};static \u0275cmp=Se({type:e,selectors:[["app-select-map"]],outputs:{mapSelected:"mapSelected",closeEvent:"closeEvent"},decls:10,vars:5,consts:[[1,"select-map-overlay",3,"click"],[1,"select-map-dialog",3,"click"],["parentType","game-map"],[1,"select-map-header"],[1,"title"],["name","map","color","#FFFFFF",1,"lucide-icon",3,"size"],["class","loading-state",4,"ngIf"],["class","select-map-content",4,"ngIf"],[1,"loading-state"],[1,"loading-spinner"],["name","loader-2",1,"lucide-icon","spinning",3,"size"],[1,"select-map-content"],["class","gamemaps-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"gamemaps-grid"],["class","gamemap-card",3,"main-story-card","click",4,"ngFor","ngForOf"],[1,"gamemap-card",3,"click"],["class","main-story-preview",4,"ngIf"],[1,"gamemap-header"],[1,"gamemap-icon"],["name","map-pin",1,"lucide-icon",3,"size"],[1,"gamemap-title"],[1,"gamemap-id"],[1,"gamemap-stats"],[1,"stat-item","phases"],["name","gamepad-2",1,"lucide-icon",3,"size"],[1,"stat-value"],[1,"stat-label"],[1,"stat-item","users"],["name","users",1,"lucide-icon",3,"size"],[1,"gamemap-details"],["class","detail-item",4,"ngIf"],[1,"selection-indicator"],["name","mouse-pointer-click",1,"lucide-icon",3,"size"],[1,"main-story-preview"],["src","assets/images/faculdade.png","alt","Hist\xF3ria Principal Preview",1,"story-preview-image"],[1,"main-story-badge"],["name","star",1,"lucide-icon",3,"size"],[1,"detail-item"],["name","calendar",1,"lucide-icon",3,"size"],[1,"detail-text"],["name","user",1,"lucide-icon",3,"size"],[1,"empty-state"],[1,"empty-icon"],["name","map-pin-off",1,"lucide-icon",3,"size"]],template:function(n,i){n&1&&(y(0,"div",0),q("click",function(){return i.close()}),y(1,"div",1),q("click",function(o){return o.stopPropagation()}),Z(2,"app-header",2),y(3,"div",3)(4,"div",4),Z(5,"lucide-icon",5),y(6,"h2"),I(7,"SELECIONAR MAPA"),v()()(),ne(8,IG,5,1,"div",6)(9,OG,3,2,"div",7),v()()),n&2&&(Ce("visible",i.isOpen),_(5),A("size",32),_(3),A("ngIf",i.loading),_(),A("ngIf",!i.loading))},dependencies:[Ze,qt,_t,Gt,Nt,So,fr],styles:[".select-map-overlay[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:transparent;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px);opacity:0;pointer-events:none;display:flex;flex-direction:column;transition:all .2s ease-out}.select-map-overlay.visible[_ngcontent-%COMP%]{background-color:var(--overlay);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);opacity:1;pointer-events:all}.select-map-dialog[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;flex-direction:column;overflow:hidden}.select-map-dialog[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;-webkit-user-select:none;user-select:none}.select-map-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:16px 32px;background:var(--bg);border-bottom:2px solid var(--white)}.select-map-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--white);font-weight:800;font-size:22px;line-height:100%;letter-spacing:0%}.title[_ngcontent-%COMP%]{display:flex;gap:12px;flex-direction:row;align-content:center;align-items:center;padding:.2rem .5rem}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:2rem}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;border:none;cursor:pointer;transition:all .2s ease}.close-button[_ngcontent-%COMP%]{background:var(--red)}.close-button[_ngcontent-%COMP%]:hover{background:var(--red);transform:scale(1.1)}  .close-button:hover .lucide-icon{color:var(--white)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;gap:1rem;color:var(--white);text-align:center}.loading-spinner[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--yellow)}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.select-map-content[_ngcontent-%COMP%]{flex:1;padding:2rem;overflow-y:auto;background:var(--bg)}.gamemaps-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;margin:0 auto}.gamemap-card[_ngcontent-%COMP%]{background:var(--bg-card);border:2px solid var(--white);border-radius:16px;padding:1.5rem;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;transition:.3s}.gamemap-card[_ngcontent-%COMP%]:hover{border-color:var(--yellow);transform:translateY(-4px);box-shadow:0 8px 25px #ffc1074d}.gamemap-card[_ngcontent-%COMP%]:hover   .selection-indicator[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.main-story-card[_ngcontent-%COMP%]{border-color:var(--yellow);background:linear-gradient(135deg,var(--bg-card) 0%,rgba(255,193,7,.1) 100%);box-shadow:0 4px 20px #ffc10733}.main-story-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 30px #ffc10766;transform:translateY(-6px)}.main-story-preview[_ngcontent-%COMP%]{position:relative;width:calc(100% + 3rem);margin:-1.5rem -1.5rem 1.5rem;height:200px;overflow:hidden;border-radius:14px 14px 0 0}.story-preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.main-story-card[_ngcontent-%COMP%]:hover   .story-preview-image[_ngcontent-%COMP%]{transform:scale(1.05)}.main-story-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:var(--yellow);color:var(--bg);padding:.5rem 1rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;font-weight:700;font-size:.75rem;letter-spacing:.5px;box-shadow:0 4px 12px #0000004d;animation:_ngcontent-%COMP%_pulse-glow 2s ease-in-out infinite}.main-story-badge[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--bg)}@keyframes _ngcontent-%COMP%_pulse-glow{0%,to{box-shadow:0 4px 12px #0000004d,0 0 10px #ffc10780}50%{box-shadow:0 4px 12px #0000004d,0 0 20px #ffc107cc}}.gamemap-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.gamemap-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--yellow);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.gamemap-icon[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--bg)}.gamemap-title[_ngcontent-%COMP%]{flex:1}.gamemap-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .25rem;color:var(--white);font-size:1.25rem;font-weight:700;line-height:1.2}.gamemap-id[_ngcontent-%COMP%]{background:var(--gray);color:var(--bg);padding:.25rem .5rem;border-radius:8px;font-size:.75rem;font-weight:600}.gamemap-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1rem;background:#ffffff1a;border-radius:12px;flex:1;text-align:center}.stat-item[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--yellow)}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:var(--white);line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--gray);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.gamemap-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--gray);font-size:.9rem}.detail-item[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--yellow);flex-shrink:0}.detail-text[_ngcontent-%COMP%]{color:var(--white);font-weight:500}.main-story-author[_ngcontent-%COMP%]{font-family:Consolas,Courier New,monospace;font-weight:600;letter-spacing:.5px}.selection-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem;background:var(--yellow);color:var(--bg);border-radius:8px;font-weight:600;font-size:.9rem;opacity:0;transform:translateY(10px);transition:all .3s ease;margin-top:.5rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:4rem 2rem;color:var(--gray);max-width:500px;margin:0 auto}.empty-icon[_ngcontent-%COMP%]{margin-bottom:2rem;opacity:.5}.empty-icon[_ngcontent-%COMP%]   .lucide-icon[_ngcontent-%COMP%]{color:var(--gray)}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--white);font-size:1.5rem;font-weight:700}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1rem;line-height:1.5}@media (max-width: 768px){.select-map-header[_ngcontent-%COMP%]{padding:16px 20px}.select-map-content[_ngcontent-%COMP%]{padding:1rem}.gamemaps-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.gamemap-card[_ngcontent-%COMP%]{padding:1rem}.gamemap-stats[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.stat-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;padding:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.25rem}.empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}}@media (prefers-reduced-motion: reduce){.select-map-overlay[_ngcontent-%COMP%], .gamemap-card[_ngcontent-%COMP%], .selection-indicator[_ngcontent-%COMP%], .btn-icon[_ngcontent-%COMP%]{transition:none}.spinning[_ngcontent-%COMP%]{animation:none}}app-header[_ngcontent-%COMP%]{background:var(--bg)}[_nghost-%COMP%]     app-header header{background:transparent!important}  app-header .amount{color:var(--white)!important}  app-header .btn-icon{color:var(--white)}  app-header .reputation .lucide-icon{color:var(--white);transition:.3s}  app-header .reputation:hover .lucide-icon{color:var(--yellow);transition:.3s}  app-header .user-name{color:var(--white)!important}"]})};var RG=["audioElement"],G0=class e{constructor(t,n,i){this.renderer=t;this.router=n;this.platformId=i}audioElement;animationId;showReturnButton=!1;ngAfterViewInit(){pt(this.platformId)&&setTimeout(()=>{this.startCreditsSequence()},100)}startCreditsSequence(){let t=document.querySelector(".pre-content"),n=document.querySelector(".content"),i=document.querySelector(".image"),r=document.getElementById("container"),o=document.querySelector(".amazing-credits");if(!t||!n||!i||!r||!o){console.error("Elementos n\xE3o encontrados");return}this.renderer.setStyle(n,"display","none"),this.renderer.setStyle(t,"display","block"),this.fadeIn(t,2e3,()=>{setTimeout(()=>{this.fadeOut(t,2e3,()=>{this.audioElement?.nativeElement&&this.audioElement.nativeElement.play().catch(s=>console.log("Audio play error (requer intera\xE7\xE3o do usu\xE1rio):",s)),this.renderer.setStyle(i,"display","block"),this.renderer.addClass(r,"has-stars");let a=i.querySelector("img");a&&this.renderer.addClass(a,"animate-logo"),setTimeout(()=>{this.renderer.setStyle(n,"display","block"),this.animateCreditsWithAcceleration(o,n)},6e3)})},2e3)})}fadeIn(t,n,i){this.renderer.setStyle(t,"opacity","0"),this.renderer.setStyle(t,"display","block");let r=null,o=a=>{r||(r=a);let s=a-r,c=Math.min(s/n,1);this.renderer.setStyle(t,"opacity",c.toString()),s<n?requestAnimationFrame(o):i&&i()};requestAnimationFrame(o)}fadeOut(t,n,i){let r=null,o=a=>{r||(r=a);let s=a-r,c=Math.max(1-s/n,0);this.renderer.setStyle(t,"opacity",c.toString()),s<n?requestAnimationFrame(o):(this.renderer.setStyle(t,"display","none"),i&&i())};requestAnimationFrame(o)}animateCreditsWithAcceleration(t,n){let i=window.innerHeight,r=t.scrollHeight,o=i*.8,a=-(r+i*.5),s=-(r-i*.3),c=o,u=45,d=8,h=Date.now(),p=Date.now();this.renderer.setStyle(t,"position","relative"),this.renderer.setStyle(t,"will-change","transform, opacity"),this.renderer.setStyle(t,"transform",`translate3d(0, ${o}px, 0)`),this.renderer.setStyle(t,"top","0"),this.renderer.setStyle(t,"opacity","1");let f=()=>{let g=Date.now(),b=(g-p)/1e3;if(p=g,g-h>=5e3&&(u+=d,h=g),c-=u*b,this.renderer.setStyle(t,"transform",`translate3d(0, ${c}px, 0)`),c<=s&&c>a){let x=(s-c)/(s-a),M=Math.max(0,1-x);this.renderer.setStyle(t,"opacity",M.toString())}c>a?this.animationId=requestAnimationFrame(f):(this.renderer.setStyle(t,"will-change","auto"),this.audioElement?.nativeElement&&this.audioElement.nativeElement.pause(),this.renderer.setStyle(n,"display","none"),this.showReturnButton=!0)};this.animationId=requestAnimationFrame(f)}returnToMap(){this.router.navigate(["/select-map"])}static \u0275fac=function(n){return new(n||e)(G(Jn),G(mt),G(xt))};static \u0275cmp=Se({type:e,selectors:[["app-credits"]],viewQuery:function(n,i){if(n&1&&ft(RG,5),n&2){let r;dt(r=ut())&&(i.audioElement=r.first)}},decls:74,vars:2,consts:[["audioElement",""],["id","container"],[1,"pre-content"],[1,"image"],["src","assets/images/umland.svg","alt","UMLand Logo"],[1,"content"],[1,"amazing-credits"],[1,"return-button-container"],["type","button",1,"return-button",3,"click"],["src","assets/videos/credits-theme.mp3","type","audio/mpeg"]],template:function(n,i){if(n&1){let r=le();y(0,"section")(1,"div",1)(2,"div",2)(3,"h3"),I(4,"Modelar \xE9 enxergar al\xE9m do c\xF3digo."),v(),y(5,"h4"),I(6,"MATRIX, 2025"),v()(),y(7,"div",3),Z(8,"img",4),v(),y(9,"div",5)(10,"div",6)(11,"h1"),I(12,"UMLand"),v(),y(13,"h1"),I(14,"UM JOGO PARA PRATICAR UML"),v(),y(15,"p"),I(16," Desenvolvido como Trabalho de Conclus\xE3o de Curso pela equipe "),y(17,"strong"),I(18,"Matrix"),v(),I(19,", do curso de "),y(20,"strong"),I(21,"Engenharia de Software"),v(),I(22," da "),y(23,"strong"),I(24,"Pontif\xEDcia Universidade Cat\xF3lica do Paran\xE1 (PUCPR)"),v(),I(25,", o UMLand nasce com o prop\xF3sito de tornar o estudo da "),y(26,"em"),I(27,"Unified Modeling Language (UML)"),v(),I(28," mais din\xE2mico, acess\xEDvel e envolvente. "),v(),y(29,"p"),I(30," O UMLand combina divers\xE3o e aprendizado, guiando estudantes na evolu\xE7\xE3o de simples aprendizes a verdadeiros mestres da modelagem de software. "),v(),Z(31,"hr"),y(32,"p")(33,"strong"),I(34,"Desenvolvedores:"),v(),I(35," Angelo Brocca,"),Z(36,"br"),I(37,"Jo\xE3o Elias Fadel, Sidnei Henrique Reis"),v(),y(38,"p")(39,"strong"),I(40,"Orienta\xE7\xE3o:"),v(),I(41," Professor Tiago Navarro"),v(),Z(42,"hr"),y(43,"p")(44,"strong"),I(45,"Agradecimentos especiais:"),v()(),y(46,"ul")(47,"li")(48,"strong"),I(49,"Angelo Brocca"),v(),I(50," dedica este projeto \xE0 sua m\xE3e e \xE0 sua gata Jade, fontes constantes de amor e inspira\xE7\xE3o."),v(),y(51,"li")(52,"strong"),I(53,"Sidnei Henrique Reis"),v(),I(54," agradece \xE0 sua fam\xEDlia e aos colegas de curso, por todo apoio e companheirismo ao longo da jornada."),v(),y(55,"li")(56,"strong"),I(57,"Jo\xE3o Elias Fadel"),v(),I(58," dedica este trabalho \xE0 sua fam\xEDlia, aos amigos e ao eterno Ozzy Osbourne."),v()(),Z(59,"hr"),y(60,"p"),I(61," A equipe Matrix agradece a todos os jogadores que embarcaram nesta aventura de aprendizado, e a todos que tornaram o "),y(62,"strong"),I(63,"UMLand"),v(),I(64," uma realidade. "),v(),y(65,"p")(66,"em"),I(67," Que sua jornada pelo mundo da UML seja repleta de descobertas, desafios e conquistas! "),v()()()(),y(68,"div",7)(69,"button",8),q("click",function(){return H(r),U(i.returnToMap())}),I(70," Retornar \xE0 Sele\xE7\xE3o de Mapas "),v()()()(),y(71,"audio",null,0),Z(73,"source",9),v()}n&2&&(_(68),Ce("show",i.showReturnButton))},styles:['img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}@keyframes _ngcontent-%COMP%_disappear{0%{width:150%}80%{opacity:1}to{width:10%;opacity:0}}[_nghost-%COMP%]{display:block;height:100vh;width:100vw;overflow:hidden}section[_ngcontent-%COMP%]{height:100%;font-family:Calibri,Arial,Helvetica,"sans-serif";background-color:#000;color:#fc0;overflow:hidden}#container[_ngcontent-%COMP%]{height:100%;width:100%;background:#000;text-align:center;-webkit-perspective:150px;perspective:150px}#container.has-stars[_ngcontent-%COMP%]{background:url(https://i.ytimg.com/vi/EZ7la-hMNuk/maxresdefault.jpg) center no-repeat;background-size:cover}#container[_ngcontent-%COMP%]   .pre-content[_ngcontent-%COMP%], #container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:none}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(1)}#container[_ngcontent-%COMP%]   .pre-content[_ngcontent-%COMP%]{position:relative;top:50%;color:#48cae0;font-size:3em;text-align:left;width:50%;margin:0 auto;-webkit-transform:translateY(-50%);transform:translateY(-50%)}#container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}#container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:150%;height:auto;margin:auto;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{-webkit-transform:rotateX(15deg);transform:rotateX(15deg);width:80%;height:100%;margin:0 auto;font-size:5em;font-weight:600;display:none}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .amazing-credits[_ngcontent-%COMP%]{position:relative;opacity:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;-webkit-font-smoothing:subpixel-antialiased;transform:translateZ(0);-webkit-transform:translateZ(0)}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify;margin-bottom:40px}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]::marker{color:#fc0}#container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-color:#fc0;background-color:#fc0}.animate-logo[_ngcontent-%COMP%]{-webkit-animation-name:_ngcontent-%COMP%_disappear;-webkit-animation-duration:10s;-webkit-animation-fill-mode:forwards;animation-name:_ngcontent-%COMP%_disappear;animation-duration:9s;animation-fill-mode:forwards}.return-button-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;opacity:0;visibility:hidden;transition:opacity 1s ease-in-out,visibility 0s linear 1s}.return-button-container.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transition:opacity 1s ease-in-out,visibility 0s linear 0s}.return-button[_ngcontent-%COMP%]{background:none;border:2px solid #fdd835;color:#fff;font-size:1.5em;cursor:pointer;padding:16px 32px;border-radius:8px;transition:all .3s ease;text-decoration:none;display:flex;align-items:center;gap:10px;font-weight:600;box-shadow:0 4px 12px #00000080;background-color:#121212}.return-button[_ngcontent-%COMP%]:hover{background-color:#fdd835;color:#121212;transform:scale(1.05);box-shadow:0 6px 20px #fdd83580}.return-button[_ngcontent-%COMP%]:active{transform:scale(.98)}']})};var NG=["matrixCanvas"],FG=["footerQuote"],W0=class e{constructor(t,n){this.router=t;this.platformId=n;this.isBrowser=pt(this.platformId)}canvasRef;footerQuoteRef;ctx;animationInterval;letters=[];drops=[];fontSize=10;columns=0;isBrowser;observer;ngOnInit(){this.isBrowser&&(document.body.style.overflow="auto");let t="ABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZABCDEFGHIJKLMNOPQRSTUVXYZ";this.letters=t.split("")}ngAfterViewInit(){this.isBrowser&&(setTimeout(()=>{let t=this.canvasRef.nativeElement,n=t.getContext("2d");if(n){this.ctx=n,t.width=window.innerWidth,t.height=window.innerHeight,this.columns=t.width/this.fontSize;for(let i=0;i<this.columns;i++)Math.random()>.85&&(this.drops[i]=Math.floor(Math.random()*-100));this.animationInterval=setInterval(()=>this.draw(),100),window.addEventListener("resize",()=>this.handleResize())}},100),setTimeout(()=>{this.footerQuoteRef&&(this.observer=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&(n.target.classList.add("visible"),this.observer?.unobserve(n.target))})},{threshold:.5}),this.observer.observe(this.footerQuoteRef.nativeElement))},100))}draw(){this.ctx.fillStyle="rgba(0, 0, 0, .08)",this.ctx.fillRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height);for(let t=0;t<this.drops.length;t++)if(this.drops[t]!==void 0){let n=this.letters[Math.floor(Math.random()*this.letters.length)];this.ctx.fillStyle="#fff",this.ctx.fillText(n,t*this.fontSize,this.drops[t]*this.fontSize),this.drops[t]++,this.drops[t]*this.fontSize>this.canvasRef.nativeElement.height&&(Math.random()>.95?this.drops[t]=Math.floor(Math.random()*-200):delete this.drops[t])}else Math.random()>.99&&(this.drops[t]=Math.floor(Math.random()*-100))}handleResize(){if(!this.isBrowser)return;let t=this.canvasRef.nativeElement;t.width=window.innerWidth,t.height=window.innerHeight,this.columns=t.width/this.fontSize,this.drops=[];for(let n=0;n<this.columns;n++)Math.random()>.85&&(this.drops[n]=Math.floor(Math.random()*-100))}ngOnDestroy(){this.isBrowser&&(document.body.style.overflow="hidden",this.animationInterval&&clearInterval(this.animationInterval),this.observer&&this.observer.disconnect(),window.removeEventListener("resize",()=>this.handleResize()))}goToHome(){this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||e)(G(mt),G(xt))};static \u0275cmp=Se({type:e,selectors:[["app-about"]],viewQuery:function(n,i){if(n&1&&(ft(NG,5),ft(FG,5)),n&2){let r;dt(r=ut())&&(i.canvasRef=r.first),dt(r=ut())&&(i.footerQuoteRef=r.first)}},decls:82,vars:6,consts:[["matrixCanvas",""],["footerQuote",""],[1,"about-container"],[1,"matrix-canvas"],["type","button",1,"back-button",3,"click"],[1,"logo-section"],["src","assets/images/logo.png","alt","UMLand Logo",1,"logo"],[1,"content-section"],[1,"about-board"],[1,"about-text"],[1,"advisor-info"],[1,"team-title"],[1,"team-section"],[1,"team-member"],["src","assets/images/angelo.jpeg","alt","Angelo Dela Vedova Brocca",1,"member-photo"],[1,"member-name"],[1,"highlight"],[1,"social-links"],["href","https://www.instagram.com/angelo_dvb/","target","_blank",1,"social-link"],["name","instagram",1,"social-icon",3,"size"],["href","https://www.linkedin.com/in/angelo-brocca/","target","_blank",1,"social-link"],["name","linkedin",1,"social-icon",3,"size"],["src","assets/images/jef.jpeg","alt","Jo\xE3o Elias Fadel",1,"member-photo"],["href","https://www.instagram.com/jefadel/","target","_blank",1,"social-link"],["href","https://www.linkedin.com/in/jefadel/","target","_blank",1,"social-link"],["src","assets/images/sid2.jpeg","alt","Sidnei Henrique Reis dos Santos",1,"member-photo"],["href","https://www.instagram.com/sidneiihenrique/","target","_blank",1,"social-link"],["href","https://www.linkedin.com/in/sidnei-henrique-reis-dos-santos/","target","_blank",1,"social-link"],[1,"footer-quote"],[1,"quote-text"],[1,"quote-source"]],template:function(n,i){if(n&1){let r=le();y(0,"div",2),Z(1,"canvas",3,0),y(3,"button",4),q("click",function(){return H(r),U(i.goToHome())}),I(4," \u2190 Voltar "),v(),y(5,"div",5),Z(6,"img",6),v(),y(7,"div",7)(8,"div",8)(9,"h1"),I(10,"Sobre o Jogo"),v(),y(11,"p",9)(12,"strong"),I(13,"UMLand: Um Jogo Para Praticar UML"),v(),I(14," \xE9 um Trabalho de Conclus\xE3o de Curso desenvolvido pela equipe Matrix do curso de "),y(15,"strong"),I(16,"Engenharia de Software"),v(),I(17," da universidade Pontif\xEDcia Universidade Cat\xF3lica do Paran\xE1 - PUCPR, com o prop\xF3sito de tornar o estudo de UML (Unified Modeling Language) mais din\xE2mico, acess\xEDvel e envolvente. O jogo combina edi\xE7\xE3o interativa de diagramas e mec\xE2nicas de gamifica\xE7\xE3o, permitindo que estudantes pratiquem modelagem de software em um ambiente l\xFAdico e desafiador. "),v(),y(18,"p",9),I(19," A cada fase, o jogador \xE9 convidado a resolver problemas reais de modelagem, receber feedback imediato e conquistar novos n\xEDveis de progresso, enquanto aprimora suas habilidades e evolui na narrativa. O objetivo \xE9 reduzir a complexidade do aprendizado t\xE9cnico, tornando o dom\xEDnio da UML mais intuitivo, motivador e prazeroso. "),v()()(),y(20,"p",10),I(21,"Sob orienta\xE7\xE3o do Prof. Tiago Adelino Navarro"),v(),y(22,"h2",11),I(23,"Equipe de desenvolvimento:"),v(),y(24,"div",12)(25,"div",13),Z(26,"img",14),y(27,"p",15)(28,"span",16),I(29,"Angelo"),v(),I(30," Dela Vedova Brocca"),v(),y(31,"div",17)(32,"a",18),Z(33,"lucide-icon",19),y(34,"span"),I(35,"@angelo_dvb"),v()(),y(36,"a",20),Z(37,"lucide-icon",21),y(38,"span"),I(39,"/angelo-brocca"),v()()()(),y(40,"div",13),Z(41,"img",22),y(42,"p",15)(43,"span",16),I(44,"J"),v(),I(45,"o\xE3o "),y(46,"span",16),I(47,"E"),v(),I(48,"lias "),y(49,"span",16),I(50,"F"),v(),I(51,"adel"),v(),y(52,"div",17)(53,"a",23),Z(54,"lucide-icon",19),y(55,"span"),I(56,"@jefadel"),v()(),y(57,"a",24),Z(58,"lucide-icon",21),y(59,"span"),I(60,"/jefadel"),v()()()(),y(61,"div",13),Z(62,"img",25),y(63,"p",15)(64,"span",16),I(65,"Sid"),v(),I(66,"nei Henrique Reis dos Santos"),v(),y(67,"div",17)(68,"a",26),Z(69,"lucide-icon",19),y(70,"span"),I(71,"@sidneiihenrique"),v()(),y(72,"a",27),Z(73,"lucide-icon",21),y(74,"span"),I(75,"/sidnei-henrique-reis-dos-santos"),v()()()()(),y(76,"div",28,1)(78,"p",29),I(79,"Don't think you are, know you are."),v(),y(80,"p",30),I(81,"MATRIX, 1999"),v()()()}n&2&&(_(33),A("size",18),_(4),A("size",18),_(17),A("size",18),_(4),A("size",18),_(11),A("size",18),_(4),A("size",18))},dependencies:[Gt,Nt,Ze],styles:['img[_ngcontent-%COMP%]{-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}[_nghost-%COMP%]{display:block;min-height:100vh}[_nghost-%COMP%]  body{overflow:auto!important}.about-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;background-color:var(--black);padding:2rem 2rem 4rem;align-items:center;gap:1.5rem;position:relative}.matrix-canvas[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;opacity:.15;pointer-events:none}.back-button[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background:none;border:none;color:var(--white);font-size:1em;cursor:pointer;padding:8px 12px;border-radius:4px;transition:all .3s ease;text-decoration:none;display:flex;align-items:center;gap:5px;border:2px solid var(--yellow);z-index:10}.back-button[_ngcontent-%COMP%]:hover{background-color:var(--yellow);color:var(--black);transform:translate(-3px)}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem;position:relative;z-index:5}.logo[_ngcontent-%COMP%]{max-width:250px;height:auto;filter:invert(1);animation:_ngcontent-%COMP%_floatLogo 3.5s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_floatLogo{0%{transform:translateY(0) scale(1.02);filter:invert(1) drop-shadow(0 2px 8px var(--yellow))}to{transform:translateY(-18px) scale(1.07);filter:invert(1) drop-shadow(0 8px 16px var(--gray))}}.team-title[_ngcontent-%COMP%]{color:var(--white);font-size:1.4rem;font-weight:700;text-align:center;margin:1.5rem 0 2rem;position:relative;z-index:5;text-transform:uppercase;letter-spacing:2px}.team-section[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2.5rem;margin-bottom:3rem;position:relative;z-index:5;flex-wrap:wrap;max-width:1400px;width:100%;padding:0 1rem}.team-member[_ngcontent-%COMP%]{background:linear-gradient(145deg,#141414f2,#000000e6);border:3px solid var(--yellow);border-radius:12px;padding:0;display:flex;flex-direction:column;align-items:center;gap:0;box-shadow:0 8px 16px #0006,0 0 30px #ebb2354d;transition:all .4s cubic-bezier(.175,.885,.32,1.275);flex:1;min-width:300px;max-width:380px;overflow:hidden;position:relative}.team-member[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-2px;background:linear-gradient(45deg,var(--yellow),var(--white),var(--yellow));border-radius:12px;opacity:0;z-index:-1;transition:opacity .4s ease}.team-member[_ngcontent-%COMP%]:hover:before{opacity:.3;animation:_ngcontent-%COMP%_borderGlow 2s linear infinite}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{background:linear-gradient(45deg,var(--yellow),var(--white),var(--yellow))}50%{background:linear-gradient(45deg,var(--white),var(--yellow),var(--white))}}.team-member[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 12px 24px #00000080,0 0 40px #ebb23580;border-color:var(--white)}.member-photo[_ngcontent-%COMP%]{width:100%;height:320px;object-fit:cover;border-bottom:3px solid var(--yellow);transition:all .4s ease;filter:grayscale(20%) brightness(.95)}.team-member[_ngcontent-%COMP%]:hover   .member-photo[_ngcontent-%COMP%]{filter:grayscale(0%) brightness(1.05);transform:scale(1.05)}.member-name[_ngcontent-%COMP%]{color:var(--white);font-size:1.05rem;font-weight:700;text-align:center;margin:0;padding:1.8rem 1.5rem;width:100%;background:linear-gradient(to top,#000000e6,#141414b3);transition:all .3s ease;position:relative}.member-name[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{transition:all .3s ease;display:inline-block}.team-member[_ngcontent-%COMP%]:hover   .member-name[_ngcontent-%COMP%]{background:linear-gradient(to top,#ebb23533,#141414cc);letter-spacing:.5px}.team-member[_ngcontent-%COMP%]:hover   .member-name[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:var(--yellow);text-shadow:0 0 10px rgba(235,178,53,.6);transform:scale(1.15);font-weight:900;margin:0 4px;letter-spacing:1px}.social-links[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;padding:1.2rem 1.5rem;width:100%;background:linear-gradient(to bottom,#141414b3,#000000e6)}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;color:var(--white);text-decoration:none;font-size:.95rem;transition:all .3s ease;padding:.4rem 0}.social-link[_ngcontent-%COMP%]:hover{color:var(--yellow);transform:translate(5px)}.social-icon[_ngcontent-%COMP%]{width:18px;height:18px;min-width:18px;min-height:18px;flex-shrink:0;display:flex;align-items:center;justify-content:center}.social-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;line-height:1}.content-section[_ngcontent-%COMP%]{width:100%;max-width:1200px;display:flex;flex-direction:column;align-items:center;gap:1.5rem;position:relative;z-index:5}.about-board[_ngcontent-%COMP%]{background-color:#141414f2;color:var(--white);padding:2rem;border-radius:8px;border:3px solid var(--yellow);box-shadow:0 4px 6px #0000001a,0 0 20px #fdd8354d;width:100%}.about-board[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:1.2rem;color:var(--white);text-align:left}.about-text[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.7;color:var(--white);margin-bottom:1.2rem;text-align:justify}.about-text[_ngcontent-%COMP%]:last-child{margin-bottom:0}.about-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700;color:var(--white)}.advisor-info[_ngcontent-%COMP%]{color:var(--white);font-size:1.05rem;text-align:center;font-style:italic;margin:0;padding:1rem}.footer-quote[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;text-align:center;position:relative;z-index:5}.quote-text[_ngcontent-%COMP%]{font-family:Consolas,Courier New,monospace;color:var(--yellow);font-size:1.2rem;font-weight:700;margin:0 0 .5rem;overflow:hidden;border-right:3px solid transparent;white-space:nowrap;display:inline-block;width:0}.footer-quote.visible[_ngcontent-%COMP%]   .quote-text[_ngcontent-%COMP%]{border-right:3px solid var(--yellow);animation:_ngcontent-%COMP%_typing 3s steps(35) .5s 1 normal both,_ngcontent-%COMP%_blink .75s step-end infinite}.quote-source[_ngcontent-%COMP%]{font-family:Consolas,Courier New,monospace;color:var(--white);font-size:.95rem;margin:0;opacity:0}.footer-quote.visible[_ngcontent-%COMP%]   .quote-source[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s ease-in 3.5s forwards}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{0%,to{border-color:transparent}50%{border-color:var(--yellow)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media (max-width: 768px){.about-container[_ngcontent-%COMP%]{padding:4rem 1rem 1rem}.back-button[_ngcontent-%COMP%]{top:10px;left:10px;font-size:.9em}.logo[_ngcontent-%COMP%]{max-width:180px}.team-title[_ngcontent-%COMP%]{font-size:1.4rem;margin:1.5rem 0 1rem}.team-section[_ngcontent-%COMP%]{gap:1.5rem}.team-member[_ngcontent-%COMP%]{width:100%;max-width:300px}.content-section[_ngcontent-%COMP%]{max-width:100%}.about-board[_ngcontent-%COMP%]{padding:1.5rem}.about-board[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.about-text[_ngcontent-%COMP%]{font-size:.95rem}.footer-quote[_ngcontent-%COMP%]{padding:1.5rem 1rem;margin-top:2rem}.quote-text[_ngcontent-%COMP%]{font-size:1rem}.quote-source[_ngcontent-%COMP%]{font-size:.85rem}}']})};var Z0=class e{constructor(t,n){this.router=t;this.userService=n}goToMapSelection(){this.userService.resetCurrentUserGameData().subscribe({next:t=>{let n=this.userService.getCurrentUser()||{},i=ee(ee({},n),t);try{localStorage.setItem("currentUser",JSON.stringify(i))}catch(r){console.warn(r)}this.router.navigate(["/select-map"])},error:t=>{console.error("Erro ao resetar dados do usu\xE1rio",t),this.router.navigate(["/select-map"])}})}static \u0275fac=function(n){return new(n||e)(G(mt),G(xn))};static \u0275cmp=Se({type:e,selectors:[["app-game-over"]],decls:12,vars:0,consts:[[1,"game-over-container"],[1,"content"],[1,"sad-face"],[1,"message-container"],[1,"message"],[1,"retry-button",3,"click"]],template:function(n,i){n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),I(3,"=("),v(),y(4,"div",3)(5,"div",4)(6,"p"),I(7,"Fim de Jogo"),v(),y(8,"p"),I(9,"Sua reputa\xE7\xE3o est\xE1 negativa."),v()(),y(10,"button",5),q("click",function(){return i.goToMapSelection()}),I(11,"Tentar Novamente"),v()()()())},styles:['.game-over-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--bg);display:flex;align-items:center;justify-content:center;overflow:hidden}.game-over-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 30% 30%,rgba(235,178,53,.1) 0%,transparent 50%),radial-gradient(circle at 70% 70%,rgba(235,178,53,.05) 0%,transparent 50%);animation:_ngcontent-%COMP%_backgroundPulse 8s ease-in-out infinite}@keyframes _ngcontent-%COMP%_backgroundPulse{0%,to{opacity:.5}50%{opacity:.8}}.content[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:60px;animation:_ngcontent-%COMP%_contentFadeIn 1.5s ease-out}.message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:30px}@keyframes _ngcontent-%COMP%_contentFadeIn{0%{opacity:0;transform:scale(.8) translateY(30px)}to{opacity:1;transform:scale(1) translateY(0)}}.sad-face[_ngcontent-%COMP%]{font-size:280px;font-weight:700;color:var(--yellow);text-shadow:2px 2px 0px #c99a2d,4px 4px 0px #a78225,6px 6px 0px #856a1d,8px 8px 0px #635215,10px 10px 20px rgba(0,0,0,.7);animation:_ngcontent-%COMP%_sadFaceFloat 4s ease-in-out infinite;line-height:.8;font-family:Roboto,sans-serif;letter-spacing:15px;filter:drop-shadow(0 0 30px rgba(235,178,53,.3))}@keyframes _ngcontent-%COMP%_sadFaceFloat{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-20px) scale(1.03)}}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;background:var(--black);padding:40px 50px;border-radius:8px;border:2px solid var(--yellow);box-shadow:0 10px 40px #00000080,0 0 20px #ebb23533;animation:_ngcontent-%COMP%_messageFloat 3s ease-in-out infinite;text-align:center;transition:border-color .3s}.message[_ngcontent-%COMP%]:hover{border-color:var(--white)}@keyframes _ngcontent-%COMP%_messageFloat{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:42px;font-weight:600;color:var(--white);text-shadow:2px 2px 4px rgba(0,0,0,.5);animation:_ngcontent-%COMP%_messageSlideIn 1s ease-out backwards;line-height:1.4}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{animation-delay:.3s;font-weight:700;color:var(--yellow);font-size:48px}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{animation-delay:.5s}.retry-button[_ngcontent-%COMP%]{padding:12px 32px;background-color:var(--yellow);color:var(--black);border:none;border-radius:8px;font-size:18px;font-weight:700;cursor:pointer;transition:all .3s;opacity:0;animation:_ngcontent-%COMP%_buttonFadeIn .5s ease-out 2s forwards;align-self:center}.retry-button[_ngcontent-%COMP%]:hover{background-color:var(--white);transform:scale(1.05);box-shadow:0 6px 20px #ebb23580}.retry-button[_ngcontent-%COMP%]:active{transform:scale(.98)}@keyframes _ngcontent-%COMP%_buttonFadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_messageSlideIn{0%{opacity:0;transform:translate(50px)}to{opacity:1;transform:translate(0)}}@media (max-width: 768px){.content[_ngcontent-%COMP%]{flex-direction:column;gap:40px}.sad-face[_ngcontent-%COMP%]{font-size:180px;letter-spacing:10px}.message[_ngcontent-%COMP%]{padding:30px 40px}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:28px}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:32px}.retry-button[_ngcontent-%COMP%]{font-size:16px;padding:10px 24px}}@media (max-width: 480px){.sad-face[_ngcontent-%COMP%]{font-size:120px;letter-spacing:8px}.message[_ngcontent-%COMP%]{padding:20px 30px}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-size:24px}.retry-button[_ngcontent-%COMP%]{font-size:14px;padding:8px 20px}.content[_ngcontent-%COMP%]{gap:30px}}']})};var f6=[{path:"",component:Jd,canActivate:[Ps]},{path:"login",component:Jd},{path:"register",component:q0},{path:"map/:id",component:U0,canActivate:[Ps]},{path:"game/:id",component:z0,canActivate:[Ps]},{path:"admin",component:H0},{path:"select-map",component:$0,canActivate:[Ps]},{path:"credits",component:G0},{path:"about",component:W0},{path:"game-over",component:Z0}];var m6={providers:[uy({eventCoalescing:!0}),_v(f6),a5(o5()),Df(Xy())]};var VG=(e,t,n,i,r,o,a)=>({"notification-show":e,"notification-hide":t,"notification-success":n,"notification-error":i,"notification-achievement":r,"notification-toast":o,"notification-snackbar":a});function BG(e,t){e&1&&Z(0,"lucide-icon",10),e&2&&A("size",20)}function zG(e,t){e&1&&Z(0,"lucide-icon",11),e&2&&A("size",20)}function jG(e,t){e&1&&Z(0,"lucide-icon",12),e&2&&A("size",20)}function HG(e,t){if(e&1&&Z(0,"div",13),e&2){let n=V();Tr("animation-duration",n.duration+"ms")}}var Y0=class e{type="success";message="";duration=4e3;autoDismiss=!0;isVisible=!1;displayMode="toast";id="";dismissed=new Ve;timeoutId;ngOnInit(){this.autoDismiss&&this.duration>0&&(this.timeoutId=window.setTimeout(()=>{this.close()},this.duration))}ngOnDestroy(){this.timeoutId&&clearTimeout(this.timeoutId)}close(){this.isVisible=!1,this.dismissed.emit()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-notification"]],inputs:{type:"type",message:"message",duration:"duration",autoDismiss:"autoDismiss",isVisible:"isVisible",displayMode:"displayMode",id:"id"},outputs:{dismissed:"dismissed"},decls:11,vars:17,consts:[[1,"notification-container",3,"ngClass"],[1,"notification-content"],[1,"notification-icon"],["name","circle-check-big",3,"size",4,"ngIf"],["name","triangle-alert",3,"size",4,"ngIf"],["name","sparkles",3,"size",4,"ngIf"],[1,"notification-message"],["type","button","aria-label","Fechar notifica\xE7\xE3o",1,"notification-close",3,"click"],["name","x",3,"size"],["class","notification-progress",3,"animation-duration",4,"ngIf"],["name","circle-check-big",3,"size"],["name","triangle-alert",3,"size"],["name","sparkles",3,"size"],[1,"notification-progress"]],template:function(n,i){n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2),ne(3,BG,1,1,"lucide-icon",3)(4,zG,1,1,"lucide-icon",4)(5,jG,1,1,"lucide-icon",5),v(),y(6,"div",6),I(7),v(),y(8,"button",7),q("click",function(){return i.close()}),Z(9,"lucide-icon",8),v()(),ne(10,HG,1,2,"div",9),v()),n&2&&(A("ngClass",cy(9,VG,i.isVisible,!i.isVisible,i.type==="success",i.type==="error",i.type==="achievement",i.displayMode==="toast",i.displayMode==="snackbar")),ao("data-type",i.type)("data-mode",i.displayMode),_(3),A("ngIf",i.type==="success"),_(),A("ngIf",i.type==="error"),_(),A("ngIf",i.type==="achievement"),_(2),Ie(" ",i.message," "),_(2),A("size",16),_(),A("ngIf",i.autoDismiss))},dependencies:[Ze,ur,_t,Gt,Nt],styles:[".notification-container[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;align-items:center;gap:12px;border-radius:8px;padding:16px;box-shadow:0 4px 12px #0006;color:#fff;transition:all .3s ease-in-out;opacity:0;transform:translateY(20px)}.notification-show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.notification-hide[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px)}.notification-toast[_ngcontent-%COMP%]{width:100%;min-height:44px;padding:10px 24px;border-radius:0;border-top:2px solid;animation:_ngcontent-%COMP%_slideUpFromBottom .4s ease-out forwards}.notification-toast.notification-hide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDownToBottom .3s ease-in forwards}.notification-snackbar[_ngcontent-%COMP%]{min-width:300px;max-width:400px;border-radius:8px;border:2px solid;animation:_ngcontent-%COMP%_slideInFromRight .4s ease-out forwards}.notification-snackbar.notification-hide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutToRight .3s ease-in forwards}.notification-success[_ngcontent-%COMP%]{background-color:#000;border-color:#00d819}.notification-success[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%], .notification-success[_ngcontent-%COMP%]   .notification-close[_ngcontent-%COMP%]{color:#00d819}.notification-error[_ngcontent-%COMP%]{background-color:#000;border-color:red}.notification-error[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%], .notification-error[_ngcontent-%COMP%]   .notification-close[_ngcontent-%COMP%]{color:red}.notification-achievement[_ngcontent-%COMP%]{background-color:#000;border-color:#00a6ff}.notification-achievement[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%], .notification-achievement[_ngcontent-%COMP%]   .notification-close[_ngcontent-%COMP%]{color:#00a6ff}.notification-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;width:100%}.notification-icon[_ngcontent-%COMP%]{background-color:#ffffff1a;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.notification-success[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#00d819}.notification-error[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:red}.notification-achievement[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#00a6ff}.notification-message[_ngcontent-%COMP%]{flex:1;font-size:14px;line-height:1.4;font-weight:500}.notification-close[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;flex-shrink:0;transition:background-color .2s ease}.notification-close[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}@keyframes _ngcontent-%COMP%_slideUpFromBottom{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDownToBottom{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(100%)}}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideOutToRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(100%)}}.notification-progress[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:3px;background-color:#ffffff4d;width:100%;animation:_ngcontent-%COMP%_progressBar linear}.notification-toast[_ngcontent-%COMP%]   .notification-progress[_ngcontent-%COMP%]{bottom:0}.notification-snackbar[_ngcontent-%COMP%]   .notification-progress[_ngcontent-%COMP%]{bottom:0;border-bottom-left-radius:8px;border-bottom-right-radius:8px}@keyframes _ngcontent-%COMP%_progressBar{0%{width:100%}to{width:0%}}@media (max-width: 768px){.notification-snackbar[_ngcontent-%COMP%]{min-width:280px;max-width:calc(100vw - 40px);margin:0 20px}.notification-toast[_ngcontent-%COMP%]{padding:12px 20px}.notification-message[_ngcontent-%COMP%]{font-size:13px}.notification-icon[_ngcontent-%COMP%]{width:28px;height:28px}}"]})};function UG(e,t){if(e&1){let n=le();y(0,"app-notification",3),q("dismissed",function(){let r=H(n).$implicit,o=V();return U(o.onNotificationDismissed(r.id))}),v()}if(e&2){let n=t.$implicit;A("type",n.type)("message",n.message)("duration",n.duration||4e3)("autoDismiss",n.autoDismiss!==!1)("isVisible",!0)("displayMode","toast")("id",n.id)}}function qG(e,t){if(e&1){let n=le();y(0,"app-notification",3),q("dismissed",function(){let r=H(n).$implicit,o=V();return U(o.onNotificationDismissed(r.id))}),v()}if(e&2){let n=t.$implicit;A("type",n.type)("message",n.message)("duration",n.duration||5e3)("autoDismiss",n.autoDismiss!==!1)("isVisible",!0)("displayMode","snackbar")("id",n.id)}}var X0=class e{constructor(t){this.notificationService=t}toastNotifications=[];snackbarNotifications=[];notificationSubscription;ngOnInit(){this.notificationSubscription=this.notificationService.notifications$.subscribe(t=>{this.toastNotifications=t.filter(n=>n.type!=="achievement"),this.snackbarNotifications=t.filter(n=>n.type==="achievement")})}ngOnDestroy(){this.notificationSubscription&&this.notificationSubscription.unsubscribe()}onNotificationDismissed(t){this.notificationService.removeNotification(t)}trackByNotificationId(t,n){return n.id}static \u0275fac=function(n){return new(n||e)(G(Vn))};static \u0275cmp=Se({type:e,selectors:[["app-notification-container"]],decls:4,vars:4,consts:[[1,"toast-container"],[3,"type","message","duration","autoDismiss","isVisible","displayMode","id","dismissed",4,"ngFor","ngForOf","ngForTrackBy"],[1,"snackbar-container"],[3,"dismissed","type","message","duration","autoDismiss","isVisible","displayMode","id"]],template:function(n,i){n&1&&(y(0,"div",0),ne(1,UG,1,7,"app-notification",1),v(),y(2,"div",2),ne(3,qG,1,7,"app-notification",1),v()),n&2&&(_(),A("ngForOf",i.toastNotifications)("ngForTrackBy",i.trackByNotificationId),_(2),A("ngForOf",i.snackbarNotifications)("ngForTrackBy",i.trackByNotificationId))},dependencies:[Ze,qt,Y0],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:1000;display:flex;flex-direction:column-reverse;gap:4px;pointer-events:none}.toast-container[_ngcontent-%COMP%]   app-notification[_ngcontent-%COMP%]{pointer-events:auto}.snackbar-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1001;display:flex;flex-direction:column;gap:12px;pointer-events:none}.snackbar-container[_ngcontent-%COMP%]   app-notification[_ngcontent-%COMP%]{pointer-events:auto}"]})};var J0=class e{title="umland-frontend";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(n,i){n&1&&Z(0,"router-outlet")(1,"app-notification-container")},dependencies:[Fd,X0],encapsulation:2})};jy(J0,m6).catch(e=>console.error(e));
