<div class="node-wrapper" [ngClass]="{ 'locked': phase.status === 'LOCKED', 'active': phase.current === true}">
    <div class="node" (click)="openGamePhase()">
        <span>{{ phase.phase.title }}</span>
    </div>
    
    
    <!-- ✅ Usando método que constrói URL correta -->
    <img [src]="getCharacterImageUrl()" [alt]="phase.phase.character.name" class="character">
    <div class="user-icon" *ngIf="phase.current === true">
        <img [src]="getUserAvatarUrl()" 
            [alt]="userData?.name || 'Avatar do usuário'"
            (error)="onUserAvatarError($event)"
            class="user-avatar">
    </div>
    <div class="hover" *ngIf="phase.status === 'AVAILABLE'">
        <div class="accuracy">
            <lucide-icon name="square-check" class="lucide-icon" [size]="24" color="#00D819"></lucide-icon>
            <span>{{ phase.accuracy }}%</span>
        </div>
        <div class="reputation">
            <span>{{ phase.reputation }}</span>
            <lucide-icon name="sparkles" class="lucide-icon" [size]="20" color="#000000"></lucide-icon>
        </div>
    </div>
</div>