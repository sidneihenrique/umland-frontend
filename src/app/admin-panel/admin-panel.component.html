<div class="admin-panel">
  <div class="admin-layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>ğŸ› ï¸ Painel do Administrador</h1>
      </div>

      <!-- Vertical tabs navigation -->
      <nav class="tabs-navigation-vertical">
        <button
          *ngFor="let tab of tabs"
          class="tab-button-vertical"
          [class.active]="activeTab === tab.id"
          (click)="setActiveTab(tab.id)">
          <span class="tab-icon">{{ tab.icon }}</span>
          <span class="tab-name">{{ tab.name }}</span>
        </button>
      </nav>
    </aside>

    <main class="main-content">
      <!-- âœ… MODIFICAR: Envolver cada seÃ§Ã£o com *ngIf -->
    <!-- Avatar Tab -->
    <div *ngIf="activeTab === 'avatars'" class="card">
    <div class="card-header">
      <h2>ğŸ‘¤ Cadastro de Avatar</h2>
    </div>
    <div class="card-content">
      <form (ngSubmit)="onSubmitAvatar()" #avatarForm="ngForm" class="form">
        <div class="file-input-container">
          <label class="file-label">
            <input type="file" name="avatarImage" accept="image/*" (change)="onAvatarImageChange($event)" />
            <span class="file-button">ğŸ“· Escolher Imagem</span>
          </label>
          <div *ngIf="avatarPreview" class="image-preview">
            <img [src]="avatarPreview" alt="Preview" />
          </div>
        </div>
        <button type="submit" class="btn-primary" [disabled]="!avatarImageFile && !editAvatarId">
          {{ editAvatarId ? 'âœï¸ Atualizar Avatar' : 'ğŸ’¾ Salvar Avatar' }}
        </button>
        <button type="button" (click)="resetAvatarForm()" class="btn-secondary">ğŸ”„ Limpar</button>
      </form>
      
      <!-- âœ… SeÃ§Ã£o Avatar - URLs corrigidas -->
      <div class="items-grid">
        <div *ngFor="let a of avatars; let i = index" class="item-card">
          <div class="item-image">
            <img [src]="getAvatarImageUrl(a.filePath || '')" alt="Avatar" />
          </div>
          <div class="item-actions">
            <button class="btn-edit" (click)="editAvatar(i)">âœï¸</button>
            <button class="btn-delete" (click)="deleteAvatar(i)">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>
    </div>
    </div>

  <!-- Character Tab -->
  <div *ngIf="activeTab === 'characters'" class="card">
    <div class="card-header">
      <h2>ğŸ­ Cadastro de Personagem</h2>
    </div>
    <div class="card-content">
      <form (ngSubmit)="onSubmitCharacter()" #characterForm="ngForm" class="form">
        <div class="form-group">
          <label>Nome do Personagem:</label>
          <input type="text" name="name" [(ngModel)]="character.name" required class="form-input" />
        </div>
        <div class="file-input-container">
          <label class="file-label">
            <input type="file" name="characterImage" accept="image/*" (change)="onCharacterImageChange($event)" />
            <span class="file-button">ğŸ“· Escolher Imagem</span>
          </label>
          <div *ngIf="characterPreview" class="image-preview">
            <img [src]="characterPreview" alt="Preview" />
          </div>
        </div>
        <button type="submit" class="btn-primary" [disabled]="!character.name || (!characterImageFile && !editCharacterId)">
          {{ editCharacterId ? 'âœï¸ Atualizar Personagem' : 'ğŸ’¾ Salvar Personagem' }}
        </button>
        <button type="button" (click)="resetCharacterForm()" class="btn-secondary">ğŸ”„ Limpar</button>
      </form>
      
      <!-- âœ… SeÃ§Ã£o Character - URLs corrigidas -->
      <div class="items-grid">
        <div *ngFor="let c of characters; let i = index" class="item-card">
          <div class="item-image">
            <img [src]="getCharacterImageUrl(c.filePath)" [alt]="c.name" />
          </div>
          <div class="item-info">
            <h4>{{ c.name }}</h4>
          </div>
          <div class="item-actions">
            <button class="btn-edit" (click)="editCharacter(i)">âœï¸</button>
            <button class="btn-delete" (click)="deleteCharacter(i)">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Phase Tab -->
    <div *ngIf="activeTab === 'phases'" class="card">
    <div class="card-header">
      <h2>ğŸ® Cadastro de Fase</h2>
    </div>
    <div class="card-content">
      <form (ngSubmit)="onSubmitPhase()" #phaseForm="ngForm" class="form">
        
        <div class="form-group">
          <label>NÃ³ do Fluxo:</label>
          <select name="nodeType" [(ngModel)]="phase.nodeType" required class="form-select">
            <option value="ACTIVITY">ğŸƒ Atividade</option>
            <option value="DECISION">âš–ï¸ DecisÃ£o</option>
          </select>
        </div>

        <div class="form-group">
          <label>TÃ­tulo da Fase:</label>
          <input type="text" name="title" [(ngModel)]="phase.title" required class="form-input" />
        </div>
        
        <div class="form-group">
          <label>DescriÃ§Ã£o:</label>
          <textarea name="description" [(ngModel)]="phase.description" class="form-textarea" rows="3"></textarea>
        </div>

        <!-- Novo: Tipo de Diagrama -->
        <div class="form-group" *ngIf="phase?.nodeType !== 'DECISION'">
            <label>Tipo de Diagrama:</label>
            <select name="diagramType" [(ngModel)]="phase.diagramType" class="form-select">
              <option [ngValue]="'CLASS'">Class</option>
              <option [ngValue]="'USE_CASE'">Use Case</option>
            </select>
        </div>

        <div class="form-row" *ngIf="phase?.nodeType !== 'DECISION'">
          <div class="form-group">
            <label>Tipo da Fase:</label>
            <select name="type" [(ngModel)]="phase.type" required class="form-select">
              <option value="BUILD">ğŸ”¨ BUILD</option>
              <option value="FIX">ğŸ”§ FIX</option>
              <option value="COMPLETE">âœ… COMPLETE</option>
            </select>
          </div>
          <div class="form-group">
            <label>Modo:</label>
            <select name="mode" [(ngModel)]="phase.mode" required class="form-select">
              <option value="BASIC">ğŸŸ¢ BÃSICO</option>
              <option value="INTERMEDIATE">ğŸŸ¡ INTERMEDIÃRIO</option>
              <option value="ADVANCED">ğŸ”´ AVANÃ‡ADO</option>
            </select>
          </div>
        </div>
        
        <div class="form-group" *ngIf="phase?.nodeType !== 'DECISION'">
          <label>Tempo MÃ¡ximo (segundos):</label>
          <input type="number" name="maxTime" [(ngModel)]="phase.maxTime" required class="form-input" min="60" />
        </div>

        <div class="form-group">
          <label>Personagem:</label>
          <select name="characterId" [(ngModel)]="selectedCharacterId" required class="form-select">
            <option value="0">Selecione um personagem</option>
            <option *ngFor="let char of characters" [value]="char.id">
              ğŸ­ {{ char.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>GameMap:</label>
          <select name="gameMapId" [(ngModel)]="selectedGameMapId" required class="form-select">
            <option value="0">Selecione um GameMap</option>
            <option *ngFor="let gameMap of gameMaps" [value]="gameMap.id">
              ğŸ—ºï¸ {{ gameMap.title }}
            </option>
          </select>
        </div>

        <!-- âœ… NEW: SeÃ§Ã£o de Falas do Personagem -->
        <div class="form-group" *ngIf="phase?.nodeType !== 'DECISION'">
          <label>ğŸ’¬ Falas do Personagem:</label>
          
          <!-- Campo para adicionar/editar fala -->
          <div class="dialogue-input-container">
            <div class="dialogue-input-row">
              <textarea 
                [(ngModel)]="newDialogue" 
                name="newDialogue"
                placeholder="Digite uma fala do personagem..."
                class="form-textarea dialogue-input"
                rows="2"></textarea>
              <div class="dialogue-buttons">
                <button type="button" 
                        (click)="addDialogue()" 
                        class="btn-dialogue add"
                        [disabled]="!newDialogue.trim()">
                  {{ editingDialogueIndex >= 0 ? 'âœï¸' : 'â•' }}
                </button>
                <button type="button" 
                        (click)="cancelEditDialogue()" 
                        class="btn-dialogue cancel"
                        *ngIf="editingDialogueIndex >= 0">
                  âŒ
                </button>
              </div>
            </div>
          </div>

          <!-- Lista de falas adicionadas -->
          <div class="dialogues-list" *ngIf="phase.characterDialogues.length > 0 && phase?.nodeType !== 'DECISION'">
            <div *ngFor="let dialogue of phase.characterDialogues; let i = index" class="dialogue-item" [class.editing]="editingDialogueIndex === i">
              
              <div class="dialogue-number">{{ i + 1 }}</div>
              
              <div class="dialogue-content">
                <p>{{ dialogue }}</p>
              </div>
              
              <div class="dialogue-actions">
                <!-- Mover para cima -->
                <button type="button" 
                        (click)="moveDialogueUp(i)" 
                        class="btn-dialogue move"
                        [disabled]="i === 0"
                        title="Mover para cima">
                  â¬†ï¸
                </button>
                
                <!-- Mover para baixo -->
                <button type="button" 
                        (click)="moveDialogueDown(i)" 
                        class="btn-dialogue move"
                        [disabled]="i === phase.characterDialogues.length - 1"
                        title="Mover para baixo">
                  â¬‡ï¸
                </button>
                
                <!-- Editar -->
                <button type="button" 
                        (click)="editDialogue(i)" 
                        class="btn-dialogue edit"
                        title="Editar fala">
                  âœï¸
                </button>
                
                <!-- Remover -->
                <button type="button" 
                        (click)="removeDialogue(i)" 
                        class="btn-dialogue remove"
                        title="Remover fala">
                  ğŸ—‘ï¸
                </button>
              </div>
            </div>
          </div>

          <!-- Contador de falas -->
          <div class="dialogues-counter" *ngIf="phase.characterDialogues.length > 0 && phase?.nodeType !== 'DECISION'">
            <small>{{ phase.characterDialogues.length }} fala(s) adicionada(s)</small>
          </div>
        </div>

        <!-- âœ… EDITOR 1: Para diagrama inicial -->
        <div class="form-group" *ngIf="phase?.nodeType !== 'DECISION'">
          <label>Diagrama Inicial:</label>
          
          <div class="diagram-editor-section">
            <div class="diagram-controls">
              <button type="button" 
                      (click)="saveDiagramToPhase()" 
                      class="btn-diagram save">
                ğŸ’¾ Salvar Diagrama Inicial
              </button>
              
              <button type="button" 
                      (click)="clearDiagram()" 
                      class="btn-diagram clear">
                ğŸ—‘ï¸ Limpar Diagrama Inicial
              </button>
            </div>
            
            <!-- âœ… PRIMEIRO EDITOR: Diagrama inicial -->
            <diagram-editor #diagramEditorInitial [diagramType]="phase.diagramType || 'USE_CASE'"></diagram-editor>
          </div>
        </div>

        <!-- âœ… EDITOR 2: Para diagramas corretos -->
        <div class="form-group" *ngIf="phase?.nodeType !== 'DECISION'">
          <label>ğŸ“Š Diagramas Corretos:</label>
          
          <div class="diagram-editor-section">
            <div class="diagram-controls">
              <button type="button" 
                      (click)="saveCorrectDiagram()" 
                      class="btn-diagram save">
                {{ editingCorrectDiagramIndex >= 0 ? 'âœï¸ Atualizar Diagrama' : 'â• Adicionar como Correto' }}
              </button>
              
              <button type="button" 
                      (click)="cancelEditCorrectDiagram()" 
                      class="btn-diagram cancel"
                      *ngIf="editingCorrectDiagramIndex >= 0">
                âŒ Cancelar EdiÃ§Ã£o
              </button>
              
              <button type="button" 
                      (click)="clearCorrectDiagram()" 
                      class="btn-diagram clear">
                ğŸ—‘ï¸ Limpar Editor
              </button>
            </div>
            
            <!-- Indicador de modo de ediÃ§Ã£o -->
            <div class="editing-indicator" *ngIf="editingCorrectDiagramIndex >= 0">
              <span class="indicator-text">
                âœï¸ Editando diagrama correto #{{ editingCorrectDiagramIndex + 1 }}
              </span>
            </div>
            
            <!-- âœ… SEGUNDO EDITOR: Diagramas corretos -->
            <diagram-editor #diagramEditorCorrect [diagramType]="phase.diagramType || 'USE_CASE'"></diagram-editor>
          </div>
          
          <!-- âœ… Lista de diagramas corretos cadastrados (continua igual) -->
          <div class="correct-diagrams-list" *ngIf="phase.correctDiagrams.length > 0">
            <h4>ğŸ“‹ Diagramas Corretos Cadastrados:</h4>
            
            <div *ngFor="let diagram of phase.correctDiagrams; let i = index" 
                 class="correct-diagram-item" 
                 [class.editing]="editingCorrectDiagramIndex === i">
              
              <div class="diagram-number">{{ i + 1 }}</div>
              
              <div class="diagram-info">
                <div class="diagram-preview">
                  {{ getCorrectDiagramPreview(diagram) }}
                </div>
              </div>
              
              <div class="diagram-actions">
                <!-- Mover para cima -->
                <button type="button" 
                        (click)="moveCorrectDiagramUp(i)" 
                        class="btn-diagram-action move"
                        [disabled]="i === 0"
                        title="Mover para cima">
                  â¬†ï¸
                </button>
                
                <!-- Mover para baixo -->
                <button type="button" 
                        (click)="moveCorrectDiagramDown(i)" 
                        class="btn-diagram-action move"
                        [disabled]="i === phase.correctDiagrams.length - 1"
                        title="Mover para baixo">
                  â¬‡ï¸
                </button>
                
                <!-- Editar -->
                <button type="button" 
                        (click)="editCorrectDiagram(i)" 
                        class="btn-diagram-action edit"
                        title="Editar diagrama">
                  âœï¸
                </button>
                
                <!-- Remover -->
                <button type="button" 
                        (click)="removeCorrectDiagram(i)" 
                        class="btn-diagram-action remove"
                        title="Remover diagrama">
                  ğŸ—‘ï¸
                </button>
              </div>
            </div>
          </div>

          <!-- Contador de diagramas corretos -->
          <div class="correct-diagrams-counter" *ngIf="phase.correctDiagrams.length > 0">
            <small>{{ phase.correctDiagrams.length }} diagrama(s) correto(s) cadastrado(s)</small>
          </div>
        </div>

        <button type="submit" class="btn-primary" 
                [disabled]="!phase.title || !selectedCharacterId || !selectedGameMapId">
          {{ editPhaseId ? 'âœï¸ Atualizar Fase' : 'ğŸ’¾ Salvar Fase' }}
        </button>
        <button type="button" (click)="resetPhaseForm()" class="btn-secondary">ğŸ”„ Limpar</button>
      </form>
      
      
      <div class="phases-list">
        <div *ngFor="let phase of phases; let i = index" class="phase-card expanded">
          <div class="phase-header">
            <div class="phase-badges">
              <span class="badge type-{{ phase.type.toLowerCase() }}">{{ phase.type }}</span>
              <span class="badge mode-{{ (phase.mode || 'basic').toLowerCase() }}">{{ phase.mode || 'BASIC' }}</span>
            </div>
            <h3>{{ phase.title }}</h3>
          </div>
          
          <div class="phase-details">
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">â±ï¸ Tempo:</span>
                <span class="detail-value">{{ formatTime(phase.maxTime) }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ğŸ­ Personagem:</span>
                <span class="detail-value">{{ phase?.character?.name || 'N/A' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ğŸ—ºï¸ GameMap:</span>
                <span class="detail-value">{{ phase?.gameMap?.title || 'N/A' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ğŸ“Š Diagrama:</span>
                <span class="detail-value">{{ phase?.diagramInitial ? 'âœ… Definido' : 'âŒ Vazio' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">âœ… Corretos:</span>
                <span class="detail-value">{{ phase?.correctDiagrams?.length || 0 }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">ğŸ’¬ DiÃ¡logos:</span>
                <span class="detail-value">{{ phase?.characterDialogues?.length || 0 }}</span>
              </div>
              <!-- Adicionar Tipo do NÃ³ -->
              <div class="detail-item">
                <span class="detail-label">ğŸ”— Tipo do NÃ³:</span>
                <span class="detail-value">{{ phase.nodeType === 'ACTIVITY' ? 'Atividade' : 'DecisÃ£o' }}</span>
              </div>
              <!-- Adicionar Fase Anterior -->
              <div class="detail-item">
                <span class="detail-label">â¬…ï¸ Fase Anterior:</span>
                <span class="detail-value">
                  {{ getPreviousPhaseTitle(phase.id || 0) || 'InÃ­cio do diagrama de atividades' }}
                </span>
              </div>
              <!-- Adicionar PrÃ³xima Fase -->
              <div class="detail-item">
                <span class="detail-label">â¡ï¸ PrÃ³xima Fase:</span>
                <span class="detail-value">
                  {{ getNextPhaseTitle(phase.id || 0) || 'Fim do diagrama de atividades' }}
                </span>
              </div>
            </div>
            <div *ngIf="phase.description" class="phase-description">
              <p>{{ phase.description }}</p>
            </div>
          </div>
          
          <div class="item-actions">
            <button class="btn-edit" (click)="editPhase(i)">âœï¸</button>
            <button class="btn-delete" (click)="deletePhase(i)">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- Phase Transitions Tab -->
    <div *ngIf="activeTab === 'phase-transitions'" class="card">
    <div class="card-header">
      <h2>ğŸ”— Cadastro e EdiÃ§Ã£o de TransiÃ§Ãµes</h2>
    </div>
    <div class="card-content">
      <!-- SeleÃ§Ã£o do GameMap -->
      <div class="form-group">
        <label>Selecione o GameMap:</label>
        <select class="form-select" [(ngModel)]="selectedGameMapId" (change)="loadPhaseTransitions()">
          <option value="0">Selecione um GameMap</option>
          <option *ngFor="let gameMap of gameMaps" [value]="gameMap.id">
            ğŸ—ºï¸ {{ gameMap.title }}
          </option>
        </select>
      </div>

      <!-- Lista de transiÃ§Ãµes -->
      <div class="form-group" *ngIf="selectedGameMapId > 0" style="margin-top: 20px;">
        <button type="button" class="btn-primary" (click)="addTransitionRow()">â• Adicionar TransiÃ§Ã£o</button>
      </div>

      <div class="items-grid transitions-list" *ngIf="phaseTransitions.length > 0">
        <div class="item-card transition-card" *ngFor="let phaseTransition of phaseTransitions; let i = index;">
          <div class="transition-row">
            <div class="form-group">
              <label>Origem:</label>
              <select class="form-select" [(ngModel)]="phaseTransition.fromPhaseId" name="fromPhase_{{i}}">
                <option [ngValue]="0">Selecione uma fase</option>
                <option *ngFor="let ph of availablePhases" [ngValue]="ph.id" [disabled]="ph.id === phaseTransition.toPhaseId">
                  ğŸ® {{ ph.title }}
                </option>
              </select>
            </div>
            <div class="form-group">
              <label>Destino:</label>
              <select class="form-select" [(ngModel)]="phaseTransition.toPhaseId" name="toPhase_{{i}}">
                <option [ngValue]="0">Selecione uma fase</option>
                <option *ngFor="let ph of availablePhases" [ngValue]="ph.id" [disabled]="ph.id === phaseTransition.fromPhaseId">
                  ğŸ® {{ ph.title }}
                </option>
              </select>
            </div>
            <div class="form-group" *ngIf="isDecisionPhase(phaseTransition.fromPhaseId)">
              <label>Texto da opÃ§Ã£o:</label>
              <input type="text" class="form-input" [(ngModel)]="phaseTransition.optionText" name="optText_{{i}}" placeholder="Ex.: Escolher caminho A" />
            </div>
          </div>
          <div class="item-actions transition-card-actions">
            <button type="button" class="btn-delete" (click)="removeTransitionRow(i)" title="Remover">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>

      <div class="transition-actions" *ngIf="phaseTransitions.length > 0">
        <button type="button" class="btn-primary" (click)="savePhaseTransitions()">ğŸ’¾ Salvar TransiÃ§Ãµes</button>
      </div>
    </div>
    </div>
   

    <!-- Tip Tab -->
    <div *ngIf="activeTab === 'tips'" class="card">
    <div class="card-header">
      <h2>ğŸ’¡ Cadastro de Dicas</h2>
    </div>
    <div class="card-content">
      <form (ngSubmit)="onSubmitTip()" #tipForm="ngForm" class="form">
        <div class="form-group">
          <label>Dica:</label>
          <textarea name="tip" [(ngModel)]="tip.tip" required class="form-textarea" 
                    placeholder="Digite aqui a dica para os jogadores..."></textarea>
        </div>
        <button type="submit" class="btn-primary" [disabled]="!tip.tip || !tip.tip.trim()">
          {{ editTipId ? 'âœï¸ Atualizar Dica' : 'ğŸ’¾ Salvar Dica' }}
        </button>
        <button type="button" (click)="resetTipForm()" class="btn-secondary">ğŸ”„ Limpar</button>
      </form>
      
      <div class="tips-list">
        <div *ngFor="let t of tips; let i = index" class="tip-card">
          <div class="tip-icon">ğŸ’¡</div>
          <div class="tip-content">
            <p>{{ t.tip }}</p>
            <small class="tip-id">ID: {{ t.id }}</small>
          </div>
          <div class="item-actions">
            <button class="btn-edit" (click)="editTip(i)">âœï¸</button>
            <button class="btn-delete" (click)="deleteTip(i)">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- GameMap Tab -->
    <div *ngIf="activeTab === 'gamemaps'" class="card">
    <div class="card-header">
      <h2>ğŸ—ºï¸ Cadastro de GameMap</h2>
    </div>
    <div class="card-content">
      <form (ngSubmit)="onSubmitGameMap()" #gameMapForm="ngForm" class="form">
        <div class="form-group">
          <label>TÃ­tulo do GameMap:</label>
          <input 
            type="text" 
            name="title" 
            [(ngModel)]="gameMap.title" 
            required 
            class="form-input"
            placeholder="Digite o nome do GameMap..." 
          />
        </div>

        <div class="form-group" *ngIf="editGameMapId">
          <label>ğŸ“Š InformaÃ§Ãµes:</label>
          <div class="gamemap-info">
            <div class="info-item">
              <strong>ğŸ‘¥ UsuÃ¡rios:</strong> {{ gameMap.users?.length || 0 }}
            </div>
            <div class="info-item">
              <strong>ğŸ® Fases:</strong> {{ gameMap.phases?.length || 0 }}
            </div>
            <div class="info-item" *ngIf="gameMap.createdAt">
              <strong>ğŸ“… Criado em:</strong> {{ formatDate(gameMap.createdAt) }}
            </div>
            <div class="info-item" *ngIf="gameMap.createdByUser">
              <strong>ğŸ‘¤ Criado por:</strong> {{ gameMap.createdByUser.name }}
            </div>
          </div>
        </div>

        <button 
          type="submit" 
          class="btn-primary" 
          [disabled]="!gameMap.title || !gameMap.title.trim()">
          {{ editGameMapId ? 'âœï¸ Atualizar GameMap' : 'ğŸ’¾ Salvar GameMap' }}
        </button>
        <button 
          type="button" 
          (click)="resetGameMapForm()" 
          class="btn-secondary">
          ğŸ”„ Limpar
        </button>
      </form>
      
      <!-- Lista de GameMaps -->
      <div class="gamemaps-list">
        <div *ngFor="let gm of gameMaps; let i = index" class="gamemap-card">
          <div class="gamemap-header">
            <div class="gamemap-title">
              <h4>ğŸ—ºï¸ {{ gm.title }}</h4>
              <span class="gamemap-id">ID: {{ gm.id }}</span>
            </div>
            <div class="gamemap-stats">
              <span class="stat-badge users">ğŸ‘¥ {{ gm.users?.length || 0 }}</span>
              <span class="stat-badge phases">ğŸ® {{ gm.phases?.length || 0 }}</span>
            </div>
          </div>
          
          <div class="gamemap-details">
            <div class="detail-row">
              <div class="detail-item" *ngIf="gm.createdAt">
                <span class="detail-label">ğŸ“… Criado:</span>
                <span class="detail-value">{{ formatDate(gm.createdAt) }}</span>
              </div>
              <div class="detail-item" *ngIf="gm.createdByUser">
                <span class="detail-label">ğŸ‘¤ Por:</span>
                <span class="detail-value">{{ gm.createdByUser.name }}</span>
              </div>
            </div>
          </div>
          
          <div class="item-actions">
            <button class="btn-edit" (click)="editGameMap(i)" title="Editar GameMap">
              âœï¸
            </button>
            <button class="btn-delete" (click)="deleteGameMap(i)" title="Remover GameMap">
              ğŸ—‘ï¸
            </button>
          </div>
        </div>
        
        <!-- Mensagem quando nÃ£o hÃ¡ GameMaps -->
        <div *ngIf="gameMaps.length === 0" class="empty-state">
          <div class="empty-icon">ğŸ—ºï¸</div>
          <h3>Nenhum GameMap cadastrado</h3>
          <p>Crie seu primeiro GameMap para comeÃ§ar a organizar as fases do jogo.</p>
        </div>
      </div>
    </div>
      </div>
    </main>
  </div>
</div>
